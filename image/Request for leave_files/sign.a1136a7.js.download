!function(n){var i={};function r(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=496)}([function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}},function(t,e,n){!function(e){t.exports=e.jQuery=n(86)}.call(this,n(32))},function(e,t,n){"use strict";function i(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return m(e,Error)}}function r(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function o(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function a(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return"undefined"!=typeof Event&&m(e,Event)}function d(e){return"undefined"!=typeof Element&&m(e,Element)}function p(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function h(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function f(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function m(e,t){try{return e instanceof t}catch(e){return!1}}n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"k",function(){return s}),n.d(t,"i",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"m",function(){return h}),n.d(t,"l",function(){return f}),n.d(t,"g",function(){return m})},function(e,h,f){"use strict";!function(e){f.d(h,"e",function(){return o}),f.d(h,"i",function(){return i}),f.d(h,"h",function(){return r}),f.d(h,"d",function(){return a}),f.d(h,"c",function(){return s}),f.d(h,"b",function(){return l}),f.d(h,"a",function(){return c}),f.d(h,"f",function(){return u}),f.d(h,"g",function(){return p});var t=f(39),n=(f(23),{});function o(){return Object(t.b)()?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n}function i(){var e,t=o(),t=t.crypto||t.msCrypto;return void 0!==t&&t.getRandomValues?(e=new Uint16Array(8),t.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768,(t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t})(e[0])+t(e[1])+t(e[2])+t(e[3])+t(e[4])+t(e[5])+t(e[6])+t(e[7])):"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function r(e){var t,n;return(e=e&&e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/))?(t=e[6]||"",n=e[8]||"",{host:e[4],path:e[5],protocol:e[2],relative:e[5]+t+n}):{}}function a(e){var t;return e.message||(e.exception&&e.exception.values&&e.exception.values[0]?(t=e.exception.values[0]).type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>":e.event_id||"<unknown>")}function s(e){var t,n,i,r=o();return"console"in r?(t=r.console,n={},["debug","info","warn","error","log","assert"].forEach(function(e){e in r.console&&t[e].__sentry_original__&&(n[e]=t[e],t[e]=t[e].__sentry_original__)}),i=e(),Object.keys(n).forEach(function(e){t[e]=n[e]}),i):e()}function l(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function c(t,n){void 0===n&&(n={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(n).forEach(function(e){t.exception.values[0].mechanism[e]=n[e]})}catch(e){}}function u(){try{return document.location.href}catch(e){return""}}var d=6e4;function p(e,t){var n;return t?(n=parseInt(""+t,10),isNaN(n)?(t=Date.parse(""+t),isNaN(t)?d:t-e):1e3*n):d}}.call(this,f(32))},,function(e,v,y){"use strict";!function(n){y.d(v,"c",function(){return e}),y.d(v,"f",function(){return t}),y.d(v,"e",function(){return s}),y.d(v,"d",function(){return f}),y.d(v,"b",function(){return m}),y.d(v,"a",function(){return g});var l=y(0),a=y(40),c=y(2),u=y(71),i=y(20),o=y(23);function e(e,t,n){if(t in e){var i=e[t],n=n(i);if("function"==typeof n)try{n.prototype=n.prototype||{},Object.defineProperties(n,{__sentry_original__:{enumerable:!1,value:i}})}catch(e){}e[t]=n}}function t(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function d(e){if(Object(c.d)(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}if(Object(c.f)(e)){var i,r=e,o={};o.type=r.type;try{o.target=Object(c.c)(r.target)?Object(a.a)(r.target):Object.prototype.toString.call(r.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=Object(c.c)(r.currentTarget)?Object(a.a)(r.currentTarget):Object.prototype.toString.call(r.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(i in"undefined"!=typeof CustomEvent&&Object(c.g)(e,CustomEvent)&&(o.detail=r.detail),r)Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=r);return o}return e}function r(e){return e=JSON.stringify(e),~-encodeURI(e).split(/%..|./).length}function s(e,t,n){void 0===n&&(n=102400);var i=f(e,t=void 0===t?3:t);return r(i)>n?s(e,t-1,n):i}function p(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==n&&e===n?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":Object(c.l)(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+Object(i.a)(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e}function h(e,t,n,i){if(void 0===n&&(n=1/0),void 0===i&&(i=new u.a),0===n)return o=t,r=Object.prototype.toString.call(o),"string"==typeof o?o:"[object Object]"===r?"[Object]":"[object Array]"===r?"[Array]":(o=p(o),Object(c.i)(o)?o:r);var r;if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var o=p(t,e);if(Object(c.i)(o))return o;var a,s=d(t),l=Array.isArray(t)?[]:{};if(i.memoize(t))return"[Circular ~]";for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(l[a]=h(a,s[a],n-1,i));return i.unmemoize(t),l}function f(e,n){try{return JSON.parse(JSON.stringify(e,function(e,t){return h(e,t,n)}))}catch(e){return"**non-serializable**"}}function m(e,t){void 0===t&&(t=40);var n=Object.keys(d(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Object(o.d)(n[0],t);for(var i=n.length;0<i;i--){var r=n.slice(0,i).join(", ");if(!(r.length>t))return i===n.length?r:Object(o.d)(r,t)}return""}function g(e){var t,n;if(Object(c.h)(e)){var i=e,r={};try{for(var o=Object(l.f)(Object.keys(i)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==i[s]&&(r[s]=g(i[s]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return Array.isArray(e)?e.map(g):e}}.call(this,y(32))},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return b});var s=n(0),l=n(3),c=n(107),r=n(12),i=n(39),o=n(36),a=n(80),u=n(5),d=(p.prototype.update=function(e){(e=void 0===e?{}:e).user&&(e.user.ip_address&&(this.ipAddress=e.user.ip_address),e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Date.now(),e.sid&&(this.sid=32===e.sid.length?e.sid:Object(l.i)()),e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),"number"==typeof e.duration?this.duration=e.duration:this.duration=this.timestamp-this.started,e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),e.ipAddress&&(this.ipAddress=e.ipAddress),e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},p.prototype.close=function(e){e?this.update({status:e}):this.status===a.a.Ok?this.update({status:a.a.Exited}):this.update()},p.prototype.toJSON=function(){return Object(u.a)({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Object(u.a)({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},p);function p(e){this.errors=0,this.sid=Object(l.i)(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=a.a.Ok,e&&this.update(e)}var h=3,f=(m.prototype.isOlderThan=function(e){return this._version<e},m.prototype.bindClient=function(e){(this.getStackTop().client=e)&&e.setupIntegrations&&e.setupIntegrations()},m.prototype.pushScope=function(){var e=o.a.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},m.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},m.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},m.prototype.getClient=function(){return this.getStackTop().client},m.prototype.getScope=function(){return this.getStackTop().scope},m.prototype.getStack=function(){return this._stack},m.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},m.prototype.captureException=function(e,t){var n=this._lastEventId=Object(l.i)(),i=t;if(!t){t=void 0;try{throw new Error("Sentry syntheticException")}catch(e){t=e}i={originalException:e,syntheticException:t}}return this._invokeClient("captureException",e,Object(s.a)(Object(s.a)({},i),{event_id:n})),n},m.prototype.captureMessage=function(e,t,n){var i=this._lastEventId=Object(l.i)(),r=n;if(!n){n=void 0;try{throw new Error(e)}catch(e){n=e}r={originalException:e,syntheticException:n}}return this._invokeClient("captureMessage",e,t,Object(s.a)(Object(s.a)({},r),{event_id:i})),i},m.prototype.captureEvent=function(e,t){var n=this._lastEventId=Object(l.i)();return this._invokeClient("captureEvent",e,Object(s.a)(Object(s.a)({},t),{event_id:n})),n},m.prototype.lastEventId=function(){return this._lastEventId},m.prototype.addBreadcrumb=function(e,t){var n,i,r,o=this.getStackTop(),a=o.scope,o=o.client;a&&o&&(r=(o=o.getOptions&&o.getOptions()||{}).beforeBreadcrumb,n=void 0===r?null:r,(o=void 0===(r=o.maxBreadcrumbs)?100:r)<=0||(r=Object(c.a)(),i=Object(s.a)({timestamp:r},e),null!==(r=n?Object(l.c)(function(){return n(i,t)}):i)&&a.addBreadcrumb(r,Math.min(o,100))))},m.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},m.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},m.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},m.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},m.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},m.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},m.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,t=t.client;n&&t&&e(n)},m.prototype.run=function(e){var t=v(this);try{e(this)}finally{v(t)}},m.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return r.a.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},m.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},m.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},m.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},m.prototype.startSession=function(e){this.endSession();var t=this.getStackTop(),n=t.scope,t=t.client,t=t&&t.getOptions()||{},i=t.release,t=t.environment,i=new d(Object(s.a)(Object(s.a)({release:i,environment:t},n&&{user:n.getUser()}),e));return n&&n.setSession(i),i},m.prototype.endSession=function(){var e,t=this.getStackTop(),n=t.scope,t=t.client;n&&(e=n.getSession&&n.getSession())&&(e.close(),t&&t.captureSession&&t.captureSession(e),n.setSession())},m.prototype._invokeClient=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.getStackTop(),r=i.scope,i=i.client;i&&i[e]&&i[e].apply(i,Object(s.e)(t,[r]))},m.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=g().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);r.a.warn("Extension method "+e+" couldn't be found, doing nothing.")},m);function m(e,t,n){void 0===t&&(t=new o.a),this._version=n=void 0===n?h:n,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}function g(){var e=Object(l.e)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function v(e){var t=g(),n=b(t);return w(t,e),n}function y(){var t=g();if(_(t)&&!b(t).isOlderThan(h)||w(t,new f),!Object(i.b)())return b(t);try{var e,n=function(){var e=g().__SENTRY__;return e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active}();return n?(_(n)&&!b(n).isOlderThan(h)||(e=b(t).getStackTop(),w(n,new f(e.client,o.a.clone(e.scope)))),b(n)):b(t)}catch(e){return b(t)}}function _(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub}function b(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new f),e.__SENTRY__.hub}function w(e,t){e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IloveEvent=void 0,t.IloveEvent=function(e,t){void 0===t&&(t=null),this.name=e,this.detail=t}},function(e,a,s){"use strict";!function(n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=(Object.defineProperty(a,"__esModule",{value:!0}),a.Lang=void 0,e(s(88)));function o(){}o.t=function(e,t){var n="iloveLang";return t&&t.source&&(n=t.source),window[n]&&window[n][e]&&(e=window[n][e]),e=this.tr(e,t)},o.tr=function(n,i){return null!=i&&Object.keys(i).forEach(function(e){var t=i[e];n=(n=n.replace("${"+e+"}",t)).replace("{"+e+"}",t)}),n},o.w=function(e,t){n("."+(e=void 0===e?"translate":e)).each(function(){var e=n(this).html();n(this).html(o.t(e,t))}),n("#"+e).each(function(){var e=n(this).html();n(this).html(o.t(e,t))})},o.fontsForWritingSystem=function(e){switch(e){case"latin":return["arial","verdana","courier","comic","times-new-roman","impact","arial-unicode-ms"];case"indic":return["lohit-marathi","lohit-devanagari","arial-unicode-ms"];default:return["arial-unicode-ms"]}},o.getFontsInfo=function(){var e=window.fonts;if(e)return e;throw"[Lang Service] You have to load the fonts information from the backend to use this method"},o.loadAllFonts=function(){for(var e in window.fonts)window.fonts.hasOwnProperty(e)&&"arial"!=e&&this.loadFont(e)},o.loadFont=function(e){e in this.loadedFonts||(t.lazyloadCss("/font/"+e+".css"),this.loadedFonts[e]=!0)},o.hasHindiCharacters=function(e){return 0<e.split("").filter(function(e){e=e.charCodeAt();return 2309<=e&&e<=2361}).length},o.hasJapanCharacters=function(e){return/[\u3000-\u303f]|[\u3040-\u309f]|[\u30a0-\u30ff]|[\uff00-\uff9f]|[\u4e00-\u9faf]|[\u3400-\u4dbf]/.test(e)},o.hasChineseCharacters=function(e){return/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]|[\uf900-\ufaff]/.test(e)},o.hasKoreanCharacters=function(e){return/[\uac00-\uafff]|[\ub000-\ubfff]/.test(e)},o.hasArabicCharacters=function(e){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(e)},o.hasGreekCharacters=function(e){return/[\u0370-\u03FF]|[\u1F00-\u1FFF]/.test(e)},o.hasCyrillicCharacters=function(e){return/[\u0400-\u04FF]|[\u0500-\u052F]/.test(e)},o.hasCommonLatinCharacters=function(e){return!1},o.keyCodeToWritingSystem=function(e){for(var t in this.writingSystemCharacterRanges)for(var n=this.writingSystemCharacterRanges[t],i=0;i<n.length;i++){var r=n[i],o=r[0],r=r[1];if(o<=e&&e<=r)return t}return"unknown"},o.detectWritingSystems=function(e){if(0===e.length)return[];for(var t={},n=0;n<e.length;n++)t[this.keyCodeToWritingSystem(e.charCodeAt(n))]=!0;return Object.keys(t)},o.loadedFonts={},o.FALLBACK_FONT_FAMILY="arial-unicode-ms",o.writingSystemCharacterRanges={latin:[[0,127],[128,255],[256,383],[384,591],[7680,7935],[9312,9471],[11360,11391],[42784,43007],[64256,64335],[65104,65135]],indic:[[2304,2431],[43232,43263]]},a.Lang=o}.call(this,s(1))},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"h",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"g",function(){return f}),n.d(t,"i",function(){return m}),n.d(t,"k",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"l",function(){return y});var r=n(0),o=n(6);function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Object(o.b)();if(i&&i[e])return i[e].apply(i,Object(r.e)(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function i(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return a("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function s(e,t){var n;try{throw new Error(e)}catch(e){n=e}var i="string"!=typeof t?{captureContext:t}:void 0;return a("captureMessage",e,"string"==typeof t?t:void 0,Object(r.a)({originalException:e,syntheticException:n},i))}function l(e){return a("captureEvent",e)}function c(e){a("configureScope",e)}function u(e){a("addBreadcrumb",e)}function d(e,t){a("setContext",e,t)}function p(e){a("setExtras",e)}function h(e){a("setTags",e)}function f(e,t){a("setExtra",e,t)}function m(e,t){a("setTag",e,t)}function g(e){a("setUser",e)}function v(e){a("withScope",e)}function y(e,t){return a("startTransaction",Object(r.a)({},e),t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i,r={},o=(n.r(r),n.d(r,"FunctionToString",function(){return o}),n.d(r,"InboundFilters",function(){return f}),a.prototype.setupOnce=function(){i=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return i.apply(n,e)}},a.id="FunctionToString",a);function a(){this.name=a.id}var s=n(0),l=n(36),c=n(6),u=n(12),d=n(3),p=n(23),h=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],f=(m.prototype.setupOnce=function(){Object(l.b)(function(e){var t=Object(c.b)();if(t){var n=t.getIntegration(m);if(n){t=t.getClient(),t=t?t.getOptions():{},t=n._mergeOptions(t);if(n._shouldDropEvent(e,t))return null}}return e})},m.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(u.a.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(d.d)(e)),!0):this._isIgnoredError(e,t)?(u.a.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(d.d)(e)),!0):this._isDeniedUrl(e,t)?(u.a.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Object(d.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(u.a.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Object(d.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},m.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},m.prototype._isIgnoredError=function(e,n){return!(!n.ignoreErrors||!n.ignoreErrors.length)&&this._getPossibleEventMessages(e).some(function(t){return n.ignoreErrors.some(function(e){return Object(p.a)(t,e)})})},m.prototype._isDeniedUrl=function(e,t){var n;return!(!t.denyUrls||!t.denyUrls.length||!(n=this._getEventFilterUrl(e)))&&t.denyUrls.some(function(e){return Object(p.a)(n,e)})},m.prototype._isAllowedUrl=function(e,t){var n;return!t.allowUrls||!t.allowUrls.length||!(n=this._getEventFilterUrl(e))||t.allowUrls.some(function(e){return Object(p.a)(n,e)})},m.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:Object(s.e)(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:Object(s.e)(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:Object(s.e)(this._options.ignoreErrors||[],e.ignoreErrors||[],h),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},m.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,i=void 0===n?"":n,r=e.value,o=void 0===r?"":r;return[""+o,i+": "+o]}catch(e){u.a.error("Cannot extract message for event "+Object(d.d)(t))}return[]},m.prototype._getEventFilterUrl=function(t){try{var e,n;return t.stacktrace?(e=t.stacktrace.frames)&&e[e.length-1].filename||null:t.exception&&(n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames)&&n[n.length-1].filename||null}catch(e){return u.a.error("Cannot extract url for event "+Object(d.d)(t)),null}},m.id="InboundFilters",m);function m(e){this._options=e=void 0===e?{}:e,this.name=m.id}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return d});var o=n(0),a=n(9),i=n(50),s=n(3),r=n(12),l=0;function c(){return 0<l}function u(t,i,r){if(void 0===i&&(i={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}function e(){var n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);var e=n.map(function(e){return u(e,i)});return t.handleEvent?t.handleEvent.apply(this,e):t.apply(this,e)}catch(t){throw l+=1,setTimeout(function(){--l}),Object(a.m)(function(e){e.addEventProcessor(function(e){e=Object(o.a)({},e);return i.mechanism&&(Object(s.b)(e,void 0,void 0),Object(s.a)(e,i.mechanism)),e.extra=Object(o.a)(Object(o.a)({},e.extra),{arguments:n}),e}),Object(a.c)(t)}),t}}try{for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}catch(e){}t.prototype=t.prototype||{},e.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:e}),Object.defineProperties(e,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(e,"name").configurable&&Object.defineProperty(e,"name",{get:function(){return t.name}})}catch(e){}return e}function d(e){var t;(e=void 0===e?{}:e).eventId?e.dsn?((t=document.createElement("script")).async=!0,t.src=new i.a(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)):r.a.error("Missing dsn option in showReportDialog call"):r.a.error("Missing eventId option in showReportDialog call")}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(3),r=Object(i.e)(),o="Sentry Logger ",t=(a.prototype.disable=function(){this._enabled=!1},a.prototype.enable=function(){this._enabled=!0},a.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(i.c)(function(){r.console.log(o+"[Log]: "+e.join(" "))})},a.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(i.c)(function(){r.console.warn(o+"[Warn]: "+e.join(" "))})},a.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(i.c)(function(){r.console.error(o+"[Error]: "+e.join(" "))})},a);function a(){this._enabled=!1}r.__SENTRY__=r.__SENTRY__||{};var s=r.__SENTRY__.logger||(r.__SENTRY__.logger=new t)},function(e,t,n){"use strict";n.r(t),n.d(t,"LogLevel",function(){return i}),n.d(t,"SessionStatus",function(){return o.a}),n.d(t,"Severity",function(){return a.a}),n.d(t,"Status",function(){return s.a}),n.d(t,"TransactionSamplingMethod",function(){return r}),(t=i=i||{})[t.None=0]="None",t[t.Error=1]="Error",t[t.Debug=2]="Debug",t[t.Verbose=3]="Verbose";var i,r,o=n(80),a=n(33),s=n(61);(t=r=r||{}).Explicit="explicitly_set",t.Sampler="client_sampler",t.Rate="client_rate",t.Inheritance="inheritance"},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i,r=n(2),o=((t=i=i||{}).PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED",a.resolve=function(t){return new a(function(e){e(t)})},a.reject=function(n){return new a(function(e,t){t(n)})},a.all=function(e){return new a(function(n,i){var r,o;Array.isArray(e)?0===e.length?n([]):(r=e.length,o=[],e.forEach(function(e,t){a.resolve(e).then(function(e){o[t]=e,0==--r&&n(o)}).then(null,i)})):i(new TypeError("Promise.all requires an array as input."))})},a.prototype.then=function(i,r){var e=this;return new a(function(t,n){e._attachHandler({done:!1,onfulfilled:function(e){if(i)try{t(i(e))}catch(e){n(e)}else t(e)},onrejected:function(e){if(r)try{t(r(e))}catch(e){n(e)}else n(e)}})})},a.prototype.catch=function(e){return this.then(function(e){return e},e)},a.prototype.finally=function(r){var o=this;return new a(function(e,t){var n,i;o.then(function(e){i=!1,n=e,r&&r()},function(e){i=!0,n=e,r&&r()}).then(function(){(i?t:e)(n)})})},a.prototype.toString=function(){return"[object SyncPromise]"},a);function a(e){var n=this;this._state=i.PENDING,this._handlers=[],this._resolve=function(e){n._setResult(i.RESOLVED,e)},this._reject=function(e){n._setResult(i.REJECTED,e)},this._setResult=function(e,t){n._state===i.PENDING&&(Object(r.m)(t)?t.then(n._resolve,n._reject):(n._state=e,n._value=t,n._executeHandlers()))},this._attachHandler=function(e){n._handlers=n._handlers.concat(e),n._executeHandlers()},this._executeHandlers=function(){var e;n._state!==i.PENDING&&(e=n._handlers.slice(),n._handlers=[],e.forEach(function(e){e.done||(n._state===i.RESOLVED&&e.onfulfilled&&e.onfulfilled(n._value),n._state===i.REJECTED&&e.onrejected&&e.onrejected(n._value),e.done=!0)}))};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}},function(e,n,t){"use strict";!function(r){var e=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},o=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},t=(Object.defineProperty(n,"__esModule",{value:!0}),n.UserModel=void 0,Object.defineProperty(a,"userType",{get:function(){return a.isPremium()?"premium":a.isUser()?"user":"guest"},enumerable:!1,configurable:!0}),a.isTeamManaged=function(){var e=window.userModel;return e&&null!=e.team_role&&"owner"!=e.team_role},a.hasSubscription=function(){var e=window.userModel;return"object"==typeof e&&null!=e&&null!=e.current_subscription},a.prototype.login=function(n){var i="//"+this.domain+"/"+this.loginUrl;return new Promise(function(t,e){r.post(i,n,function(e){window.ilovepdfConfig&&(window.ilovepdfConfig.fileLimits=e.user.limits,window.ilovepdfConfig.userToken=e.token),t(e)}).fail(e)})},a.prototype.register=function(n){var i="//"+this.domain+"/"+this.registerUrl;return new Promise(function(t,e){r.post(i,n,function(e){t(e)}).fail(e)})},a.prototype.sendResetPasswordEmail=function(n){var i="//"+this.domain+"/"+this.sendResetPasswordEmailUrl;return new Promise(function(t,e){r.post(i,n,function(e){t(e)}).fail(e)})},a.isLoggedIn=function(){return!!window.userModel},a.get=function(){return window.userModel},a.set=function(e){window.userModel=e},a.logout=function(){document.location.href=r(".logout").attr("href")},a.isUser=function(){var e=a.get();return"object"==typeof e&&null!=e},a.isPremium=function(){return a.isRealPremium()},a.isPremiumTemp=function(){return window.ilovepdfConfig&&"premium"==window.ilovepdfConfig.levelTemp},a.isTempPremium=function(){return a.isPremiumTemp()},a.isRealPremium=function(){var e=window.userModel;return"object"==typeof e&&null!=e&&e.premium},a.canDoTrial=function(){var e=window.userModel;return"object"==typeof e&&null!=e?e.can_trial:!!window.uct},a.refresh=function(r){return void 0===r&&(r=null),e(this,void 0,void 0,function(){var t,n,i;return o(this,function(e){switch(e.label){case 0:return[4,fetch(r?"/user/info/"+r:"/user/info")];case 1:return t=e.sent(),i=(n=JSON).parse,[4,t.json()];case 2:return t=i.apply(n,[e.sent()]),a.set(t.user),[2]}})})},a.removeAds=function(){var e=document.getElementsByClassName("add");e&&Array.from(e).forEach(function(e){e.remove()})},a.updateUser=function(e){window.userModel=e,window.ilovepdfConfig&&(window.ilovepdfConfig.user=e),1==a.isRealPremium()&&a.removeAds()},a.serviceToken=function(){var e=window.userModel;return e?e.token:null},a);function a(e){void 0===e&&(e={}),this.loginUrl="auth",this.registerUrl="signup",this.sendResetPasswordEmailUrl="login/forgetpassword",Object.assign(this,e);e="en-US"==window.lang?"":"/"+window.lang;this.domain=window.location.hostname+e}n.UserModel=t}.call(this,t(1))},function(e,t,n){"use strict";n.r(t),n.d(t,"Severity",function(){return i.a}),n.d(t,"Status",function(){return r.a}),n.d(t,"addGlobalEventProcessor",function(){return o.b}),n.d(t,"addBreadcrumb",function(){return a.a}),n.d(t,"captureException",function(){return a.c}),n.d(t,"captureEvent",function(){return a.b}),n.d(t,"captureMessage",function(){return a.d}),n.d(t,"configureScope",function(){return a.e}),n.d(t,"getHubFromCarrier",function(){return s.c}),n.d(t,"getCurrentHub",function(){return s.b}),n.d(t,"Hub",function(){return s.a}),n.d(t,"makeMain",function(){return s.d}),n.d(t,"Scope",function(){return o.a}),n.d(t,"startTransaction",function(){return a.l}),n.d(t,"setContext",function(){return a.f}),n.d(t,"setExtra",function(){return a.g}),n.d(t,"setExtras",function(){return a.h}),n.d(t,"setTag",function(){return a.i}),n.d(t,"setTags",function(){return a.j}),n.d(t,"setUser",function(){return a.k}),n.d(t,"withScope",function(){return a.m}),n.d(t,"BrowserClient",function(){return l.a}),n.d(t,"injectReportDialog",function(){return c.a}),n.d(t,"eventFromException",function(){return u.a}),n.d(t,"eventFromMessage",function(){return u.b}),n.d(t,"defaultIntegrations",function(){return d.b}),n.d(t,"forceLoad",function(){return d.d}),n.d(t,"init",function(){return d.e}),n.d(t,"lastEventId",function(){return d.f}),n.d(t,"onLoad",function(){return d.g}),n.d(t,"showReportDialog",function(){return d.h}),n.d(t,"flush",function(){return d.c}),n.d(t,"close",function(){return d.a}),n.d(t,"wrap",function(){return d.i}),n.d(t,"SDK_NAME",function(){return p.a}),n.d(t,"SDK_VERSION",function(){return p.b}),n.d(t,"Integrations",function(){return v}),n.d(t,"Transports",function(){return g});var t=n(0),i=n(33),r=n(61),o=n(36),a=n(9),s=n(6),l=n(44),c=n(11),u=n(22),d=n(19),p=n(27),h=n(10),f=n(3),m=n(43),g=n(49),n={},f=Object(f.e)(),v=(f.Sentry&&f.Sentry.Integrations&&(n=f.Sentry.Integrations),Object(t.a)(Object(t.a)(Object(t.a)({},n),h.a),m))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateBase=void 0;var o=n(8),i=n(25),a=n(7),s=n(37);function r(){var r=this;this.wasDomReadyExecutedBefore=!1,this.loadingElem=null,this.backdropElem=null,this.runTooltip=!0,this.showBackdrop=function(e,t,n){var i=r.appendBackdropElement(),e=(i.innerHTML="",e.classList.add("ilove-backdrop__content"),i.appendChild(e),i.querySelector(".ilove-backdrop__title")),t=(e.querySelector(".ilove-backdrop__title__text").innerHTML=null!=t?t:"",i.querySelector(".ilove-backdrop__subtitle"));t.querySelector(".ilove-backdrop__subtitle__text").innerHTML=null!=n?n:"",i.classList.add("ilove-backdrop--visible"),r.domRoot.style.overflow="hidden",e.addEventListener("click",function(){r._backdrop_click_callback1&&r._backdrop_click_callback1()}),t.addEventListener("click",function(){r._backdrop_click_callback2&&r._backdrop_click_callback2()})},this.setBackdropCallback=function(e,t){r._backdrop_click_callback1=e,r._backdrop_click_callback2=t},this.clearBackdrop=function(){var e;null!=(e=r.backdropElem)&&e.classList.remove("ilove-backdrop--visible"),r.domRoot.style.overflow="",r.setBackdropCallback(null,null)},this._onLayoutTemplateLoaded=function(){r.ctx._onDomReady(r.domRoot),r.dispatchEvent(new a.IloveEvent("unsetContentAbandonment")),!0===r.runTooltip&&s.Tooltip.init(),r.onDomReady(),r.wasDomReadyExecutedBefore=!0},this.showLoadingScreen=function(){r.appendLoadingElement().classList.add("wait--visible"),r.domRoot.style.overflow="hidden"},this.clearLoadingScreen=function(){var e;null!=(e=r.loadingElem)&&e.classList.remove("wait--visible"),r.domRoot.style.overflow=""},this.goToPreviousStateButtonIsVisible=function(){var e=r.domStateRoot.querySelector(".dialog__back");return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},this.t=function(e,t){if(r._t){if(e in r._t)return o.Lang.tr(r._t[e],t);throw"Key '"+e+"' not found"}var n=r.domRoot.querySelector("[data-state='"+r.name+"'] .text-translations");if(!n)throw"Text translations for state '"+r.name+"' not found";if("html"===n.dataset.format){var i=n.querySelector("[data-key="+e+"]");if(i)return i=i.innerHTML,o.Lang.tr(i,t);throw"Key '"+e+"' not found"}if(r._t=JSON.parse(n.textContent),"object"!=typeof r._t)throw"Translation object not found";return r.t(e,t)},this.eventEmitter=new i.ILoveEventEmitter}r.prototype.render=function(e,t){var n=this;void 0===t&&(t={}),this.domRoot=e,this.ctx.isInline?(this.showCurrentStateScreens(),this._onLayoutTemplateLoaded()):this.loadTemplateOn(this.LAYOUT_TEMPLATE_NAME,this.domRoot,t).then(function(){n.showLoadingScreen(),n.showCurrentStateScreens().then(n._onLayoutTemplateLoaded).catch(function(e){throw e})}).catch(function(e){throw"Problem loading template "+n.LAYOUT_TEMPLATE_NAME+": "+e})},r.prototype.reset=function(){},r.prototype.appendLoadingElement=function(){var e=this.domRoot;return this.loadingElem||(this.loadingElem=document.createElement("div"),this.loadingElem.classList.add("wait","wait--animated","wait--sm"),e.parentNode.appendChild(this.loadingElem)),this.loadingElem},r.prototype.appendBackdropElement=function(){var e=this.domRoot;return this.backdropElem||(this.backdropElem=document.createElement("div"),this.backdropElem.classList.add("ilove-backdrop","ilove-backdrop--animated","ilove-backdrop--sm"),e.parentNode.appendChild(this.backdropElem)),this.backdropElem},r.prototype.isTemplateAppended=function(e){return this.ctx.appendedTemplates.includes(e)},r.prototype.loadTemplateOn=function(i,r,e){var o=this;return this.isTemplateAppended(i)?(e&&!0===(null==e?void 0:e.clearDom)&&(this.ctx.appendedTemplates[i],r.innerHTML=this.ctx.getCachedTemplateHtml(i)),Promise.resolve()):new Promise(function(t,n){o.ctx.getTemplateViaAjax(i).then(function(e){o.ctx.appendedTemplates.push(i),r.innerHTML=e,t()},function(e){n()})})},r.prototype.showCurrentStateScreens=function(){this.domRoot.querySelectorAll("[data-state]").forEach(function(e){return e.style.display="none"});var e=this.domRoot.querySelector("[data-state='"+this.name+"']");if(!e)throw"Template container for '"+this.name+"' state not found";e.style.display="";var t=e.getAttribute("data-template-name");return t?this.loadTemplateOn(t,e,{}):Promise.resolve()},r.prototype.changeScreen=function(e){this.domRoot.querySelectorAll("[data-state='"+this.name+"'] [data-screen]").forEach(function(e){e.style.display="none"});var t=this.domRoot.querySelector("[data-state="+this.name+"] [data-screen='"+e+"']");if(!t)throw"Screen '"+e+"' for state '"+this.name+"' not found";t.style.display="",this.currentScreen=t},r.prototype.setContext=function(e){this.ctx=e},Object.defineProperty(r.prototype,"domStateRoot",{get:function(){var e=this.domRoot.querySelector("[data-state="+this.name+"]");if(e)return e;throw"Dom State root for "+this.name+" not found"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dialogCloseBtn",{get:function(){return this.domStateRoot.querySelector(".dialog__close")},enumerable:!1,configurable:!0}),r.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},r.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},t.StateBase=r},function(e,r,o){"use strict";!function(i){Object.defineProperty(r,"__esModule",{value:!0}),r.Tools=void 0;var t=o(8);function n(){}n.isRtlPage=function(){var e=null!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir");return"rtl"==e},n.sleep=function(n){return new Promise(function(e,t){setTimeout(e,n)})},n.bytesToSize=function(e){var t;return 0==e?"0 Byte":(t=Math.floor(Math.log(e)/Math.log(1024)),(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t])},n.mbytesToSize=function(e){return n.bytesToSize(1e6*e)},n.convertPointsToPixels=function(e){return e*(1+1/3)},n.strCapitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.isRTL=function(){return i("body").hasClass("rtl")},n.isTextRTL=function(e){return new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]").test(e)},Object.defineProperty(n,"textDirection",{get:function(){return n.isRTL()?"right":"left"},enumerable:!1,configurable:!0}),n.getClosestNumber=function(e,t){for(var n=Math.abs(t[0]-e),i=0,r=1;r<t.length;r++){var o=Math.abs(t[r]-e);o<n&&(i=r,n=o)}return t[i]},n.modalView=function(e){var t='<div class="modal fade" id="'+e.id+'" aria-labelledby="'+e.id+'Modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog '+(e.size?"modal-"+e.size:"")+'" role="document"><div class="modal-content">',n='<div class="dialog__close" data-dismiss="modal" aria-label="Close"></div>';return"title"in e&&(t=t+('<div class="dialog__header"><h4 class="dialog__title">'+e.title)+"</h4>"+n+"</div>"),"content"in e?t=t+('<div class="dialog__body">'+(e.title?"":n)+e.content)+"</div>":t+='<div class="dialog__body"></div>',"btn"in e&&(t=t+('<div class="dialog__footer"><button type="button" class="btn" data-dismiss="modal">'+e.btn)+"</button></div>"),t+="</div></div></div>"},n.modalViewOk=function(e){return e.btn=t.Lang.t("Ok"),n.modalView(e)},n.setInputCursorAtTheEnd=function(e){var t=e.val().length;e.focus(),e[0].setSelectionRange(t,t)},n.svgClose=function(){return n.svgRemove(12,12)},n.svgRotate=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(e=void 0===e?14:e)+'" height="'+(t=void 0===t?16:t)+'" viewBox="0 0 14 16"><path d="M11.328 6.364l1.24-1.2c.79.98 1.283 2.113 1.433 3.288h-1.775c-.123-.735-.43-1.454-.896-2.088zm.896 3.778H14c-.15 1.175-.633 2.308-1.424 3.288l-1.24-1.2c.457-.634.765-1.344.888-2.088zm-.888 4.497C10.318 15.4 9.13 15.856 7.9 16v-1.716a5.31 5.31 0 0 0 2.162-.871l1.266 1.226zM6.152 2.595V0l4 3.846-4 3.76V4.302c-2.496.406-4.394 2.485-4.394 4.995s1.898 4.59 4.394 4.995V16C2.68 15.586 0 12.746 0 9.297s2.68-6.29 6.152-6.703z" fill="#47474F" fill-rule="evenodd"/></svg>'},n.svgRemove=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(e=void 0===e?12:e)+'" height="'+(t=void 0===t?12:t)+'" viewBox="0 0 12 12"><polygon fill="#47474F" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>'},n.svgArrowRight=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(e=void 0===e?12:e)+'" height="'+(t=void 0===t?12:t)+'" viewBox="0 0 448 512"><path d="M313.94 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.94v46.06c0 21.382 25.85 32.1 40.97 16.97l86.06-86.06c9.373-9.373 9.373-24.57 0-33.94l-86.06-86.06c-15.12-15.12-40.97-4.41-40.97 16.97V216z"/></svg>'},n.svgHome=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26" height="21"><path d="M22.028 12.67v6.468a1.08 1.08 0 0 1-1.083 1.083h-5.236c-.298 0-.542-.244-.542-.542v-5.056c0-.298-.244-.542-.542-.542h-3.25c-.298 0-.542.244-.542.542v5.056c0 .298-.244.542-.542.542H5.056a1.08 1.08 0 0 1-1.083-1.083V12.67a.54.54 0 0 1 .199-.42l8.486-6.987a.55.55 0 0 1 .691 0l8.486 6.987c.122.104.194.257.194.42zm3.774-2.75l-3.774-3.1V.56c0-.298-.244-.542-.542-.542h-2.528c-.298 0-.542.244-.542.542v3.277L14.377.5c-.8-.66-1.955-.66-2.753 0L.2 9.922c-.23.2-.262.533-.072.763l1.15 1.4c.2.23.533.262.763.072l10.617-8.743a.55.55 0 0 1 .691 0l10.617 8.743c.23.2.573.158.763-.072l1.15-1.4c.2-.235.153-.573-.077-.763z"/></svg>'},n.randomId=function(){for(var e="";e.length<8;)e+=Math.random().toString(36).replace(/[^a-z]+/g,"");return e.slice(0,8)},n.colorpicker=function(t){var e=null,e=1==i(t).data("limit")?{preferredFormat:"hex",showPaletteOnly:!0,color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}:{allowEmpty:!0,showInitial:!0,preferredFormat:"hex"};1==i(t).data("input")&&(e.showInput=!0),1==i(t).data("empty")&&(e.allowEmpty=!0,1==i(t).data("limit")&&e.palette.push(["transparent"]),e.change=function(e){e=0===e._a?"transparent":e.toHexString(),i(t).val(e)}),1==i(t).data("inline")&&(e.flat=!0),1==i(t).data("aplha")&&(e.showAlpha=!0),e.clickoutFiresChange=!0;try{i(t).spectrum(e)}catch(t){}},n.isElementInView=function(e,t){return void 0===t&&(t=!1),0!=e.length&&(0==t?e.offset().top<i(window).height()&&60<e.offset().top+e.height():e.offset().top+e.height()<i(window).height()&&60<e.offset().top)},n.keepInNumericBounds=function(e,t,n){return null!==e&&n<e&&(n=e),n=null!==t&&t<n?t:n},n.scrollControl=function(t,n,i){var r=0;t.scroll(function(){var e=t.scrollTop();r<e&&"function"==typeof i&&i(),e<r&&"function"==typeof n&&n(),r=e})},n.loadingFromPreviousStart=function(){var e=i(".fromPrevious");0<=e.length||(e=i('<div class="wait fromPrevious">'+t.Lang.t("previousTaskLoading")+"</div>"),i(".main").append(e)),e.css("display","flex")},n.loadingFromPreviousFail=function(){var e="<div><p>"+t.Lang.t("previousFail")+'</p><p></p><p><button class="btn" onclick="window.history.go(-1); return false;">'+t.Lang.t("previousFailBack")+'</button> <button class="btn btn--red" id="closePrevious">'+t.Lang.t("previousFailContinue")+"</button></p></div>";i(".fromPrevious").html(e).css("background-image","none")},n.loadingFromPreviousEnd=function(){i(".fromPrevious").remove()},n.serializeFormData=function(e){var t={};try{for(var n=0,i=e.entries();n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}}catch(e){}return t={info:"form data serialize failed"}},n.parseTemplate=function(n,e,t){return void 0===t&&(t="simple"),null!=(e=void 0===e?null:e)&&("simple"==t&&i.each(e,function(e,t){n=n.replace("{"+e+"}",t)}),"dollar"==t)&&i.each(e,function(e,t){n=n.replace("${"+e+"}",t)}),n},n.isEmail=function(e){return!!/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w+)+$/.test(e)},n.getBrowserTimezone=function(){var e,t="UTC";return t=window.Intl&&window.Intl.DateTimeFormat()&&(e=window.Intl.DateTimeFormat().resolvedOptions().timeZone)?e:t},r.Tools=n}.call(this,o(1))},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"e",function(){return c}),n.d(t,"h",function(){return m}),n.d(t,"f",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"g",function(){return y}),n.d(t,"c",function(){return _}),n.d(t,"a",function(){return b}),n.d(t,"i",function(){return w});var t=n(10),u=n(56),d=n(6),p=n(3),i=n(14),h=n(44),r=n(11),o=n(52),a=n(51),s=n(53),l=n(54),n=n(55),f=[new t.a.InboundFilters,new t.a.FunctionToString,new o.a,new a.a,new s.a,new l.a,new n.a];function c(e){var t;if(void 0===(e=void 0===e?{}:e).defaultIntegrations&&(e.defaultIntegrations=f),void 0===e.release&&(t=Object(p.e)()).SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!1),Object(u.a)(h.a,e),e.autoSessionTracking){function n(){s&&a&&o.endSession()}function i(){a=!0,n(),r.removeEventListener("load",i)}var r=Object(p.e)(),o=Object(d.b)(),a="complete"===document.readyState,s=!1;o.startSession(),a||r.addEventListener("load",i);try{var l=new PerformanceObserver(function(e,t){e.getEntries().forEach(function(e){"first-contentful-paint"===e.name&&e.startTime<c&&(t.disconnect(),s=!0,n())})}),c="hidden"===document.visibilityState?0:1/0;document.addEventListener("visibilitychange",function(e){c=Math.min(c,e.timeStamp)},{once:!0}),l.observe({type:"paint",buffered:!0})}catch(e){s=!0,n()}}}function m(e){(e=void 0===e?{}:e).eventId||(e.eventId=Object(d.b)().lastEventId());var t=Object(d.b)().getClient();t&&t.showReportDialog(e)}function g(){return Object(d.b)().lastEventId()}function v(){}function y(e){e()}function _(e){var t=Object(d.b)().getClient();return t?t.flush(e):i.a.reject(!1)}function b(e){var t=Object(d.b)().getClient();return t?t.close(e):i.a.reject(!1)}function w(e){return Object(r.c)(e)()}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i="<anonymous>";function r(e){try{return e&&"function"==typeof e?e.name||i:i}catch(e){return i}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var t=n(0),i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e});r=Error,Object(t.b)(a,r);var r,o=a;function a(e){var t=this.constructor,n=r.call(this,e)||this;return n.message=e,n.name=t.prototype.constructor.name,i(n,t.prototype),n}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p});var a=n(0),r=n(33),s=n(3),o=n(14),l=n(2),c=n(29),u=n(24);function i(e,t,n){t=p(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return Object(s.a)(t,{handled:!0,type:"generic"}),t.level=r.a.Error,n&&n.event_id&&(t.event_id=n.event_id),o.a.resolve(t)}function d(e,t,n,i){void 0===n&&(n=r.a.Info);t=h(t,i&&i.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return t.level=n,i&&i.event_id&&(t.event_id=i.event_id),o.a.resolve(t)}function p(e,t,n){var i,r,o;if(void 0===n&&(n={}),Object(l.e)(e)&&e.error)return e=e.error,r=Object(c.b)(Object(u.a)(e));if(Object(l.a)(e)||Object(l.b)(e))o=(i=e).name||(Object(l.a)(i)?"DOMError":"DOMException"),r=h(o=i.message?o+": "+i.message:o,t,n),Object(s.b)(r,o),"code"in i&&(r.tags=Object(a.a)(Object(a.a)({},r.tags),{"DOMException.code":""+i.code}));else{if(Object(l.d)(e))return r=Object(c.b)(Object(u.a)(e));Object(l.h)(e)||Object(l.f)(e)?(o=e,r=Object(c.a)(o,t,n.rejection)):(r=h(e,t,n),Object(s.b)(r,""+e,void 0)),Object(s.a)(r,{synthetic:!0})}return r}function h(e,t,n){e={message:e};return(n=void 0===n?{}:n).attachStacktrace&&t&&(n=Object(u.a)(t),t=Object(c.d)(n.stack),e.stacktrace={frames:t}),e}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var i=n(2);function r(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function o(e,t){var n,i=e.length;return i<=150||(i<t&&(t=i),(t=Math.max(t-60,0))<5&&(t=0),(n=i-5<(n=Math.min(t+140,i))?i:n)===i&&(t=Math.max(n-140,0)),e=e.slice(t,n),0<t&&(e="'{snip} "+e),n<i&&(e+=" {snip}")),e}function a(e,t){if(!Array.isArray(e))return"";for(var n=[],i=0;i<e.length;i++){var r=e[i];try{n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function s(e,t){return!!Object(i.k)(e)&&(Object(i.j)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(0),c="?",s=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,l=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p=/\((\S*)(?::(\d+))(?::(\d+))\)/,r=/Minified React error #\d+;/i;function o(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:r.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),a=[],s=0;s<o.length;s+=2){var l=null;(t=i.exec(o[s]))?l={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=r.exec(o[s]))&&(l={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),l&&(!l.func&&l.line&&(l.func=c),a.push(l))}return a.length?{message:h(e),name:e.name,stack:a}:null}(e))return a(t,n)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,n,i=[],r=e.stack.split("\n"),o=0;o<r.length;++o){if(n=s.exec(r[o])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=p.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),a={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||c,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=u.exec(r[o]))a={url:n[2],func:n[1]||c,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=l.exec(r[o])))continue;n[3]&&-1<n[3].indexOf(" > eval")&&(t=d.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==o||n[5]||void 0===e.columnNumber||(i[0].column=e.columnNumber+1),a={url:n[3],func:n[1]||c,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!a.func&&a.line&&(a.func=c),i.push(a)}return i.length?{message:h(e),name:e.name,stack:i}:null}(e))return a(t,n)}catch(e){}return{message:h(e),name:e&&e.name,stack:[],failed:!0}}function a(t,e){try{return Object(i.a)(Object(i.a)({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function h(e){e=e&&e.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}},function(e,t,n){"use strict";function i(){this._eventEmitterCallbacks={}}Object.defineProperty(t,"__esModule",{value:!0}),t.ILoveEventEmitter=void 0,i.prototype.addEventListener=function(e,t){e in this._eventEmitterCallbacks||(this._eventEmitterCallbacks[e]=[]),this._eventEmitterCallbacks[e].push(t)},i.prototype.dispatchEvent=function(t){t.name in this._eventEmitterCallbacks&&this._eventEmitterCallbacks[t.name].forEach(function(e){return e(t)});var e=new Event(t.name);document.dispatchEvent(e)},t.ILoveEventEmitter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyload=void 0,t.lazyload=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="async");for(var i=document.getElementsByTagName("script"),r=i.length;r--;)if(i[r].src.match(e))return!0;var o,a,s=document.createElement("script");for(o in s.type="text/javascript",0 in document.createElement("script"),"defer"in document.createElement("script")&&(s.defer=!0),s.src=e,t)t.hasOwnProperty(o)&&(a=t[o],s.setAttribute(o,a));return(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,n),!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i="sentry.javascript.browser",r="5.30.0"},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var o=n(0);function i(e,t){return{body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(e),type:"session",url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function r(e,t){var n=e.tags||{},i=n.__sentry_samplingMethod,r=n.__sentry_sampleRate,n=Object(o.d)(n,["__sentry_samplingMethod","__sentry_sampleRate"]),n=(e.tags=n,"transaction"===e.type),t={body:JSON.stringify(e),type:e.type||"event",url:n?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};return n&&(n=JSON.stringify({event_id:e.event_id,sent_at:(new Date).toISOString()}),e=JSON.stringify({type:e.type,sample_rates:[{id:i,rate:r}]}),t.body=n+"\n"+e+"\n"+t.body),t}},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u});var i=n(2),r=n(5),o=n(24),a=50;function s(e){var t=u(e.stack),e={type:e.name,value:e.message};return t&&t.length&&(e.stacktrace={frames:t}),void 0===e.type&&""===e.value&&(e.value="Unrecoverable error caught"),e}function l(e,t,n){n={exception:{values:[{type:Object(i.f)(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Object(r.b)(e)}]},extra:{__serialized__:Object(r.e)(e)}};return t&&(e=u(Object(o.a)(t).stack),n.stacktrace={frames:e}),n}function c(e){return{exception:{values:[s(e)]}}}function u(e){var t,n;return e&&e.length?(e=(t=e)[0].func||"",n=t[t.length-1].func||"",-1===e.indexOf("captureMessage")&&-1===e.indexOf("captureException")||(t=t.slice(1)),(t=-1!==n.indexOf("sentryWrapped")?t.slice(0,-1):t).slice(0,a).map(function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}}).reverse()):[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o,l=n(0),c=n(2),u=n(12),t=n(3),d=n(5),s=n(20),r=n(45),p=Object(t.e)(),h={},f={};function i(e){var i,a,s,t;if(!f[e])switch(f[e]=!0,e){case"console":"console"in p&&["debug","info","warn","error","log","assert"].forEach(function(i){i in p.console&&Object(d.c)(p.console,i,function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];m("console",{args:e,level:i}),n&&Function.prototype.apply.call(n,p.console,e)}})});break;case"dom":"document"in p&&(p.document.addEventListener("click",b("click",m.bind(null,"dom")),!1),p.document.addEventListener("keypress",w(m.bind(null,"dom")),!1),["EventTarget","Node"].forEach(function(e){e=p[e]&&p[e].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(Object(d.c)(e,"addEventListener",function(i){return function(e,t,n){return t&&t.handleEvent?("click"===e&&Object(d.c)(t,"handleEvent",function(t){return function(e){return b("click",m.bind(null,"dom"))(e),t.call(this,e)}}),"keypress"===e&&Object(d.c)(t,"handleEvent",function(t){return function(e){return w(m.bind(null,"dom"))(e),t.call(this,e)}})):("click"===e&&b("click",m.bind(null,"dom"),!0)(this),"keypress"===e&&w(m.bind(null,"dom"))(this)),i.call(this,e,t,n)}}),Object(d.c)(e,"removeEventListener",function(i){return function(e,t,n){try{i.call(this,e,t.__sentry_wrapped__,n)}catch(e){}return i.call(this,e,t,n)}}))}));break;case"xhr":"XMLHttpRequest"in p&&(a=[],s=[],t=XMLHttpRequest.prototype,Object(d.c)(t,"open",function(o){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];function i(){if(4===r.readyState){try{r.__sentry_xhr__&&(r.__sentry_xhr__.status_code=r.status)}catch(e){}try{var e,t=a.indexOf(r);-1!==t&&(a.splice(t),e=s.splice(t)[0],r.__sentry_xhr__)&&void 0!==e[0]&&(r.__sentry_xhr__.body=e[0])}catch(e){}m("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}}var r=this,t=n[1];r.__sentry_xhr__={method:Object(c.k)(n[0])?n[0].toUpperCase():n[0],url:n[1]},Object(c.k)(t)&&"POST"===r.__sentry_xhr__.method&&t.match(/sentry_key/)&&(r.__sentry_own_request__=!0);return"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?Object(d.c)(r,"onreadystatechange",function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(),n.apply(r,e)}}):r.addEventListener("readystatechange",i),o.apply(r,n)}}),Object(d.c)(t,"send",function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.push(this),s.push(e),m("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),n.apply(this,e)}}));break;case"fetch":Object(r.c)()&&Object(d.c)(p,"fetch",function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={args:e,fetchData:{method:function(e){void 0===e&&(e=[]);if("Request"in p&&Object(c.g)(e[0],Request)&&e[0].method)return String(e[0].method).toUpperCase();if(e[1]&&e[1].method)return String(e[1].method).toUpperCase();return"GET"}(e),url:function(e){void 0===e&&(e=[]);if("string"==typeof e[0])return e[0];if("Request"in p&&Object(c.g)(e[0],Request))return e[0].url;return String(e[0])}(e)},startTimestamp:Date.now()};return m("fetch",Object(l.a)({},n)),i.apply(p,e).then(function(e){return m("fetch",Object(l.a)(Object(l.a)({},n),{endTimestamp:Date.now(),response:e})),e},function(e){throw m("fetch",Object(l.a)(Object(l.a)({},n),{endTimestamp:Date.now(),error:e})),e})}});break;case"history":Object(r.b)()&&(i=p.onpopstate,p.onpopstate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=p.location.href;if(m("history",{from:o,to:o=n}),i)return i.apply(this,e)},Object(d.c)(p.history,"pushState",n),Object(d.c)(p.history,"replaceState",n));break;case"error":E=p.onerror,p.onerror=function(e,t,n,i,r){return m("error",{column:i,error:r,line:n,msg:e,url:t}),!!E&&E.apply(this,arguments)};break;case"unhandledrejection":S=p.onunhandledrejection,p.onunhandledrejection=function(e){return m("unhandledrejection",e),!S||S.apply(this,arguments)};break;default:u.a.warn("unknown instrumentation type:",e)}function n(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,i=2<e.length?e[2]:void 0;return i&&(n=o,i=String(i),m("history",{from:n,to:o=i})),r.apply(this,e)}}}function a(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(h[e.type]=h[e.type]||[],h[e.type].push(e.callback),i(e.type))}function m(t,e){var n,i;if(t&&h[t])try{for(var r=Object(l.f)(h[t]||[]),o=r.next();!o.done;o=r.next()){var a=o.value;try{a(e)}catch(e){u.a.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+Object(s.a)(a)+"\nError: "+e)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}var g,v,y=1e3,_=0;function b(t,n,i){return void 0===i&&(i=!1),function(e){g=void 0,e&&v!==e&&(v=e,_&&clearTimeout(_),i?_=setTimeout(function(){n({event:e,name:t})}):n({event:e,name:t}))}}function w(i){return function(e){var t;try{t=e.target}catch(e){return}var n=t&&t.tagName;n&&("INPUT"===n||"TEXTAREA"===n||t.isContentEditable)&&(g||b("input",i)(e),clearTimeout(g),g=setTimeout(function(){g=void 0},y))}}var E=null;var S=null},function(e,n,i){var s;!function(r){"use strict";function a(t,n,i){var r,o=document.createElement("img");return o.onerror=function(e){return a.onerror(o,e,t,n,i)},o.onload=function(e){return a.onload(o,e,t,n,i)},"string"==typeof t?(a.fetchBlob(t,function(e){e&&a.isInstanceOf("Blob",e)?(t=e,r=a.createObjectURL(t)):(r=t,i&&i.crossOrigin&&(o.crossOrigin=i.crossOrigin)),o.src=r},i),o):a.isInstanceOf("Blob",t)||a.isInstanceOf("File",t)?(r=o._objectURL=a.createObjectURL(t))?(o.src=r,o):a.readFile(t,function(e){var t=e.target;t&&t.result?o.src=t.result:n&&n(e)}):void 0}var t=r.createObjectURL&&r||r.URL&&URL.revokeObjectURL&&URL||r.webkitURL&&webkitURL;function o(e,t){!e._objectURL||t&&t.noRevoke||(a.revokeObjectURL(e._objectURL),delete e._objectURL)}a.fetchBlob=function(e,t){t()},a.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},a.transform=function(e,t,n,i,r){n(e,r)},a.onerror=function(e,t,n,i,r){o(e,r),i&&i.call(e,t)},a.onload=function(e,t,n,i,r){o(e,r),i&&a.transform(e,r,i,n,{originalWidth:e.naturalWidth||e.width,originalHeight:e.naturalHeight||e.height})},a.createObjectURL=function(e){return!!t&&t.createObjectURL(e)},a.revokeObjectURL=function(e){return!!t&&t.revokeObjectURL(e)},a.readFile=function(e,t,n){if(r.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[n=n||"readAsDataURL"])return i[n](e),i}return!1},void 0!==(s=function(){return a}.call(n,i,n,e))&&(e.exports=s)}("undefined"!=typeof window&&window||this)},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i,r;n.d(t,"a",function(){return i}),(n=i=i||{}).Fatal="fatal",n.Error="error",n.Warning="warning",n.Log="log",n.Info="info",n.Debug="debug",n.Critical="critical",(r=i=i||{}).fromString=function(e){switch(e){case"debug":return r.Debug;case"info":return r.Info;case"warn":case"warning":return r.Warning;case"error":return r.Error;case"fatal":return r.Fatal;case"critical":return r.Critical;default:return r.Log}}},function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t,n,i=Array.prototype.slice.call(arguments,1);i.length;){var r=i.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)t=r,n=o,Object.prototype.hasOwnProperty.call(t,n)&&(e[o]=r[o])}}return e},t.shrinkBuf=function(e,t){if(e.length!==t){if(e.subarray)return e.subarray(0,t);e.length=t}return e};var r={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){for(var t,n,i,r=0,o=0,a=e.length;o<a;o++)r+=e[o].length;for(i=new Uint8Array(r),o=t=0,a=e.length;o<a;o++)n=e[o],i.set(n,t),t+=n.length;return i}},o={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var m=n(0),i=n(50),a=n(61),r=n(21),o=n(14),s=(l.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},l.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then(function(){return t.remove(e)}).then(null,function(){return t.remove(e).then(null,function(){})}),e):o.a.reject(new r.a("Not adding Promise due to buffer limit reached."))},l.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},l.prototype.length=function(){return this._buffer.length},l.prototype.drain=function(n){var i=this;return new o.a(function(e){var t=setTimeout(function(){n&&0<n&&e(!1)},n);o.a.all(i._buffer).then(function(){clearTimeout(t),e(!0)}).then(null,function(){e(!0)})})},l);function l(e){this._limit=e,this._buffer=[]}var c=n(12),g=n(3),u=(d.prototype.sendEvent=function(e){throw new r.a("Transport Class has to implement `sendEvent` method")},d.prototype.close=function(e){return this._buffer.drain(e)},d.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,i=e.headers,r=e.resolve,e=e.reject,o=a.a.fromHttpCode(n.status);this._handleRateLimit(i)&&c.a.warn("Too many requests, backing off until: "+this._disabledUntil(t)),o===a.a.Success?r({status:o}):e(n)},d.prototype._disabledUntil=function(e){return this._rateLimits[e]||this._rateLimits.all},d.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},d.prototype._handleRateLimit=function(e){var t,n,i,r,o=Date.now(),a=e["x-sentry-rate-limits"],e=e["retry-after"];if(a){try{for(var s=Object(m.f)(a.trim().split(",")),l=s.next();!l.done;l=s.next()){var c=l.value.split(":",2),u=parseInt(c[0],10),d=1e3*(isNaN(u)?60:u);try{i=void 0;for(var p=Object(m.f)(c[1].split(";")),h=p.next();!h.done;h=p.next()){var f=h.value;this._rateLimits[f||"all"]=new Date(o+d)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return!0}return!!e&&(this._rateLimits.all=new Date(o+Object(g.g)(o,e)),!0)},d);function d(e){this.options=e,this._buffer=new s(30),this._rateLimits={},this._api=new i.a(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return d});var l=n(0),c=n(2),i=n(107),u=n(14),r=n(3),o=(a.clone=function(e){var t=new a;return e&&(t._breadcrumbs=Object(l.e)(e._breadcrumbs),t._tags=Object(l.a)({},e._tags),t._extra=Object(l.a)({},e._extra),t._contexts=Object(l.a)({},e._contexts),t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=Object(l.e)(e._eventProcessors)),t},a.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},a.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},a.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},a.prototype.getUser=function(){return this._user},a.prototype.setTags=function(e){return this._tags=Object(l.a)(Object(l.a)({},this._tags),e),this._notifyScopeListeners(),this},a.prototype.setTag=function(e,t){var n;return this._tags=Object(l.a)(Object(l.a)({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},a.prototype.setExtras=function(e){return this._extra=Object(l.a)(Object(l.a)({},this._extra),e),this._notifyScopeListeners(),this},a.prototype.setExtra=function(e,t){var n;return this._extra=Object(l.a)(Object(l.a)({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},a.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},a.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},a.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},a.prototype.setTransaction=function(e){return this.setTransactionName(e)},a.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=Object(l.a)(Object(l.a)({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},a.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},a.prototype.getSpan=function(){return this._span},a.prototype.getTransaction=function(){var e,t=this.getSpan();return null!=(e=t)&&e.transaction?null==(e=t)?void 0:e.transaction:null!=(e=null==(e=t)?void 0:e.spanRecorder)&&e.spans[0]?t.spanRecorder.spans[0]:void 0},a.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},a.prototype.getSession=function(){return this._session},a.prototype.update=function(e){if(e){var t;if("function"==typeof e)return(t=e(this))instanceof a?t:this;e instanceof a?(this._tags=Object(l.a)(Object(l.a)({},this._tags),e._tags),this._extra=Object(l.a)(Object(l.a)({},this._extra),e._extra),this._contexts=Object(l.a)(Object(l.a)({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint)):Object(c.h)(e)&&(this._tags=Object(l.a)(Object(l.a)({},this._tags),e.tags),this._extra=Object(l.a)(Object(l.a)({},this._extra),e.extra),this._contexts=Object(l.a)(Object(l.a)({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint)&&(this._fingerprint=e.fingerprint)}return this},a.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},a.prototype.addBreadcrumb=function(e,t){e=Object(l.a)({timestamp:Object(i.a)()},e);return this._breadcrumbs=void 0!==t&&0<=t?Object(l.e)(this._breadcrumbs,[e]).slice(-t):Object(l.e)(this._breadcrumbs,[e]),this._notifyScopeListeners(),this},a.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},a.prototype.applyToEvent=function(e,t){var n;return this._extra&&Object.keys(this._extra).length&&(e.extra=Object(l.a)(Object(l.a)({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=Object(l.a)(Object(l.a)({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=Object(l.a)(Object(l.a)({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=Object(l.a)(Object(l.a)({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span&&(e.contexts=Object(l.a)({trace:this._span.getTraceContext()},e.contexts),n=null==(n=this._span.transaction)?void 0:n.name)&&(e.tags=Object(l.a)({transaction:n},e.tags)),this._applyFingerprint(e),e.breadcrumbs=Object(l.e)(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=0<e.breadcrumbs.length?e.breadcrumbs:void 0,this._notifyEventProcessors(Object(l.e)(s(),this._eventProcessors),e,t)},a.prototype._notifyEventProcessors=function(i,r,o,a){var s=this;return void 0===a&&(a=0),new u.a(function(t,e){var n=i[a];null===r||"function"!=typeof n?t(r):(n=n(Object(l.a)({},r),o),(Object(c.m)(n)?n.then(function(e){return s._notifyEventProcessors(i,e,o,a+1).then(t)}):s._notifyEventProcessors(i,n,o,a+1).then(t)).then(null,e))})},a.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(e){e(t)}),this._notifyingListeners=!1)},a.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},a);function a(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}function s(){var e=Object(r.e)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function d(e){s().push(e)}},function(e,s,l){"use strict";!function(i){var r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},t=(Object.defineProperty(s,"__esModule",{value:!0}),s.Tooltip=void 0,e(l(26))),n=l(73),e=(a.compat=function(){(-1!==navigator.appVersion.indexOf("MSIE 10")||0<=navigator.userAgent.indexOf(" UCBrowser/")||0<=navigator.userAgent.indexOf("Opera Mini")||0<=navigator.userAgent.indexOf("Android")&&4.4<parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8)))&&t.lazyload("//cdn.jsdelivr.net/npm/mutationobserver-shim/dist/mutationobserver.min.js")},a.init=function(e){void 0===e&&(e=null),window.tippy&&(i(e=null==e?".tooltip":e).each(function(e,t){i(t)[0]._tippy||(window._tippyInstances=window._tippyInstances||[],t=window.tippy(i(t)[0],a.getOptions(t)),window._tippyInstances.push(t))}),n.LinkTitle.disable(e),i(e).hover(function(){if(i(this).hasClass("rotate")||i(this).hasClass("remove"))try{var e=i(this).parent().parent()[0]._tippy;e&&(e.hide(),e.disable())}catch(e){}},function(){if(i(this).hasClass("rotate")||i(this).hasClass("remove"))try{var e=i(this).parent().parent()[0]._tippy;e&&e.enable()}catch(e){}}),i(".tooltip").on("mouseenter",function(e){e.preventDefault()}))},a.getOptions=function(e){var t={animation:"fade",delay:[0,0],offset:[0,20],allowHTML:!0,content:i(e).is("[data-title]")?i(e).attr("data-title"):i(e).attr("title"),arrow:!0,placement:a.getPlacement(e),showOnCreate:i(e).hasClass("tooltip--show"),hideOnClick:!i(e).hasClass("tooltip--fixed"),theme:i(e).is("[data-theme]")?i(e).attr("data-theme"):""};return i(e).is("[data-z]")&&(t.zIndex=i(e).attr("data-z")),t},a.getPlacement=function(e){e=i(e);return e.hasClass("tooltip--top")?"top":e.hasClass("tooltip--top-start")?"top-start":e.hasClass("tooltip--top-end")?"top-end":e.hasClass("tooltip--bottom")?"bottom":e.hasClass("tooltip--left")?"left":e.hasClass("tooltip--right")?"right":"top"},a.setContent=function(e,n){if(1==i(e).length)return i(e).attr("title",n),i(e).attr("data-title",n),i(e)[0]._tippy?(i(e)[0]._tippy.hide(),void i(e)[0]._tippy.setContent(n)):void a.init(e);i(e).each(function(e,t){a.setContent(t,n)})},a.show=function(e,t){void 0===t&&(t=null);var n;i(e)[0];0!=i(e).length&&("_tippy"in i(e)[0]||a.init(i(e)),n=i(e)[0]._tippy,i(e).is(":disabled")?(i(e).attr("disabled",!1),n.show(),setTimeout(function(){i(e).attr("disabled",!0)},100)):n.show(),null!=t)&&setTimeout(function(){i(e)[0]._tippy.hide()},t)},a.shake=function(e){var t=i(e)[0]._tippy;window.setTimeout(function(){i(t.popper).children().addClass("shake")},500)},a.hide=function(e){try{i(e)[0]._tippy.hide()}catch(e){}},a.enable=function(e){if(1==i(e).length)try{i(e)[0]._tippy.enable()}catch(e){}else i(e).each(function(e,t){a.enable(t)})},a.disable=function(e){if(1==i(e).length)try{i(e)[0]._tippy.hide(),i(e)[0]._tippy.disable()}catch(e){}else i(e).each(function(e,t){a.disable(t)})},a.destroy=function(e){if(1==i(e).length)try{i(e)}catch(e){}else i(e).each(function(e,t){a.destroy(t)})},a.wrapDisabled=function(e){i(e).wrap("<div class='tootlip-wrap'></div>")},a);function a(){}s.Tooltip=e,window.tootip=e}.call(this,l(1))},,function(e,r,o){"use strict";!function(e,t){o.d(r,"b",function(){return n}),o.d(r,"a",function(){return i});o(2),o(5);function n(){return"[object process]"===Object.prototype.toString.call(void 0!==e?e:0)}function i(e,t){return e.require(t)}}.call(this,o(103),o(66)(e))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var l=n(2);function i(e){try{for(var t,n=e,i=[],r=0,o=0,a=" > ".length;n&&r++<5&&!("html"===(t=function(e){var t,n,i,r,o=e,a=[];if(!o||!o.tagName)return"";a.push(o.tagName.toLowerCase()),o.id&&a.push("#"+o.id);if((e=o.className)&&Object(l.k)(e))for(t=e.split(/\s+/),r=0;r<t.length;r++)a.push("."+t[r]);var s=["type","name","title","alt"];for(r=0;r<s.length;r++)n=s[r],(i=o.getAttribute(n))&&a.push("["+n+'="'+i+'"]');return a.join("")}(n))||1<r&&80<=o+i.length*a+t.length);)i.push(t),o+=t.length,n=n.parentNode;return i.reverse().join(" > ")}catch(e){return"<unknown>"}}},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0,o(n(104)));function s(){}s.get=function(e){var t="production";return a[t][e]},s.mode=function(){var e="production";return e},s.env=function(){return"production"},t.Settings=s},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(61),r=n(14),o=(a.prototype.sendEvent=function(e){return r.a.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:i.a.Skipped})},a.prototype.close=function(e){return r.a.resolve(!0)},a);function a(){}},function(e,t,n){"use strict";n.r(t);var i=n(53),r=(n.d(t,"GlobalHandlers",function(){return i.a}),n(52)),o=(n.d(t,"TryCatch",function(){return r.a}),n(51)),a=(n.d(t,"Breadcrumbs",function(){return o.a}),n(54)),s=(n.d(t,"LinkedErrors",function(){return a.a}),n(55));n.d(t,"UserAgent",function(){return s.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i,r=n(0),t=n(70),o=n(3),a=n(12),s=n(69),l=n(33),c=n(45),u=n(22),d=n(67),p=n(68),h=(i=s.a,Object(r.b)(f,i),f.prototype.eventFromException=function(e,t){return Object(u.a)(this._options,e,t)},f.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=l.a.Info),Object(u.b)(this._options,e,t,n)},f.prototype._setupTransport=function(){var e;return this._options.dsn?(e=Object(r.a)(Object(r.a)({},this._options.transportOptions),{dsn:this._options.dsn}),new(this._options.transport||(Object(c.a)()?d:p).a)(e)):i.prototype._setupTransport.call(this)},f);function f(){return null!==i&&i.apply(this,arguments)||this}var m,g=n(11),v=n(51),y=n(27),_=(m=t.a,Object(r.b)(b,m),b.prototype.showReportDialog=function(e){void 0===e&&(e={}),Object(o.e)().document&&(this._isEnabled()?Object(g.a)(Object(r.a)(Object(r.a)({},e),{dsn:e.dsn||this.getDsn()})):a.a.error("Trying to call showReportDialog with Sentry Client disabled"))},b.prototype._prepareEvent=function(e,t,n){return e.platform=e.platform||"javascript",e.sdk=Object(r.a)(Object(r.a)({},e.sdk),{name:y.a,packages:Object(r.e)(e.sdk&&e.sdk.packages||[],[{name:"npm:@sentry/browser",version:y.b}]),version:y.b}),m.prototype._prepareEvent.call(this,e,t,n)},b.prototype._sendEvent=function(e){var t=this.getIntegration(v.a);t&&t.addSentryBreadcrumb(e),m.prototype._sendEvent.call(this,e)},b);function b(e){return m.call(this,h,e=void 0===e?{}:e)||this}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return c});var i=n(12),r=n(3);function o(){if(!("fetch"in Object(r.e)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function a(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function s(){if(!o())return!1;var e=Object(r.e)();if(a(e.fetch))return!0;var t=!1,e=e.document;if(e&&"function"==typeof e.createElement)try{var n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=a(n.contentWindow.fetch)),e.head.removeChild(n)}catch(e){i.a.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function l(){if(!o())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function c(){var e=Object(r.e)(),t=e.chrome,t=t&&t.app&&t.app.runtime,e="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!t&&e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},o=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ContextBase=void 0,n(15)),a=n(109),s=n(59),l=n(25),c=n(7),n=(u.prototype.setContextPlacement=function(e){this._ctxPlacement=e},u.prototype.getContextPlacement=function(){return this._ctxPlacement},u.prototype.render=function(e,t){void 0===t&&(t={}),this.state||(this.state=this.getInitialState(),this.changeState(this.state)),this.state.render(e,t)},Object.defineProperty(u.prototype,"isInline",{get:function(){return this._isInline},enumerable:!1,configurable:!0}),u.prototype.getState=function(){return this.state},u.prototype.changeState=function(e){if(!e)throw"State cannot be empty";if(this._inEndState)throw"Context is in end state; Cannot transition to state '"+e.name+"'";this.state=e,this.state.setContext(this),this.stateHistory.push(this.state),this.listenToEvents(this.state)},u.prototype.canGoToAPreviousState=function(){return!(this.stateHistory.length<2)},u.prototype.goToPreviousState=function(){var e;if(this.canGoToAPreviousState())return this.stateHistory.pop(),e=this.stateHistory.pop(),this.changeState(e),e;throw"Cannot transition to previous state"},u.prototype.getTemplateViaAjax=function(i){return r(this,void 0,void 0,function(){var t,n;return o(this,function(e){switch(e.label){case 0:return t="template_"+i,u.cache.existsEntry(t)?[2,u.cache.getEntry(t)]:[4,s.AjaxTemplate.load(i)];case 1:return n=e.sent(),u.cache.setEntry(t,n),[2,n]}})})},u.prototype.getCachedTemplateHtml=function(e){return u.cache.getEntry("template_"+e)},u.prototype.getStateHistory=function(){return this.stateHistory.map(function(e){return e.name})},u.prototype.wasUserLoggedOnInitialization=function(){return this._wasUserLoggedOnInitialization},u.prototype.reset=function(){this.state&&this.state.reset()},Object.defineProperty(u.prototype,"userType",{get:function(){var e=i.UserModel.userType;return 1!=i.UserModel.isTeamManaged()&&"premium"==e&&0==i.UserModel.hasSubscription()?"user":e},enumerable:!1,configurable:!0}),u.prototype.canUserDoTrial=function(){switch(this.userType){case"guest":case"user":return i.UserModel.canDoTrial();case"premium":return!1;default:throw"Unknown userType "+this.userType+" to determine if can do trial"}},u.prototype.isTeamManaged=function(){return i.UserModel.isPremium()&&i.UserModel.isTeamManaged()},u.prototype.isTrialEnabledForThisTool=function(){return!(window.ilovepdfConfig&&"dtr"in window.ilovepdfConfig&&window.ilovepdfConfig.dtr)},u.prototype.isLoggedIn=function(){return"guest"!==this.userType},Object.defineProperty(u.prototype,"user",{get:function(){return i.UserModel.get()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"userCurrentPaymentMethod",{get:function(){var e=this.user.last_payment;return e&&e.provider?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"userCurrentSubscription",{get:function(){return this.user&&this.user.current_subscription||null},enumerable:!1,configurable:!0}),u.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},u.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},u.prototype.getInstanceID=function(){return this._instanceID},u.cache=new a.Cache,u._static_instanceID=0,u);function u(e){var t=this;void 0===e&&(e={}),this.state=null,this.stateHistory=[],this.objsListeningTo=new WeakMap,this.appendedTemplates=[],this._isInline=!1,this._ctxPlacement="dom",this._inEndState=!1,this.setEndState=function(){t._inEndState=!0},this.isInEndState=function(){return t._inEndState},this.listenToEvents=function(e){t.objsListeningTo.has(e)&&!0===t.objsListeningTo.get(e)||(e.addEventListener("end",function(e){t.setEndState(),t.dispatchEvent(new c.IloveEvent("end",e.detail))}),e.addEventListener("disableContentAbandonment",function(e){return t.dispatchEvent(new c.IloveEvent("disableContentAbandonment"))}),e.addEventListener("unsetContentAbandonment",function(e){return t.dispatchEvent(new c.IloveEvent("unsetContentAbandonment"))}),t.objsListeningTo.set(e,!0))},this.notifyOfContainerClosing=function(){t.dispatchEvent(new c.IloveEvent("contextContainerClosed")),t.isInEndState()&&t.dispatchEvent(new c.IloveEvent("end"))},this._onDomReady=function(e){t.dispatchEvent(new c.IloveEvent("domReady",{domRoot:e}))},this.eventEmitter=new l.ILoveEventEmitter,this._instanceID=++u._static_instanceID,this._wasUserLoggedOnInitialization=this.isLoggedIn(),this._isInline=e.isInline||!1}t.ContextBase=n},function(e,t,n){var i,r;!function(){"use strict";r=[n(31)],void 0!==(r="function"==typeof(i=function(f){"use strict";var e=typeof Blob!=="undefined"&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),o=(f.blobSlice=e&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},f.metaDataParsers={jpeg:{65505:[],65517:[]}},f.parseMetaData=function(e,u,d,p){d=d||{};p=p||{};var h=this;var t=d.maxMetaDataSize||262144;var n=!(typeof DataView!=="undefined"&&e&&e.size>=12&&e.type==="image/jpeg"&&f.blobSlice);if(n||!f.readFile(f.blobSlice.call(e,0,t),function(e){if(e.target.error){console.log(e.target.error);u(p);return}var t=e.target.result;var n=new DataView(t);var i=2;var r=n.byteLength-4;var o=i;var a;var s;var l;var c;if(n.getUint16(0)===65496){while(i<r){a=n.getUint16(i);if(a>=65504&&a<=65519||a===65534){s=n.getUint16(i+2)+2;if(i+s>n.byteLength){console.log("Invalid meta data: Invalid segment size.");break}l=f.metaDataParsers.jpeg[a];if(l&&!d.disableMetaDataParsers)for(c=0;c<l.length;c+=1)l[c].call(h,n,i,s,p,d);i+=s;o=i}else break}if(!d.disableImageHead&&o>6)if(t.slice)p.imageHead=t.slice(0,o);else p.imageHead=new Uint8Array(t).subarray(0,o)}else console.log("Invalid JPEG file: Missing JPEG marker.");u(p)},"readAsArrayBuffer"))u(p)},f.replaceHead=function(t,n,i){f.parseMetaData(t,function(e){i(new Blob([n,f.blobSlice.call(t,e.imageHead.byteLength)],{type:"image/jpeg"}))},{maxMetaDataSize:256,disableMetaDataParsers:true})},f.hasMetaOption=function(e){return e&&e.meta},f.transform);f.transform=function(t,n,i,r,e){if(f.hasMetaOption(n))f.parseMetaData(r,function(e){o.call(f,t,n,i,r,e)},n,e);else o.apply(f,arguments)}})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,l,c){"use strict";!function(r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},e=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},s=(Object.defineProperty(l,"__esModule",{value:!0}),l.Api=l.APP_VERSION=l.API_VERSION=void 0,c(58)),t=c(41),n=(l.API_VERSION="v1",l.APP_VERSION="web.0",Object.defineProperty(i.prototype,"userToken",{get:function(){return"function"==typeof this._userToken?this._userToken():this._userToken},set:function(e){this._userToken=e},enumerable:!1,configurable:!0}),i.ping=function(o,a){return void 0===a&&(a=!1),new Promise(function(e,t){var n=new XMLHttpRequest,i=0,r=0;n.open("GET",o,!0),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0==i&&0==r&&0!=n.status&&1==a?e({}):t())},n.ontimeout=function(){i=1},n.onerror=function(e){r=1},n.send()})},i.prototype.pingService=function(){return i.ping(this.serviceServer+"/ping")},i.prototype.sendRequest=function(e,t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=new XMLHttpRequest;return o.open(e,this.workerServer+"/"+this.apiVersion+"/"+t,!0),o.setRequestHeader("Authorization","Bearer "+this.token),o.setRequestHeader("Accept","application/json"),1==r&&o.setRequestHeader("Content-Type","application/json"),i&&(o.responseType="blob"),1==r?o.send(JSON.stringify(n)):o.send(n),o},i.prototype.sendServiceRequest=function(e,t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=new XMLHttpRequest;return o.open(e,this.serviceServer+"/"+t,!0),o.setRequestHeader("Authorization","Bearer "+this.userToken),o.setRequestHeader("Accept","application/json"),1==r&&o.setRequestHeader("Content-Type","application/json"),i&&(o.responseType="blob"),1==r?o.send(JSON.stringify(n)):o.send(n),o},i.prototype.query=function(e,r,o,a,s,l){void 0===o&&(o=null),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===l&&(l="api");var c=this;return new Promise(function(t,n){var i=null;if("api"==l)i=c.sendRequest(e,r,o,a,s);else{if("service"!=l)throw new Error("invalid target api");i=c.sendServiceRequest(e,r,o,a,s)}i.onerror=function(e){n({status:-1})},i.onload=function(){if(4==i.readyState)if(200==i.status)try{t(JSON.parse(i.responseText))}catch(e){n({error:"invalidJSONResponse",status:500,response:i.responseText})}else if(400==i.status||500==i.status)try{(e=JSON.parse(i.responseText)).status=i.status,n(e)}catch(e){n({error:"invalidJSONResponse",status:500,response:i.responseText})}else{var e={};try{e=JSON.parse(i.responseText)}catch(e){}e.status=i.status,n(e)}}})},i.prototype.process=function(e){return this.query("POST","process",e)},i.prototype.getSigner=function(e){return this.query("GET","signature/signer/"+e)},i.prototype.request=function(e,t,n){n=s.FormDataHelper.jsonToFormData(n);return this.query(e,t,n)},i.prototype.getTask=function(){var i=this;return new Promise(function(e,t){var n=i.sendRequest("GET","task/"+i.taskId);n.onreadystatechange=function(){4==n.readyState&&(200==n.status?e(JSON.parse(n.responseText)):(400!=n.status&&n.status,window.ev("event","send","download_deleted",i.workerServer),t(n.responseText)))}})},i.prototype.getLink=function(e){return this.workerServer+"/"+this.apiVersion+"/"+e},i.prototype.deleteTask=function(){return this.request("delete","task/"+this.taskId,{})},i.prototype.getSubdomain=function(e){return e.split("/")[2].split(".")[0]},i.prototype.getDomain=function(e){return e.split("/")[2]},i.prototype.uploadFromUrl=function(e){var t=new FormData;return t.append("cloud_file",e),t.append("cloud_source","public"),t.append("task",this.taskId),this.query("post","upload",t)},i.prototype.getPreview=function(e,t){var n,i=new FormData;for(n in i.append("server_filename",e),i.append("task",this.taskId),delete t.output_filename,delete t.packaged_filename,t)t.hasOwnProperty(n)&&i.append(n,t[n]);return this.query("post","preview",i)},i.prototype.upscale=function(n,i){return e(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(t=new FormData).append("task",this.taskId),t.append("server_filename",n),t.append("scale",""+i),[4,fetch(this.getLink("upscale"),{method:"POST",body:t,headers:{Authorization:"Bearer "+this.token}})];case 1:return[4,e.sent().blob()];case 2:return[2,e.sent()]}})})},i.prototype.removeBackground=function(n){return e(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(t=new FormData).append("task",this.taskId),t.append("server_filename",n),[4,fetch(this.getLink("removebackground"),{method:"POST",body:t,headers:{Authorization:"Bearer "+this.token}})];case 1:return[4,e.sent().blob()];case 2:return[2,e.sent()]}})})},i.prototype.detectFaces=function(n,i,r){return e(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return t=s.FormDataHelper.jsonToFormData(o({task:this.taskId,level:n,fileArray:i},void 0!==r?{face:r}:{})),[4,this.query("post","detectfaces",t)];case 1:return[2,e.sent().data.coordArray]}})})},i.prototype.removeFile=function(i){var r=this,o=new FormData;return new Promise(function(e,t){var n=r.sendRequest("delete","upload/"+r.taskId+"/"+i,o);n.onreadystatechange=function(){4==n.readyState&&(404!=n.status&&(400==n.status||500==n.status)?t():e({}))}})},i.prototype.next=function(e,t,n){var i=new FormData;return i.append("task",e),i.append("tool",t),i.append("worker",n),i.append("thumbnails","1"),this.query("post","task/next",i)},i.prototype.nextFile=function(e,t){return this.workerServer+"/thumbnails/"+e+"/"+t},i.prototype.info=function(){return this.query("get","info")},i.prototype.getStatus=function(n,i){return void 0===i&&(i=0),n=(n=void 0===n?null:n)||this.workerServer,new Promise(function(t,e){r.ajax({url:n+"/status.json",dataType:"json",success:function(e){t(e)},timeout:i,error:function(){e()}})})},i.prototype.getFilePreviewInfo=function(e,t,n,i){void 0===i&&(i=null),n=(n=void 0===n?150:n)||150;i="pdfrender/"+e+"/"+t.replace(".pdf","");return this.query("get",i)},i.prototype.saveToolConfig=function(e,t,n){e=s.FormDataHelper.jsonToFormData({tool:e,options:t});return this.userToken=n,this.query("post","tool/save",e,!1,!1,"service")},i.prototype.touchTask=function(e){return this.query("get","task/touch/"+e)},i);function i(e){this.taskId=null,this.tool=null,this.preWorker=null,this.serviceServer=t.Settings.get("service"),this.workerServer=null,this.downloadUrl="",this.apiVersion=l.API_VERSION,this.appVersion=l.APP_VERSION,this.token=null,this.encrypted=!1,this.encryptKey=null,Object.assign(this,e)}l.Api=n}.call(this,c(1))},function(e,t,n){"use strict";n.r(t);var i=n(35),r=(n.d(t,"BaseTransport",function(){return i.a}),n(67)),o=(n.d(t,"FetchTransport",function(){return r.a}),n(68));n.d(t,"XHRTransport",function(){return o.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(108),r=n(5),o=(a.prototype.getDsn=function(){return this._dsnObject},a.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},a.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},a.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},a.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},a.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},a.prototype.getRequestHeaders=function(e,t){var n=this._dsnObject,i=["Sentry sentry_version=7"];return i.push("sentry_client="+e+"/"+t),i.push("sentry_key="+n.user),n.pass&&i.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},a.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t,n=this._dsnObject,i=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(t in r.push("dsn="+n.toString()),e)"dsn"!==t&&("user"===t?e.user&&(e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email)&&r.push("email="+encodeURIComponent(e.user.email)):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t])));return r.length?i+"?"+r.join("&"):i},a.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},a.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},a.prototype._encodedAuth=function(){var e={sentry_key:this._dsnObject.user,sentry_version:"7"};return Object(r.f)(e)},a);function a(e){this.dsn=e,this._dsnObject=new i.a(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(0),o=n(6),r=n(33),a=n(3),s=n(30),l=n(23),c=n(40),u=(d.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Object(o.b)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Object(a.d)(e)},{event:e})},d.prototype.setupOnce=function(){var n=this;this._options.console&&Object(s.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._consoleBreadcrumb.apply(n,Object(i.e)(e))},type:"console"}),this._options.dom&&Object(s.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._domBreadcrumb.apply(n,Object(i.e)(e))},type:"dom"}),this._options.xhr&&Object(s.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._xhrBreadcrumb.apply(n,Object(i.e)(e))},type:"xhr"}),this._options.fetch&&Object(s.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._fetchBreadcrumb.apply(n,Object(i.e)(e))},type:"fetch"}),this._options.history&&Object(s.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._historyBreadcrumb.apply(n,Object(i.e)(e))},type:"history"})},d.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:r.a.fromString(e.level),message:Object(l.b)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(Object(l.b)(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}Object(o.b)().addBreadcrumb(t,{input:e.args,level:e.level})},d.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?Object(c.a)(e.event.target):Object(c.a)(e.event)}catch(e){t="<unknown>"}0!==t.length&&Object(o.b)().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name})},d.prototype._xhrBreadcrumb=function(e){var t,n,i,r;e.endTimestamp&&!e.xhr.__sentry_own_request__&&(t=(r=e.xhr.__sentry_xhr__||{}).method,n=r.url,i=r.status_code,r=r.body,Object(o.b)().addBreadcrumb({category:"xhr",data:{method:t,url:n,status_code:i},type:"http"},{xhr:e.xhr,input:r}))},d.prototype._fetchBreadcrumb=function(e){!e.endTimestamp||e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Object(o.b)().addBreadcrumb({category:"fetch",data:e.fetchData,level:r.a.Error,type:"http"},{data:e.error,input:e.args}):Object(o.b)().addBreadcrumb({category:"fetch",data:Object(i.a)(Object(i.a)({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response}))},d.prototype._historyBreadcrumb=function(e){var t=Object(a.e)(),n=e.from,e=e.to,t=Object(a.h)(t.location.href),i=Object(a.h)(n),r=Object(a.h)(e);i.path||(i=t),t.protocol===r.protocol&&t.host===r.host&&(e=r.relative),t.protocol===i.protocol&&t.host===i.host&&(n=i.relative),Object(o.b)().addBreadcrumb({category:"navigation",data:{from:n,to:e}})},d.id="Breadcrumbs",d);function d(e){this.name=d.id,this._options=Object(i.a)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(0),o=n(3),a=n(5),s=n(20),l=n(11),r=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],c=(u.prototype.setupOnce=function(){var e=Object(o.e)();this._options.setTimeout&&Object(a.c)(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Object(a.c)(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Object(a.c)(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&Object(a.c)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:r).forEach(this._wrapEventTarget.bind(this))},u.prototype._wrapTimeFunction=function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0];return e[0]=Object(l.c)(n,{mechanism:{data:{function:Object(s.a)(i)},handled:!0,type:"instrument"}}),i.apply(this,e)}},u.prototype._wrapRAF=function(t){return function(e){return t.call(this,Object(l.c)(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(s.a)(t)},handled:!0,type:"instrument"}}))}},u.prototype._wrapEventTarget=function(r){var e=Object(o.e)(),e=e[r]&&e[r].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(Object(a.c)(e,"addEventListener",function(i){return function(e,t,n){try{"function"==typeof t.handleEvent&&(t.handleEvent=Object(l.c)(t.handleEvent.bind(t),{mechanism:{data:{function:"handleEvent",handler:Object(s.a)(t),target:r},handled:!0,type:"instrument"}}))}catch(e){}return i.call(this,e,Object(l.c)(t,{mechanism:{data:{function:"addEventListener",handler:Object(s.a)(t),target:r},handled:!0,type:"instrument"}}),n)}}),Object(a.c)(e,"removeEventListener",function(o){return function(e,t,n){var i;try{var r=null==(i=t)?void 0:i.__sentry_wrapped__;r&&o.call(this,e,r,n)}catch(e){}return o.call(this,e,t,n)}}))},u.prototype._wrapXHR=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(function(n){n in i&&"function"==typeof i[n]&&Object(a.c)(i,n,function(e){var t={mechanism:{data:{function:n,handler:Object(s.a)(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(t.mechanism.data.handler=Object(s.a)(e.__sentry_original__)),Object(l.c)(e,t)})}),n.apply(this,e)}},u.id="TryCatch",u);function u(e){this.name=u.id,this._options=Object(i.a)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),a=n(6),o=n(33),r=n(12),s=n(30),l=n(2),c=n(3),u=n(22),d=n(11),p=(h.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(r.a.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(r.a.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},h.prototype._installGlobalOnErrorHandler=function(){var o=this;this._onErrorHandlerInstalled||(Object(s.a)({callback:function(e){var t=e.error,n=Object(a.b)(),i=n.getIntegration(h),r=t&&!0===t.__sentry_own_request__;!i||Object(d.b)()||r||(i=n.getClient(),r=Object(l.i)(t)?o._eventFromIncompleteOnError(e.msg,e.url,e.line,e.column):o._enhanceEventWithInitialFrame(Object(u.c)(t,void 0,{attachStacktrace:i&&i.getOptions().attachStacktrace,rejection:!1}),e.url,e.line,e.column),Object(c.a)(r,{handled:!1,type:"onerror"}),n.captureEvent(r,{originalException:t}))},type:"error"}),this._onErrorHandlerInstalled=!0)},h.prototype._installGlobalOnUnhandledRejectionHandler=function(){var r=this;this._onUnhandledRejectionHandlerInstalled||(Object(s.a)({callback:function(e){var t=e;try{"reason"in e?t=e.reason:"detail"in e&&"reason"in e.detail&&(t=e.detail.reason)}catch(e){}var e=Object(a.b)(),n=e.getIntegration(h),i=t&&!0===t.__sentry_own_request__;if(!n||Object(d.b)()||i)return!0;n=e.getClient(),i=Object(l.i)(t)?r._eventFromRejectionWithPrimitive(t):Object(u.c)(t,void 0,{attachStacktrace:n&&n.getOptions().attachStacktrace,rejection:!0});i.level=o.a.Error,Object(c.a)(i,{handled:!1,type:"onunhandledrejection"}),e.captureEvent(i,{originalException:t})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},h.prototype._eventFromIncompleteOnError=function(e,t,n,i){var r,e=Object(l.e)(e)?e.message:e,o=(Object(l.k)(e)&&(o=e.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i))&&(r=o[1],e=o[2]),{exception:{values:[{type:r||"Error",value:e}]}});return this._enhanceEventWithInitialFrame(o,t,n,i)},h.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},h.prototype._enhanceEventWithInitialFrame=function(e,t,n,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];i=isNaN(parseInt(i,10))?void 0:i,n=isNaN(parseInt(n,10))?void 0:n,t=Object(l.k)(t)&&0<t.length?t:Object(c.f)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:i,filename:t,function:"?",in_app:!0,lineno:n}),e},h.id="GlobalHandlers",h);function h(e){this.name=h.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Object(i.a)({onerror:!0,onunhandledrejection:!0},e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n(36),o=n(6),a=n(2),s=n(29),l=n(24),c=(u.prototype.setupOnce=function(){Object(i.b)(function(e,t){var n=Object(o.b)().getIntegration(u);return n?n._handler(e,t):e})},u.prototype._handler=function(e,t){return e.exception&&e.exception.values&&t&&Object(a.g)(t.originalException,Error)&&(t=this._walkErrorTree(t.originalException,this._key),e.exception.values=Object(r.e)(t,e.exception.values)),e},u.prototype._walkErrorTree=function(e,t,n){var i;return void 0===n&&(n=[]),!Object(a.g)(e[t],Error)||n.length+1>=this._limit?n:(i=Object(l.a)(e[t]),i=Object(s.c)(i),this._walkErrorTree(e[t],t,Object(r.e)([i],n)))},u.id="LinkedErrors",u);function u(e){void 0===e&&(e={}),this.name=u.id,this._key=e.key||"cause",this._limit=e.limit||5}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(0),i=n(36),a=n(6),t=n(3),s=Object(t.e)(),r=(l.prototype.setupOnce=function(){Object(i.b)(function(e){var t,n,i,r;return Object(a.b)().getIntegration(l)&&(s.navigator||s.location||s.document)?(t=(null==(t=e.request)?void 0:t.url)||(null==(t=s.location)?void 0:t.href),r=(s.document||{}).referrer,n=(s.navigator||{}).userAgent,i=Object(o.a)(Object(o.a)(Object(o.a)({},null==(i=e.request)?void 0:i.headers),r&&{Referer:r}),n&&{"User-Agent":n}),r=Object(o.a)(Object(o.a)({},t&&{url:t}),{headers:i}),Object(o.a)(Object(o.a)({},e),{request:r})):e})},l.id="UserAgent",l);function l(){this.name=l.id}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(6),r=n(12);function o(e,t){!0===t.debug&&r.a.enable();var n=Object(i.b)(),e=new e(t);n.bindClient(e)}},function(e,t,o){"use strict";!function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuth=void 0;var i=o(15);function r(e){var t=this;this.onLoginSucess=null,this.onLoginError=null,this.onRegisterSuccess=null,this.onRegisterError=null,this.loginSuccess=function(e){e.token&&(e.user.token=e.token),window.userModel=e.user,window.ilovepdfConfig&&(r.updateUserMenu(e.content),r.updateUser(e.user)),null===t.onLoginSucess||"function"!=typeof t.onLoginSucess&&"object"!=typeof t.onLoginSucess||t.onLoginSucess(e.user)},this.registerSuccess=function(e){r.updateUserMenu(e.content),r.updateUser(e.user),e.token&&(e.user.token=e.token),n(".user-menu__item--premium").remove(),r.sendGA_registered(t.runningFrom),"function"==typeof t.onRegisterSuccess&&t.onRegisterSuccess(e)},this.registerError=function(e){"function"==typeof t.onRegisterError&&t.onRegisterError(e)},Object.assign(this,e),this.userModel=new i.UserModel}r.initActions=function(){n(".logout").click(function(e){e.preventDefault(),i.UserModel.logout()})},r.sendGA_registered=function(e){window.ev("send","event","user","registered",e),window.ev("event","sign_up",{mode:e})},r.prototype.login=function(t){var n=this;(t=void 0===t?null:t)||this.extraLoginParams&&this.extraLoginParams.forEach(function(e){t.push(e)}),this.userModel.login(t).then(this.loginSuccess,function(e){return n.loginError(e.responseJSON)})},r.prototype.sendResetPasswordEmail=function(e){return this.userModel.sendResetPasswordEmail(e)},r.prototype.loginError=function(e){"function"==typeof this.onLoginError&&this.onLoginError(e)},r.updateUser=function(e){window.userModel=e,window.ilovepdfConfig&&(window.ilovepdfConfig.user=e),i.UserModel.updateUser(e),r.initActions()},r.updateUserMenu=function(e){var t,n=document.querySelector(".header .actions");n&&(t=n.querySelectorAll(":scope > a"),n.querySelector(".avatar")||(t.forEach(function(e){e.remove()}),n.innerHTML=e+n.innerHTML))},r.prototype.register=function(e){e=this.userModel.register(e);return e.then(this.registerSuccess,this.registerError),e},r.sendEventUserAuth=function(){var e=new CustomEvent("userAuth");window.dispatchEvent(e)},t.UserAuth=r}.call(this,o(1))},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.FormDataHelper=void 0,r.buildFormData=function(t,n,i){void 0===i&&(i=null),!n||"object"!=typeof n||n instanceof Date||n instanceof File?t.append(i,null==n?"":n):Object.keys(n).forEach(function(e){r.buildFormData(t,n[e],null!=i?i+"["+e+"]":e)})},r.jsonToFormData=function(e){var t=new FormData;return r.buildFormData(t,e),t},t.FormDataHelper=r},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},r=(Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxTemplate=void 0,s.load=function(o){return i(this,void 0,void 0,function(){var n,t,i,r;return a(this,function(e){return n=new XMLHttpRequest,i=t=!1,r=function(e){return!t&&!i&&200===e.status},n.open("GET",s.getLangBaseUrl()+"/"+o,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Accept","text/html"),n.ontimeout=function(){return t=!0},n.onerror=function(){return i=!0},[2,new Promise(function(e,t){n.onreadystatechange=function(){4===n.readyState&&(r(n)?e(n.responseText):t(n.response))},n.send()})]})})},s.getLangBaseUrl=function(){var e=window.lang;return"en-US"==e?"/"+s.BASE_URL:"/"+e+"/"+s.BASE_URL},s.BASE_URL="templates",s);function s(){}t.AjaxTemplate=r},function(e,n,o){"use strict";!function(i){Object.defineProperty(n,"__esModule",{value:!0}),n.Limits=n.REASON=void 0;var s,c=o(15),l=o(8),r=o(18),e=((e=s=n.REASON||(n.REASON={})).ERROR_FEATURE="this feature is for premium only",e.ERROR_SIZE="file size too big",e.ERROR_FILES="too much files",e.ERROR_EXTENSION="invalid filetype",e.ERROR_PAGES="too much pages",e.ERROR_PXSIZE="file pixels too big",t.prototype.getTool=function(){return this.concreteTool||(this.tool==this.subtool?this.tool:-1!==this.tool.indexOf("image")&&-1===this.subtool.indexOf("image")?this.tool.replace("image",this.subtool):this.subtool)},t.prototype.addIgnoredFile=function(e){this.ignored.push(e)},t.prototype.getIgnoredFiles=function(){return this.ignored},t.prototype.getLimitedFiles=function(){return this.files.limited},t.prototype.getLimitedFilenames=function(){var t=this,e=this.getLimitedFiles(),n=[];return e.forEach(function(e){var e=t.files.getFile(e);e&&(e=e.name.substring(0,20)+(20<e.name.length?"...":""),n.push(e))}),n},t.prototype.isIgnored=function(e){return-1!=this.ignored.indexOf(e)},t.prototype.isLimited=function(e){return-1!==this.files.limited.indexOf(e)},t.prototype.setFileLimits=function(){var n,i,r,o,a=this,e=(this.fileLimits=window.ilovepdfConfig.fileLimits,c.UserModel.get());e&&1==e.premium&&(this.fileLimits=e.limits),this.files.resetLimitedFiles(),this.checkHasLimits()&&(r=i=n=0,o=!1,this.files.files.forEach(function(e){var t;!1===o?(n++,e.size&&(i+=parseInt(e.size)),e.file&&e.file.numPages&&(r+=e.file.numPages),t=e.width*e.height,null!==a.checkFileLimits(i,n,r,t)&&(o=!0,a.files.limitFile(e.id))):a.files.limitFile(e.id)}))},t.prototype.checkFileLimits=function(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),e=(e=void 0===e?null:e)||this.files.getFileSizeNotIgnored(),t=t||this.files.countNotIgnored(),n=n||this.files.getFilePagesNotIgnored(),i=i||this.files.getFilePxsizeNotIgnored(),this.fileLimits=window.ilovepdfConfig.fileLimits;var r,o,a,s,l=c.UserModel.get();if(l&&1==l.premium&&(this.fileLimits=l.limits),this.checkHasLimits()){if(null!==(r=this.checkSizeLimit(e))&&this.hasSurpasedLimits(r))return r;if(null!==(o=this.checkPagesLimit(n))&&this.hasSurpasedLimits(o))return o;if(null!==(a=this.checkFilesLimit(t))&&this.hasSurpasedLimits(a))return a;if(null!==(s=this.checkPxsizeLimit(i))&&this.hasSurpasedLimits(s))return s}return r||o||a||s||null},t.prototype.resetEventSent=function(){this.eventSent=!1},t.prototype.checkHasLimits=function(e){return void 0===e&&(e=null),this.fileLimits[this.concreteTool]?null==e||this.fileLimits[this.concreteTool].hasOwnProperty(e):null},t.prototype.checkSizeLimit=function(e){return(e=(e=void 0===e?null:e)||this.files.getFileSizeNotIgnored())>1024*parseInt(this.fileLimits[this.concreteTool].mb)*1024?(e=Math.floor(e/1024/1024),!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev("sendOnce","event","limits","filesize-exceeded",this.concreteTool,e),window.ev("eventOnce","limit",{reason:"filesize",tool:this.concreteTool,quantity:e})),s.ERROR_SIZE):null},t.prototype.checkFilesLimit=function(e){return(e=(e=void 0===e?null:e)||this.files.countNotIgnored())>this.fileLimits[this.concreteTool].files?(!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev)&&(window.ev("sendOnce","event","limits","filenumber-exceeded",this.concreteTool,e),window.ev("eventOnce","limit",{reason:"filenumber",tool:this.concreteTool,quantity:e})),s.ERROR_FILES):null},t.prototype.checkPagesLimit=function(e){return e=(e=void 0===e?null:e)||this.files.getFilePagesNotIgnored(),this.fileLimits[this.concreteTool].pages&&e>this.fileLimits[this.concreteTool].pages?(!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev("sendOnce","event","limits","pages-exceeded",this.concreteTool,e),window.ev("eventOnce","limit",{reason:"pages",tool:this.concreteTool,quantity:e})),s.ERROR_PAGES):null},t.prototype.checkPxsizeLimit=function(e){return e=e||this.files.getFilePxsizeNotIgnored(),this.fileLimits[this.concreteTool].pxsize&&e>this.fileLimits[this.concreteTool].pxsize?(!0!==this.eventSent&&0==i(".download").length&&(this.eventSent=!0,window.ev("sendOnce","event","limits","pxsize-exceeded",this.concreteTool,e),window.ev("eventOnce","limit",{reason:"pxsize",tool:this.concreteTool,quantity:e})),s.ERROR_PXSIZE):null},t.prototype.findNextLevelLimit=function(e,t,n){for(var i in this.allFileLimits)if(this.allFileLimits.hasOwnProperty(i)){var r=this.allFileLimits[i];if(r.hasOwnProperty(e)){r=r[e];if(r.hasOwnProperty(t)&&r[t]>=n)return i}}return!1},t.prototype.getPremiumLimitByTool=function(e,t){return this.allFileLimits.premium_limits[e][t]},t.prototype.getLevelLimit=function(e,t,n){return 0==n&&(n=this.LEVEL_PREMIUM),this.allFileLimits[n][e][t]},t.prototype.makeErrorData=function(e,t,n,i,r){var o=this;function a(e,t){return 1==e?"files"==t?l.Lang.t("1 file"):l.Lang.t("1 mb"):("mb"==t&&1e3<=e&&(e/=1e3,t="Gb"),l.Lang.t("${limit} "+t.toLowerCase(),{limit:e}))}function s(e){return e==o.LEVEL_REGISTERED?l.Lang.t("registeredLevel"):e==o.LEVEL_PREMIUM?l.Lang.t("premiumLevel"):l.Lang.t("publicLevel")}return{currentLimit:a(t,e),currentLevel:s(n).ucFirst(),nextLimit:a(i,e),nextLevel:s(r).ucFirst()}},t.prototype.getLimitData=function(e,t){return 1==e?"files"==t?l.Lang.t("1 file"):"pages"==t?l.Lang.t("1 page"):l.Lang.t("1 mb"):("mb"==t&&1e3<=e&&(e/=1e3,t="Gb"),l.Lang.t("${limit} "+t.toLowerCase(),{limit:e}))},t.prototype.limitErrorText=function(e){return l.Lang.t("limitTaskMsg",e)},t.prototype.setLimit=function(e){this.err=e;var t,n=this.getNextLimit(e);return 0==n.nextLevel?(t=this.getPremiumLimitByTool(this.concreteTool,n.name),0==i("#superlimit").length&&(e=r.Tools.modalView({id:"superlimit",title:"",content:""}),(e=i(e)).find(".modal-dialog").addClass("modal-dialog-centered"),e.appendTo(i("body"))),setTimeout(function(){"files"==n.name?(i("#superlimit .modal-title").html(l.Lang.t("File number exceeded")),i("#superlimit .modal-body").html(l.Lang.t("Sorry, we are not ready for that.")+"<br>\n                         \x3c!--"+l.Lang.t("limitFiles",{files:t})+"<br>--\x3e\n                         "+l.Lang.t("superlimitWhoa")+"<br>\n                         "+l.Lang.t("superlimitDownload"))):(i("#superlimit .modal-title").html(l.Lang.t("File size exceeded")),i("#superlimit .modal-body").html(l.Lang.t("Sorry, we are not ready for that.")+"<br>\n                         \x3c!--"+l.Lang.t("limitMb",{mb:t})+"<br>--\x3e\n                         "+l.Lang.t("superlimitWhoa")+"<br>\n                         "+l.Lang.t("superlimitDownload"))),i("#superlimit").modal("toggle")},500),null):n.nextLevel==this.LEVEL_PUBLIC?null:{limitName:n.name,limitValue:n.currentValue,nextLevelLimit:n.nextLevel,nextLimit:n.nextValue}},t.prototype.getCurrentLimitsLevel=function(){var e=this.LEVEL_PUBLIC;return e=c.UserModel.isUser()&&(e=this.LEVEL_REGISTERED,c.UserModel.isPremium())?this.LEVEL_PREMIUM:e},t.prototype.getLimitTexts=function(){var e,t,n=this.checkFileLimits(),i=[this.fileLimits[this.getTool()],this.allFileLimits.premium_limits[this.getTool()]],r=i[0],o=i[1],a=null;switch(n){case s.ERROR_FILES:e=l.Lang.t("limitFree")+" "+l.Lang.t("limitFiles",{n:r.files}),t=l.Lang.t("limitPremium")+" "+l.Lang.t("limitFiles",{n:o.files}),a="files";break;case s.ERROR_SIZE:e=l.Lang.t("limitFree")+" "+l.Lang.t("limitSize",{n:r.mb}),t=l.Lang.t("limitPremium")+" "+l.Lang.t("limitSize",{n:o.mb}),a="size";break;case s.ERROR_PAGES:e=l.Lang.t("limitFree")+" "+l.Lang.t("limitPages",{n:r.pages}),t=l.Lang.t("limitPremium")+" "+l.Lang.t("limitPages",{n:o.pages}),a="pages";break;case s.ERROR_PXSIZE:e=l.Lang.t("limitFree")+" "+l.Lang.t("limitPxsize",{n:r.pxsize}),t=l.Lang.t("limitPremium")+" "+l.Lang.t("limitPxsize",{n:o.pxsize}),a="pxsize"}return{current:e,premium:t,limit:a}},t.prototype.getNextLimit=function(e,t){var n,i;switch(null==(t=void 0===t?null:t)&&(t=this.getTool()),e){case s.ERROR_SIZE:n="mb",i=this.files.getFileSizeNotIgnored()/1024/1024;break;case s.ERROR_FILES:n="files",i=this.files.countNotIgnored();break;case s.ERROR_PAGES:n="pages",i=this.files.getFilePagesNotIgnored();break;case s.ERROR_PXSIZE:n="pxsize",i=this.files.getFilePxsizeNotIgnored()}return{name:n,currentValue:i,nextValue:0!=(e=this.findNextLevelLimit(t,n,i))&&this.getLevelLimit(t,n,e),nextLevel:e}},t.prototype.getNextLevelLimit=function(e){return this.getNextLimit(e).nextLevel},t.prototype.hasSurpasedLimits=function(e){return!1===this.getNextLevelLimit(e)},t.prototype.sendEventLimitsChanged=function(){var e=new CustomEvent("limitsChanged");window.dispatchEvent(e)},t.prototype.canContinueWithoutPremium=function(){for(var e=!0,t=0;t<this.minFiles;t++)1==this.files.files[t].limited&&(e=!1);return e},t);function t(e){this.minFiles=1,this.LEVEL_PREMIUM="premium_limits",this.LEVEL_REGISTERED="registered_limits",this.LEVEL_PUBLIC="limits",this.err=null,this.files=null,this.fileLimits=null,this.allFileLimits=null,this.tool=null,this.subtool=null,this.ignored=[],this.userLevel="public",Object.assign(this,e),this.concreteTool=this.getTool()}n.Limits=e}.call(this,o(1))},function(e,t,n){"use strict";var i,r;n.d(t,"a",function(){return i}),(n=i=i||{}).Unknown="unknown",n.Skipped="skipped",n.Success="success",n.RateLimit="rate_limit",n.Invalid="invalid",n.Failed="failed",(r=i=i||{}).fromHttpCode=function(e){return 200<=e&&e<300?r.Success:429===e?r.RateLimit:400<=e&&e<500?r.Invalid:500<=e?r.Failed:r.Unknown}},function(e,u,d){"use strict";!function(t){var i,e,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(u,"__esModule",{value:!0}),u.TemporaryDialog=void 0,d(7)),o=d(25),a=d(79),s=(e=a.Dialog,n(l,e),l);function l(){return null!==e&&e.apply(this,arguments)||this}function c(e){var n=this;void 0===e&&(e={}),this.isShown=!1,this.setTemplate=function(e,t){return void 0===t&&(t=null),n.contentBuilderFn=null,n.template=e,n.onTemplateRenderFn=t,n},this.show=function(){var e;if(!n.isShown)return t(".modal:visible").removeAttr("tabindex"),(e=new s(n.dialogProps)).addEventListener("closed",function(){n.currentDialog=null,n.dispatchEvent(new r.IloveEvent("closed"))}),e.addEventListener("hidden",function(){n.isShown=!1,e.destroy(),n.dispatchEvent(new r.IloveEvent("hidden"))}),e.addEventListener("shown",function(){n.dispatchEvent(new r.IloveEvent("shown"))}),n.fillDialog(e),e.show(),n.isShown=!0,n.currentDialog=e},this.close=function(){n.currentDialog&&(n.currentDialog.close(),n.currentDialog=null)},this.setContentBuilder=function(e){return n.template=null,n.onTemplateRenderFn=null,n.contentBuilderFn=e,n},this.eventEmitter=new o.ILoveEventEmitter,this.dialogProps=e}u.TemporaryDialog=s,c.prototype.fillDialog=function(e){if(this.contentBuilderFn)e.setContent(this.contentBuilderFn());else{if(!this.template)throw"Unknown DisposableDialog creation mechanism";var t;this.template.content?(t=this.template.content.cloneNode(!0),e.domRoot.appendChild(t)):(this.template,e.domRoot.innerHTML=this.template.innerHTML),this.onTemplateRenderFn&&this.onTemplateRenderFn(e.domRoot)}},c.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},c.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},Object.defineProperty(c.prototype,"domRoot",{get:function(){var e;return null==(e=this.currentDialog)?void 0:e.domRoot},enumerable:!1,configurable:!0}),u.default=c}.call(this,d(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkPreloadIsNeeded=t.get_browser=t.isSafari=t.isIE11=t.isEdgeBrowser=void 0;var i=n(77);function r(e){return void 0===e&&(e=i.getUserAgent()),/^((?!chrome|android|crios).)*safari/i.test(e)}function o(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}t.isEdgeBrowser=function(e){return void 0===e&&(e=i.getUserAgent()),/Edge/i.test(e)},t.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode},t.isSafari=r,t.get_browser=o,t.checkPreloadIsNeeded=function(){var e;return!(!i.isIos()&&!r())||"Chrome"==(e=o()).name&&e.version<=73||"Firefox"==e.name&&e.version<=94||"Edge"==e.name&&e.version<=18||"Yandex"==e.name}},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractPaymentState=void 0,n(17)),c=n(78),h=n(7),n=(r=l.StateBase,o(u,r),u.prototype.initAbstractPayment=function(n){var i;return a(this,void 0,void 0,function(){var t=this;return s(this,function(e){switch(e.label){case 0:if(this.ctx.canGoToAPreviousState()&&this.goToPreviousStateButtonIsVisible()?(this.dispatchEvent(new h.IloveEvent("disableContentAbandonment")),this.dialogCloseBtn&&(this.dialogCloseBtn.style.display="none")):this.dialogCloseBtn&&(this.dialogCloseBtn.style.display=""),this.abstractPaymentInited)return[2];if(this.userPayment=n.userPayment||new c.UserPayment,this.abstractPaymentInited=!0,Object.assign(this,n),"gui"===(null==(i=this.paymentInterval)?void 0:i.type))switch(this.paymentInterval.gui){case"radio":break;case"boxes":this.initPaymentIntervalSelectorButtons();break;default:throw"Unknown way to determine paymentInterval '"+this.paymentInterval.type+"'"}return[4,this.initUserPayment(this.userPayment).then(function(){t.userPayment.addEventListener("UserPayment:ActionButtonClicked",t._abstractOnPayButtonClicked),t.userPayment.addEventListener("UserPayment:BeforeExternalAction",function(e){return t._onExternalPaymentAction("UserPayment:BeforeExternalAction",e)}),t.userPayment.addEventListener("UserPayment:AfterExternalAction",function(e){return t._onExternalPaymentAction("UserPayment:AfterExternalAction",e)})})];case 1:return e.sent(),[2]}})})},u.prototype.initAbstractCard=function(n){return a(this,void 0,void 0,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return this.abstractPaymentInited=!0,Object.assign(this,n),this.userPayment=n.userPayment||new c.UserPayment,[4,this.initUserPayment(this.userPayment).then(function(){t.userPayment.addEventListener("UserPayment:ActionButtonClicked",t._abstractOnPayButtonClicked)})];case 1:return e.sent(),[2]}})})},Object.defineProperty(u.prototype,"stripeViewParams",{get:function(){return{paymentButtonText:this.paymentProviderProps.find(function(e){return"stripe"===e.name}).paymentButtonText,currentPaymentMethod:this.currentPaymentMethod}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"paypalViewParams",{get:function(){function e(){return!(n.ctx.isTrialEnabledForThisTool()&&n.ctx.canUserDoTrial())}var t,n=this;this.paymentProviderProps.find(function(e){return"paypal"===e.name});switch(this.paymentAction){case"become_premium":case"subsc_update":t={actionName:"become_premium"===this.paymentAction?"PaySubscription":"UpdateSubscription",actionParams:{subscriptionInterval:function(){return n.selectedPaymentInterval},numUsers:function(){return n.numUsers?n.numUsers():n.paymentNumUsersDefault},numDigitalSignatures:function(){return n.numSignatures?n.numSignatures():void 0},disableTrial:e}};break;case"pay_package":t={actionName:"PayPackage",actionParams:{packageName:function(){return n.package.name},quantity:function(){return n.package.qty},disableTrial:e}};break;default:throw"Unknown paypal paymentAction '"+this.paymentAction+"'"}return{action:t}},enumerable:!1,configurable:!0}),u.prototype._executePaymentAction=function(e,t){var n=this,i=this.selectedPaymentProvider,r=this.paymentAction,o=this.paymentInterval?this.selectedPaymentInterval:void 0,a=this.numUsers?this.numUsers():this.paymentNumUsersDefault,s=(this.showLoadingScreen(),this.userPayment.disableActionButton(i),this.dispatchEvent(new h.IloveEvent("disableContentAbandonment")),!(this.ctx.isTrialEnabledForThisTool()&&this.ctx.canUserDoTrial())),l=this.couponCode?this.couponCode():void 0;switch(r){case"become_premium":u=this.userPayment.paySubscription({numUsers:a,provider:i,subscriptionInterval:o,disableTrial:s,couponCode:l});break;case"subsc_update":var c=this.numSignatures(),u=this.userPayment.updateSubscription({numSignatures:c,numUsers:a,provider:i,subscriptionInterval:o,disableTrial:s,couponCode:l});break;case"pay_package":var c=this.package.name,d=this.package.qty;u=this.userPayment.payPackage({packageName:c,packageQuantity:d,provider:i,disableTrial:s});break;case"update_card":c=this.userPayment.stripeService.view.card;u=this.userPayment.updateCard({provider:i,element:c})}u.then(function(e){return n._abstractOnPaymentSuccess(i,e)}),u.catch(function(e){return n._abstractOnPaymentFailed(i,e)});function p(e){n.clearLoadingScreen(),n.userPayment.enableActionButton(i),n.dispatchEvent(new h.IloveEvent("unsetContentAbandonment"))}return u.then(p,p),u},u.prototype.initUserPayment=function(i){var r;return a(this,void 0,void 0,function(){var t,n;return s(this,function(e){switch(e.label){case 0:return(t=this.initializedPaymentProviders).includes("stripe")?[4,i.mountView("stripe",this.stripeViewMountPoint,this.stripeViewParams)]:[3,2];case 1:e.sent(),e.label=2;case 2:return t.includes("paypal")?[4,i.mountView("paypal",this.paypalViewMountPoint,this.paypalViewParams)]:[3,4];case 3:e.sent(),e.label=4;case 4:return n=null!=(r=null==(r=this.currentPaymentMethod)?void 0:r.provider)?r:this.DEFAULT_SELECTED_PROVIDER_BTN,this.initPaymentProviderSelectorButtons(),this.clickProviderButton(n),[2]}})})},Object.defineProperty(u.prototype,"initializedPaymentProviders",{get:function(){return this.paymentProviderProps.map(function(e){return e.name})},enumerable:!1,configurable:!0}),u.prototype.initPaymentIntervalSelectorButtons=function(){var e=this.domStateRoot.querySelectorAll(".payment__interval-selector__select-box"),t=function(){e.forEach(function(e){return e.setAttribute("data-selected","false")})};e.forEach(function(e){return e.addEventListener("click",function(e){return e=e.currentTarget,t(),void e.setAttribute("data-selected","true")})})},u.prototype.clickProviderButton=function(t){var e=this,n=this.domRoot,i=(n.querySelector(".payment__provider-views"),n.querySelector(".payment__provider-selector")),n=(n.querySelectorAll(".payment__provider-selector .payment__provider-selector__item"),Array.from(i.querySelectorAll(".payment__provider-selector__item"))),i=(n.forEach(function(e){return e.setAttribute("data-checked","false")}),n.find(function(e){return e.dataset.value===t}));i.setAttribute("data-checked","true");n=i.getAttribute("data-value");e.domRoot.querySelectorAll(".payment__provider-views .payment__provider-views__item").forEach(function(e){return e.classList.remove("payment__provider-views__item--appeared")}),(n=e.domRoot.querySelector('.payment__provider-views .payment__provider-views__item[data-provider-name="'+n+'"]'))&&n.classList.add("payment__provider-views__item--appeared")},u.prototype.initPaymentProviderSelectorButtons=function(){var n=this,e=this.domRoot,t=e.querySelector(".payment__provider-selector").querySelectorAll(".payment__provider-selector__item"),e=e.querySelectorAll(".payment__provider-selector .payment__provider-selector__item"),i=(t.forEach(function(t){t.addEventListener("click",function(e){n.clickProviderButton(t.dataset.value)})}),this.initializedPaymentProviders);e.forEach(function(e){var t=e.getAttribute("data-value");if(!t)throw"Provider selector button is missing data-value attribute";i.includes(t)||(e.style.display="none")})},Object.defineProperty(u.prototype,"stripeViewMountPoint",{get:function(){var e=this.domRoot.querySelector(".payment__stripe-view");if(e)return e;throw"Mountpoint for Stripe view not found"},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"paypalViewMountPoint",{get:function(){var e=this.domRoot.querySelector(".payment__paypal-view");if(e)return e;throw"Mountpoint for Paypal view not found"},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selectedPaymentProvider",{get:function(){return 1==this.paymentProviderProps.length?this.paymentProviderProps[0].name:this.domRoot.querySelector(".payment__provider-selector .payment__provider-selector__item[data-checked='true']").getAttribute("data-value")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selectedPaymentInterval",{get:function(){if("gui"===this.paymentInterval.type){if("boxes"===this.paymentInterval.gui)return this.selected_paymentInterval_boxes;if("radio"===this.paymentInterval.gui)return this.selected_paymentInterval_radio}else if("predefined"===this.paymentInterval.type)return this.paymentInterval.value;throw"Unknown way to determine paymentInterval '"+this.paymentInterval.type+"'"},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selected_paymentInterval_radio",{get:function(){var e=Array.from(this.domRoot.querySelectorAll(".payment__interval-selector [name='paymentInterval']"));if(0===e.length)throw"Radio buttons for payment interval not found";for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"selected_paymentInterval_boxes",{get:function(){var e=this.domStateRoot.querySelector(".payment__interval-selector__select-box[data-selected='true']");if(e)return e.getAttribute("data-value");throw"No selected interval box found"},enumerable:!1,configurable:!0}),u);function u(){var n=null!==r&&r.apply(this,arguments)||this;return n.abstractPaymentInited=!1,n.paymentNumUsersDefault=1,n.DEFAULT_SELECTED_PROVIDER_BTN="stripe",n._onExternalPaymentAction=function(e,t){t=t.detail;"UserPayment:AfterExternalAction"===e&&n._onPaymentSuccess(t.provider,t)},n._abstractOnPayButtonClicked=function(e){n._executePaymentAction("payButton",e)},n._abstractOnPaymentSuccess=function(e,t){n._onPaymentSuccess(e,t)},n._abstractOnPaymentFailed=function(e,t){n.userPayment.notifyPaymentError(e,t,n.paymentAction),n._onPaymentFailed(e,t)},n}t.AbstractPaymentState=n},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){e.exports=function(e){var t;return e.webpackPolyfill||((t=Object.create(e)).children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1),t}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i,t=n(0),r=n(28),o=n(3),a=n(45),s=n(14),n=n(35),l=Object(o.e)(),c=(i=n.a,Object(t.b)(u,i),u.prototype.sendEvent=function(e){return this._sendRequest(Object(r.a)(e,this._api),e)},u.prototype.sendSession=function(e){return this._sendRequest(Object(r.b)(e,this._api),e)},u.prototype._sendRequest=function(r,e){var t,o=this;return this._isRateLimited(r.type)?Promise.reject({event:e,type:r.type,reason:"Transport locked till "+this._disabledUntil(r.type)+" due to too many requests.",status:429}):(t={body:r.body,method:"POST",referrerPolicy:Object(a.d)()?"origin":""},void 0!==this.options.fetchParameters&&Object.assign(t,this.options.fetchParameters),void 0!==this.options.headers&&(t.headers=this.options.headers),this._buffer.add(new s.a(function(n,i){l.fetch(r.url,t).then(function(e){var t={"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")};o._handleResponse({requestType:r.type,response:e,headers:t,resolve:n,reject:i})}).catch(i)})))},u);function u(){return null!==i&&i.apply(this,arguments)||this}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i,t=n(0),r=n(28),a=n(14),n=n(35),o=(i=n.a,Object(t.b)(s,i),s.prototype.sendEvent=function(e){return this._sendRequest(Object(r.a)(e,this._api),e)},s.prototype.sendSession=function(e){return this._sendRequest(Object(r.b)(e,this._api),e)},s.prototype._sendRequest=function(r,e){var o=this;return this._isRateLimited(r.type)?Promise.reject({event:e,type:r.type,reason:"Transport locked till "+this._disabledUntil(r.type)+" due to too many requests.",status:429}):this._buffer.add(new a.a(function(t,n){var e,i=new XMLHttpRequest;for(e in i.onreadystatechange=function(){var e;4===i.readyState&&(e={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")},o._handleResponse({requestType:r.type,response:i,headers:e,resolve:t,reject:n}))},i.open("POST",r.url),o.options.headers)o.options.headers.hasOwnProperty(e)&&i.setRequestHeader(e,o.options.headers[e]);i.send(r.body)}))},s);function s(){return null!==i&&i.apply(this,arguments)||this}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(12),r=n(21),o=n(42),a=(s.prototype.eventFromException=function(e,t){throw new r.a("Backend has to implement `eventFromException` method")},s.prototype.eventFromMessage=function(e,t,n){throw new r.a("Backend has to implement `eventFromMessage` method")},s.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(e){i.a.error("Error while sending event: "+e)})},s.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,function(e){i.a.error("Error while sending session: "+e)}):i.a.warn("Dropping session because custom transport doesn't implement sendSession")},s.prototype.getTransport=function(){return this._transport},s.prototype._setupTransport=function(){return new o.a},s);function s(e){this._options=e,this._options.dsn||i.a.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var h=n(0),a=n(36),f=n(80),i=n(108),s=n(2),l=n(12),c=n(14),u=n(3),d=n(107),r=n(5),p=n(23),m=n(21),g=n(6),v=[];function o(e){var t,n,i,r,o={};return i=(e=e).defaultIntegrations&&Object(h.e)(e.defaultIntegrations)||[],e=e.integrations,r=[],Array.isArray(e)?(t=e.map(function(e){return e.name}),n=[],i.forEach(function(e){-1===t.indexOf(e.name)&&-1===n.indexOf(e.name)&&(r.push(e),n.push(e.name))}),e.forEach(function(e){-1===n.indexOf(e.name)&&(r.push(e),n.push(e.name))})):r="function"==typeof e?(r=e(i),Array.isArray(r)?r:[r]):Object(h.e)(i),-1!==(e=r.map(function(e){return e.name})).indexOf("Debug")&&r.push.apply(r,Object(h.e)(r.splice(e.indexOf("Debug"),1))),r.forEach(function(e){o[e.name]=e,e=e,-1===v.indexOf(e.name)&&(e.setupOnce(a.b,g.b),v.push(e.name),l.a.log("Integration installed: "+e.name))}),o}_.prototype.captureException=function(e,t,n){var i=this,r=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then(function(e){return i._captureEvent(e,t,n)}).then(function(e){r=e})),r},_.prototype.captureMessage=function(e,t,n,i){var r=this,o=n&&n.event_id,t=Object(s.i)(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(t.then(function(e){return r._captureEvent(e,n,i)}).then(function(e){o=e})),o},_.prototype.captureEvent=function(e,t,n){var i=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then(function(e){i=e})),i},_.prototype.captureSession=function(e){e.release?this._sendSession(e):l.a.warn("Discarded session because of missing release")},_.prototype.getDsn=function(){return this._dsn},_.prototype.getOptions=function(){return this._options},_.prototype.flush=function(e){var n=this;return this._isClientProcessing(e).then(function(t){return n._getBackend().getTransport().close(e).then(function(e){return t&&e})})},_.prototype.close=function(e){var t=this;return this.flush(e).then(function(e){return t.getOptions().enabled=!1,e})},_.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=o(this._options))},_.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return l.a.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},_.prototype._updateSessionFromEvent=function(e,t){var n,i,r,o=!1,a=!1,s=t.exception&&t.exception.values;if(s){a=!0;try{for(var l=Object(h.f)(s),c=l.next();!c.done;c=l.next()){var u=c.value.mechanism;if(u&&!1===u.handled){o=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}s=t.user;if(!e.userAgent){var d,p=t.request?t.request.headers:{};for(d in p)if("user-agent"===d.toLowerCase()){r=p[d];break}}e.update(Object(h.a)(Object(h.a)({},o&&{status:f.a.Crashed}),{user:s,userAgent:r,errors:e.errors+Number(a||o)}))},_.prototype._sendSession=function(e){this._getBackend().sendSession(e)},_.prototype._isClientProcessing=function(i){var r=this;return new c.a(function(e){var t=0,n=setInterval(function(){0==r._processing?(clearInterval(n),e(!0)):(t+=1,i&&i<=t&&(clearInterval(n),e(!1)))},1)})},_.prototype._getBackend=function(){return this._backend},_.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},_.prototype._prepareEvent=function(e,t,n){var i=this,r=this.getOptions().normalizeDepth,o=void 0===r?3:r,r=Object(h.a)(Object(h.a)({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:Object(u.i)()),timestamp:e.timestamp||Object(d.a)()}),e=(this._applyClientOptions(r),this._applyIntegrationsMetadata(r),t),t=(n&&n.captureContext&&(e=a.a.clone(e).update(n.captureContext)),c.a.resolve(r));return(t=e?e.applyToEvent(r,n):t).then(function(e){return"number"==typeof o&&0<o?i._normalizeEvent(e,o):e})},_.prototype._normalizeEvent=function(e,t){var n;return e?(n=Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return Object(h.a)(Object(h.a)({},e),e.data&&{data:Object(r.d)(e.data,t)})})}),e.user&&{user:Object(r.d)(e.user,t)}),e.contexts&&{contexts:Object(r.d)(e.contexts,t)}),e.extra&&{extra:Object(r.d)(e.extra,t)}),e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n):null},_.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,i=t.release,r=t.dist,o=t.maxValueLength,o=void 0===o?250:o,t=("environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==r&&(e.dist=r),e.message&&(e.message=Object(p.d)(e.message,o)),e.exception&&e.exception.values&&e.exception.values[0]),n=(t&&t.value&&(t.value=Object(p.d)(t.value,o)),e.request);n&&n.url&&(n.url=Object(p.d)(n.url,o))},_.prototype._applyIntegrationsMetadata=function(e){var e=e.sdk,t=Object.keys(this._integrations);e&&0<t.length&&(e.integrations=t)},_.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},_.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then(function(e){return e.event_id},function(e){l.a.error(e)})},_.prototype._processEvent=function(e,t,n){var i,r=this,o=this.getOptions(),a=o.beforeSend,o=o.sampleRate;return this._isEnabled()?!(i="transaction"===e.type)&&"number"==typeof o&&Math.random()>o?c.a.reject(new m.a("Discarding event because it's not included in the random sample (sampling rate = "+o+")")):this._prepareEvent(e,n,t).then(function(e){if(null===e)throw new m.a("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||i||!a)return e;e=a(e,t);if(void 0===e)throw new m.a("`beforeSend` method has to return `null` or a valid event.");return Object(s.m)(e)?e.then(function(e){return e},function(e){throw new m.a("beforeSend rejected with "+e)}):e}).then(function(e){if(null===e)throw new m.a("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!i&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e}).then(null,function(e){if(e instanceof m.a)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new m.a("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}):c.a.reject(new m.a("SDK not enabled, will not send event."))},_.prototype._process=function(e){var t=this;this._processing+=1,e.then(function(e){return--t._processing,e},function(e){return--t._processing,e})};var y=_;function _(e,t){this._integrations={},this._processing=0,this._backend=new e(t),(this._options=t).dsn&&(this._dsn=new i.a(t.dsn))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});r.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},r.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}};var i=r;function r(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.PremiumContext=void 0,n(8)),p=n(60),a=n(46),s=n(119),l=n(120),c=n(122),u=n(124),n=(r=a.ContextBase,o(h,r),h.prototype.initAllFeaturesTooltip=function(e){if(!this.tooltipRoot){if(this.tooltipRoot=e.querySelector(".new-premium__all-features-tooltip"),!this.tooltipRoot)throw"'All features' dom element not found";e=e.querySelector(".new-premium__all-features-tooltip__html-template");if(!e)throw"htmlTemplate not found for 'All features' tooltip";window.tippy(this.tooltipRoot,{allowHTML:!0,theme:"light new-premium-all-features-tooltip",content:e.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0})}},h.prototype.initOCRTooltip=function(e){if(!this.tooltipRoot_OCR){if(this.tooltipRoot_OCR=e.querySelector(".new-premium__ocr-tooltip"),!this.tooltipRoot_OCR)throw"'OCR' dom element not found";e=e.querySelector(".new-premium__ocr-features-tooltip__html-template");if(!e)throw"htmlTemplate not found for 'OCR' tooltip";window.tippy(this.tooltipRoot_OCR,{allowHTML:!0,theme:"light new-premium__ocr-tooltip",content:e.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0})}},h.prototype.updateTitleText=function(e){var t=e.querySelector(".dialog__title");if(!t)throw"'Title' element not found";var n=this.isTrialEnabledForThisTool()&&this.canUserDoTrial();switch(this.userType){case"guest":case"user":return void(t.innerHTML=n?this.getTranslation(e,"title_canTrial"):this.getTranslation(e,"title_cannotTrial"));case"premium":return;default:throw"Unhandled userType '"+this.userType+"' for updateTitleText"}},h.prototype.updateTriggerReasonText=function(e){var t,n,i=e.querySelector(".new-premium__trigger-reason_sub1"),r=e.querySelector(".new-premium__trigger-reason_sub2");if(!i)throw"'Trigger Reason subtitle1' element not found";if(!r)throw"'Trigger Reason subtitle2' element not found";var o,a,s=null!=(n=this.tool)?n:null==(n=this.limits)?void 0:n.tool,l=null==(n=window.ilovepdfConfig)?void 0:n.subtool,c=!1;switch(this.triggerReason){case p.REASON.ERROR_FEATURE:var u="triggerReason_errorFeature";switch(s){case"sign":case"pdfa":case"pdfoffice":u+="_"+s}["pdfexcel","pdfword"].includes(l)&&(u+="_"+l),this.premiumFeatureName&&(u+="_"+this.premiumFeatureName),i.innerHTML=this.getTranslation(e,u+"_subtitle1"),"ocr"===this.premiumFeatureName&&"pdfoffice"===s&&(c=!0,i.innerHTML=i.innerHTML.replace("OCR",'<span class="new-premium__ocr-tooltip" data-template="new-premium__ocr-features-tooltip__html-template">OCR</span>')),r.innerHTML=this.getTranslation(e,u+"_subtitle2");break;case p.REASON.ERROR_FILES:if(!this.limits)throw"Limits object is needed to translate subtitles' text";o=(a=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],a=a[1],i.innerHTML=d.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesNum_subtitle1"),{n:o.files}),r.innerHTML=d.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesNum_subtitle2"),{n:a.files});break;case p.REASON.ERROR_SIZE:if(!this.limits)throw"Limits object is needed to translate subtitles' text";o=(t=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],a=t[1],i.innerHTML=d.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesSize_subtitle1"),{n:o.mb}),r.innerHTML=d.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesSize_subtitle2"),{n:a.mb/1e3});break;case p.REASON.ERROR_PAGES:if(!this.limits)throw"Limits object is needed to translate subtitles' text";o=(t=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],a=t[1],i.innerHTML=d.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesPages_subtitle1"),{n:o.pages}),r.innerHTML=d.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesPages_subtitle2"),{n:a.pages});break;case null:i.style.display="none",r.style.display="none";break;default:throw"Unknown triggerReason '"+this.triggerReason+"'"}this.initAllFeaturesTooltip(e),c&&this.initOCRTooltip(e)},h.prototype.getTranslation=function(e,t,n){if(void 0===n&&(n={}),this._translations){if(t in this._translations)return this._translations[t];throw"Translation for key '"+t+"' not found"}n=e.querySelector(".new-premium__text-translations");if(!n)throw"'Text translations' DOM not found";if("html"!==n.dataset.format)return this._translations=JSON.parse(n.innerHTML),this._translations?this.getTranslation(e,t):null;e=n.querySelector("[data-key="+t+"]");if(e)return e.innerHTML;throw"Key '"+t+"' not found"},h.prototype.getInitialState=function(){return this.isLoggedIn()?this._getInitialState():new s.AuthState},h.prototype._getInitialState=function(){switch(this.userType){case"guest":return new s.AuthState;case"user":return new(this.canUserDoTrial()&&this.isTrialEnabledForThisTool()?c.CanTrialState:l.CannotTrialState);case"premium":return new u.PremiumState;default:throw"Not implemented 'initialState' when userType is "+this.userType}},h);function h(e){var t=r.call(this,e)||this;return t.contentName="PremiumContext",t.onDomReadyCalledOnce=!1,t._onDomReady=function(e){t.onDomReadyCalledOnce||t.updateTriggerReasonText(e),t.onDomReadyCalledOnce=!0,t.updateTitleText(e)},t.triggerReason="triggerReason"in e?e.triggerReason:void 0,t.limits="limits"in e?e.limits:void 0,t.premiumFeatureName="premiumFeatureName"in e?e.premiumFeatureName:void 0,t.tool=e.tool,t}t.PremiumContext=n},function(e,n,t){"use strict";!function(t){function e(){}Object.defineProperty(n,"__esModule",{value:!0}),n.LinkTitle=void 0,e.disable=function(e){t(e).hover(function(){var e=t(this).attr("data-title");void 0!==e&&!1!==e||(e=t(this).attr("title"),t(this).attr("data-title",e)),t(this).attr("title","")},function(){var e=t(this).attr("data-title");t(this).attr("title",e)})},n.LinkTitle=e}.call(this,t(1))},function(e,n,o){"use strict";!function(a){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=(Object.defineProperty(n,"__esModule",{value:!0}),n.Banner=void 0,e(o(16)));function s(){}s.preventClickAds=function(){s.preventClick("ad"),s.preventClick("adsq")},s.sendEvent=function(e){return function(){return t.captureMessage(e)}},s.preventClick=function(e){void 0===e&&(e="ad");var t=document.getElementById(e),n=(a(window).width(),"prvnt"+e),i=1100,r="ac";if(document.body.classList.contains("download")&&(i=500),"adsq"==e&&(r="acsq"),null==document.getElementById(n)&&t&&0!=t.getBoundingClientRect().height){t.style.position="relative";var o=document.createElement("div");o.setAttribute("id",n),o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width=t.getBoundingClientRect().width+"px",o.style.height=t.getBoundingClientRect().height+"px",o.style.zIndex="9",o.style.background="hsl(0,0%,100%,.01)",o.addEventListener("click",s.sendEvent(r));try{t.prepend(o)}catch(e){t.appendChild(o)}window.setTimeout(function(){o.removeEventListener("click",s.sendEvent(r)),o.remove()},i)}},n.Banner=s}.call(this,o(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureEventManager=void 0,n(185)),n=(r=n.EventManager,o(a,r),a.addEventListener=function(e,t,n){this.instance.addEventListener(e,t,n=void 0===n?!1:n)},a.dispatchEvent=function(e,t,n){this.instance.dispatchEvent(e,t,n=void 0===n?!0:n)},Object.defineProperty(a,"instance",{get:function(){return this._instance||(this._instance=new a),this._instance},enumerable:!1,configurable:!0}),a);function a(){return null!==r&&r.apply(this,arguments)||this}t.SignatureEventManager=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileStack=t.File=void 0;var i=n(8),n=(t.File=function(e){void 0===e&&(e={}),this.reUploaded=!1,this.server_filename=null,this.filename=null,this.rotate=null,this.password=null,this.file=null,this.elementArray=[],this.processed=!0,Object.assign(this,e),null!=this.filename&&(this.filename=this.filename.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim())},r.prototype.addFile=function(e){e=this.cleanName(e),this.files.push(e),this.onFileAdd()},r.prototype.getFile=function(t){return this.files.find(function(e){return e.id==t})},r.prototype.getFileIndex=function(t){return this.files.findIndex(function(e){return e.id==t})},r.prototype.swapFilesPositionsByIndex=function(e,t){var n;e!=t&&this.files[e]&&this.files[t]&&(n=[this.files[t],this.files[e]],this.files[e]=n[0],this.files[t]=n[1])},r.prototype.move=function(e,t){for(;e<0;)e+=this.files.length;for(;t<0;)t+=this.files.length;if(t>=this.files.length)for(var n=t-this.files.length;1+n--;)this.files.push(void 0);this.files.splice(t,0,this.files.splice(e,1)[0])},r.prototype.getFileByServerFilename=function(t){return this.files.find(function(e){return e.server_filename==t})},r.prototype.getFirst=function(){return this.files[0]},r.prototype.getLast=function(){return this.files[this.files.length-1]},r.prototype.onFileAdd=function(){var e,t=this;try{null!=(e=document.querySelectorAll(".numPages"))&&e.forEach(function(e){t.files[0].numPages&&(e.innerHTML=t.files[0].numPages.toString())})}catch(e){}},r.prototype.updateFile=function(e,t){e=this.getFile(e);return e&&(t=this.cleanName(t),Object.assign(e,t)),e},r.prototype.removeFile=function(n,i){var r=this;void 0===i&&(i=!1),this.files.forEach(function(e,t){e&&e.id==n&&(e.removed=!0,r.removed.push(n),-1<t&&r.files.splice(t,1),0==i)&&(e=new CustomEvent("fileRemoved",{detail:{fileId:n}}),window.dispatchEvent(e))})},r.prototype.removeFilesExcept=function(n){var i=this;this.files.forEach(function(e,t){(null==e?void 0:e.id)!==n&&-1<t&&i.files.splice(t,1)})},r.prototype.removeAllFiles=function(t){var n=this;void 0===t&&(t=!1),this.files.forEach(function(e){n.removeFile(e.id,t)})},r.prototype.limitFile=function(e,t){void 0===t&&(t=!1);var n=this.getFile(e);n&&(this.limited.push(e),n.limited=!0,window.plupload&&(n.status=window.plupload.FAILED,n.error=window.plupload.GENERIC_ERROR),0==t)&&(n=new CustomEvent("fileLimited",{detail:{fileId:e}}),window.dispatchEvent(n))},r.prototype.resetLimitedFiles=function(){this.files.forEach(function(e){1==(null==e?void 0:e.limited)&&(delete e.limited,e.status==window.plupload.FAILED)&&e.error==window.plupload.GENERIC_ERROR&&(e.status=window.plupload.QUEUED,delete e.error)}),this.limited=[]},r.prototype.removeLimitedFiles=function(e){var t=this,n=(void 0===e&&(e=!1),this.files=this.files.filter(function(e){return-1===t.limited.indexOf(e.id)}),[].concat(this.limited));this.limited=[],!0!==e&&n.forEach(function(e){e=new CustomEvent("fileRemoved",{detail:{fileId:e}});window.dispatchEvent(e)})},r.prototype.count=function(){return this.files.length},r.prototype.countNotIgnored=function(t){return void 0===t&&(t=!1),this.files.filter(function(e){return!(1==t&&1==e.limited)&&1!=e.ignored}).length},r.prototype.countNotLimited=function(){return this.files.filter(function(e){return!0!==e.limited}).length},r.prototype.countIgnored=function(){return this.files.filter(function(e){return 1==e.ignored}).length},r.prototype.countLimited=function(){return this.files.filter(function(e){return 1==e.limited}).length},r.prototype.size=function(){var t=0;return this.files.forEach(function(e){t+=parseInt(e.size)}),t},r.prototype.fileSize=function(e){var n=this,i=0;return e instanceof Array?e.forEach(function(e,t){i+=n.fileSize(e)}):(e=this.getFile(e),i=parseInt(e.size)),i},r.prototype.getFileSizeNotIgnored=function(n){void 0===n&&(n=!1);var i=0;return this.files.forEach(function(e,t){e&&(1!=n||1!=e.limited)&&1!=e.ignored&&e.size&&(i+=parseInt(e.size.toString()))}),i},r.prototype.getFilePagesNotIgnored=function(n){void 0===n&&(n=!1);var i=0;return this.files.forEach(function(e,t){e&&(1!=n||1!=e.limited)&&1!=e.ignored&&e.file&&e.file.numPages&&(i+=e.file.numPages?parseInt(e.file.numPages.toString()):0)}),i},r.prototype.cleanName=function(e){return"filename"in e&&null!=e.filename&&(e.filename,e.filename.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim(),e.filename=e.filename.replace(/"/g,"")),"name"in e&&null!=e.name&&(e.name,e.name.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim(),e.name=e.name.replace(/"/g,"")),e},r.prototype.onUploaded=function(){return new Promise(function(e,t){})},r.prototype.checkFilesUploaded=function(){var t=!0,n=this;return this.files.forEach(function(e){if(null==e)return!0;if("percent"in e&&!(e.percent<100)&&("server_filename"in e||"error"in e&&!("error"in e&&0==e.error))||(t=!1),1==e.error){t=!1;try{window.Toastr.error(i.Lang.t(e.errorData.error.param.type[0])+"<br>"+e.name,i.Lang.t("Wops"),{timeOut:5e3,positionClass:"toast-top-left"})}catch(e){}n.removeFile(e.id)}}),t},r.prototype.getUploadedFiles=function(){var n={};return this.files.forEach(function(e){var t={filename:e.name,server_filename:e.server_filename};e.rename&&(t.filename=e.rename),e.password&&(t.password=e.password),e.pages&&(t.pages=e.pages),e.rotate&&(t.rotate=e.rotate),e.elementArray&&(t.elementArray=e.elementArray),e.processed&&(t.processed=e.processed),n[e.id]=t}),n},r);function r(){var e=this;this.getFilePxsizeNotIgnored=function(t){void 0===t&&(t=!1);var n=0;return e.files.forEach(function(e){!e||1==t&&1==e.limited||1==e.ignored||(n=Math.max(e.width*e.height,n))}),n},this.files=[],this.ignored=[],this.removed=[],this.limited=[]}t.FileStack=n},function(e,t,n){"use strict";function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function r(){return!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}function o(e){return-1!==(e=void 0===e?i():e).indexOf("FBAN")||-1!==e.indexOf("FBAV")}function a(e){return void 0===e&&(e=i()),/FxiOS/i.test(e)}function s(e){return void 0===e&&(e=i()),/EdgiOS/i.test(e)}function l(e){return-1<(e=void 0===e?i():e).indexOf("Opera Mini")}function c(e){return void 0===e&&(e=i()),/Android/.test(e)}function u(e){return void 0===e&&(e=i()),/iPhone|iPod|iPad/.test(e)}function d(e){return void 0===e&&(e=i()),/\bGSA\b/.test(e)}function p(e){return void 0===e&&(e=i()),/QQBrowser/.test(e)}function h(e){return!!u(e=void 0===e?i():e)&&(!!d(e)||/.+AppleWebKit(?!.*Safari)/.test(e))}function f(e){return!!c(e=void 0===e?i():e)&&/Version\/[\d.]+/.test(e)&&!l(e)}function m(){var e=i();return/Macintosh.*AppleWebKit(?!.*Safari)/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.supportsPopups=t.isMacOsCna=t.isIEIntranet=t.isIECompHeader=t.isIE=t.isWebView=t.isAndroidWebview=t.isIosWebview=t.isQQBrowser=t.isGoogleSearchApp=t.isIos=t.isAndroid=t.isOperaMini=t.isEdgeIOS=t.isFirefoxIOS=t.isFacebookWebView=t.isStandAlone=t.isDevice=t.getUserAgent=void 0,t.getUserAgent=i,t.isDevice=function(){return!!i().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)},t.isStandAlone=r,t.isFacebookWebView=o,t.isFirefoxIOS=a,t.isEdgeIOS=s,t.isOperaMini=l,t.isAndroid=c,t.isIos=u,t.isGoogleSearchApp=d,t.isQQBrowser=p,t.isIosWebview=h,t.isAndroidWebview=f,t.isWebView=function(){return o()||h()||f()},t.isIE=function(){return!!window.document.documentMode||Boolean(window.navigator&&window.navigator.userAgent&&/Edge|MSIE/i.test(window.navigator.userAgent))},t.isIECompHeader=function(){var e=window.document.querySelector('meta[http-equiv="X-UA-Compatible"]'),t=window.document.querySelector('meta[content="IE=edge"]');return!(!e||!t)},t.isIEIntranet=function(){if(window.document.documentMode)try{var e=window.status;return(window.status="testIntranetMode")===window.status?(window.status=e,!0):!1}catch(e){}return!1},t.isMacOsCna=m,t.supportsPopups=function(e){return!(h(e=void 0===e?i():e)||f(e)||l(e)||a(e)||s(e)||o(e)||p(e)||m()||r())}},function(e,f,m){"use strict";!function(c){var u,i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},d=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=(Object.defineProperty(f,"__esModule",{value:!0}),f.UserPayment=void 0,m(110)),p=e(m(16)),o=m(113),h=m(7),a=m(25),s=m(57),e=((e=u=u||{}).SUMMARY_INFO="/<locale?>/purchase-summary/info",e.CANCEL_SUBSCRIPTION="/user/subscription/cancel",e.CANCEL_SUBSCRIPTION_REASON="/user/subscription/cancel/reason",e.CANCEL_SUBSCR_OFFER="/user/subscription/canceloffer",e.REACTIVATE_SUBSCRIPTION="/user/subscription/reactivate",e.REMOVE_PAYMENT_DATA="/user/subscription/payment-remov:376e",l.prototype.notifyPaymentError=function(e,t,n){var i,r="generic_payment_error";"update_card"===n&&(r="generic_card_update_error");try{var o=JSON.parse(t.responseText).msg;return void("stripe"===e?this.stripeService.view.notifyCardErrorMsg(o):"paypal"===e&&this.paypalService.notifyErrorMsg(o))}catch(e){}"stripe"===e?(i=(null==(n=null==t?void 0:t.error)?void 0:n.message)||this.stripeService.view.getTranslationText(r),this.stripeService.view.notifyCardErrorMsg(i)):"paypal"===e&&(i=this.paypalService.getTranslationText(r),this.paypalService.notifyErrorMsg(i))},l.prototype.clearPaymentError=function(e){function t(){i.paypalService.clearErrorMsg()}function n(){i.stripeService.view.clearCardErrorMsg()}var i=this;if(null===(e=void 0===e?null:e))t(),n();else if("paypal"===e)t();else{if("stripe"!==e)throw"Unknown provider "+e;n()}},l.prototype.enableActionButton=function(e){if("stripe"===e)this.stripeService.view.enableActionButton();else if("paypal"!==e)throw"Not implemented provider"},l.prototype.disableActionButton=function(e){if("stripe"===e)this.stripeService.view.disableActionButton();else if("paypal"!==e)throw"Not implemented provider"},l.prototype.initEventListenersOnProviders=function(){var t=this;this.stripeService.addEventListener("View:ActionButtonClicked",function(){t.dispatchEvent(new h.IloveEvent("UserPayment:ActionButtonClicked"))}),this.paypalService.addEventListener("onPaymentInited",function(e){e=Object.assign({provider:"paypal"},e.detail);t.dispatchEvent(new h.IloveEvent("UserPayment:BeforeExternalAction",e))}),this.paypalService.addEventListener("onPaymentAuthorized",function(e){e=Object.assign({provider:"paypal"},e.detail);t.updateUser(e.response),t.dispatchEvent(new h.IloveEvent("UserPayment:AfterExternalAction",e))}),this.paypalService.addEventListener("onPaymentInited_error",function(e){e=Object.assign({provider:"paypal"},e.detail);t.dispatchEvent(new h.IloveEvent("UserPayment:Error",e))}),this.paypalService.addEventListener("onPaymentAuthorized_error",function(e){e=Object.assign({provider:"paypal"},e.detail);t.dispatchEvent(new h.IloveEvent("UserPayment:Error",e))})},l.prototype.updateCard=function(i){return t(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:if("stripe"!==i.provider)return[3,5];t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.stripeService.updateCard(i.element)];case 2:return t=e.sent(),[3,4];case 3:throw n=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==n?void 0:n.responseText)?e:n,params:i})}),p.captureMessage("Failed Stripe updateCard"),n;case 4:return this.updateUser(t),[2,t];case 5:throw"'Update card' is not implemented for provider '"+i.provider+"'"}})})},l.prototype.payPackage=function(o){return t(this,void 0,void 0,function(){var t,n,i,r;return d(this,function(e){switch(e.label){case 0:if("paypal"===o.provider)throw"This action is performed by PaypalService by mounting the view";if(t="payPackage",n=null,"stripe"!==o.provider)return[3,5];i=this.stripeService.paymentVia,i={paymentVia:i,packageName:o.packageName,quantity:o.packageQuantity,disableTrial:o.disableTrial},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:t,params:o})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.stripeService.payPackage(i)];case 2:return n=e.sent(),[3,4];case 3:throw r=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==r?void 0:r.responseText)?e:r,params:o})}),p.captureMessage("Failed Stripe payPackage"),r;case 4:return this.updateUser(n),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:t,params:o,response:n})),[2,n];case 5:throw"Unknown provider "+o.provider}})})},l.prototype.subscribeNextMonthsWithDiscount=function(){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:t="subscribeNextMonthsWithDiscount",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:t,params:null})),n=c.post(u.CANCEL_SUBSCR_OFFER),e.label=1;case 1:return e.trys.push([1,3,,4]),o=(r=JSON).parse,[4,n.promise()];case 2:return i=o.apply(r,[e.sent()]),[3,4];case 3:throw a=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==a?void 0:a.responseText)?e:a,params:null})}),p.captureMessage("Failed subscribeNextMonthsWithDiscount"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,s]}})})},l.prototype.cancelSubscription=function(){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:t="cancelSubscription",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:t,params:null})),n=c.post(u.CANCEL_SUBSCRIPTION),e.label=1;case 1:return e.trys.push([1,3,,4]),o=(r=JSON).parse,[4,n.promise()];case 2:return i=o.apply(r,[e.sent()]),[3,4];case 3:throw a=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==a?void 0:a.responseText)?e:a,params:null})}),p.captureMessage("Failed cancelSubscription"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,s]}})})},l.prototype.reactivateSubscription=function(){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:t="reactivateSubscription",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:t,params:null})),n=c.post(u.REACTIVATE_SUBSCRIPTION),e.label=1;case 1:return e.trys.push([1,3,,4]),o=(r=JSON).parse,[4,n.promise()];case 2:return i=o.apply(r,[e.sent()]),[3,4];case 3:throw a=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==a?void 0:a.responseText)?e:a,params:null})}),p.captureMessage("Failed reactivateSubscription"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,s]}})})},l.prototype.cancelSubscriptionReason=function(l){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:t="cancelSubscriptionReason",n={reason:l.reason,message:l.message},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:t,params:l})),n=c.post(u.CANCEL_SUBSCRIPTION_REASON,n),e.label=1;case 1:return e.trys.push([1,3,,4]),o=(r=JSON).parse,[4,n.promise()];case 2:return i=o.apply(r,[e.sent()]),[3,4];case 3:throw a=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==a?void 0:a.responseText)?e:a,params:l})}),p.captureMessage("Failed cancelSubscriptionReason"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,s]}})})},l.prototype.paySubscription=function(o){return t(this,void 0,void 0,function(){var t,n,i,r;return d(this,function(e){switch(e.label){case 0:if("paypal"===o.provider)throw"This action is performed by PaypalService by mounting the view";if(n="paySubscription","stripe"!==o.provider)return[3,5];i=this.stripeService.paymentVia,i={paymentVia:i,numUsers:o.numUsers,subscriptionInterval:o.subscriptionInterval,disableTrial:o.disableTrial,couponCode:o.couponCode},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{detail:{action:n,params:o}})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.stripeService.paySubscription(i)];case 2:return t=e.sent(),[3,4];case 3:throw r=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==r?void 0:r.responseText)?e:r,params:o})}),p.captureMessage("Failed Stripe PaySubscription"),r;case 4:return this.updateUser(t),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{detail:{action:n,params:null,response:t}})),[2,t];case 5:throw"Unknown provider "+o.provider}})})},l.prototype.updateSubscription=function(o){return t(this,void 0,void 0,function(){var t,n,i,r;return d(this,function(e){switch(e.label){case 0:if("paypal"===o.provider)throw"This action is performed by PaypalService by mounting the view";if(t="updateSubscription","stripe"!==o.provider)return[3,5];i=this.stripeService.paymentVia,n=void 0,i={paymentVia:i,numDigitalSignatures:o.numSignatures,numUsers:o.numUsers,subscriptionInterval:o.subscriptionInterval,disableTrial:o.disableTrial,couponCode:o.couponCode},this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{action:t,params:o})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.stripeService.paySubscription(i)];case 2:return n=e.sent(),[3,4];case 3:throw r=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==r?void 0:r.responseText)?e:r,params:o})}),p.captureMessage("Failed Stripe UpdateSubscription"),r;case 4:return this.updateUser(n),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:n})),[2,n];case 5:throw"Unknown provider "+o.provider}})})},l.prototype.paymentRemove=function(){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:t="paymentRemove",this.dispatchEvent(new h.IloveEvent("UserPayment:BeforeAction",{detail:{action:t,params:null}})),n=c.post(u.REMOVE_PAYMENT_DATA),e.label=1;case 1:return e.trys.push([1,3,,4]),o=(r=JSON).parse,[4,n.promise()];case 2:return i=o.apply(r,[e.sent()]),[3,4];case 3:throw a=e.sent(),p.configureScope(function(e){e.setExtra("error",{err:null!=(e=null==a?void 0:a.responseText)?e:a,params:null})}),p.captureMessage("Failed paymentRemove"),a;case 4:return s=i.data,this.updateUser(i),this.dispatchEvent(new h.IloveEvent("UserPayment:AfterAction",{detail:{action:t,params:null,response:i}})),[2,s]}})})},l.prototype.getPaymentSummary_updateSubscription=function(e,t,n,i){return this._getPaymentSummary({type:"subscription",numDigitalSignatures:e,numUsers:t,subscriptionInterval:n,subscriptionPlan:void 0,couponCode:i})},l.prototype.getPaymentSummary_package=function(e,t){return this._getPaymentSummary({type:"package",package:e,quantity:t})},l.prototype._getPaymentSummary=function(e){var t=u.SUMMARY_INFO,t="en-US"===window.lang?t.replace("/<locale?>",""):t.replace("<locale?>",window.lang),n=null;return"subscription"===e.type?n=c.post(t,{type:"subscription",users:e.numUsers,signatures:e.numDigitalSignatures,interval:e.subscriptionInterval,code:e.couponCode}):"package"===e.type&&(n=c.post(t,{type:"package",package:e.package,quantity:e.quantity})),new Promise(function(t,i){n.done(function(e){e=JSON.parse(e);t(e)}).fail(function(t,e,n){p.configureScope(function(e){e.setExtra("error",t.responseText)}),p.captureMessage("Error while fetching payment summary"),i(t.responseText)})})},l.prototype.mountView=function(o,a,s){return t(this,void 0,void 0,function(){var t,n,i,r;return d(this,function(e){switch(e.label){case 0:switch(o){case"stripe":return[3,1];case"paypal":return[3,3]}return[3,5];case 1:return t=this.views,n="stripe",[4,this.stripeService.view.mount(a,s)];case 2:return t[n]=e.sent(),[2,this.views.stripe];case 3:return i=this.views,r="paypal",[4,this.paypalService.mountView(a,s)];case 4:return i[r]=e.sent(),[2,this.views.paypal];case 5:return[2]}})})},l.prototype.updateUser=function(e){s.UserAuth.updateUser(e.user),e.content&&s.UserAuth.updateUserMenu(e.content)},l.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},l.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},l);function l(e){void 0===e&&(e={}),this.views={},this.eventEmitter=new a.ILoveEventEmitter,Object.assign(this,e),this.stripeService=new n.StripeService,this.paypalService=new o.PaypalService,this.initEventListenersOnProviders()}f.UserPayment=e}.call(this,m(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;var r=n(7),o=n(25),a=n(74),n=(s.getVisibleDialogs=function(){return Array.from(this.visibleDialogs).filter(function(e){return!e.isClosing()})},s.prototype.canBeClosedByUser=function(){return void 0!==this._canBeClosedByUser?this._canBeClosedByUser:this.props.canBeClosedByUser},s.prototype.isClosedOrInProcessOfClosing=function(){return this.isClosing()||!this.isShown},s.prototype.isClosing=function(){return this._isClosing},s.prototype.listenToEvents=function(e){var t=this;-1===this.contentsListeningTo.indexOf(e.getInstanceID())&&(e.addEventListener("end",function(){t.isClosedOrInProcessOfClosing()||t.close()}),e.addEventListener("disableContentAbandonment",function(){return t._canBeClosedByUser=!1}),e.addEventListener("unsetContentAbandonment",function(){return t._canBeClosedByUser=void 0}),this.contentsListeningTo.push(e.getInstanceID()))},Object.defineProperty(s.prototype,"dialog",{get:function(){var e,t,n,i=this;return this._dialog||(t=this.createDialogContainer(),n=this.createDialogElement(),t.appendChild(n),n=this.createDialogBackdrop(),this._dialog=document.createElement("div"),this.props.dialogName&&this._dialog.setAttribute("data-dialog-name",this.props.dialogName),this._dialog.classList.add("dialog"),0<(null==(e=this.props.classes)?void 0:e.length)&&this.props.classes.forEach(function(e){return i._dialog.classList.add(e)}),this._dialog.appendChild(t),this._dialog.appendChild(n),this.props.enableCloseBtn&&this.initCloseBtn(),this._dialog.style.display="none",document.body.appendChild(this._dialog)),this._dialog},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"domRoot",{get:function(){return this.element},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"element",{get:function(){return this.dialog.children[0].children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"elementContainer",{get:function(){return this.dialog.querySelector(".dialog__container")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"backdrop",{get:function(){return this.dialog.children[1]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"closeBtn",{get:function(){return this.dialog.querySelector(".dialog__close")},enumerable:!1,configurable:!0}),s.prototype.mergeWithDefaultPropValues=function(e){var t=null==(t=e.canBeClosedByUser)||t,n=null!=(n=e.clickAwayClose)&&n,i=null!=(i=e.enableCloseBtn)?i:t,r=null!=(r=e.classes)?r:[];return{dialogName:e.dialogName,canBeClosedByUser:t,clickAwayClose:n,escapeKeyClose:t,enableCloseBtn:i,classes:r}},s.prototype.getContent=function(){return this.content},s.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},s.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},s.visibleDialogs=new Set,s);function s(e){var i=this;void 0===e&&(e={}),this.isShown=!1,this.contentsListeningTo=new Array,this.destroyed=!1,this._canBeClosedByUser=void 0,this._isClosing=!1,this.show=function(){if(i.destroyed)throw"This dialog was destroyed. It's no longer usable";var e,t,n;document.body.style.overflow="hidden",i.isShown||(e=i.element,t=i.backdrop,n=i.closeBtn,i.content&&i.content.reset(),0==i.props.enableCloseBtn&&n&&(n.style.display="none"),i.dialog.style.display="",i.elementContainer,e.offsetWidth,i.elementContainer.classList.add("dialog__container--appeared"),t.offsetWidth,t.classList.add("dialog__backdrop--appeared"),i.isShown=!0,s.visibleDialogs.add(i),i.dispatchEvent(new r.IloveEvent("shown")))},this.close=function(){if(i.destroyed)throw"This dialog was destroyed. It's no longer usable";i.isShown&&(i.elementContainer.classList.remove("dialog__container--appeared"),i.backdrop.classList.remove("dialog__backdrop--appeared"),i._isClosing=!0,setTimeout(function(){i._dialog&&(i.dialog.style.display="none"),i.isShown=!1,i._isClosing=!1,document.body.style.overflow="",s.visibleDialogs.delete(i),i.dispatchEvent(new r.IloveEvent("hidden"))},250),i.dispatchEvent(new r.IloveEvent("closed")),i.content)&&i.content.notifyOfContainerClosing()},this.getDialogName=function(){return i.props.dialogName},this.destroy=function(){i.destroyed||(i._dialog&&(i._dialog.parentNode.removeChild(i._dialog),i._dialog=void 0),i.destroyed=!0)},this.setContent=function(e){if(i.destroyed)throw"This dialog was destroyed. It's no longer usable";return(i.content=e).setContextPlacement("dialog"),e.render(i.domRoot),i.listenToEvents(e),i},this._closeOnEscapeKey=function(e){"Escape"===e.key&&i.close()},this.createDialogContainer=function(){var e=document.createElement("div");return e.classList.add("dialog__container"),e},this.createDialogElement=function(){var e=document.createElement("div");return e.classList.add("dialog__element"),e},this.createDialogBackdrop=function(){var e=document.createElement("div");return e.classList.add("dialog__backdrop"),i.props.clickAwayClose&&e.addEventListener("click",function(){i.canBeClosedByUser()&&i.close()}),e},this.initCloseBtn=function(){i.dialog.addEventListener("click",function(e){e.target.classList.contains("dialog__close")&&i.canBeClosedByUser()&&(a.Banner.preventClickAds(),i.close())})},this.eventEmitter=new o.ILoveEventEmitter,this.props=this.mergeWithDefaultPropValues(e)}t.Dialog=n},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),(n=i=i||{}).Ok="ok",n.Exited="exited",n.Crashed="crashed",n.Abnormal="abnormal"},function(e,t,n){"use strict";!function(n){function e(){}Object.defineProperty(t,"__esModule",{value:!0}),t.TextHelper=void 0,e.width=function(e,t){void 0===t&&(t=null);e=n("<div>"+e+"</div>"),e.css({position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap","font-size":t}),e.appendTo(n("body")),t=e.width();return e.remove(),t},e.getExistantTextNodeHeight=function(e){var t,n=0;return n=document.createRange&&((t=document.createRange()).selectNodeContents(e),t.getBoundingClientRect)&&(e=t.getBoundingClientRect())?e.bottom-e.top:n},e.sanitize=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,function(e){return t[e]})},e.stripTags=function(e){return e.replace(/(<([^>]+)>)/gi,"")},e.maxLength=function(e,t){return e.substring(0,t)},e.maxLengthEllipse=function(e,t){return e.length>t?e.substring(0,t-3)+"...":e},e.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.setEndOfContenteditable=function(e){var t,n;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())},t.TextHelper=e}.call(this,n(1))},function(e,r,o){"use strict";!function(i){Object.defineProperty(r,"__esModule",{value:!0}),r.Tools=void 0;var t=o(98);function n(){}n.bytesToSize=function(e){var t;return 0==e?"0 Byte":(t=Math.floor(Math.log(e)/Math.log(1024)),(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t])},n.mbytesToSize=function(e){return n.bytesToSize(1e6*e)},n.convertPointsToPixels=function(e){return e*(1+1/3)},n.strCapitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.isRtlPage=function(){var e=null!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir");return"rtl"==e},n.isRTL=function(){return i("body").hasClass("rtl")},Object.defineProperty(n,"textDirection",{get:function(){return n.isRTL()?"right":"left"},enumerable:!1,configurable:!0}),n.getClosestNumber=function(e,t){for(var n=Math.abs(t[0]-e),i=0,r=1;r<t.length;r++){var o=Math.abs(t[r]-e);o<n&&(i=r,n=o)}return t[i]},n.createHTMLFromText=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},n.modalView=function(e){var t='<div class="modal fade" id="'+e.id+'" aria-labelledby="'+e.id+'Modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content">',t="title"in e?t+('<div class="modal-header"><h4 class="modal-title">'+e.title+'</h4><button type="button" class="close" data-dismiss="modal">'+n.svgClose())+"</button></div>":t+('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close">'+n.svgClose())+"</button></div>";return"content"in e?t=t+('<div class="modal-body">'+e.content)+"</div>":t+='<div class="modal-body"></div>',"btn"in e&&(t=t+('<div class="modal-footer"><button type="button" class="btn btn-link" data-dismiss="modal">'+e.btn)+"</button></div>"),t+="</div></div></div>"},n.feedbackModalView=function(e){var t=e.id,n=e.title,n=void 0===n?"":n,i=e.content,i=void 0===i?"":i,r=e.img,r=void 0===r?"":r,o=e.primaryBtn,e=e.secondaryBtn,a="",s="";return('\n            <div class="modal modal--alert" id="'+t+'" aria-labelledby="'+t+'Modal" tabindex="-1" role="dialog"\n            aria-hidden="true">\n                <div class="modal-dialog modal-dialog-centered" role="document">\n                    <div class="modal-content modal-content--alert">\n                        <div class="dialog__content">\n                            <div class="dialog__body">\n                                '+(a=n?(r?'<img id="'+t+'-img" src='+r+' alt="Visual feedback" />':"")+'<div id="'+t+'-title" class="dialog__title">'+n+"</div>":a)+"\n                      \n                                "+(s=i?'<div id="'+t+'-content">'+i+"</div>":s)+'\n                                <div class="dialog__actions">\n                                    <button id="'+t+'-secondary-btn" type="button" class="btn btn--secondary" data-dismiss="modal">'+(void 0===e?"No":e)+'</button>\n                                    <button id="'+t+'-primary-btn" type="button" class="btn" data-dismiss="modal">'+(void 0===o?"Yes":o)+"</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ").trim()},n.codeModalView=function(e){return('\n        <div class="modal fade" id="'+e.id+'" aria-labelledby="'+e.id+'Modal" tabindex="-1" role="dialog"\n        aria-hidden="true">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content modal-content--code">\n                    <div class="code-editor code-editor--light">\n                        <div class="code-editor__libraries">\n                            <div class="code-editor__libraries__title black-3">\n                                <span>'+e.title+'</span>\n                            </div>\n                        </div>\n                        <div class="code-editor__content">\n                            <textarea class="code-editor__content__textarea" data-mode="javascript" readonly>\n'+e.code+"\n                            </textarea>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        ").trim()},n.modalViewOk=function(e){return e.btn=t.Lang.t("Ok"),n.modalView(e)},n.setInputCursorAtTheEnd=function(e){var t=e.val().length;e.focus(),e[0].setSelectionRange(t,t)},n.svgClose=function(){return n.svgRemove(12,12)},n.svgRotate=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(e=void 0===e?14:e)+'" height="'+(t=void 0===t?16:t)+'" viewBox="0 0 14 16"><path d="M11.328 6.364l1.24-1.2c.79.98 1.283 2.113 1.433 3.288h-1.775c-.123-.735-.43-1.454-.896-2.088zm.896 3.778H14c-.15 1.175-.633 2.308-1.424 3.288l-1.24-1.2c.457-.634.765-1.344.888-2.088zm-.888 4.497C10.318 15.4 9.13 15.856 7.9 16v-1.716a5.31 5.31 0 0 0 2.162-.871l1.266 1.226zM6.152 2.595V0l4 3.846-4 3.76V4.302c-2.496.406-4.394 2.485-4.394 4.995s1.898 4.59 4.394 4.995V16C2.68 15.586 0 12.746 0 9.297s2.68-6.29 6.152-6.703z" fill="#47474F" fill-rule="evenodd"/></svg>'},n.svgRemove=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(e=void 0===e?12:e)+'" height="'+(t=void 0===t?12:t)+'" viewBox="0 0 12 12"><polygon fill="#47474F" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>'},n.svgArrowRight=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(e=void 0===e?12:e)+'" height="'+(t=void 0===t?12:t)+'" viewBox="0 0 448 512"><path d="M313.94 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.94v46.06c0 21.382 25.85 32.1 40.97 16.97l86.06-86.06c9.373-9.373 9.373-24.57 0-33.94l-86.06-86.06c-15.12-15.12-40.97-4.41-40.97 16.97V216z"/></svg>'},n.svgHome=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26" height="21"><path d="M22.028 12.67v6.468a1.08 1.08 0 0 1-1.083 1.083h-5.236c-.298 0-.542-.244-.542-.542v-5.056c0-.298-.244-.542-.542-.542h-3.25c-.298 0-.542.244-.542.542v5.056c0 .298-.244.542-.542.542H5.056a1.08 1.08 0 0 1-1.083-1.083V12.67a.54.54 0 0 1 .199-.42l8.486-6.987a.55.55 0 0 1 .691 0l8.486 6.987c.122.104.194.257.194.42zm3.774-2.75l-3.774-3.1V.56c0-.298-.244-.542-.542-.542h-2.528c-.298 0-.542.244-.542.542v3.277L14.377.5c-.8-.66-1.955-.66-2.753 0L.2 9.922c-.23.2-.262.533-.072.763l1.15 1.4c.2.23.533.262.763.072l10.617-8.743a.55.55 0 0 1 .691 0l10.617 8.743c.23.2.573.158.763-.072l1.15-1.4c.2-.235.153-.573-.077-.763z"/></svg>'},n.randomId=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)},n.colorpicker=function(t){var e=null,e=1==i(t).data("limit")?{preferredFormat:"hex",showPaletteOnly:!0,color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}:{allowEmpty:!0,showInitial:!0,preferredFormat:"hex"};1==i(t).data("input")&&(e.showInput=!0),1==i(t).data("empty")&&(e.allowEmpty=!0,1==i(t).data("limit")&&e.palette.push(["transparent"]),e.change=function(e){e=0===e._a?"transparent":e.toHexString(),i(t).val(e)}),1==i(t).data("inline")&&(e.flat=!0),1==i(t).data("aplha")&&(e.showAlpha=!0),e.clickoutFiresChange=!0;try{i(t).spectrum(e)}catch(t){}},n.isElementInView=function(e,t){return void 0===t&&(t=!1),0!=e.length&&(0==t?e.offset().top<i(window).height()&&60<e.offset().top+e.height():e.offset().top+e.height()<i(window).height()&&60<e.offset().top)},n.keepInNumericBounds=function(e,t,n){return null!==e&&n<e&&(n=e),n=null!==t&&t<n?t:n},n.scrollControl=function(t,n,i){var r=0;t.scroll(function(){var e=t.scrollTop();r<e&&"function"==typeof i&&i(),e<r&&"function"==typeof n&&n(),r=e})},n.loadingFromPreviousStart=function(){var e=i(".fromPrevious");0<=e.length||(e=i('<div class="wait fromPrevious">'+t.Lang.t("previousTaskLoading")+"</div>"),i(".main").append(e)),e.css("display","flex")},n.loadingFromPreviousFail=function(){var e="<div><p>"+t.Lang.t("previousFail")+'</p><p></p><p><button class="btn" onclick="window.history.go(-1); return false;">'+t.Lang.t("previousFailBack")+'</button> <button class="btn btn--red" id="closePrevious">'+t.Lang.t("previousFailContinue")+"</button></p></div>";i(".fromPrevious").html(e).css("background-image","none")},n.loadingFromPreviousEnd=function(){i(".fromPrevious").remove()},n.serializeFormData=function(e){var t={};try{for(var n=0,i=e.entries();n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}}catch(e){}return t={info:"form data serialize failed"}},n.parseTemplate=function(n,e,t){return void 0===t&&(t="simple"),null!=(e=void 0===e?null:e)&&("simple"==t&&i.each(e,function(e,t){n=n.replace("{"+e+"}",t)}),"dollar"==t)&&i.each(e,function(e,t){n=n.replace("${"+e+"}",t)}),n},n.isEmail=function(e){return!!/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},r.Tools=n}.call(this,o(1))},function(e,t,n){var i,r;void 0!==(n="function"==typeof(i=r=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n,i=arguments[e];for(n in i)t[n]=i[n]}return t}function c(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(l){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=l.write?l.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r,o="";for(r in n)n[r]&&(o+="; "+r,!0!==n[r])&&(o+="="+n[r].split(";")[0]);return document.cookie=e+"="+t+o}}function t(e,t){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],r=0;r<i.length;r++){var o=i[r].split("="),a=o.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=c(o[0]),a=(l.read||l)(a,s)||c(a);if(t)try{a=JSON.parse(a)}catch(e){}if(n[s]=a,e===s)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",s(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})})?i.call(t,n,t,e):i)&&(e.exports=n),e.exports=r()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsTemplate=void 0;var i=n(8),r=n(18);function o(){}o.process=function(e,t){var n,i=e;for(n in t)t.hasOwnProperty(n)&&(i=(i=i.replace(new RegExp("\\$\\{"+n+"\\}","g"),t[n])).replace(new RegExp("\\$\\{ "+n+" \\}","g"),t[n]));return i},o.processButton=function(e){return'<div id="processTaskWrapper"></div><button id="processTask" class="btn btn--process btn--red '+e.tool+'"><span id="processTaskTextBtn">'+e.toolText+'</span> <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="24" height="24" fill="#FFF" fill-rule="evenodd"><path d="M13 26C5.82 26 0 20.18 0 13S5.82 0 13 0s13 5.82 13 13-5.82 13-13 13zm0-2c6.075 0 11-4.925 11-11S19.075 2 13 2 2 6.925 2 13s4.925 11 11 11z" fill-rule="nonzero"/><path d="M18.684 13.105a.55.55 0 0 1-.148.378l-5.263 5.263a.55.55 0 0 1-.378.148.54.54 0 0 1-.526-.526V15.21H7.842a.54.54 0 0 1-.526-.526v-3.158A.54.54 0 0 1 7.842 11h4.526V7.842a.52.52 0 0 1 .526-.526c.148 0 .28.066.395.164l5.247 5.247a.55.55 0 0 1 .148.378z"/></svg></span></button></div>'},o.rangeBox=function(e){return'<div class="range" id="range-'+e.rangeId+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__title">'+i.Lang.t("Range")+" "+e.rangeId+'</div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="range-'+e.rangeId+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-ini">'+e.pageIni+'</span></div></div><div class="range__to"></div><div class="range__element range__element--end"><div class="range__canvas range__canvas--end"><canvas id="range-'+e.rangeId+'-end" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-end">'+e.pageEnd+"</span></div></div></div></div>"},o.rangeFixedBox=function(e){return'<div class="range" id="range-fix-'+e.rangeId+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__title">'+i.Lang.t("Range")+" "+e.rangeId+'</div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="range-fix-'+e.rangeId+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-ini">'+e.pageIni+'</span></div></div><div class="range__to"></div><div class="range__element range__element--end"><div class="range__canvas range__canvas--end"><canvas id="range-fix-'+e.rangeId+'-end" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-end">'+e.pageEnd+"</span></div></div></div></div>"},o.removeBox=function(e){return'<div class="range" id="remove-page-'+e.page+'" data-page="'+e.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="remove-page-'+e.page+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name">Page '+e.page+"</span></div></div></div></div>"},o.reorderBox=function(e){return'<div class="range" id="reorder-page-'+e.page+'" data-page="'+e.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="reorder-page-'+e.page+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name">Page '+e.page+"</span></div></div></div></div>"},o.pageBox=function(e){return'<div class="page '+e.class+'" id="'+e.file+e.page+'" data-page="'+e.page+'" data-pos="'+e.pos+'" data-file="'+e.file+'"><div class="page__add tooltip tooltip--top" data-title="'+i.Lang.t("addPage")+'"></div><div class="page__actions"><a class="page__btn rotate tooltip--top tooltip" data-rotate="0" title="'+i.Lang.t("Rotate")+'"><svg width="14px" height="17px" viewBox="0 0 14 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-434.000000, -182.000000)" fill="#47474F"><g transform="translate(265.000000, 172.000000)"><g transform="translate(164.000000, 8.000000)"><path d="M7.76002152,9.05407587 L6.54613936,7.83158461 C5.77132096,8.83023944 5.28921173,9.98385795 5.14285714,11.1805219 L6.881894,11.1805219 C7.00242131,10.4315308 7.30373957,9.69975787 7.76002152,9.05407587 L7.76002152,9.05407587 Z M6.881894,12.9023406 L5.14285714,12.9023406 C5.28921173,14.0990046 5.76271186,15.2526231 6.53753027,16.2512779 L7.75141243,15.0287867 C7.30373957,14.3831047 7.00242131,13.6599408 6.881894,12.9023406 L6.881894,12.9023406 Z M7.75141243,17.4823783 C8.75006726,18.2571967 9.91229486,18.7220877 11.1089588,18.8684423 L11.1089588,17.1207963 C10.3599677,16.9916599 9.63680387,16.6989508 8.99112187,16.2340597 L7.75141243,17.4823783 L7.75141243,17.4823783 Z M12.8307775,5.21442023 L12.8307775,2.57142857 L8.91364003,6.48856605 L12.8307775,10.3196126 L12.8307775,6.95345709 C15.27576,7.36669357 17.1353242,9.48453054 17.1353242,12.0414313 C17.1353242,14.598332 15.27576,16.716169 12.8307775,17.1294054 L12.8307775,18.8684423 C16.2313694,18.4465967 18.8571429,15.5539414 18.8571429,12.0414313 C18.8571429,8.52892117 16.2313694,5.63626581 12.8307775,5.21442023 L12.8307775,5.21442023 Z" transform="translate(12.000000, 10.719935) scale(-1, 1) translate(-12.000000, -10.719935) "></path></g></g></g></g></svg></a><a class="page__btn remove tooltip--top tooltip" title="'+i.Lang.t("Remove")+'"><svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-586.000000, -216.000000)" fill="#47474F"><g transform="translate(580.000000, 210.000000)"><polygon points="18 7.20857143 16.7914286 6 12 10.7914286 7.20857143 6 6 7.20857143 10.7914286 12 6 16.7914286 7.20857143 18 12 13.2085714 16.7914286 18 18 16.7914286 13.2085714 12"></polygon></g></g></g></svg></a></div><div class="page__container"><div class="page__element"><div class="page__canvas"><canvas id="page-'+e.file+"-"+e.page+'" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name"><span class="file__info__more"><strong>'+e.filename+"</strong><br>"+i.Lang.t("Page")+"&nbsp;</span>"+e.page+'</span></div></div></div><div class="page__add tooltip tooltip--top" data-title="'+i.Lang.t("addPage")+'"></div></div>'},o.page=function(e){return'<div class="page '+e.class+'" id="'+e.file+e.page+'" data-page="'+e.page+'" data-file="'+e.file+'"><div class="page__container"><div class="page__element"><div class="page__canvas"><canvas id="page-'+e.file+"-"+e.page+'" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div></div></div></div>'},o.extractBox=function(e){return'<div class="range" id="extract-page-'+e.page+'" data-page="'+e.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="extract-page-'+e.page+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas> </div><div class="file__info"><span class="file__info__name">'+e.page+"</span></div></div></div></div>"},o.askPassword=function(){return'<div id="passwordAsk"><h2 class="title2">'+i.Lang.t("Some files require password")+'</h2><div class="form__group"><div class="checkbox"><input type="checkbox" name="allPwd" id="allPwd" value="1"><label for="allPwd">'+i.Lang.t("Same password for all files")+'</label></div></div><div class="passwords"></div><div class="text-right"><button class="btn btn--red" id="pwdSend">'+i.Lang.t("Send")+'</button></div><br><br><div class="text-right"><p id="useUnlock">'+i.Lang.t("Did you forgot your password?")+' <a href="'+window.unlockPdfUrl+'">'+i.Lang.t("Unlock PDF")+'</a></p><p id="ignorePwdFiles">'+i.Lang.t("Or")+' <a id="pwdIgnore" href="#">'+i.Lang.t("Ignore these files")+"</a></p></div></div>"},o.askPasswordField=function(e){return'<div class="password" id="pwd-'+e.id+'"><label for="pwd'+e.id+'">'+e.server_filename+'</label><div class="form__group form__group--btn form__group--btn-lg"><div class="input--icon input--lock"><input class="input" type="password" name="pwd'+e.id+'" id="pwd'+e.id+'"></div><a class="btn showPassword" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12.015 7c4.751 0 8.063 3.012 9.504 4.636-1.401 1.837-4.713 5.364-9.504 5.364-4.42 0-7.93-3.536-9.478-5.407 1.493-1.647 4.817-4.593 9.478-4.593zm0-2c-7.569 0-12.015 6.551-12.015 6.551s4.835 7.449 12.015 7.449c7.733 0 11.985-7.449 11.985-7.449s-4.291-6.551-11.985-6.551zm-.015 5c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm0-2c-2.209 0-4 1.792-4 4 0 2.209 1.791 4 4 4s4-1.791 4-4c0-2.208-1.791-4-4-4z"/></svg></a></div></div>'},o.checkOk=function(){return'<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>'},t.OptionsTemplate=o},function(e,u,d){"use strict";!function(i){var r,e,t=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=(Object.defineProperty(u,"__esModule",{value:!0}),u.AbstractAuthState=void 0,d(57)),n=d(17),c=d(100),a=d(7),s=d(18),n=(e=n.StateBase,t(l,e),l.prototype.initAbstractAuth=function(){var t,n=this;this.abstractAuthInited||(t=this.domStateRoot,this.ELEMENTS_TO_HIDE_IN_TEMPLATE.forEach(function(e){return n.hideHtmlElement(t,e)}),this.setSocialAuthLinkContextPlacement(),c.SocialAuthPopup.addEventListener("auth:success",this._onSocialAuthSuccess),this.userAuth=new o.UserAuth({onLoginSucess:this._abstractOnLoginSuccess,onRegisterSuccess:this._abstractOnRegisterSuccess,onLoginError:this._abstractOnLoginError,onRegisterError:this._abstractOnRegisterError,runningFrom:"dialog"===this.ctx.getContextPlacement()?"popup":"auth"}),this.setUserTimeZoneInCookie(),this.initOverrideFormActions(),this.init2FactorAuth(),this.abstractAuthInited=!0)},l.prototype.showFlashMessage=function(e){var t=document.createElement("div");t.classList.add("flash"),t.innerText=e,this.currentScreen.querySelector(".social-auth").appendChild(t)},l.prototype.clearFlashMessage=function(){this.domStateRoot.querySelectorAll(".flash").forEach(function(e){return e.remove()})},Object.defineProperty(l.prototype,"extraLoginParams",{set:function(e){(this._extraLoginParams=e)||(this.userAuth.extraLoginParams=null);var t,n=[];for(t in e)n.push({name:t,value:e[t]});this.userAuth.extraLoginParams=n},enumerable:!1,configurable:!0}),l.prototype.initOverrideFormActions=function(){var t=this,e=this.domRoot;e.querySelectorAll("form").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault(),t.clearFlashMessage()})}),e.querySelectorAll("a").forEach(function(e){e.getAttribute("href").startsWith("javascript")||(e.setAttribute("data-a-href",e.href),e.href="javascript:;")}),this.goRegisterScreenBtn.addEventListener("click",function(e){return t.changeScreen("register")}),this.goLoginScreenBtn.addEventListener("click",function(e){return t.changeScreen("login")}),this.goForgetPasswordBtn.addEventListener("click",function(e){return t.changeScreen("reset")}),this.goBackFromResetScreenBtn.addEventListener("click",function(e){return t.changeScreen("login")}),this.okResetSuccessBtn.addEventListener("click",function(e){return t.dispatchEvent(new a.IloveEvent("end"))}),this.redefineActionsForLoginScreen(),this.redefineActionsForRegisterScreen(),this.redefineActionsForResetScreen()},Object.defineProperty(l.prototype,"goBackFromResetScreenBtn",{get:function(){var e=this.domRoot.querySelector("#goBackReset");if(e)return e;throw"'Go back from reset screen' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"okResetSuccessBtn",{get:function(){var e=this.domRoot.querySelector("#resetSuccessBtn");if(e)return e;throw"'OkResetSuccessBtn' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"goRegisterScreenBtn",{get:function(){var e=this.domRoot.querySelector("#goRegister");if(e)return e;throw"'Go register screen' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"goLoginScreenBtn",{get:function(){var e=this.domRoot.querySelector("#goLogin");if(e)return e;throw"'Go login screen' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"goForgetPasswordBtn",{get:function(){var e=this.domRoot.querySelector("#forget-password");if(e)return e;throw"'Go forget password screen' button not found"},enumerable:!1,configurable:!0}),l.prototype.redefineActionsForLoginScreen=function(){this.domRoot.querySelector('[data-screen="login"]').querySelector("form").addEventListener("submit",this._abstractOnLoginSubmit)},l.prototype.redefineActionsForResetScreen=function(){var e=this,t=this.domRoot.querySelector('[data-screen="reset"]'),t=(t.querySelector("form").addEventListener("submit",this._abstractOnResetSubmit),t.querySelector("form #userpasswordresetform-email"));if(!t)throw"Reset password email input not found";t.addEventListener("input",function(){return e.resetPasswordErrorDom.innerHTML=""})},Object.defineProperty(l.prototype,"resetPasswordErrorDom",{get:function(){var e=this.domStateRoot.querySelector("[data-screen='reset'] span.error");if(e)return e;throw"Error div not found"},enumerable:!1,configurable:!0}),l.prototype.redefineActionsForRegisterScreen=function(){var e=this.domRoot.querySelector('[data-screen="register"]').querySelector("form"),t=e.querySelector("#signupform-timezone"),n=s.Tools.getBrowserTimezone();"UTC"!==n&&(t.value=n),e.addEventListener("submit",this._abstractOnRegisterSubmit)},l.prototype.hideHtmlElement=function(e,t){e.querySelectorAll(t).forEach(function(e){e.style.display="none"})},l.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},l.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},l.prototype.init2FactorAuth=function(){this.domRoot.querySelector(".field-loginform-google_authenticator_code").style.display="none"},l.prototype.check2FactorError=function(e){"gacIsEmpty"==e&&(this.domRoot.querySelector(".field-loginform-google_authenticator_code").style.display="block",this.domRoot.querySelector(".field-loginEmail").style.display="none",this.domRoot.querySelector(".field-inputPasswordAuth").style.display="none")},l);function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.abstractAuthInited=!1,l.INITIAL_SCREEN="register",l.ELEMENTS_TO_HIDE_IN_TEMPLATE=[".form__title",".brand"],l.setUserTimeZoneInCookie=function(){var e=s.Tools.getBrowserTimezone();"UTC"!==e&&window.Cookies.set("auth_tz",e)},l._onSocialAuthSuccess=function(e){!0===e.detail.socialAuth_isNewUser?l._abstractOnRegisterSuccess({from_auth_social_login:!0}):l._abstractOnLoginSuccess({from_auth_social_login:!0})},l.setSocialAuthLinkContextPlacement=function(){var e=l.domRoot.querySelectorAll(".auth-link"),a="dialog"===l.ctx.getContextPlacement()?"popup":"auth",s=c.SocialAuthPopup.runningFromAttr;e.forEach(function(n){n.setAttribute(s,a),n.removeAttribute("onclick"),n.removeAttribute("href");var i=n.getAttribute("data-provider"),e=l.t("social_provider_"+i),t=n.getAttribute("data-auth-action"),r=l.t("login"===t?"backdrop_social_signin_title":"backdrop_social_signup_title",{social_provider:e}),o=l.t("backdrop_social_subtitle");n.addEventListener("click",function(){var e=l.domStateRoot.querySelector(".auth-screens__backdrop--social"),t=document.createElement("div");t.innerHTML=e.innerHTML,l.showBackdrop(t,r,o),l.setBackdropCallback(function(){c.SocialAuthPopup.focusWindow()},function(){c.SocialAuthPopup.closeWindow(),l.clearBackdrop()}),c.SocialAuthPopup.open(i,{},n).then(l.clearBackdrop,function(e){l.clearBackdrop(),e.errors&&l.showFlashMessage(e.errors[0])})})})},l.clearInputs=function(){l.domStateRoot.querySelectorAll("input").forEach(function(e){return e.value=""})},l._abstractOnResetSubmit=function(e){var t=l.domRoot.querySelector('[data-screen="reset"] form'),t=i(t).serializeArray();l.showLoadingScreen(),l.userAuth.sendResetPasswordEmail(t).then(function(e){var t=l.domStateRoot.querySelector(".reset-password-success-msg");if(!t)throw"'Reset password success' element not found";t.innerHTML=e.data.status_msg,l.changeScreen("reset-success"),l.clearLoadingScreen()},function(e){l.clearLoadingScreen();var t,n=null==(n=null==e?void 0:e.responseJSON)?void 0:n.data;throw null!=(t=null==n?void 0:n.errors)&&t.email?l.resetPasswordErrorDom.innerHTML=n.errors.email.join(","):l.resetPasswordErrorDom.innerHTML=null!=(t=null==(n=null==(t=null==e?void 0:e.responseJSON)?void 0:t.data)?void 0:n.status_msg)?t:"",e})},l._abstractOnLoginSubmit=function(e){var t=l.domRoot.querySelector('[data-screen="login"] form'),n=i(t).serializeArray();l.userAuth.extraLoginParams&&l.userAuth.extraLoginParams.forEach(function(e){n.push(e)}),l.showLoadingScreen(),l.userAuth.login(n)},l._abstractOnRegisterSubmit=function(e){var t=l.domRoot.querySelector('[data-screen="register"] form'),t=i(t).serializeArray();l.showLoadingScreen(),l.userAuth.register(t)},l._abstractOnLoginSuccess=function(e){l.clearLoadingScreen(),!0!==(null==e?void 0:e.from_auth_social_login)&&o.UserAuth.sendEventUserAuth(),l._onLoginSuccess(e),l.dispatchEvent(new a.IloveEvent("login:success"))},l._abstractOnRegisterSuccess=function(e){l.clearLoadingScreen(),!0!==(null==e?void 0:e.from_auth_social_login)&&o.UserAuth.sendEventUserAuth(),l._onRegisterSuccess(e),l.dispatchEvent(new a.IloveEvent("register:success"))},l._abstractOnLoginError=function(e){l.genericAuthErrorHandler(e)},l._abstractOnRegisterError=function(e){l.genericAuthErrorHandler(e)},l.genericAuthErrorHandler=function(e){l.clearLoadingScreen(),l.clearFlashMessage();var t=e.responseJSON;(t=t||"object"!=typeof e?t:e)&&(t=t[e=Object.keys(t)[0]][0],l.showFlashMessage(t),l.check2FactorError(e))},l}u.AbstractAuthState=n}.call(this,d(1))},function(t,e,n){!function(e){t.exports=e.$=n(87)}.call(this,n(32))},function(Qt,Zt,e){var Jt;!function(e,t){"use strict";"object"==typeof Qt.exports?Qt.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(w,j){"use strict";function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType}function m(e){return null!=e&&e===e.window}var e=[],E=w.document,F=Object.getPrototypeOf,s=e.slice,N=e.concat,B=e.push,U=e.indexOf,z={},H=z.toString,q=z.hasOwnProperty,V=q.toString,W=V.call(Object),g={},G={type:!0,src:!0,noModule:!0};function Y(e,t,n){var i,r=(t=t||E).createElement("script");if(r.text=e,n)for(i in G)n[i]&&(r[i]=n[i]);t.head.appendChild(r).parentNode.removeChild(r)}function f(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?z[H.call(e)]||"object":typeof e}var S=function(e,t){return new S.fn.init(e,t)},X=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function K(e){var t=!!e&&"length"in e&&e.length,n=f(e);return!y(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"3.3.1",constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:B,sort:e.sort,splice:e.splice},S.extend=S.fn.extend=function(){var e,t,n,i,r,o=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===s&&(o=this,a--);a<s;a++)if(null!=(e=arguments[a]))for(t in e)r=o[t],o!==(n=e[t])&&(l&&n&&(S.isPlainObject(n)||(i=Array.isArray(n)))?(r=i?(i=!1,r&&Array.isArray(r)?r:[]):r&&S.isPlainObject(r)?r:{},o[t]=S.extend(l,r,n)):void 0!==n&&(o[t]=n));return o},S.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==H.call(e)||(e=F(e))&&("function"!=typeof(e=q.call(e,"constructor")&&e.constructor)||V.call(e)!==W))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e){Y(e)},each:function(e,t){var n,i=0;if(K(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(X,"")},makeArray:function(e,t){t=t||[];return null!=e&&(K(Object(e))?S.merge(t,"string"==typeof e?[e]:e):B.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!=a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(K(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return N.apply([],a)},guid:1,support:g}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=e[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){z["[object "+t+"]"]=t.toLowerCase()});function i(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&S(e).is(n))break;i.push(e)}return i}function Q(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var e=function(j){function d(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function F(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function N(){E()}var e,h,b,o,B,f,U,z,w,l,c,E,S,n,x,m,i,r,g,T="sizzle"+ +new Date,v=j.document,P=0,H=0,q=de(),V=de(),y=de(),W=function(e,t){return e===t&&(c=!0),0},G={}.hasOwnProperty,t=[],Y=t.pop,X=t.push,k=t.push,K=t.slice,_=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",s="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",Z="\\["+a+"*("+s+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+s+"))|)"+a+"*\\]",J=":("+s+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Z+")*)|.*)\\)|)",$=new RegExp(a+"+","g"),I=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),ee=new RegExp("^"+a+"*,"+a+"*"),te=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),ne=new RegExp("="+a+"*([^\\]'\"]*?)"+a+"*\\]","g"),ie=new RegExp(J),re=new RegExp("^"+s+"$"),p={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),TAG:new RegExp("^("+s+"|[*])"),ATTR:new RegExp("^"+Z),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},oe=/^(?:input|select|textarea|button)$/i,ae=/^h\d$/i,u=/^[^{]+\{\s*\[native \w/,se=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,le=/[+~]/,C=new RegExp("\\\\([\\da-f]{1,6}"+a+"?|("+a+")|.)","ig"),ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ue=R(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{k.apply(t=K.call(v.childNodes),v.childNodes),t[v.childNodes.length].nodeType}catch(e){k={apply:t.length?function(e,t){X.apply(e,K.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function M(e,t,n,i){var r,o,a,s,l,c,u,d=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!i&&((t?t.ownerDocument||t:v)!==S&&E(t),t=t||S,x)){if(11!==p&&(l=se.exec(e)))if(r=l[1]){if(9===p){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&g(t,a)&&a.id===r)return n.push(a),n}else{if(l[2])return k.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&h.getElementsByClassName&&t.getElementsByClassName)return k.apply(n,t.getElementsByClassName(r)),n}if(h.qsa&&!y[e+" "]&&(!m||!m.test(e))){if(1!==p)d=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ce,F):t.setAttribute("id",s=T),o=(c=f(e)).length;o--;)c[o]="#"+s+" "+D(c[o]);u=c.join(","),d=le.test(e)&&me(t.parentNode)||t}if(u)try{return k.apply(n,d.querySelectorAll(u)),n}catch(e){}finally{s===T&&t.removeAttribute("id")}}}return z(e.replace(I,"$1"),t,n,i)}function de(){var n=[];function i(e,t){return n.push(e+" ")>b.cacheLength&&delete i[n.shift()],i[e+" "]=t}return i}function O(e){return e[T]=!0,e}function A(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var n=e.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ue(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function L(a){return O(function(o){return o=+o,O(function(e,t){for(var n,i=a([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=M.support={},B=M.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},E=M.setDocument=function(e){var e=e?e.ownerDocument||e:v;return e!==S&&9===e.nodeType&&e.documentElement&&(n=(S=e).documentElement,x=!B(S),v!==S&&(e=S.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",N,!1):e.attachEvent&&e.attachEvent("onunload",N)),h.attributes=A(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=A(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=u.test(S.getElementsByClassName),h.getById=A(function(e){return n.appendChild(e).id=T,!S.getElementsByName||!S.getElementsByName(T).length}),h.getById?(b.filter.ID=function(e){var t=e.replace(C,d);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&x)return(t=t.getElementById(e))?[t]:[]}):(b.filter.ID=function(e){var t=e.replace(C,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&x){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&x)return t.getElementsByClassName(e)},i=[],m=[],(h.qsa=u.test(S.querySelectorAll))&&(A(function(e){n.appendChild(e).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+a+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+a+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+T+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+T+"+*").length||m.push(".#.+[+~]")}),A(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+a+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),n.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(h.matchesSelector=u.test(r=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&A(function(e){h.disconnectedMatch=r.call(e,"*"),r.call(e,"[s!='']:x"),i.push("!=",J)}),m=m.length&&new RegExp(m.join("|")),i=i.length&&new RegExp(i.join("|")),e=u.test(n.compareDocumentPosition),g=e||u.test(n.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=e?function(e,t){var n;return e===t?(c=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e===S||e.ownerDocument===v&&g(v,e)?-1:t===S||t.ownerDocument===v&&g(v,t)?1:l?_(l,e)-_(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===S?-1:t===S?1:r?-1:o?1:l?_(l,e)-_(l,t):0;if(r===o)return he(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?he(a[i],s[i]):a[i]===v?-1:s[i]===v?1:0}),S},M.matches=function(e,t){return M(e,null,null,t)},M.matchesSelector=function(e,t){if((e.ownerDocument||e)!==S&&E(e),t=t.replace(ne,"='$1']"),h.matchesSelector&&x&&!y[t+" "]&&(!i||!i.test(t))&&(!m||!m.test(t)))try{var n=r.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<M(t,S,null,[e]).length},M.contains=function(e,t){return(e.ownerDocument||e)!==S&&E(e),g(e,t)},M.attr=function(e,t){(e.ownerDocument||e)!==S&&E(e);var n=b.attrHandle[t.toLowerCase()],n=n&&G.call(b.attrHandle,t.toLowerCase())?n(e,t,!x):void 0;return void 0!==n?n:h.attributes||!x?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},M.escape=function(e){return(e+"").replace(ce,F)},M.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},M.uniqueSort=function(e){var t,n=[],i=0,r=0;if(c=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(W),c){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return l=null,e},o=M.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(b=M.selectors={cacheLength:50,createPseudo:O,match:p,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(C,d),e[3]=(e[3]||e[4]||e[5]||"").replace(C,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||M.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&M.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return p.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ie.test(n)&&(t=(t=f(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(C,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+a+")"+e+"("+a+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(e){e=M.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===i:"!="===n?e!==i:"^="===n?i&&0===e.indexOf(i):"*="===n?i&&-1<e.indexOf(i):"$="===n?i&&e.slice(-i.length)===i:"~="===n?-1<(" "+e.replace($," ")+" ").indexOf(i):"|="===n&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(f,e,t,m,g){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),_="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,a,s,l,c=v!=y?"nextSibling":"previousSibling",u=e.parentNode,d=_&&e.nodeName.toLowerCase(),p=!n&&!_,h=!1;if(u){if(v){for(;c;){for(a=e;a=a[c];)if(_?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&p){for(h=(s=(i=(r=(o=(a=u)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===P&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(h=s=0,l.pop());)if(1===a.nodeType&&++h&&a===e){r[f]=[P,s,h];break}}else if(!1===(h=p?s=(i=(r=(o=(a=e)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===P&&i[1]:h))for(;(a=++s&&a&&a[c]||(h=s=0,l.pop()))&&((_?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++h||(p&&((r=(o=a[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[P,h]),a!==e)););return(h-=g)===m||h%m==0&&0<=h/m}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||M.error("unsupported pseudo: "+e);return a[T]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?O(function(e,t){for(var n,i=a(e,o),r=i.length;r--;)e[n=_(e,i[r])]=!(t[n]=i[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:O(function(e){var i=[],r=[],s=U(e.replace(I,"$1"));return s[T]?O(function(e,t,n,i){for(var r,o=s(e,null,i,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,n){return i[0]=e,s(i,null,n,r),i[0]=null,!r.pop()}}),has:O(function(t){return function(e){return 0<M(t,e).length}}),contains:O(function(t){return t=t.replace(C,d),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:O(function(n){return re.test(n||"")||M.error("unsupported lang: "+n),n=n.replace(C,d).toLowerCase(),function(e){var t;do{if(t=x?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=j.location&&j.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===n},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return ae.test(e.nodeName)},input:function(e){return oe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:L(function(){return[0]}),last:L(function(e,t){return[t-1]}),eq:L(function(e,t,n){return[n<0?n+t:n]}),even:L(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:L(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:L(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:L(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function ge(){}function D(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function R(a,e,t){var s=e.dir,l=e.next,c=l||s,u=t&&"parentNode"===c,d=H++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||u)return a(e,t,n);return!1}:function(e,t,n){var i,r,o=[P,d];if(n){for(;e=e[s];)if((1===e.nodeType||u)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(r=(r=e[T]||(e[T]={}))[e.uniqueID]||(r[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((i=r[c])&&i[0]===P&&i[1]===d)return o[2]=i[2];if((r[c]=o)[2]=a(e,t,n))return!0}return!1}}function ve(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function ye(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)!(o=e[s])||n&&!n(o,i,r)||(a.push(o),c&&t.push(s));return a}function _e(h,f,m,g,v,e){return g&&!g[T]&&(g=_e(g)),v&&!v[T]&&(v=_e(v,e)),O(function(e,t,n,i){var r,o,a,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)M(e,t[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),d=!h||!e&&f?u:ye(u,s,h,n,i),p=m?v||(e?h:c||g)?[]:t:d;if(m&&m(d,p,n,i),g)for(r=ye(p,l),g(r,[],n,i),o=r.length;o--;)(a=r[o])&&(p[l[o]]=!(d[l[o]]=a));if(e){if(v||h){if(v){for(r=[],o=p.length;o--;)(a=p[o])&&r.push(d[o]=a);v(null,p=[],r,i)}for(o=p.length;o--;)(a=p[o])&&-1<(r=v?_(e,a):s[o])&&(e[r]=!(t[r]=a))}}else p=ye(p===t?p.splice(c,p.length):p),v?v(null,t,p,i):k.apply(t,p)})}function be(g,v){function e(e,t,n,i,r){var o,a,s,l=0,c="0",u=e&&[],d=[],p=w,h=e||_&&b.find.TAG("*",r),f=P+=null==p?1:Math.random()||.1,m=h.length;for(r&&(w=t===S||t||r);c!==m&&null!=(o=h[c]);c++){if(_&&o){for(a=0,t||o.ownerDocument===S||(E(o),n=!x);s=g[a++];)if(s(o,t||S,n)){i.push(o);break}r&&(P=f)}y&&((o=!s&&o)&&l--,e)&&u.push(o)}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=Y.call(i));d=ye(d)}k.apply(i,d),r&&!e&&0<d.length&&1<l+v.length&&M.uniqueSort(i)}return r&&(P=f,w=p),u}var y=0<v.length,_=0<g.length;return y?O(e):e}return ge.prototype=b.filters=b.pseudos,b.setFilters=new ge,f=M.tokenize=function(e,t){var n,i,r,o,a,s,l,c=V[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=b.preFilter;a;){for(o in n&&!(i=ee.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=te.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(I," ")}),a=a.slice(n.length)),b.filter)!(i=p[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?M.error(e):V(e,s).slice(0)},U=M.compile=function(e,t){var n,i=[],r=[],o=y[e+" "];if(!o){for(n=(t=t||f(e)).length;n--;)((o=function e(t){for(var i,n,r,o=t.length,a=b.relative[t[0].type],s=a||b.relative[" "],l=a?1:0,c=R(function(e){return e===i},s,!0),u=R(function(e){return-1<_(i,e)},s,!0),d=[function(e,t,n){return e=!a&&(n||t!==w)||((i=t).nodeType?c:u)(e,t,n),i=null,e}];l<o;l++)if(n=b.relative[t[l].type])d=[R(ve(d),n)];else{if((n=b.filter[t[l].type].apply(null,t[l].matches))[T]){for(r=++l;r<o&&!b.relative[t[r].type];r++);return _e(1<l&&ve(d),1<l&&D(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(I,"$1"),n,l<r&&e(t.slice(l,r)),r<o&&e(t=t.slice(r)),r<o&&D(t))}d.push(n)}return ve(d)}(t[n]))[T]?i:r).push(o);(o=y(e,be(r,i))).selector=e}return o},z=M.select=function(e,t,n,i){var r,o,a,s,l,c="function"==typeof e&&e,u=!i&&f(e=c.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&x&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(C,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=p.needsContext.test(e)?0:o.length;r--&&(a=o[r],!b.relative[s=a.type]);)if((l=b.find[s])&&(i=l(a.matches[0].replace(C,d),le.test(o[0].type)&&me(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&D(o))break;return k.apply(n,i),n}}return(c||U(e,u))(i,t,!x,n,!t||le.test(e)&&me(t.parentNode)||t),n},h.sortStable=T.split("").sort(W).join("")===T,h.detectDuplicates=!!c,E(),h.sortDetached=A(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),A(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&A(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),A(function(e){return null==e.getAttribute("disabled")})||pe(Q,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),M}(w),Z=(S.find=e,S.expr=e.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=e.uniqueSort,S.text=e.getText,S.isXMLDoc=e.isXML,S.contains=e.contains,S.escapeSelector=e.escape,S.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function $(e,n,i){return y(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?S.grep(e,function(e){return e===n!==i}):"string"!=typeof n?S.grep(e,function(e){return-1<U.call(n,e)!==i}):S.filter(n,e,i)}S.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<i;t++)if(S.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)S.find(e,r[t],n);return 1<i?S.uniqueSort(n):n},filter:function(e){return this.pushStack($(this,e||[],!1))},not:function(e){return this.pushStack($(this,e||[],!0))},is:function(e){return!!$(this,"string"==typeof e&&Z.test(e)?S(e):e||[],!1).length}});var ee,te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ne=((S.fn.init=function(e,t,n){if(e){if(n=n||ee,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:te.exec(e))||!i[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),J.test(i[1])&&S.isPlainObject(t))for(var i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i])}else(n=E.getElementById(i[2]))&&(this[0]=n,this.length=1)}return this}).prototype=S.fn,ee=S(E),/^(?:parents|prev(?:Until|All))/),ie={children:!0,contents:!0,next:!0,prev:!0};function re(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&S(e);if(!Z.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?U.call(S(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return i(e,"parentNode")},parentsUntil:function(e,t,n){return i(e,"parentNode",n)},next:function(e){return re(e,"nextSibling")},prev:function(e){return re(e,"previousSibling")},nextAll:function(e){return i(e,"nextSibling")},prevAll:function(e){return i(e,"previousSibling")},nextUntil:function(e,t,n){return i(e,"nextSibling",n)},prevUntil:function(e,t,n){return i(e,"previousSibling",n)},siblings:function(e){return Q((e.parentNode||{}).firstChild,e)},children:function(e){return Q(e.firstChild)},contents:function(e){return l(e,"iframe")?e.contentDocument:(l(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(i,r){S.fn[i]=function(e,t){var n=S.map(this,r,e);return(t="Until"!==i.slice(-5)?e:t)&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(ie[i]||S.uniqueSort(n),ne.test(i))&&n.reverse(),this.pushStack(n)}});var x=/[^\x20\t\r\n\f]+/g;function u(e){return e}function oe(e){throw e}function ae(e,t,n,i){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},S.each(e.match(x)||[],function(e,t){n[t]=!0}),n):S.extend({},i);function r(){for(s=s||i.once,a=o=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&i.stopOnFalse&&(u=l.length,t=!1);i.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,a,s,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!o&&(u=l.length-1,c.push(t)),function n(e){S.each(e,function(e,t){y(t)?i.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==f(t)&&n(t)})}(arguments),t)&&!o&&r(),this},remove:function(){return S.each(arguments,function(e,t){for(var n;-1<(n=S.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<S.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||o||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o)||r(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return S.Deferred(function(i){S.each(o,function(e,t){var n=y(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&y(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),r=null}).promise()},then:function(t,n,i){var l=0;function c(r,o,a,s){return function(){function e(){var e,t;if(!(r<l)){if((e=a.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?s?t.call(e,c(l,o,u,s),c(l,o,oe,s)):(l++,t.call(e,c(l,o,u,s),c(l,o,oe,s),c(l,o,u,o.notifyWith))):(a!==u&&(n=void 0,i=[e]),(s||o.resolveWith)(n,i))}}var n=this,i=arguments,t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(a!==oe&&(n=void 0,i=[e]),o.rejectWith(n,i))}};r?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),w.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(c(0,e,y(i)?i:u,e.notifyWith)),o[1][3].add(c(0,e,y(t)?t:u)),o[2][3].add(c(0,e,y(n)?n:oe))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],i=t[5];a[t[1]]=n.add,i&&n.add(function(){r=i},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){r[t]=this,o[t]=1<arguments.length?s.call(arguments):e,--n||a.resolveWith(r,o)}}var n=arguments.length,i=n,r=Array(i),o=s.call(arguments),a=S.Deferred();if(n<=1&&(ae(e,a.done(t(i)).resolve,a.reject,!n),"pending"===a.state()||y(o[i]&&o[i].then)))return a.then();for(;i--;)ae(o[i],t(i),a.reject);return a.promise()}});var se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,le=(S.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&se.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){w.setTimeout(function(){throw e})},S.Deferred());function ce(){E.removeEventListener("DOMContentLoaded",ce),w.removeEventListener("load",ce),S.ready()}S.fn.ready=function(e){return le.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||le.resolveWith(E,[S])}}),S.ready.then=le.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?w.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",ce),w.addEventListener("load",ce));function d(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===f(n))for(s in r=!0,n)d(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,y(i)||(a=!0),t=c?a?(t.call(e,i),null):(c=t,function(e,t,n){return c.call(S(e),n)}):t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o}var ue=/^-ms-/,de=/-([a-z])/g;function pe(e,t){return t.toUpperCase()}function _(e){return e.replace(ue,"ms-").replace(de,pe)}function he(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function t(){this.expando=S.expando+t.uid++}t.uid=1,t.prototype={cache:function(e){var t=e[this.expando];return t||(t={},he(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[_(t)]=n;else for(i in t)r[_(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(_):(t=_(t))in i?[t]:t.match(x)||[]).length;for(;n--;)delete i[t[n]]}void 0!==t&&!S.isEmptyObject(i)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var v=new t,c=new t,fe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,me=/[A-Z]/g;function ge(e,t,n){var i,r;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(me,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:fe.test(r)?JSON.parse(r):r)}catch(e){}c.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return c.hasData(e)||v.hasData(e)},data:function(e,t,n){return c.access(e,t,n)},removeData:function(e,t){c.remove(e,t)},_data:function(e,t,n){return v.access(e,t,n)},_removeData:function(e,t){v.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,i,r,o=this[0],a=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){c.set(this,n)}):d(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=c.get(o,n))||void 0!==(t=ge(o,n))?t:void 0;this.each(function(){c.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=c.get(o),1===o.nodeType)&&!v.get(o,"hasDataAttrs")){for(t=a.length;t--;)a[t]&&0===(i=a[t].name).indexOf("data-")&&(i=_(i.slice(5)),ge(o,i,r[i]));v.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){c.remove(this,e)})}}),S.extend({queue:function(e,t,n){var i;if(e)return i=v.get(e,t=(t||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=v.access(e,t,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),i=n.length,r=n.shift(),o=S._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){S.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v.get(e,n)||v.access(e,n,{empty:S.Callbacks("once memory").add(function(){v.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--r||o.resolveWith(a,[a])}var i,r=1,o=S.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=v.get(a[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),o.promise(t)}});function ve(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&S.contains(e.ownerDocument,e)&&"none"===S.css(e,"display")}function ye(e,t,n,i){var r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in n=n.apply(e,i||[]),t)e.style[r]=o[r];return n}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,p=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"];function _e(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return S.css(e,t,"")},l=s(),c=n&&n[3]||(S.cssNumber[t]?"":"px"),u=(S.cssNumber[t]||"px"!==c&&+l)&&p.exec(S.css(e,t));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;a--;)S.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;S.style(e,t,(u*=2)+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i)&&(i.unit=c,i.start=u,i.end=r),r}var be={};function b(e,t){for(var n,i,r,o,a,s=[],l=0,c=e.length;l<c;l++)(i=e[l]).style&&(n=i.style.display,t?("none"===n&&(s[l]=v.get(i,"display")||null,s[l]||(i.style.display="")),""===i.style.display&&ve(i)&&(s[l]=(a=o=void 0,o=(r=i).ownerDocument,r=r.nodeName,(a=be[r])||(o=o.body.appendChild(o.createElement(r)),a=S.css(o,"display"),o.parentNode.removeChild(o),be[r]=a="none"===a?"block":a),a))):"none"!==n&&(s[l]="none",v.set(i,"display",n)));for(l=0;l<c;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}S.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ve(this)?S(this).show():S(this).hide()})}});var we=/^(?:checkbox|radio)$/i,Ee=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Se=/^$|^module$|\/(?:java|ecma)script/i,T={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function P(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?S.merge([e],n):n}function xe(e,t){for(var n=0,i=e.length;n<i;n++)v.set(e[n],"globalEval",!t||v.get(t[n],"globalEval"))}T.optgroup=T.option,T.tbody=T.tfoot=T.colgroup=T.caption=T.thead,T.th=T.td;var Te=/<|&#?\w+;/;function Pe(e,t,n,i,r){for(var o,a,s,l,c,u=t.createDocumentFragment(),d=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===f(o))S.merge(d,o.nodeType?[o]:o);else if(Te.test(o)){for(a=a||u.appendChild(t.createElement("div")),s=(Ee.exec(o)||["",""])[1].toLowerCase(),s=T[s]||T._default,a.innerHTML=s[1]+S.htmlPrefilter(o)+s[2],c=s[0];c--;)a=a.lastChild;S.merge(d,a.childNodes),(a=u.firstChild).textContent=""}else d.push(t.createTextNode(o));for(u.textContent="",p=0;o=d[p++];)if(i&&-1<S.inArray(o,i))r&&r.push(o);else if(l=S.contains(o.ownerDocument,o),a=P(u.appendChild(o),"script"),l&&xe(a),n)for(c=0;o=a[c++];)Se.test(o.type||"")&&n.push(o);return u}O=E.createDocumentFragment().appendChild(E.createElement("div")),(a=E.createElement("input")).setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),O.appendChild(a),g.checkClone=O.cloneNode(!0).cloneNode(!0).lastChild.checked,O.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!O.cloneNode(!0).lastChild.defaultValue;var ke=E.documentElement,Ie=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Me=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function k(){return!1}function Ae(){try{return E.activeElement}catch(e){}}function Le(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Le(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=k;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,r,i,n)})}S.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,c,u,d,p,h,f=v.get(t);if(f)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&S.find.matchesSelector(ke,r),n.guid||(n.guid=S.guid++),s=(s=f.events)||(f.events={}),a=(a=f.handle)||(f.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(x)||[""]).length;l--;)d=h=(p=Me.exec(e[l])||[])[1],p=(p[2]||"").split(".").sort(),d&&(c=S.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,c=S.event.special[d]||{},h=S.extend({type:d,origType:h,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:p.join(".")},o),(u=s[d])||((u=s[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,p,a))||t.addEventListener&&t.addEventListener(d,a),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?u.splice(u.delegateCount++,0,h):u.push(h),S.event.global[d]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,p,h,f,m,g=v.hasData(e)&&v.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(x)||[""]).length;c--;)if(h=m=(s=Me.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),h){for(d=S.event.special[h]||{},p=l[h=(i?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||S.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)S.event.remove(e,h+t[c],n,i,!0);S.isEmptyObject(l)&&v.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a=S.event.fix(e),s=new Array(arguments.length),e=(v.get(this,"events")||{})[a.type]||[],l=S.event.special[a.type]||{};for(s[0]=a,t=1;t<arguments.length;t++)s[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(o=S.event.handlers.call(this,a,e),t=0;(i=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(r=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(r=((S.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?-1<S(r,this).index(c):S.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ae()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ae()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(e){return l(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:k,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ie.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){S.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),S.fn.extend({on:function(e,t,n,i){return Le(this,e,t,n,i)},one:function(e,t,n,i){return Le(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=k),this.each(function(){S.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r])}return this}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Re=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,i,r,o,a,s;if(1===t.nodeType){if(v.hasData(e)&&(o=v.access(e),a=v.set(t,o),s=o.events))for(r in delete a.handle,a.events={},s)for(n=0,i=s[r].length;n<i;n++)S.event.add(t,r,s[r][n]);c.hasData(e)&&(o=c.access(e),a=S.extend({},o),c.set(t,a))}}function I(n,i,r,o){i=N.apply([],i);var e,t,a,s,l,c,u=0,d=n.length,p=d-1,h=i[0],f=y(h);if(f||1<d&&"string"==typeof h&&!g.checkClone&&je.test(h))return n.each(function(e){var t=n.eq(e);f&&(i[0]=h.call(this,e,t.html())),I(t,i,r,o)});if(d&&(t=(e=Pe(i,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(P(e,"script"),Be)).length;u<d;u++)l=e,u!==p&&(l=S.clone(l,!0,!0),s)&&S.merge(a,P(l,"script")),r.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,S.map(a,Ue),u=0;u<s;u++)l=a[u],Se.test(l.type||"")&&!v.access(l,"globalEval")&&S.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&S._evalUrl(l.src):Y(l.textContent.replace(Fe,""),c,l))}return n}function He(e,t,n){for(var i,r=t?S.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||S.cleanData(P(i)),i.parentNode&&(n&&S.contains(i.ownerDocument,i)&&xe(P(i,"script")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e.replace(De,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,l,c,u=e.cloneNode(!0),d=S.contains(e.ownerDocument,e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=P(u),i=0,r=(o=P(e)).length;i<r;i++)s=o[i],l=a[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&we.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||P(e),a=a||P(u),i=0,r=o.length;i<r;i++)ze(o[i],a[i]);else ze(e,u);return 0<(a=P(u,"script")).length&&xe(a,!d&&P(e,"script")),u},cleanData:function(e){for(var t,n,i,r=S.event.special,o=0;void 0!==(n=e[o]);o++)if(he(n)){if(t=n[v.expando]){if(t.events)for(i in t.events)r[i]?S.event.remove(n,i):S.removeEvent(n,i,t.handle);n[v.expando]=void 0}n[c.expando]&&(n[c.expando]=void 0)}}}),S.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return d(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return I(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return I(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Ne(this,e)).insertBefore(e,t.firstChild)})},before:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(P(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Re.test(e)&&!T[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(P(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return I(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(P(this)),t)&&t.replaceChild(e,this)},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],i=S(e),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),S(i[o])[a](t),B.apply(n,t.get());return this.pushStack(n)}});function qe(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:w).getComputedStyle(e)}var Ve,We,Ge,Ye,Xe,Ke,n,Qe=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ze=new RegExp(h.join("|"),"i");function r(){var e;n&&(Ke.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",n.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ke.appendChild(Ke).appendChild(n),e=w.getComputedStyle(n),Ve="1%"!==e.top,Xe=12===Je(e.marginLeft),n.style.right="60%",Ye=36===Je(e.right),We=36===Je(e.width),n.style.position="absolute",Ge=36===n.offsetWidth||"absolute",ke.removeChild(Ke),n=null)}function Je(e){return Math.round(parseFloat(e))}function C(e,t,n){var i,r,o=e.style;return(n=n||qe(e))&&(""!==(r=n.getPropertyValue(t)||n[t])||S.contains(e.ownerDocument,e)||(r=S.style(e,t)),!g.pixelBoxStyles())&&Qe.test(r)&&Ze.test(t)&&(e=o.width,t=o.minWidth,i=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=e,o.minWidth=t,o.maxWidth=i),void 0!==r?r+"":r}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ke=E.createElement("div"),(n=E.createElement("div")).style&&(n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===n.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return r(),We},pixelBoxStyles:function(){return r(),Ye},pixelPosition:function(){return r(),Ve},reliableMarginLeft:function(){return r(),Xe},scrollboxSize:function(){return r(),Ge}}));var et=/^(none|table(?!-c[ea]).+)/,tt=/^--/,nt={position:"absolute",visibility:"hidden",display:"block"},it={letterSpacing:"0",fontWeight:"400"},rt=["Webkit","Moz","ms"],ot=E.createElement("div").style;function at(e){return S.cssProps[e]||(S.cssProps[e]=function(e){if(e in ot)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=rt.length;n--;)if((e=rt[n]+t)in ot)return e}(e)||e)}function st(e,t,n){var i=p.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function lt(e,t,n,i,r,o){var a="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=S.css(e,n+h[a],!0,r)),i?("content"===n&&(l-=S.css(e,"padding"+h[a],!0,r)),"margin"!==n&&(l-=S.css(e,"border"+h[a]+"Width",!0,r))):(l+=S.css(e,"padding"+h[a],!0,r),"padding"!==n?l+=S.css(e,"border"+h[a]+"Width",!0,r):s+=S.css(e,"border"+h[a]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function ct(e,t,n){var i=qe(e),r=C(e,t,i),o="border-box"===S.css(e,"boxSizing",!1,i),a=o;if(Qe.test(r)){if(!n)return r;r="auto"}return a=a&&(g.boxSizingReliable()||r===e.style[t]),"auto"!==r&&(parseFloat(r)||"inline"!==S.css(e,"display",!1,i))||(r=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(r=parseFloat(r)||0)+lt(e,t,n||(o?"border":"content"),a,i,r)+"px"}function o(e,t,n,i,r){return new o.prototype.init(e,t,n,i,r)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=C(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=_(t),l=tt.test(t),c=e.style;if(l||(t=at(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=p.exec(n))&&r[1]&&(n=_e(e,t,r),o="number"),null==n||n!=n||("number"===o&&(n+=r&&r[3]||(S.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i)))||(l?c.setProperty(t,n):c[t]=n)}},css:function(e,t,n,i){var r,o=_(t);return tt.test(t)||(t=at(o)),"normal"===(r=void 0===(r=(o=S.cssHooks[t]||S.cssHooks[o])&&"get"in o?o.get(e,!0,n):r)?C(e,t,i):r)&&t in it&&(r=it[t]),(""===n||n)&&(o=parseFloat(r),!0===n||isFinite(o))?o||0:r}}),S.each(["height","width"],function(e,o){S.cssHooks[o]={get:function(e,t,n){if(t)return!et.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ct(e,o,n):ye(e,nt,function(){return ct(e,o,n)})},set:function(e,t,n){var i=qe(e),r="border-box"===S.css(e,"boxSizing",!1,i),n=n&&lt(e,o,n,r,i);return r&&g.scrollboxSize()===i.position&&(n-=Math.ceil(e["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(i[o])-lt(e,o,"border",!1,i)-.5)),n&&(r=p.exec(t))&&"px"!==(r[3]||"px")&&(e.style[o]=t,t=S.css(e,o)),st(0,t,n)}}}),S.cssHooks.marginLeft=$e(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(C(e,"marginLeft"))||e.getBoundingClientRect().left-ye(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(r,o){S.cssHooks[r+o]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+h[t]+o]=i[t]||i[t-2]||i[0];return n}},"margin"!==r&&(S.cssHooks[r+o].set=st)}),S.fn.extend({css:function(e,t){return d(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=qe(e),r=t.length;a<r;a++)o[t[a]]=S.css(e,t[a],!1,i);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=o).prototype={constructor:o,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=o.propHooks[this.prop];return(e&&e.get?e:o.propHooks._default).get(this)},run:function(e){var t,n=o.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:o.propHooks._default).set(this),this}}).init.prototype=o.prototype,(o.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[S.cssProps[e.prop]]&&!S.cssHooks[e.prop]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=o.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=o.prototype.init,S.fx.step={};var M,ut,a,O,dt=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ht(){ut&&(!1===E.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(ht):w.setTimeout(ht,S.fx.interval),S.fx.tick())}function ft(){return w.setTimeout(function(){M=void 0}),M=Date.now()}function mt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=h[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function gt(e,t,n){for(var i,r=(A.tweeners[t]||[]).concat(A.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function A(r,e,t){var n,o,i,a,s,l,c,u=0,d=A.prefilters.length,p=S.Deferred().always(function(){delete h.elem}),h=function(){if(!o){for(var e=M||ft(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),n=0,i=f.tweens.length;n<i;n++)f.tweens[n].run(t);if(p.notifyWith(r,[f,t,e]),t<1&&i)return e;i||p.notifyWith(r,[f,1,0]),p.resolveWith(r,[f])}return!1},f=p.promise({elem:r,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:M||ft(),duration:t.duration,tweens:[],createTween:function(e,t){t=S.Tween(r,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,n=e?f.tweens.length:0;if(!o){for(o=!0;t<n;t++)f.tweens[t].run(1);e?(p.notifyWith(r,[f,1,0]),p.resolveWith(r,[f,e])):p.rejectWith(r,[f,e])}return this}}),m=f.props,g=m,v=f.opts.specialEasing;for(i in g)if(s=v[a=_(i)],l=g[i],Array.isArray(l)&&(s=l[1],l=g[i]=l[0]),i!==a&&(g[a]=l,delete g[i]),(c=S.cssHooks[a])&&"expand"in c)for(i in l=c.expand(l),delete g[a],l)i in g||(g[i]=l[i],v[i]=s);else v[a]=s;for(;u<d;u++)if(n=A.prefilters[u].call(f,r,m,f.opts))return y(n.stop)&&(S._queueHooks(f.elem,f.opts.queue).stop=n.stop.bind(n)),n;return S.map(m,gt,f),y(f.opts.start)&&f.opts.start.call(r,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),S.fx.timer(S.extend(h,{elem:r,anim:f,queue:f.opts.queue})),f}S.Animation=S.extend(A,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return _e(n.elem,e,p.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,r=(e=y(e)?(t=e,["*"]):e.match(x)).length;i<r;i++)n=e[i],A.tweeners[n]=A.tweeners[n]||[],A.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u="width"in t||"height"in t,d=this,p={},h=e.style,f=e.nodeType&&ve(e),m=v.get(e,"fxshow");for(i in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],dt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}p[i]=m&&m[i]||S.style(e,i)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(i in u&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=m&&m.display)&&(c=v.get(e,"display")),"none"===(u=S.css(e,"display"))&&(c?u=c:(b([e],!0),c=e.style.display||c,u=S.css(e,"display"),b([e]))),"inline"===u||"inline-block"===u&&null!=c)&&"none"===S.css(e,"float")&&(l||(d.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block"),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(f=m.hidden):m=v.access(e,"fxshow",{display:c}),o&&(m.hidden=!f),f&&b([e],!0),d.done(function(){for(i in f||b([e]),v.remove(e,"fxshow"),p)S.style(e,i,p[i])})),l=gt(f?m[i]:0,i,d),i in m||(m[i]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?A.prefilters.unshift(e):A.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function r(){var e=A(this,S.extend({},t),a);(o||v.get(this,"finish"))&&e.stop(!0)}var o=S.isEmptyObject(t),a=S.speed(e,n,i);return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=S.timers,i=v.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&pt.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=v.get(this),n=t[a+"queue"],i=t[a+"queueHooks"],r=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,i){var r=S.fn[i];S.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(mt(i,!0),e,t,n)}}),S.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){S.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(M=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),M=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ut||(ut=!0,ht())},S.fx.stop=function(){ut=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(i,e){return i=S.fx&&S.fx.speeds[i]||i,this.queue(e=e||"fx",function(e,t){var n=w.setTimeout(e,i);t.stop=function(){w.clearTimeout(n)}})},a=E.createElement("input"),O=E.createElement("select").appendChild(E.createElement("option")),a.type="checkbox",g.checkOn=""!==a.value,g.optSelected=O.selected,(a=E.createElement("input")).value="t",a.type="radio",g.radioValue="t"===a.value;var vt,L=S.expr.attrHandle,yt=(S.fn.extend({attr:function(e,t){return d(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(r=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):!(r&&"get"in r&&null!==(i=r.get(e,t)))&&null==(i=S.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){var n;if(!g.radioValue&&"radio"===t&&l(e,"input"))return n=e.value,e.setAttribute("type",t),n&&(e.value=n),t}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(x);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=L[t]||S.find.attr;L[t]=function(e,t,n){var i,r,o=t.toLowerCase();return n||(r=L[o],L[o]=i,i=null!=a(e,t,n)?o:null,L[o]=r),i}}),/^(?:input|select|textarea|button)$/i),_t=/^(?:a|area)$/i;function D(e){return(e.match(x)||[]).join(" ")}function R(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(x)||[]}S.fn.extend({prop:function(e,t){return d(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,r=S.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,i,r,o,a,s=0;if(y(t))return this.each(function(e){S(this).addClass(t.call(this,e,R(this)))});if((e=bt(t)).length)for(;n=this[s++];)if(a=R(n),i=1===n.nodeType&&" "+D(a)+" "){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a!==(a=D(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,a,s=0;if(y(t))return this.each(function(e){S(this).removeClass(t.call(this,e,R(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)for(;n=this[s++];)if(a=R(n),i=1===n.nodeType&&" "+D(a)+" "){for(o=0;r=e[o++];)for(;-1<i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");a!==(a=D(i))&&n.setAttribute("class",a)}return this},toggleClass:function(r,t){var o=typeof r,a="string"==o||Array.isArray(r);return"boolean"==typeof t&&a?t?this.addClass(r):this.removeClass(r):y(r)?this.each(function(e){S(this).toggleClass(r.call(this,e,R(this),t),t)}):this.each(function(){var e,t,n,i;if(a)for(t=0,n=S(this),i=bt(r);e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!=o||((e=R(this))&&v.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==r&&v.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,i=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+D(R(t))+" ").indexOf(i))return!0;return!1}});function wt(e){e.stopPropagation()}var Et=/\r/g,St=(S.fn.extend({val:function(t){var n,e,i,r=this[0];return arguments.length?(i=y(t),this.each(function(e){1!==this.nodeType||(null==(e=i?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(n=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value"))||(this.value=e)})):r?(n=S.valHooks[r.type]||S.valHooks[r.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(r,"value"))?e:"string"==typeof(e=r.value)?e.replace(Et,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:D(S.text(e))}},select:{get:function(e){for(var t,n=e.options,i=e.selectedIndex,r="select-one"===e.type,o=r?null:[],a=r?i+1:n.length,s=i<0?a:r?i:0;s<a;s++)if(((t=n[s]).selected||s===i)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=S(t).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,o=S.makeArray(t),a=r.length;a--;)((i=r[a]).selected=-1<S.inArray(S.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in w,/^(?:focusinfocus|focusoutblur)$/),xt=(S.extend(S.event,{trigger:function(e,t,n,i){var r,o,a,s,l,c,u,d=[n||E],p=q.call(e,"type")?e.type:e,h=q.call(e,"namespace")?e.namespace.split("."):[],f=u=o=n=n||E;if(3!==n.nodeType&&8!==n.nodeType&&!St.test(p+S.event.triggered)&&(-1<p.indexOf(".")&&(p=(h=p.split(".")).shift(),h.sort()),s=p.indexOf(":")<0&&"on"+p,(e=e[S.expando]?e:new S.Event(p,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[p]||{},i||!c.trigger||!1!==c.trigger.apply(n,t))){if(!i&&!c.noBubble&&!m(n)){for(a=c.delegateType||p,St.test(a+p)||(f=f.parentNode);f;f=f.parentNode)d.push(f),o=f;o===(n.ownerDocument||E)&&d.push(o.defaultView||o.parentWindow||w)}for(r=0;(f=d[r++])&&!e.isPropagationStopped();)u=f,e.type=1<r?a:c.bindType||p,(l=(v.get(f,"events")||{})[e.type]&&v.get(f,"handle"))&&l.apply(f,t),(l=s&&f[s])&&l.apply&&he(f)&&(e.result=l.apply(f,t),!1===e.result)&&e.preventDefault();return e.type=p,i||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!he(n)||s&&y(n[p])&&!m(n)&&((o=n[s])&&(n[s]=null),S.event.triggered=p,e.isPropagationStopped()&&u.addEventListener(p,wt),n[p](),e.isPropagationStopped()&&u.removeEventListener(p,wt),S.event.triggered=void 0,o)&&(n[s]=o),e.result}},simulate:function(e,t,n){n=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),g.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,i){function r(e){S.event.simulate(i,e.target,S.event.fix(e))}S.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=v.access(e,i);t||e.addEventListener(n,r,!0),v.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=v.access(e,i)-1;t?v.access(e,i,t):(e.removeEventListener(n,r,!0),v.remove(e,i))}}}),w.location),Tt=Date.now(),Pt=/\?/,kt=(S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t},/\[\]$/),It=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function n(e,t){t=y(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var i,r=[];if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){n(this.name,this.value)});else for(i in e)!function n(i,e,r,o){if(Array.isArray(e))S.each(e,function(e,t){r||kt.test(i)?o(i,t):n(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,o)});else if(r||"object"!==f(e))o(i,e);else for(var t in e)n(i+"["+t+"]",e[t],r,o)}(i,e[i],t,n);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Mt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:n.replace(It,"\r\n")}}).get()}});var Ot=/%20/g,At=/#.*$/,Lt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft={},Nt={},Bt="*/".concat("*"),Ut=E.createElement("a");function zt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(x)||[];if(y(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Ht(t,i,r,o){var a={},s=t===Nt;function l(e){var n;return a[e]=!0,S.each(t[e]||[],function(e,t){t=t(i,r,o);return"string"!=typeof t||s||a[t]?s?!(n=t):void 0:(i.dataTypes.unshift(t),l(t),!1)}),n}return l(i.dataTypes[0])||!a["*"]&&l("*")}function qt(e,t){var n,i,r=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i=i||{})[n]=t[n]);return i&&S.extend(!0,e,i),e}Ut.href=xt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,S.ajaxSettings),t):qt(S.ajaxSettings,e)},ajaxPrefilter:zt(Ft),ajaxTransport:zt(Nt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,n,d,p,h,i,f=S.ajaxSetup({},t=t||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?S(m):S.event,v=S.Deferred(),y=S.Callbacks("once memory"),_=f.statusCode||{},r={},o={},a="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(p){if(!n)for(n={};t=Dt.exec(u);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return p?u:null},setRequestHeader:function(e,t){return null==p&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,r[e]=t),this},overrideMimeType:function(e){return null==p&&(f.mimeType=e),this},statusCode:function(e){if(e)if(p)b.always(e[b.status]);else for(var t in e)_[t]=[_[t],e[t]];return this},abort:function(e){e=e||a;return l&&l.abort(e),s(0,e),this}};if(v.promise(b),f.url=((e||f.url||xt.href)+"").replace(jt,xt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(x)||[""],null==f.crossDomain){e=E.createElement("a");try{e.href=f.url,e.href=e.href,f.crossDomain=Ut.protocol+"//"+Ut.host!=e.protocol+"//"+e.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Ht(Ft,f,t,b),!p){for(i in(h=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Rt.test(f.type),c=f.url.replace(At,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ot,"+")):(e=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=(Pt.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(Lt,"$1"),e=(Pt.test(c)?"&":"?")+"_="+Tt+++e),f.url=c+e),f.ifModified&&(S.lastModified[c]&&b.setRequestHeader("If-Modified-Since",S.lastModified[c]),S.etag[c])&&b.setRequestHeader("If-None-Match",S.etag[c]),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&b.setRequestHeader("Content-Type",f.contentType),b.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Bt+"; q=0.01":""):f.accepts["*"]),f.headers)b.setRequestHeader(i,f.headers[i]);if(f.beforeSend&&(!1===f.beforeSend.call(m,b,f)||p))return b.abort();if(a="abort",y.add(f.complete),b.done(f.success),b.fail(f.error),l=Ht(Nt,f,t,b)){if(b.readyState=1,h&&g.trigger("ajaxSend",[b,f]),p)return b;f.async&&0<f.timeout&&(d=w.setTimeout(function(){b.abort("timeout")},f.timeout));try{p=!1,l.send(r,s)}catch(e){if(p)throw e;s(-1,e)}}else s(-1,"No Transport")}return b;function s(e,t,n,i){var r,o,a,s=t;p||(p=!0,d&&w.clearTimeout(d),l=void 0,u=i||"",b.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a=a||r}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,b,n)),a=function(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,a,b,i),i?(f.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(S.lastModified[c]=n),n=b.getResponseHeader("etag"))&&(S.etag[c]=n),204===e||"HEAD"===f.type?s="nocontent":304===e?s="notmodified":(s=a.state,r=a.data,i=!(o=a.error))):(o=s,!e&&s||(s="error",e<0&&(e=0))),b.status=e,b.statusText=(t||s)+"",i?v.resolveWith(m,[r,s,b]):v.rejectWith(m,[b,s,o]),b.statusCode(_),_=void 0,h&&g.trigger(i?"ajaxSuccess":"ajaxError",[b,f,i?r:o]),y.fireWith(m,[b,s]),h&&(g.trigger("ajaxComplete",[b,f]),--S.active||S.event.trigger("ajaxStop")))}},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,r){S[r]=function(e,t,n,i){return y(t)&&(i=i||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:r,dataType:i,data:t,success:n},S.isPlainObject(e)&&e))}}),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=y(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Wt=S.ajaxSettings.xhr(),Gt=(g.cors=!!Wt&&"withCredentials"in Wt,g.ajax=Wt=!!Wt,S.ajaxTransport(function(r){var o,a;if(g.cors||Wt&&!r.crossDomain)return{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Vt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){i=S("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(i[0])},abort:function(){r&&r()}}}),[]),Yt=/(=)\?(?=&|$)|\?\?/,Xt=(S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||S.expando+"_"+Tt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+i):!1!==e.jsonp&&(e.url+=(Pt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},e.dataTypes[0]="json",r=w[i],w[i]=function(){o=arguments},n.always(function(){void 0===r?S(w).removeProp(i):w[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(i)),o&&y(r)&&r(o[0]),o=r=void 0}),"script"}),g.createHTMLDocument=((e=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),S.parseHTML=function(e,t,n){var i;return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((i=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(i)):t=E),i=!n&&[],(n=J.exec(e))?[t.createElement(n[1])]:(n=Pe([e],t,i),i&&i.length&&S(i).remove(),S.merge([],n.childNodes)))},S.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return-1<s&&(i=D(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&S.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var i,r,o,a,s=S.css(e,"position"),l=S(e),c={};"static"===s&&(e.style.position="relative"),o=l.offset(),i=S.css(e,"top"),a=S.css(e,"left"),s=("absolute"===s||"fixed"===s)&&-1<(i+a).indexOf("auto")?(r=(s=l.position()).top,s.left):(r=parseFloat(i)||0,parseFloat(a)||0),null!=(t=y(t)?t.call(e,n,S.extend({},o)):t).top&&(c.top=t.top-o.top+r),null!=t.left&&(c.left=t.left-o.left+s),"using"in t?t.using.call(e,c):l.css(c)}},S.fn.extend({offset:function(t){var e,n;return arguments.length?void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)}):(n=this[0])?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===S.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),r.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-S.css(i,"marginTop",!0),left:t.left-r.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||ke})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;S.fn[t]=function(e){return d(this,function(e,t,n){var i;if(m(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n)return i?i[r]:e[t];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(g.pixelPosition,function(e,t){if(t)return t=C(e,n),Qe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,o){S.fn[o]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,n){var i;return m(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+a],i["scroll"+a],e.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?S.css(e,t,r):S.style(e,t,n,r)},s,n?e:void 0,n)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),S.proxy=function(e,t){var n,i;if("string"==typeof t&&(i=e[t],t=e,e=i),y(e))return n=s.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=l,S.isFunction=y,S.isWindow=m,S.camelCase=_,S.type=f,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0!==(Jt=function(){return S}.apply(Zt,[]))&&(Qt.exports=Jt),w.jQuery),Kt=w.$;return S.noConflict=function(e){return w.$===S&&(w.$=Kt),e&&w.jQuery===S&&(w.jQuery=Xt),S},j||(w.jQuery=w.$=S),S})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyloadCss=void 0,t.lazyloadCss=function(e,t){void 0===t&&(t={});for(var n=document.getElementsByTagName("link"),i=n.length;i--;)if(n[i].hasAttribute("href")&&n[i].href.match(e))return!0;var r,o,a=document.createElement("link");for(r in a.rel="stylesheet",a.href=e,t)t.hasOwnProperty(r)&&(o=t[r],a.setAttribute(r,o));var s=document.getElementsByTagName("link")[0];return s.parentNode.insertBefore(a,s),!0}},function(e,a,u){"use strict";!function(s){var i,r,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),t=(Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsManager=void 0,u(156)),n=u(159),l=u(8),c=u(18),t=(r=t.OptionsManager,e(o,r),o.prototype.triggerFirstFileReady=function(){s("body").addClass("first-file-ready");var e=new CustomEvent("firstFileReady",{detail:{file:this.files.files[0]}});window.dispatchEvent(e)},o.prototype.initViewManager=function(){this.viewManager=new n.ViewManager({tool:this.tool,subtool:this.subtool,files:this.files,processManager:this.processManager}),!0===this.passwordNeeded&&(this.viewManager.pdfViewer.needPassword=!0)},o.prototype.askForPassword=function(r){var o=this,a=this;return new Promise(function(e,t){var n=o.files.getFileByServerFilename(r),i=c.Tools.modalViewOk({id:"pwd-"+n.id,title:l.Lang.t("askPasswordTitle"),content:"<form><label>"+n.name+'</label><input type="password"></form>'});s(i).modal(),s("#pwd-"+n.id).on("click",function(){a.files.updateFile(n.id,{password:s("#pwd-"+n.id+" input").val()}),e(n)})})},o.prototype.fileAdded=function(e,t,n){return void 0===n&&(n=!1),null==this.viewManager&&this.init(),r.prototype.fileAdded.call(this,e,t,n)},o.prototype.tryInitByParent=function(){r.prototype.tryInitByParent.call(this)},o);function o(e){e=r.call(this,e=void 0===e?{}:e)||this;return e.firstFileLoaded=!1,e}a.OptionsManager=t}.call(this,u(1))},function(e,t,n){var i,r;!function(){"use strict";r=[n(31)],void 0!==(r="function"==typeof(i=function(E){"use strict";var o=E.transform;E.transform=function(e,t,n,i,r){o.call(E,E.scale(e,t,r),t,n,i,r)},E.transformCoordinates=function(){},E.getTransformedOptions=function(e,t){var n=t.aspectRatio;var i;var r;var o;var a;if(!n)return t;i={};for(r in t)if(Object.prototype.hasOwnProperty.call(t,r))i[r]=t[r];i.crop=true;o=e.naturalWidth||e.width;a=e.naturalHeight||e.height;if(o/a>n){i.maxWidth=a*n;i.maxHeight=a}else{i.maxWidth=o;i.maxHeight=o/n}return i},E.renderImageToCanvas=function(e,t,n,i,r,o,a,s,l,c,u){var d=e.getContext("2d");if(u.imageSmoothingEnabled===false)d.imageSmoothingEnabled=false;else if(u.imageSmoothingQuality)d.imageSmoothingQuality=u.imageSmoothingQuality;d.drawImage(t,n,i,r,o,a,s,l,c);return e},E.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},E.scale=function(e,t,n){t=t||{};var i=document.createElement("canvas");var r=e.getContext||E.hasCanvasOption(t)&&i.getContext;var o=e.naturalWidth||e.width;var a=e.naturalHeight||e.height;var s=o;var l=a;var c;var u;var d;var p;var h;var f;var m;var g;var v;var y;var _;function b(){var e=Math.max((d||s)/s,(p||l)/l);if(e>1){s*=e;l*=e}}function w(){var e=Math.min((c||s)/s,(u||l)/l);if(e<1){s*=e;l*=e}}if(r){t=E.getTransformedOptions(e,t,n);m=t.left||0;g=t.top||0;if(t.sourceWidth){h=t.sourceWidth;if(t.right!==undefined&&t.left===undefined)m=o-h-t.right}else h=o-m-(t.right||0);if(t.sourceHeight){f=t.sourceHeight;if(t.bottom!==undefined&&t.top===undefined)g=a-f-t.bottom}else f=a-g-(t.bottom||0);s=h;l=f}c=t.maxWidth;u=t.maxHeight;d=t.minWidth;p=t.minHeight;if(r&&c&&u&&t.crop){s=c;l=u;_=h/f-c/u;if(_<0){f=u*h/c;if(t.top===undefined&&t.bottom===undefined)g=(a-f)/2}else if(_>0){h=c*f/u;if(t.left===undefined&&t.right===undefined)m=(o-h)/2}}else{if(t.contain||t.cover){d=c=c||d;p=u=u||p}if(t.cover){w();b()}else{b();w()}}if(r){v=t.pixelRatio;if(v>1){i.style.width=s+"px";i.style.height=l+"px";s*=v;l*=v;i.getContext("2d").scale(v,v)}y=t.downsamplingRatio;if(y>0&&y<1&&s<h&&l<f)while(h*y>s){i.width=h*y;i.height=f*y;E.renderImageToCanvas(i,e,m,g,h,f,0,0,i.width,i.height,t);m=0;g=0;h=i.width;f=i.height;e=document.createElement("canvas");e.width=h;e.height=f;E.renderImageToCanvas(e,i,0,0,h,f,0,0,h,f,t)}i.width=s;i.height=l;E.transformCoordinates(i,t);return E.renderImageToCanvas(i,e,m,g,h,f,0,0,s,l,t)}e.width=s;e.height=l;return e}})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,t,n){var i,r;!function(){"use strict";r=[n(31),n(47)],void 0!==(r="function"==typeof(i=function(h){"use strict";h.ExifMap=function(){return this},h.ExifMap.prototype.map={Orientation:274},h.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},h.getExifThumbnail=function(e,t,n){if(!n||t+n>e.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}return h.createObjectURL(new Blob([e.buffer.slice(t,t+n)]))},h.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:true},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},h.exifTagTypes[7]=h.exifTagTypes[1],h.getExifValue=function(e,t,n,i,r,o){var a=h.exifTagTypes[i];var s;var l;var c;var u;var d;var p;if(!a){console.log("Invalid Exif data: Invalid tag type.");return}s=a.size*r;l=s>4?t+e.getUint32(n+8,o):n+8;if(l+s>e.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(r===1)return a.getValue(e,l,o);c=[];for(u=0;u<r;u+=1)c[u]=a.getValue(e,l+u*a.size,o);if(a.ascii){d="";for(u=0;u<c.length;u+=1){p=c[u];if(p==="\0")break;d+=p}return d}return c},h.parseExifTag=function(e,t,n,i){return{number:e.getUint16(n,i),value:h.getExifValue(e,t,n,e.getUint16(n+2,i),e.getUint32(n+4,i),i)}},h.parseExifTags=function(e,t,n,i,r){var o,a,s,l,c;if(n+6>e.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}o=e.getUint16(n,i);a=n+2+12*o;if(a+4>e.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(s=0;s<o;s+=1){l=n+2+12*s;c=this.parseExifTag(e,t,l,i,r);r.exif[c.number]=c.value;if(r.exifOffsets)r.exifOffsets[c.number]=l}return e.getUint32(a,i)},h.parseExifData=function(e,t,n,i,r){if(r.disableExif)return;var o=t+10;var a;var s;var l;if(e.getUint32(t+4)!==1165519206)return;if(o+8>e.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(e.getUint16(t+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(e.getUint16(o)){case 18761:a=true;break;case 19789:a=false;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(e.getUint16(o+2,a)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}s=e.getUint32(o+4,a);i.exif=new h.ExifMap;if(!r.disableExifOffsets){i.exifOffsets=new h.ExifMap;i.exifTiffOffset=o;i.exifLittleEndian=a}s=h.parseExifTags(e,o,o+s,a,i);if(s&&!r.disableExifThumbnail){l={exif:{}};s=h.parseExifTags(e,o,o+s,a,l);if(l.exif[513])i.exif.Thumbnail=h.getExifThumbnail(e,o+l.exif[513],l.exif[514])}if(i.exif[34665]&&!r.disableExifSub)h.parseExifTags(e,o,o+i.exif[34665],a,i);if(i.exif[34853]&&!r.disableExifGps)h.parseExifTags(e,o,o+i.exif[34853],a,i)},h.metaDataParsers.jpeg[65505].push(h.parseExifData),h.exifWriters={274:function(e,t,n){var i=new DataView(e,t.exifOffsets[274]+8,2);i.setUint16(0,n,t.exifLittleEndian);return e}},h.writeExifData=function(e,t,n,i){h.exifWriters[t.exif.map[n]](e,t,i)}})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,t,n){var i,r;!function(){"use strict";r=[n(31),n(47)],void 0!==(r="function"==typeof(i=function(u){"use strict";u.IptcMap=function(){return this},u.IptcMap.prototype.map={ObjectName:5},u.IptcMap.prototype.get=function(e){return this[e]||this[this.map[e]]},u.parseIptcTags=function(e,t,n,i){function r(e,t,n){var i="";for(var r=t;r<t+n;r++)i+=String.fromCharCode(e.getUint8(r));return i}var o,a,s;var l=t;while(l<t+n){if(e.getUint8(l)===28&&e.getUint8(l+1)===2){s=e.getUint8(l+2);if(s in i.iptc.tags){a=e.getInt16(l+3);o=r(e,l+5,a);if(Object.prototype.hasOwnProperty.call(i.iptc,s))if(i.iptc[s]instanceof Array)i.iptc[s].push(o);else i.iptc[s]=[i.iptc[s],o];else i.iptc[s]=o}}l++}},u.parseIptcData=function(e,t,n,i,r){if(r.disableIptc)return;var o=t+n;var a=function(e,t){return e.getUint32(t)===943868237&&e.getUint16(t+4)===1028};while(t+8<o){if(a(e,t)){var s=e.getUint8(t+7);if(s%2!==0)s+=1;if(s===0)s=4;var l=t+8+s;if(l>o){console.log("Invalid IPTC data: Invalid segment offset.");break}var c=e.getUint16(t+6+s);if(t+c>o){console.log("Invalid IPTC data: Invalid segment size.");break}i.iptc=new u.IptcMap;return u.parseIptcTags(e,l,c,i)}t++}console.log("No IPTC data at this offset - could be XMP")},u.metaDataParsers.jpeg[65517].push(u.parseIptcData)})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,t,n){"use strict";e.exports=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(r=r+t[i++]|0)|0,--a;);r%=65521,o%=65521}return r|o<<16|0}},function(e,t,n){"use strict";var s=function(){for(var e=[],t=0;t<256;t++){for(var n=t,i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}();e.exports=function(e,t,n,i){var r=s,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}},function(e,t,n){"use strict";var l=n(34),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var c=new l.Buf8(256),i=0;i<256;i++)c[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function u(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&r))return String.fromCharCode.apply(null,l.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}c[254]=c[254]=1,t.string2buf=function(e){for(var t,n,i,r,o=e.length,a=0,s=0;s<o;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new l.Buf8(a),s=r=0;r<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[r++]=n:(n<2048?t[r++]=192|n>>>6:(n<65536?t[r++]=224|n>>>12:(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63),t[r++]=128|n>>>6&63),t[r++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new l.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){for(var n,i,r=t||e.length,o=new Array(2*r),a=0,s=0;s<r;)if((n=e[s++])<128)o[a++]=n;else if(4<(i=c[n]))o[a++]=65533,s+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&s<r;)n=n<<6|63&e[s++],i--;1<i?o[a++]=65533:n<65536?o[a++]=n:(n-=65536,o[a++]=55296|n>>10&1023,o[a++]=56320|1023&n)}return u(o,a)},t.utf8border=function(e,t){for(var n=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=n&&128==(192&e[n]);)n--;return!(n<0)&&0!==n&&n+c[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,a,s){"use strict";!function(i){var r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},t=(Object.defineProperty(a,"__esModule",{value:!0}),a.Lang=void 0,e(s(114)));function n(){}n.t=function(n,e){var t="iloveLang";return e&&e.source&&(t=e.source),window[t]&&window[t][n]&&(n=window[t][n]),null!=e&&i.each(e,function(e,t){n=n.replace("${"+e+"}",t)}),n},n.w=function(e,t){i("."+(e=void 0===e?"translate":e)).each(function(){var e=i(this).html();i(this).html(n.t(e,t))}),i("#"+e).each(function(){var e=i(this).html();i(this).html(n.t(e,t))})},n.fontsForWritingSystem=function(e){switch(e){case"latin":return["arial","verdana","courier","comic","times-new-roman","impact","arial-unicode-ms"];case"indic":return["lohit-marathi","lohit-devanagari","arial-unicode-ms"];default:return["arial-unicode-ms"]}},n.getFontsInfo=function(){var e=window.fonts;if(e)return e;throw"[Lang Service] You have to load the fonts information from the backend to use this method"},n.loadAllFonts=function(){for(var e in window.fonts)window.fonts.hasOwnProperty(e)&&"arial"!=e&&this.loadFont(e)},n.loadFont=function(e){e in this.loadedFonts||(t.lazyloadCss("/font/"+e+".css"),this.loadedFonts[e]=!0)},n.hasHindiCharacters=function(e){return 0<e.split("").filter(function(e){e=e.charCodeAt();return 2309<=e&&e<=2361}).length},n.hasJapanCharacters=function(e){return/[\u3000-\u303f]|[\u3040-\u309f]|[\u30a0-\u30ff]|[\uff00-\uff9f]|[\u4e00-\u9faf]|[\u3400-\u4dbf]/.test(e)},n.hasChineseCharacters=function(e){return/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]|[\uf900-\ufaff]/.test(e)},n.hasKoreanCharacters=function(e){return/[\uac00-\uafff]|[\ub000-\ubfff]/.test(e)},n.hasArabicCharacters=function(e){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(e)},n.hasGreekCharacters=function(e){return/[\u0370-\u03FF]|[\u1F00-\u1FFF]/.test(e)},n.hasCyrillicCharacters=function(e){return/[\u0400-\u04FF]|[\u0500-\u052F]/.test(e)},n.hasCommonLatinCharacters=function(e){return!1},n.keyCodeToWritingSystem=function(e){for(var t in this.writingSystemCharacterRanges)for(var n=this.writingSystemCharacterRanges[t],i=0;i<n.length;i++){var r=n[i],o=r[0],r=r[1];if(o<=e&&e<=r)return t}return"unknown"},n.detectWritingSystems=function(e){if(0===e.length)return[];for(var t={},n=0;n<e.length;n++)t[this.keyCodeToWritingSystem(e.charCodeAt(n))]=!0;return Object.keys(t)},n.loadedFonts={},n.writingSystemCharacterRanges={latin:[[0,127],[128,255],[256,383],[384,591],[7680,7935],[9312,9471],[11360,11391],[42784,43007],[64256,64335],[65104,65135]],indic:[[2304,2431],[43232,43263]]},a.Lang=n}.call(this,s(1))},function(e,t,n){"use strict";!function(a){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.IloveError=void 0,n(8)),l=e(n(16)),c=n(13);function u(){}u.getError=function(e){if("string"==typeof e)return e;if("error"in e&&"string"==typeof e.error)return e.error;if("response"in e){var t=this.getJson(e.response);if(null!=t)return"error"in t&&"param"in t.error&&t.error.param&&t.error.param&&"type"in t.error.param&&t.error.param.type instanceof Array?t.error.param.type[0]:"error"in t&&"type"in t.error&&t.error.type&&"string"==typeof t.error.type?t.error.type:"ServerError"}return 0 in e,"param"in e&&"type"in e.param?e.param.type:"UnknownError"},u.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},u.getJson=function(e){var t=null;try{t=JSON.parse(e)}catch(e){return null}return t},u.fatalError=function(t,n,i,r,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),null==(t=void 0===t?null:t)&&(t="UnknownError"),"UnknownError"==(t=u.getError(t))&&(l.configureScope(function(e){e.setExtra("unknownError",t),e.setExtra("tool",n),e.setExtra("fileName",r),e.setExtra("workerServer",i),e.setExtra("extra",o)}),l.addBreadcrumb({category:"upload",level:c.Severity.Error,message:"Unknown Error"})),window.ev("sendOnce","event","upload-fatal",n,t),window.ev("eventOnce","upload-fatal",{tool:n,error:t}),a(".tool").hide(),a("#uploading").hide(),a("#process").hide(),a("body").addClass("process-run");var e="",e="FileRemoved"==t||"FileTooLarge"==t?t:"errorRetry",e='\n        <div class="tool-error">\n            <h2 class="title2">'+s.Lang.t("Upload error")+'</h2>\n            <div class="tool-error__content">'+s.Lang.t(e),e=(e=null!=r&&"FileRemoved"!=t?e+"<p>"+r+"</p>":e)+('</div><div class="tool-error__action"><a class="btn btn-sm" href="javascript:location.reload()">'+s.Lang.t("Retry"))+"</a></div>";a("#uploading").html(e).show()},u.error=function(e,t,n,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null)},t.IloveError=u}.call(this,n(1))},function(e,n,i){"use strict";!function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.SocialAuthPopup=void 0;var o=i(7),e=i(25),a=i(57);function u(){var t=this;this.eventEmitter=new e.ILoveEventEmitter,this.dispatchEvent=function(e){return t.eventEmitter.dispatchEvent(e)}}u.open=function(e,t,n){void 0===t&&(t={});function s(){window.ilove_socialAuthPopupStatus;var e=window.ilove_socialAuthPopupNewUser;window.ilove_socialAuthPopupOpened=!1,window.ilove_socialAuthPopupStatus=void 0,window.ilove_socialAuthPopupNewUser=void 0,l.popupInterval=null,l.onPopupClosed(e,n),l.popup=null}var l=u.instance,t=(l.popup&&(clearInterval(l.popupInterval),l.popupInterval=null,l.popup.close(),l.popup=null),l.mergeWindowFeatureProps(t,!0)),e="/auth/auth?authclient="+String(e),c=(l.popup=window.open(e,"social_auth_popup",t),l.popup);window.ilove_socialAuthPopupStatus=void 0,window.ilove_socialAuthPopupOpened=!0;return new Promise(function(o,a){l.popupInterval=setInterval(function(){var e,t=l.popup&&!l.popup.closed,n=!1;try{var i=l.popup.location.hostname,r=null!==l.popup.location.href.match("social-login-redirect"),n=i===window.location.hostname&&!r}catch(e){}t&&c===l.popup&&!n||(clearInterval(l.popupInterval),n?e=setInterval(function(){l.popup.addEventListener&&(clearInterval(e),l.popup.addEventListener("DOMContentLoaded",function(){var e=null==(e=null==(e=l.popup)?void 0:e.document)?void 0:e.body,e=(e.style.display="none",Array.from(e.querySelectorAll(".flash")).map(function(e){return e.innerText}));l.popup.close(),s(),a({errors:e})}))}):(s(),o({})))})})},u.focusWindow=function(){var e;null!=(e=u.instance.popup)&&e.focus()},u.closeWindow=function(){var e;null!=(e=u.instance.popup)&&e.close()},u.prototype.onPopupClosed=function(n,e){var i=this,r=null!=(e=null==e?void 0:e.getAttribute(u.runningFromAttr))?e:"auth";n&&a.UserAuth.sendGA_registered(r),t.get("/login").done(function(e){i.userAuth=new a.UserAuth({runningFrom:r}),i.userAuth.loginSuccess(e);var e={socialAuth_isNewUser:n},t=new CustomEvent("userAuth",{detail:e});window.dispatchEvent(t),i.dispatchEvent(new o.IloveEvent("auth:success",e))}).fail(function(e,t,n){})},Object.defineProperty(u,"instance",{get:function(){return window.ilove_socialAuthPopupInstance||(window.ilove_socialAuthPopupInstance=new u),window.ilove_socialAuthPopupInstance},enumerable:!1,configurable:!0}),u.prototype.mergeWindowFeatureProps=function(e,t){void 0===t&&(t=!1);var n=Object.assign({resizable:"yes",scrollbars:"no",toolbar:"no",menubar:"no",location:"no",directories:"no",status:"yes",width:450,height:380,left:null,top:null},e);if(n.left=(window.innerWidth-n.width)/2,n.top=(window.innerHeight-n.height)/2,t){var i,r=[];for(i in n)n.hasOwnProperty(i)&&r.push(i+"="+n[i]);return r.join(",")}return n},u.runningFromAttr="data-running-from",u.addEventListener=function(e,t){return u.instance.eventEmitter.addEventListener(e,t)},n.SocialAuthPopup=u}.call(this,i(1))},function(e,t,n){"use strict";function i(e){this.tool=null,this.subtool=null,this.config=null,Object.assign(this,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0,i.prototype.getConfig=function(e){return(this.subtool in this.config&&e in this.config[this.subtool]?this.config[this.subtool]:this.tool in this.config&&e in this.config[this.tool]?this.config[this.tool]:this.config.default)[e]},t.Config=i},function(e,t,n){!function(i,e){e.fn.preventDoubleSubmission=function(n){return i(this).on("submit",function(e){var t=i(this);!0===t.data("submitted")?(e.preventDefault(),t.find('[type="submit"]').attr("disabled",!0)):(t.data("submitted",!0),1<n&&(t.find('[type="submit"]').attr("disabled",!0),window.setTimeout(function(){t.data("submitted",!1),t.find('[type="submit"]').attr("disabled",null)},n)))}),this}}.call(this,n(1),n(1))},function(e,t){var n,i,e=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length)&&p()}function p(){if(!c){for(var e=a(d),t=(c=!0,l.length);t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||c||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=f,e.addListener=f,e.once=f,e.off=f,e.removeListener=f,e.removeAllListeners=f,e.emit=f,e.prependListener=f,e.prependOnceListener=f,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e){e.exports=JSON.parse('{"development":{"service":"https://servicedev.ilovepdf.com","service_subdomain":"servicedev","web_prefix":"dev","api_sufix":"dev","stripe_key":"pk_test_3QB411Rie7QKjMhfSA0oiEOx","paypal_env":"sandbox","paypal_sandbox_key":"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr","paypal_production_key":"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"},"staging":{"service":"https://servicestaging.ilovepdf.com","service_subdomain":"servicestaging","web_prefix":"staging","api_sufix":"dev","stripe_key":"pk_test_3QB411Rie7QKjMhfSA0oiEOx","stripe_key_api":"pk_test_mDCbsVuNmGS4QIePyxrnLexu","paypal_env":"sandbox","paypal_sandbox_key":"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr","paypal_production_key":"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"},"production":{"service":"https://service.ilovepdf.com","service_subdomain":"service","web_prefix":"www","api_sufix":"","stripe_key":"pk_live_515AzAgBqa3pLeb3yKIZljNwrbjfrFpMsuvoEEZncp68ao0mQUKZgEY3Ddfh3JUMH4tIKBuFDsLt9Ot29l3d3KIey00O1gzlSiu","stripe_key_api":"pk_live_epWBEsOopGb3Oo75Y6YzAbTP","paypal_env":"production","paypal_sandbox_key":"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr","paypal_production_key":"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"}}')},function(e,t){function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(n.prototype=window.Event.prototype,window.CustomEvent=n)},function(e,t,n){!function(n){var e;String.prototype.ucFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.camelCase=function(){return this.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})},n.fn.exchangePositionWith=function(e){var e=n(e),t=n("<span>").hide();this.before(t),e.before(this),t.replaceWith(e)},Array.prototype.move=function(e,t){if(t>=this.length)for(var n=t-this.length;1+n--;)this.push(void 0);return this.splice(t,0,this.splice(e,1)[0]),this},String.prototype.trunc=function(e){return this.substr(0,e-1)+(this.length>e?"&hellip;":"")},String.prototype.trim||(e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(e,"")}),String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/g,"")})}.call(this,n(1))},function(e,s,l){"use strict";!function(e){l.d(s,"a",function(){return a});var t=l(3),n=l(39),i={nowSeconds:function(){return Date.now()/1e3}};var r=(Object(n.b)()?function(){try{return Object(n.a)(e,"perf_hooks").performance}catch(e){}}:function(){var e=Object(t.e)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}})(),o=void 0===r?i:{nowSeconds:function(){return(r.timeOrigin+r.now())/1e3}},a=i.nowSeconds.bind(i);o.nowSeconds.bind(o),function(){var e=Object(t.e)().performance;if(e)e.timeOrigin||e.timing&&e.timing.navigationStart||Date.now()}()}.call(this,l(66)(e))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var l=n(0),c=n(21),u=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,d="Invalid Dsn",i=(r.prototype.toString=function(e){var t=this.host,n=this.path,i=this.pass,r=this.port,o=this.projectId;return this.protocol+"://"+this.user+((e=void 0===e?!1:e)&&i?":"+i:"")+"@"+t+(r?":"+r:"")+"/"+(n&&n+"/")+o},r.prototype._fromString=function(e){e=u.exec(e);if(!e)throw new c.a(d);var e=Object(l.c)(e.slice(1),6),t=e[0],n=e[1],i=e[2],i=void 0===i?"":i,r=e[3],o=e[4],o=void 0===o?"":o,a="",e=e[5],s=e.split("/");1<s.length&&(a=s.slice(0,-1).join("/"),e=s.pop()),e&&(s=e.match(/^\d+/))&&(e=s[0]),this._fromComponents({host:r,pass:i,path:a,projectId:e,port:o,protocol:t,user:n})},r.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},r.prototype._validate=function(){var t=this;if(["protocol","user","host","projectId"].forEach(function(e){if(!t[e])throw new c.a(d+": "+e+" missing")}),!this.projectId.match(/^\d+$/))throw new c.a(d+": Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new c.a(d+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new c.a(d+": Invalid port "+this.port)},r);function r(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}},function(e,t,n){"use strict";function i(){this._cache={}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0,i.prototype.existsEntry=function(e){return"template_"+e in this._cache},i.prototype.setEntry=function(e,t){return this._cache[e]=t},i.prototype.getEntry=function(e){return this._cache[e]},i.prototype.clearEntry=function(e){delete this._cache[e]},t.Cache=i},function(e,f,m){"use strict";!function(c){var u,i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},d=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(f,"__esModule",{value:!0}),f.StripeService=void 0,e(m(26))),e=m(41),a=m(111),s=m(25),l=m(7),p=n(m(112)),n=((n=u=u||{}).CONFIRM_3DSECURE_PAYMENT="/stripe/confirm-payment",n.EXECUTE_PAYMENT="/stripe/execute",n.BUY_PACKAGE="/stripe/buy",n.UPDATE_CARD="/stripe/update-card",h.prototype.updateCard=function(s){return t(this,void 0,void 0,function(){var t,n,i,r,o,a;return d(this,function(e){switch(e.label){case 0:return[4,this.getPaymentCardToken(s)];case 1:return t=e.sent(),t=t.id,o=c.post(u.UPDATE_CARD,{token:t}).promise(),r=(i=JSON).parse,[4,o.promise()];case 2:return(n=r.apply(i,[e.sent()]),o={type:"update",notifyParams:{token:t}},this.needs3DSecure(n))?[4,this._resolve3DSecure(n,o)]:[3,4];case 3:return a=e.sent(),[3,5];case 4:a=n,e.label=5;case 5:return[2,a]}})})},h.prototype.setPaymentVia=function(e){this._paymentVia=e},h.prototype.paySubscription=function(l){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:return t={interval:l.subscriptionInterval,users:l.numUsers,signatures:l.numDigitalSignatures,token:void 0,dtr:l.disableTrial,verifyCode:"",code:l.couponCode},this.captcha||(this.captcha=new p.default(document.body)),[4,this.captcha.execute()];case 1:return n=e.sent(),t.verifyCode=n,[4,this._setupPaymentVia(t,l.paymentVia)];case 2:return e.sent(),n=c.post(u.EXECUTE_PAYMENT,t),o=(r=JSON).parse,[4,n.promise()];case 3:return(i=o.apply(r,[e.sent()]),a={type:"subscription",notifyParams:t},this.needs3DSecure(i))?[4,this._resolve3DSecure(i,a)]:[3,5];case 4:return s=e.sent(),[3,6];case 5:s=i,e.label=6;case 6:return[2,s]}})})},h.prototype.payPackage=function(l){return t(this,void 0,void 0,function(){var t,n,i,r,o,a,s;return d(this,function(e){switch(e.label){case 0:return t={package:l.packageName,quantity:l.quantity,token:void 0,dtr:l.disableTrial,verifyCode:""},this.captcha||(this.captcha=new p.default(document.body)),[4,this.captcha.execute()];case 1:return n=e.sent(),t.verifyCode=n,[4,this._setupPaymentVia(t,l.paymentVia)];case 2:return e.sent(),n=c.post(u.BUY_PACKAGE,t),o=(r=JSON).parse,[4,n.promise()];case 3:return(i=o.apply(r,[e.sent()]),a={type:"package",notifyParams:t},this.needs3DSecure(i))?[4,this._resolve3DSecure(i,a)]:[3,5];case 4:return s=e.sent(),[3,6];case 5:s=i,e.label=6;case 6:return[2,s]}})})},h.prototype._setupPaymentVia=function(i,r){return t(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:switch(n=r.type,r.type){case"stripeElement":return[3,1];case"stripeElementUpdateCard":return[3,3];case"paymentMethod":return[3,5]}return[3,6];case 1:return[4,this.getPaymentCardToken(r.cardElement)];case 2:return t=e.sent(),i.token=t.id,[3,7];case 3:return[4,this.getPaymentCardToken(r.cardElement)];case 4:return t=e.sent(),i.token=t.id,i.updatecard=!0,[3,7];case 5:return r.info,[3,7];case 6:throw"Unknown paymentVia type '"+n+"'";case 7:return[2]}})})},h.prototype._resolve3DSecure=function(r,o){return t(this,void 0,void 0,function(){var t,n,i;return d(this,function(e){switch(e.label){case 0:return this.needs3DSecure(r)?(t=this.extractIntentInfo(r),[4,this.show3DSecureScreenToUser(t)]):[2,r];case 1:switch(n=e.sent(),t.intentType){case"setup_intent":return[3,2];case"payment_intent":return[3,3]}return[3,5];case 2:return[2,r];case 3:return i=n.paymentIntent.id,[4,this.confirmPayment3DSecure(i,o)];case 4:return[2,r=e.sent()];case 5:throw"Unknown intent type "+t.intentType}})})},h.prototype.needs3DSecure=function(e){return!(!e||!e.user)&&("payment_intent"in e.user||"setup_intent"in e.user)},h.prototype.extractIntentInfo=function(e){var t;if(e.user.payment_intent)t="payment_intent";else{if(!e.user.setup_intent)throw"Unknown IntentType";t="setup_intent"}return{intentType:t,intentSecret:"payment_intent"===t?e.user.payment_intent:e.user.setup_intent}},h.prototype.confirmPayment3DSecure=function(r,o){return t(this,void 0,void 0,function(){var t,n,i;return d(this,function(e){switch(e.label){case 0:return t=Object.assign({},{payment_intent_id:r},o,o.notifyParams),t=c.post(u.CONFIRM_3DSECURE_PAYMENT,t),i=(n=JSON).parse,[4,t.promise()];case 1:return[2,i.apply(n,[e.sent()])]}})})},h.prototype.show3DSecureScreenToUser=function(i){return t(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return[4,this.stripe];case 1:switch(t=e.sent(),i.intentType){case"setup_intent":return[3,2];case"payment_intent":return[3,4]}return[3,6];case 2:return[4,t.confirmCardSetup(i.intentSecret)];case 3:return n=e.sent(),[3,7];case 4:return[4,t.confirmCardPayment(i.intentSecret)];case 5:return n=e.sent(),[3,7];case 6:throw"Unknown secretType "+i.intentType;case 7:if("error"in n&&n.error)throw n;return[2,n]}})})},h.prototype.getPaymentCardToken=function(i){return t(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return[4,this.stripe];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.createToken(i)];case 3:return n=e.sent(),[3,5];case 4:throw e.sent();case 5:if(n.error)throw this.view.notifyCardErrorMsg(n.error.message),n;return[2,n.token]}})})},Object.defineProperty(h.prototype,"stripe",{get:function(){var n=this;return this._stripe?Promise.resolve(this._stripe):new Promise(function(t,e){n.createStripeInstance().then(function(e){n._stripe=e,t(n._stripe)})})},enumerable:!1,configurable:!0}),h.prototype.loadStripeLibrary=function(){return t(this,void 0,void 0,function(){var i=this;return d(this,function(e){switch(e.label){case 0:return this.isStripeLibLoaded?(this.captcha||(this.captcha=new p.default(document.body)),[2,window.Stripe]):[4,new Promise(function(e,t){o.lazyload(h.stripeLibSrc);var n=window.setInterval(function(){i.isStripeLibLoaded&&(clearInterval(n),i.captcha=new p.default(document.body),e(window.Stripe))},100)})];case 1:return[2,e.sent()]}})})},h.prototype.createStripeInstance=function(){return t(this,void 0,void 0,function(){var t,i,r=this;return d(this,function(e){switch(e.label){case 0:return[4,this.loadStripeLibrary()];case 1:return t=e.sent(),i=t(h.stripeKey,{locale:window.lang}),this.isStripeInstanceReady(i)?[2,i]:[4,new Promise(function(e,t){var n=window.setInterval(function(){r.isStripeInstanceReady(i)&&(window.clearInterval(n),e(i))},100)})];case 2:return[2,e.sent()]}})})},h.prototype.isStripeInstanceReady=function(e){return"object"==typeof e},Object.defineProperty(h.prototype,"isStripeLibLoaded",{get:function(){return null!==window.Stripe&&"function"==typeof window.Stripe},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"paymentVia",{get:function(){return this._paymentVia},enumerable:!1,configurable:!0}),h.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},h.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},h.stripeKey=e.Settings.get("stripe_key"),h.stripeLibSrc="https://js.stripe.com/v3/",h);function h(e){var t=this;void 0===e&&(e={}),this.eventEmitter=new s.ILoveEventEmitter,this.view=new a.StripeView(this,{onActionButtonClicked:function(){t.dispatchEvent(new l.IloveEvent("View:ActionButtonClicked"))}})}f.StripeService=n}.call(this,m(1))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},c=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.StripeView=void 0,n(59)),l=n(8);function d(e,t){var r=this;this._onKeepPaymentMethodBtnClicked=function(e,t){if("stripe"!==t.provider)throw"Payment method is not from provider Stripe";var n=r.currentPaymentMethodView,i=r.newPaymentMethodView;r.stripeService.setPaymentVia({type:"paymentMethod",info:t}),r.payButton.disabled=!1,n.style.display="",i.style.display="none"},this._onChangePaymentMethodBtnClicked=function(e,t){var n=r.currentPaymentMethodView,i=r.newPaymentMethodView;r.stripeService.setPaymentVia({type:"stripeElementUpdateCard",cardElement:t}),r.payButton.disabled=!1,n.style.display="none",i.style.display=""},this._onPayButtonClicked=function(){r.callback_onActionButtonClicked()},this._onStripeNewCardChange=function(e){e.error?r.notifyCardErrorMsg(e.error.message):r.clearCardErrorMsg(),r.payButton.disabled=!1},this.stripeService=e,this.callback_onActionButtonClicked=t.onActionButtonClicked}d.prototype.getTranslationText=function(e){var t=this.view.querySelector(".stripe__text-translations");if(!t)throw"Stripe text translations not found";if(e in(t=JSON.parse(t.textContent)))return t[e];throw"Stripe translation for key "+e+" not found"},d.prototype.disableActionButton=function(){this.view&&(this.payButton.disabled=!1)},d.prototype.enableActionButton=function(){this.view&&(this.payButton.disabled=!1)},d.prototype.mount=function(a,s){var l;return r(this,void 0,void 0,function(){var t,n,i,r,o;return c(this,function(e){switch(e.label){case 0:return this.view?[2,this.view]:[4,u.AjaxTemplate.load(d.TEMPLATE_NAME)];case 1:if(t=e.sent(),(o=document.createElement("div")).innerHTML=t,this.view=o,a.appendChild(this.view),t=this.view.querySelector(d.cardMountPointSelector))return n=this.currentPaymentMethodView,i=this.newPaymentMethodView,[4,(r=this).mountCardOn(t)];throw"Mount point for Stripe card not found";case 2:return r.card=e.sent(),(o="currentPaymentMethod"in s&&"stripe"===(null==(l=null==s?void 0:s.currentPaymentMethod)?void 0:l.provider)&&s.currentPaymentMethod.last_card)?i.style.display="none":n.style.display="none",o?(this.setupViewCurrentPaymentMethod(s.currentPaymentMethod,this.card),this.payButton.disabled=!1,this.stripeService.setPaymentVia({type:"paymentMethod",info:s.currentPaymentMethod})):this.stripeService.setPaymentVia({type:"stripeElement",cardElement:this.card}),this.payButton.innerHTML=s.paymentButtonText,this.payButton.addEventListener("click",this._onPayButtonClicked),[2,this.view]}})})},d.prototype.setupViewCurrentPaymentMethod=function(t,n){var i=this;if("stripe"!==t.provider)throw"Payment method is not from provider Stripe";var e=this.currentPaymentMethodView,r=this.newPaymentMethodView,o=e.querySelector(".payment__card-details__text");if(!o)throw"Stripe - Card Details text not found";var a=o.querySelector(".payment__card-details__text__brand"),o=o.querySelector(".payment__card-details__text__expires"),s=a.innerHTML.replace("${cardBrand}","<span class='payment__card-brand'>${cardBrand}</span>"),a=(a.innerHTML=l.Lang.tr(s,{cardBrand:t.brand_card||"",cardLast4Digits:t.last_card}),o.innerHTML=l.Lang.tr(o.innerHTML,{expMonthCard:t.exp_month_card,expYearCard:t.exp_year_card}),e.querySelector(".payment__card-details__change-btn"));if(!a)throw"Change button for Stripe - CurrentPaymentMethod view not found";a.addEventListener("click",function(e){i._onChangePaymentMethodBtnClicked(e,n)});s=r.querySelector(".payment__card-details__keep-card-btn");if(s.style.display="",!s)throw"'Keep payment method' button for Stripe not found";s.innerHTML=l.Lang.tr(s.innerHTML,{cardBrand:t.brand_card||"",cardLast4Digits:t.last_card}),s.addEventListener("click",function(e){i._onKeepPaymentMethodBtnClicked(e,t)})},Object.defineProperty(d.prototype,"currentPaymentMethodView",{get:function(){var e=this.view.querySelector(".payment__stripe-view__current-payment-method-view");if(e)return e;throw"Stripe - Current Payment Method view not found"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"newPaymentMethodView",{get:function(){var e=this.view.querySelector(".payment__stripe-view__new-payment-method-view");if(e)return e;throw"Stripe - New Payment Method view not found"},enumerable:!1,configurable:!0}),d.prototype.mountCardOn=function(i){return r(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:return[4,this.stripeService.stripe];case 1:return n=e.sent().elements(),t={base:{color:"#32325d",lineHeight:"24px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},(n=n.create("card",{style:t,hidePostalCode:!0})).mount(i),n.addEventListener("change",this._onStripeNewCardChange),[2,n]}})})},d.prototype.notifyCardErrorMsg=function(t){this.cardErrorMsgDom.forEach(function(e){e.classList.remove("payment__card-error--hidden"),e.textContent=t})},d.prototype.clearCardErrorMsg=function(){this.cardErrorMsgDom.forEach(function(e){e.classList.add("payment__card-error--hidden"),e.innerHTML="&nbsp;"})},Object.defineProperty(d.prototype,"payButton",{get:function(){var e=this.view.querySelector(".payment__pay-btn");if(e)return e;throw"Submit button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cardErrorMsgDom",{get:function(){var e=Array.from(this.view.querySelectorAll(".payment__card-error"));if(0===e.length)throw"Card Error Msg DOM not found";return e},enumerable:!1,configurable:!0}),d.TEMPLATE_NAME="stripe",d.cardMountPointSelector=".payment__stripe-view__card-binding",t.StripeView=d},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=(Object.defineProperty(t,"__esModule",{value:!0}),o(n(26))),s=n(15),l=n(18),c="6LfLe9sbAAAAAO7MEsSovv3Na0tNlRReITiueEu8";function u(e,t){var n=this;void 0===t&&(t=null),this.onCaptchaValue=function(e){n.value=e,n.onCaptchaExecuted&&n.onCaptchaExecuted(n.value)},0!=this.captchaNeeded()&&(t&&(this.onCaptchaExecuted=t),this.elementRoot=e,this.appendToElement(),this.loadCaptchaJs())}u.prototype.loadCaptchaJs=function(){var n=this,i=this;return new Promise(function(e,t){if(window.grecaptcha)return n.grecaptcha=window.grecaptcha,e();a.lazyload("https://www.google.com/recaptcha/api.js?render="+c),n.captchaLoadInterval=window.setInterval(function(){null!==window.grecaptcha&&"object"==typeof window.grecaptcha&&(window.grecaptcha.ready(function(){return n.grecaptcha=window.grecaptcha,e()}),clearInterval(i.captchaLoadInterval))},100)})},u.prototype.appendToElement=function(){var e;document.getElementById("recaptcha")||((e=document.createElement("div")).setAttribute("id","recaptcha"),e.setAttribute("class","g-recaptcha"),e.setAttribute("data-sitekey",c),e.setAttribute("data-callback","onCaptchaValue"),e.setAttribute("data-size","invisible"),this.elementRoot.appendChild(e),window.onCaptchaValue=this.onCaptchaValue)},u.prototype._execute=function(e){return void 0===e&&(e=null),self.grecaptcha.execute()},u.prototype.execute=function(e){var n=this;return void 0===e&&(e=null),0==this.captchaNeeded()?(this.value=l.Tools.randomId(),Promise.resolve(this.value)):(e&&(this.onCaptchaExecuted=e),new Promise(function(t,e){n.captchaInterval=window.setInterval(function(){n.grecaptcha&&(clearInterval(n.captchaInterval),n._execute().then(function(e){t(e)}))},100)}))},u.prototype.captchaNeeded=function(){var e=s.UserModel.get();return e&&1==e.sus_rbt},t.default=u},function(e,t,n){"use strict";var s,l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},c=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.PaypalService=void 0,o(n(26))),d=o(n(77)),p=n(41),h=n(25),f=n(7),m=n(59),g=n(82),v=o(n(16)),n=((o=s=s||{}).CREATE_PAYMENT_SUBSC="/paypal/create",o.EXECUTE_PAYMENT_SUBSC="/paypal/execute",o.CREATE_PAYMENT_PKG="/paypal/createbuy",o.EXECUTE_PAYMENT_PKG="/paypal/executebuy",y.prototype.notifyErrorMsg=function(e){this.errorMsgDom.classList.remove("payment__method-error--hidden"),this.errorMsgDom.innerHTML=e},y.prototype.clearErrorMsg=function(){this.errorMsgDom.classList.add("payment__method-error--hidden"),this.errorMsgDom.innerHTML="&nbsp;"},y.prototype.getTranslationText=function(e){var t=this.view.querySelector(".paypal__text-translations");if(!t)throw"Paypal text translations not found";if(e in(t=JSON.parse(t.textContent)))return t[e];throw"Paypal translation for key "+e+" not found"},Object.defineProperty(y.prototype,"errorMsgDom",{get:function(){var e=this.view.querySelector(".payment__method-error");if(e)return e;throw"Missing Paypal Error message DOM not found"},enumerable:!1,configurable:!0}),y.prototype.mountView=function(r,o){return a(this,void 0,void 0,function(){var t,n,i;return c(this,function(e){switch(e.label){case 0:return this.view?[2,this.view]:[4,m.AjaxTemplate.load(y.TEMPLATE_NAME)];case 1:if(t=e.sent(),(n=document.createElement("div")).innerHTML=t,this.view=n,r.appendChild(this.view),!(i=this.view.querySelector(y.buttonMountPointSelector)))throw"Mount point for Paypal button not found";switch(o.action.actionName){case"PaySubscription":this.mountPaySubscription(i,o.action.actionParams);break;case"PayPackage":this.mountPayPackage(i,o.action.actionParams);break;case"UpdateSubscription":this.mountUpdateSubscription(i,o.action.actionParams);break;default:throw"Unknown Paypal action for Paypal mountPoint func"}return[2,this.view]}})})},y.prototype.mountPayPackage=function(i,r){return a(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:return this.packageParams=r,[4,this.loadPaypalLibrary()];case 1:return e.sent(),t=this._onPaymentInit_package,n=this._onAuthorize_package,this.mountPaypalButton(i,{payment:t,onAuthorize:n}),[2]}})})},y.prototype.mountPaySubscription=function(i,r){return a(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:return this.subscriptionParams=r,[4,this.loadPaypalLibrary()];case 1:return e.sent(),t=this._onPaymentInit_subsc,n=this._onAuthorize_subsc,this.mountPaypalButton(i,{payment:t,onAuthorize:n}),[2]}})})},y.prototype.mountUpdateSubscription=function(t,n){return a(this,void 0,void 0,function(){return c(this,function(e){return[2,this.mountPaySubscription(t,n)]})})},y.prototype.mountPaypalButton=function(n,i){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,this.loadPaypalLibrary()];case 1:return t=e.sent(),n.getAttribute("id")||n.setAttribute("id",g.Tools.randomId()),t.Button.render({env:p.Settings.get("paypal_env"),locale:this.assignedLocale,commit:!0,style:{label:"paypal",size:"medium",shape:"rect",color:"blue",tagline:!1},client:{sandbox:p.Settings.get("paypal_sandbox_key"),production:p.Settings.get("paypal_production_key")},payment:i.payment,onAuthorize:i.onAuthorize,onCancel:this._onCancel},"#"+n.getAttribute("id")),[2]}})})},y.prototype.removeUndefinedValuesFromObject=function(e){var t,n={};for(t in e)void 0===e[t]||(n[t]=e[t]);return n},y.prototype.loadPaypalLibrary=function(){return a(this,void 0,void 0,function(){var i=this;return c(this,function(e){switch(e.label){case 0:return this.isPaypalLibLoaded?[2,window.paypal]:[4,new Promise(function(e,t){u.lazyload(y.paypalLibSrc);var n=window.setInterval(function(){i.isPaypalLibLoaded&&(clearInterval(n),e(window.paypal))},100)})];case 1:return[2,e.sent()]}})})},Object.defineProperty(y.prototype,"paypal",{get:function(){var n=this;return new Promise(function(t,e){n.loadPaypalLibrary().then(function(e){return t(e)})})},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isPaypalLibLoaded",{get:function(){return null!==window.paypal&&"object"==typeof window.paypal},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"assignedLocale",{get:function(){var e="en_US";switch(window.lang){case"en-US":e="en_US";break;case"es":e="es_ES";break;case"it":e="it_IT";break;case"fr":e="fr_FR";break;case"de":e="de_DE";break;case"pt":e="pt_BR";break;case"zh-cn":e="zh_CN";break;case"id":e="id_ID";break;case"ja":e="ja_JP";break;case"nl":e="nl_NL";break;case"pl":e="pl_PL";break;case"ru":e="ru_RU";break;case"sv":e="sv_SE";break;case"th":e="th_TH";break;case"zh-tw":e="zh_TW"}return e},enumerable:!1,configurable:!0}),y.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},y.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},y.paypalLibSrc="https://www.paypalobjects.com/api/checkout.js",y.TEMPLATE_NAME="paypal",y.buttonMountPointSelector=".payment__paypal-view__button-binding",y);function y(e){var a=this;if(void 0===e&&(e={}),this._onPaymentInit_package=function(){a._onPaypalButtonClicked();var n=a,i="payPackage",r=a.packageParams;return window.paypal.request.post(s.CREATE_PAYMENT_PKG,{package:r.packageName(),quantity:r.quantity(),dtr:r.disableTrial()}).then(function(e){return n.dispatchEvent(new f.IloveEvent("onPaymentInited",{action:i,params:r,response:e})),e},function(t){v.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),v.captureMessage("Paypal: error on create payment package"),n.dispatchEvent(new f.IloveEvent("onPaymentInited_error",{action:i,params:r,error:JSON.parse(t)}))})},this._onAuthorize_package=function(e){var n=a,i="payPackage",r=a.packageParams;return window.paypal.request.post(s.EXECUTE_PAYMENT_PKG,{token:e.paymentToken,payment_id:e.paymentID,payer_id:e.payerID,package:r.packageName(),quantity:r.quantity(),dtr:r.disableTrial()}).then(function(e){n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized",{action:i,params:r,response:e}))},function(t){v.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),v.captureMessage("Paypal: error on execute payment package"),n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized_error",{action:i,params:r,error:JSON.parse(t)}))})},this._onPaymentInit_subsc=function(){a._onPaypalButtonClicked();var n=a,i="paySubscription",e=window.paypal,r=a.subscriptionParams,t=a.removeUndefinedValuesFromObject({interval:r.subscriptionInterval(),users:r.numUsers(),signatures:r.numDigitalSignatures(),dtr:r.disableTrial()});return e.request.post(s.CREATE_PAYMENT_SUBSC,t).then(function(e){return n.dispatchEvent(new f.IloveEvent("onPaymentInited",{action:i,params:r,response:e})),e},function(t){v.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),v.captureMessage("Paypal: error on create payment subscription"),n.dispatchEvent(new f.IloveEvent("onPaymentInited_error",{action:i,params:r,error:JSON.parse(t)}))})},this._onPaypalButtonClicked=function(){a.clearErrorMsg()},this._onAuthorize_subsc=function(e){var n=a,i="paySubscription",t=window.paypal,r=a.subscriptionParams,o=a.removeUndefinedValuesFromObject({interval:r.subscriptionInterval(),users:r.numUsers(),signatures:r.numDigitalSignatures(),dtr:r.disableTrial()});return t.request.post(s.EXECUTE_PAYMENT_SUBSC,l({token:e.paymentToken,payment_id:e.paymentID,payer_id:e.payerID},o)).then(function(e){n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized",{action:i,params:r,response:e}))},function(t){v.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),v.captureMessage("Paypal: error on execute payment subscription"),n.dispatchEvent(new f.IloveEvent("onPaymentAuthorized_error",{action:i,params:r,error:JSON.parse(t)}))})},this._onCancel=function(e){},this.eventEmitter=new h.ILoveEventEmitter,d.isIEIntranet())throw"Is IE Intranet"}t.PaypalService=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyloadCss=void 0,t.lazyloadCss=function(e,t){void 0===t&&(t={});for(var n=document.getElementsByTagName("link"),i=n.length;i--;)if(n[i].hasAttribute("href")&&n[i].href.match(e))return!0;var r,o,a=document.createElement("link");for(r in a.rel="stylesheet",a.href=e,t)t.hasOwnProperty(r)&&(o=t[r],a.setAttribute(r,o));var s=document.getElementsByTagName("link")[0];return s.parentNode.insertBefore(a,s),!0}},function(e,a,s){"use strict";!function(l){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},c=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},u=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=(Object.defineProperty(a,"__esModule",{value:!0}),a.PluploadUpload=void 0,e(s(26))),d=s(8),p=e(s(16)),h=s(13),t=s(48),f=s(74);function o(e){this.SLOW_CONNECTION_LIMIT=200,this.BPS_CONNECTION_LIMIT=2e4,this.RETRY_NUM=4,this.optionsManager=null,this.processManager=null,this.config=null,this.files=null,this.workerServer=null,this.startServer=null,this.token=null,this.tool=null,this.taskId=null,this.id="pickfiles",this.container="uploader",this.servers=null,this.haveDrop=!0,this.dropElement="workArea",this.ignoreFiles=!1,this.chunkSize="2Mb",Object.assign(this,e),this.appVersion=t.APP_VERSION,this.apiVersion=t.API_VERSION,this.slowConnectionCounter=0,this.dnsFallback=!1,this.dnsFallbackActive=!1,this.servers=this.shuffle(this.servers),this.notCheckedServers=this.servers,this.retryCount=this.RETRY_NUM,this.settimer0=null,this.settimer1=null;e=this.notCheckedServers.indexOf(this.workerServer);-1<e&&this.notCheckedServers.splice(e,1),this.uploader=null,this.timeout=null,this.timeLimit=684e4,this.timeCheck=3e5,this.checkServerStatusOnStart=this.optionsManager.checkServerStatusOnStart,this.init()}o.prototype.shuffle=function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}return e},o.prototype.init=function(){var e=this;this.initPlupload().then(function(){l("#"+e.id).addClass("active"),e.configPlupload(),e.dragDrop(),e.checkTimeoutInterval(),e.listenEventTaskIdChanged(),e.listenEventLimitsChanged()},function(){})},o.prototype.initPlupload=function(){return new Promise(function(e){if(null===window.plupload||void 0!==window.plupload)return e(!0);n.lazyload("/js/plupload/plupload.full.min.js");var t=window.setInterval(function(){if(null!==window.plupload&&"object"==typeof window.plupload)return clearInterval(t),e(!0)},100)})},o.prototype.listenEventTaskIdChanged=function(){var t=this;window.addEventListener("taskIdChanged",function(e){e=e.detail.taskId;e&&t.changeTaskId(e)})},o.prototype.listenEventLimitsChanged=function(){var t=this;window.addEventListener("limitsChanged",function(e){t.checkLimits([],t.id),t.uploadPendingFiles()})},o.prototype.changeDNSServer=function(e){return this.workerServer=this.workerServer.replace(".","-cf."),this.optionsManager.changeServer(this.workerServer),this.uploader.setOption("url",this.workerServer+"/"+this.apiVersion+"/upload"),this.dnsFallbackActive=!0,window.ev("sendOnce","event","upload-info","upload-change","dns - "+e),window.ev("eventOnce","upload-change",{change:"dns",reason:e}),p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"change dns: "+e}),!0},o.prototype.checkServerStatus=function(){var n=this;return new Promise(function(t,e){1==n.optionsManager.checkServerStatusOnStart?(n.optionsManager.checkServerStatusOnStart=!1,n.optionsManager.processManager.api.getStatus(n.workerServer).then(function(e){e&&"down"==e.status&&n.changeServer(),t({})},function(e){n.changeServer(),t({})})):t({})})},o.prototype.changeServer=function(){var e,t,n=this;return this.notCheckedServers=this.notCheckedServers.filter(function(e){return e!=n.workerServer.replace("-cf.",".")}),0<this.notCheckedServers.length&&(e=this.workerServer,t=this.notCheckedServers[0],this.workerServer=t,this.uploader.stop(),this.uploader.setOption("url",t+"/"+this.apiVersion+"/upload"),window.ev("sendOnce","event","upload-info","upload-change","server-"+e),window.ev("eventOnce","upload-change",{server:e}),this.optionsManager.changeServer(t),this.optionsManager.checkServerStatusOnStart=this.checkServerStatusOnStart,this.uploader.start(),p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"change server: "+e+" - "+this.workerServer}),!0)},o.prototype.configPlupload=function(){var t=this,o=this,a={file:null,offset:0,chunk:0},s=(this.uploader=new window.plupload.Uploader({browse_button:o.id,chunk_size:this.chunkSize,max_retries:0,runtimes:"html5",container:o.container,drop_element:o.dropElement,dragdrop:o.haveDrop,multi_selection:o.config.getConfig("multiSelection"),url:o.getUrl(),filters:{mime_types:o.config.getConfig("mimeTypes")},headers:o.getHeaders(),multipart_params:o.getUploadParams(),init:{Init:function(e,t){},PostInit:function(){},QueueChanged:function(e){},FilesAdded:function(n,t){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return f.Banner.preventClick(),[4,o.checkServerStatus()];case 1:return e.sent(),l.each(t,function(e,t){t.upBy=o.id,1==o.ignoreFiles&&(t.ignored=!0,o.optionsManager.limits.addIgnoredFile(t.id)),o.files.addFile(t)}),0!=o.ignoreFiles?[3,3]:[4,o.checkLimits(t,n)];case 2:t=e.sent(),e.label=3;case 3:return(l.each(o.files.removed,function(e,t){try{n.removeFile(t)}catch(e){}}),0<t.length)?(l.each(t,function(e,t){"errorData"in t&&delete t.errorData,o.fileAdded(t,n)}),0==o.files.limited.length&&2!=n.state&&n.start(),[2]):[2,!1]}})})},FilesRemoved:function(e,t){},BeforeUpload:function(e,t){if(!t)return e.stop(),!1;a.file=t,a.offset=0,a.chunk=0,p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"before upload: "+t.name+" w."+t.size})},BeforeChunkUpload:function(e,t,n,i,r){return!1===o.isOnline?(e.stop(),!1):i&&i.size&&0!=i.size?(o.timeout=Date.now(),p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"before chunk: "+a.chunk}),1==o.dnsFallback&&0==o.dnsFallbackActive?(o.changeDNSServer("slow"),s(),!1):void 0):(t.status=window.plupload.FAILED,o.error({error:"FileRemoved",file:t}),t.errorData="FileRemoved",e.removeFile(t.id),o.uploader.stop(),l("body").hasClass("process-run")||o.uploader.start(),!1)},ChunkUploaded:function(e,t,n){a.offset=n.offset,a.chunk++},UploadProgress:function(e,t){if(!t)return!1;l("#uploadSpeed").html(window.plupload.formatSize(e.total.bytesPerSec).toUpperCase()+"/S");var n=Math.round((e.total.size-e.total.loaded)/e.total.bytesPerSec*1e3);null!=i(n)&&l("#timeLeft").html(i(n).toUpperCase()),t.size>3*o.BPS_CONNECTION_LIMIT&&e.total.bytesPerSec<o.BPS_CONNECTION_LIMIT?o.slowConnectionCounter++:o.slowConnectionCounter--,o.slowConnectionCounter==o.SLOW_CONNECTION_LIMIT&&(o.dnsFallback=!0,window.ib&&window.ib.set("c","s"),p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"Slow Connection: Set to change server"}))},FileUploaded:function(e,t,n){a.file=null;n=JSON.parse(n.response);o.fileUploaded(t.id,n)},UploadComplete:function(e,t){t.forEach(function(e){return o.fileChanged(e.id)})},Error:function(e,t){-600==t.code&&0==t.file.origSize?window.Toastr.error(d.Lang.t("EmptyFile")+"<br>"+t.file.name,d.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-600==t.code&&0<t.file.origSize?window.Toastr.error(d.Lang.t("FileSizeExceeded")+"<br>"+t.file.name,d.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-601==t.code?window.Toastr.error(d.Lang.t("InvalidExtension")+"<br>"+t.file.name,d.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-200==t.code&&"status"in t&&400==t.status?o.error(t):-200==t.code?(p.addBreadcrumb({category:"upload",level:h.Severity.Error,message:"Server Error"}),500==t.status||401==t.status?(p.addBreadcrumb({category:"upload",level:h.Severity.Error,message:"Server Error"}),500==t.status&&(p.configureScope(function(e){e.setExtra("error500",t)}),p.captureMessage("upload500")),401==t.status&&(p.configureScope(function(e){e.setExtra("error401",t),e.setExtra("token",o.token)}),p.captureMessage("upload401")),1==o.changeServer()?o.reUploadAllFiles():(o.timeout=null,o.uploader.stop(),o.fatalError("ServerError"),"file"in t&&(t.file.errorData="ServerError"))):0<o.retryCount?(o.retryCount--,o.uploader.stop(),s(!0)):0==o.dnsFallbackActive?(o.uploader.stop(),o.retryCount=o.RETRY_NUM,o.changeDNSServer("connection"),s(!0)):0==t.status&&"HTTP Error."==t.message?1==o.changeServer()?o.reUploadAllFiles():(o.timeout=null,l("body").hasClass("process-run")?(o.error({error:"ConnectionError"}),o.processManager.status="error",o.uploader.stop()):o.error({error:"ConnectionError"})):o.uploader.stop()):(o.uploader.stop(),e.removeFile(t.file.id),o.error(t))}}}),function(e){void 0===e&&(e=!1),a.file.loaded=a.offset,clearTimeout(o.settimer1),o.settimer1=setTimeout(function(){if(p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"retry upload "}),a.file){a.file.status=window.plupload.UPLOADING,o.uploader.state=window.plupload.STARTED;try{o.uploader.trigger("UploadFile",a.file)}catch(e){o.uploader.stop(),o.uploader.start()}}},1500)});function i(e){d.Lang.t("Time left");var t,n=d.Lang.t("minute"),i=d.Lang.t("hour"),r=d.Lang.t("less than"),o=d.Lang.t("minutes"),a=d.Lang.t("hours"),s=d.Lang.t("seconds"),l=Math.floor(e/1e3),e=(e%=1e3,Math.floor(l/60)),c=(l%=60,Math.floor(e/60));e%=60,Math.floor(c/60);return 0==(c%=60)?0==e?t=l+" "+s:1==e?t="1 "+n:1<e&&(t=" "+e+" "+o):1==c?t=r+" "+(1+c)+" "+a:1<c&&(t=r+" "+c+" "+i),t}window.addEventListener("goProcess",function(){var e={task:o.taskId,preview:0,v:o.appVersion};o.uploader.setOption("multipart_params",e)},!1),window.addEventListener("offline",function(){o.isOnline=!1,o.uploader.stop(),p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"go offline "})},!1),window.addEventListener("online",function(){if(o.isOnline=!0,null===a.file)return!1;p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"go online"}),s()},!1),window.addEventListener("fileRemoved",function(e){t.uploader.removeFile(e.detail.fileId),t.optionsManager.limits&&t.optionsManager.limits.setFileLimits(),t.uploadPendingFiles()}),this.uploader.init()},o.prototype.uploadPendingFiles=function(){this.uploader.start()},o.prototype.reUploadAllFiles=function(){var e=this.uploader;p.addBreadcrumb({category:"upload",level:h.Severity.Info,message:"Reuploading all files "+this.id}),e.stop(),clearTimeout(this.settimer0),e.files.forEach(function(e,t){e.status=window.plupload.QUEUED,e.percent=0,e.loaded=0,e.error=!1,e.retry=!0,e.server_filename&&(delete e.server_filename,e.reUploaded=!0)}),this.settimer0=setTimeout(function(){e.refresh(),e.start()},500)},o.prototype.getHeaders=function(){return this.token||p.captureMessage("no token on upload!"),{Authorization:"Bearer "+this.token,Accept:"application/json"}},o.prototype.getUrl=function(){return this.workerServer+"/"+this.apiVersion+"/upload"},o.prototype.getUploadParams=function(){return{task:this.taskId,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0,pdfforms:1==window.pdfforms?1:0,pdfresetforms:1==window.pdfresetforms?1:0,v:this.appVersion}},o.prototype.checkLimits=function(e,t){return this.optionsManager.checkLimits(e,this.id)},o.prototype.getOnlyNoLimitedFiles=function(e){return e.filter(function(e){return!0!==e.limited})},o.prototype.getOnlyLimitedFiles=function(e){return e.filter(function(e){return!0===e.limited})},o.prototype.fileAdded=function(e,t){e.runtime=t.runtime,e.canvasId=e.id,this.optionsManager.fileAdded(e,this.id,this.ignoreFiles).then(function(){},function(){})},o.prototype.fileUploaded=function(e,t){this.optionsManager.fileUploaded(e,t)},o.prototype.fileChanged=function(e){this.optionsManager.fileChanged&&this.optionsManager.fileChanged(e)},o.prototype.error=function(e){this.optionsManager.invalidUpload(e)},o.prototype.fatalError=function(e){this.optionsManager.fatalError(e)},o.prototype.dragDrop=function(){"function"!=typeof l.fn.dndhover&&0!=this.haveDrop&&(l.fn.dndhover=function(e){return this.each(function(){var n=l(this),i=l();n.on("dragenter",function(e){var t;0===i.length&&(t=e.originalEvent.dataTransfer).types&&(t.types.indexOf?-1!=t.types.indexOf("Files"):t.types.contains("Files"))&&n.trigger("dndHoverStart"),i=i.add(e.target)}),n.on("dragleave",function(e){setTimeout(function(){0===(i=i.not(e.target)).length&&n.trigger("dndHoverEnd")},1)}),n.on("drop",function(e){setTimeout(function(){0===(i=i.not(e.target)).length&&n.trigger("dndHoverEnd")},1)})})},l(".tool__workarea").dndhover().on({dndHoverStart:function(e){return l("#dropArea").text(d.Lang.t("dropIt")),l("#dropArea").show(),e.stopPropagation(),e.preventDefault(),!1},dndHoverEnd:function(e){return l("#dropArea").hide(),e.stopPropagation(),e.preventDefault(),!1}}))},o.prototype.timeIsOk=function(){var e;return null==this.timeout||(e=Date.now()-this.timeLimit,this.timeout>e)},o.prototype.checkTimeoutInterval=function(){var e=this;window.setInterval(function(){e.checkTimeout()},e.timeCheck)},o.prototype.checkTimeout=function(){null==this.timeout||this.timeIsOk()||(this.uploader.stop(),this.optionsManager.timeout&&this.optionsManager.timeout(),this.timeout=null)},o.prototype.changeTaskId=function(e){this.taskId=e,this.uploader&&(e=this.getUploadParams(),this.uploader.setOption("multipart_params",e))},a.PluploadUpload=o}.call(this,s(1))},function(e,a,s){"use strict";!function(e,m){var t=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},i=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=(Object.defineProperty(a,"__esModule",{value:!0}),a.ImageView=void 0,s(63)),r=s(129),r=(e.loadImage=r,s(134));function o(e){void 0===e&&(e={}),this.files=null,this.coversShow=!0,this.screenSize=[],this.imageIsLoaded=!1,this.URL=window.URL||window.webkitURL,this.URLObj={},this.imageSrc={},this.utif=s(135),this.useLoadImageLib=!1,Object.assign(this,e),this.init()}e.canvasToBlob=r,o.prototype.init=function(){},o.prototype.renderUrl=function(i,r,o){return void 0===o&&(o=!1),new Promise(function(n,e){var t=document.getElementById(r),t=(1==o?m(t).attr("src",i):m(t).attr("style","background-image: url("+i+");background-size:contain"),new Image);t.src=i,t.onload=function(){var t=new XMLHttpRequest;t.open("HEAD",i,!0),t.onreadystatechange=function(){var e;4==t.readyState&&(e=t.getResponseHeader("Content-Length"),200==t.status&&e?n({size:t.getResponseHeader("Content-Length")}):n({}))},t.send(null)}})},o.prototype.renderImage=function(e,t,n){return void 0===n&&(n=!1),1==this.useLoadImageLib?this.renderImageOrientation(e,t,n):this.renderImageBasic(e,t,n)},o.prototype.hasBrowserAppliedImageOrientation=function(e){return"from-image"===m(e).css("image-orientation")},o.prototype.renderImageBasic=function(e,u,d,t){void 0===d&&(d=!1),void 0===t&&(t=!1);var p=this;n.isIE11(),e.type;return new Promise(function(a,s){var l=document.getElementById(u);try{var c=new FileReader;c.onload=function(e){var t,n=0,n=p.getExifOrientation(e),i=new Uint8Array(c.result),r=null;try{t=new Blob([i]),r=(window.URL||window.webkitURL).createObjectURL(t)}catch(e){return void s(e)}p.imageSrc[u]=r,p.imageIsLoaded=!0;var o=new Image;o.onload=function(){var e=o.height,t=o.width;4<(n=p.hasBrowserAppliedImageOrientation(l)?0:n)&&n<9&&(e=(e+=t)-(t=e-t)),1==d?m(l).attr("src",r):m(l).css("background-image","url("+r+")").css("background-size","contain"),p.transformByOrientation(l,n),a({width:t,height:e})},o.onerror=function(e){m(l).css("background-image",'url("/img/filetype/damaged.svg")').css("background-size","35%;"),s(e)},o.src=r},c.readAsArrayBuffer(e)}catch(e){s()}})},o.prototype.renderHeic=function(e,n){return t(this,void 0,void 0,function(){var t;return i(this,function(e){return(t=document.getElementById(n)).style.backgroundImage="url( '/img/filetype/heic.svg' )",t.style.backgroundSize="contain",[2]})})},o.prototype.transformByOrientation=function(e,t){var n="";if(1<t){switch(t){case 1:break;case 2:n="scaleX(-1)";break;case 3:n="rotate(180deg)";break;case 4:n="rotate(180deg) scale(-1)";break;case 5:n="rotate(90deg) scale(-1)";break;case 6:n="rotate(90deg)";break;case 7:n="rotate(270deg) scale(-1)";break;case 8:n="rotate(270deg)"}m(e).css("transform",n)}},o.prototype.renderImageOrientation=function(e,c,u){void 0===u&&(u=!1);var d=this;return new Promise(function(o,a){var s=document.getElementById(c);try{var l=new FileReader;l.onload=function(e){var t=0,n=new Uint8Array(l.result),n=new Blob([n]);if(1<(t=d.hasBrowserAppliedImageOrientation(s)?t:d.getExifOrientation(e)))window.loadImage(n,function(e){!e||"type"in e&&"error"==e.type?a({error:"damagedImage",message:"cannot render image"}):e.toBlob(function(e){var t,n;try{t=window.URL||window.webkitURL,n=t.createObjectURL(e)}catch(e){return void a(e)}d.imageSrc[c]=n,d.imageIsLoaded=!0;var i=new Image;i.onload=function(){var e=i.height,t=i.width;u?m(s).attr("src",n):m(s).attr("style","background-image: url("+n+");background-size:contain"),window.setTimeout(function(){d.URL.revokeObjectURL(n)},1e3),o({width:t,height:e})},i.onerror=function(e){m(s).attr("style",'background-image: url("/img/filetype/damaged.svg");background-size:35%;'),a(e)},i.src=n})},{canvas:!0,orientation:t});else{var i,t=void 0;try{t=window.URL||window.webkitURL,i=t.createObjectURL(n)}catch(e){return void a(e)}d.imageSrc[c]=i,d.imageIsLoaded=!0;var r=new Image;r.onload=function(){var e=r.height,t=r.width;1==u?m(s).attr("src",i):m(s).css("background-image","url("+i+")").css("background-size","contain"),o({width:t,height:e})},r.onerror=function(e){m(s).css("background-image",'url("/img/filetype/damaged.svg")').css("background-size","35%;"),a(e)},r.src=i}},l.readAsArrayBuffer(e)}catch(e){a()}})},o.prototype.getExifOrientation=function(e){var t=new DataView(e.target.result);if(65496!=t.getUint16(0,!1))return-2;for(var n=t.byteLength,i=2;i<n;){if(t.getUint16(i+2,!1)<=8)return-1;var r=t.getUint16(i,!1);if(i+=2,65505==r){if(1165519206!=t.getUint32(i+=2,!1))return-1;var o=18761==t.getUint16(i+=6,!1),a=(i+=t.getUint32(i+4,o),t.getUint16(i,o));i+=2;for(var s=0;s<a;s++)if(274==t.getUint16(i+12*s,o))return t.getUint16(i+12*s+8,o)}else{if(65280!=(65280&r))break;i+=t.getUint16(i,!1)}}return-1},o.prototype.renderSvg=function(n,o,a){void 0===a&&(a=!1);var s=this;return new Promise(function(i,t){var r=document.getElementById(o),e=new FileReader;e.onload=function(e){s.imageSrc[o]=e.target.result,a?m(r).attr("src",s.imageSrc[o]):m(r).attr("style","background-image: url("+s.imageSrc[o]+");background-size:contain"),s.imageIsLoaded=!0;var n=new Image;n.onload=function(){var e=n.height,t=n.width;i({width:t,height:e})},n.onerror=function(e){m(r).attr("style",'background-image: url("/img/filetype/damaged.svg");background-size:35%;'),t(e)},n.src=s.imageSrc[o]};try{e.readAsDataURL(n)}catch(e){t()}})},o.prototype.renderTif=function(e,p){var h=this,f=document.getElementById(p),t=new FileReader;return new Promise(function(u,d){t.onload=function(e){try{for(var t=h.utif.decode(e.target.result)[0],n=h.utif.toRGBA8(t),i=t.width,r=t.height,o=void 0,a=0,s=(r<i?a=r*(o=h.screenSize.h)/i:o=i*(a=h.screenSize.h)/r,"canvas"!=f.tagName&&(m("#"+p).append('<canvas class="raw"></canvas>'),f=m("#"+p+" canvas")[0]),f.width=i,f.height=r,f.getContext("2d")),l=s.createImageData(i,r),c=0;c<n.length;c++)l.data[c]=n[c];s.putImageData(l,0,0),("canvas"==m("#"+p)[0].tagName?m("#"+p):m("#"+p+" canvas")).css("width",o+"px").css("height",a+"px"),u()}catch(e){d(e)}},t.readAsArrayBuffer(e)})},o.prototype.onFileReady=function(){var i=this;return new Promise(function(e,t){var n=window.setInterval(function(){!0===i.imageIsLoaded&&(clearInterval(n),e())},200)})},a.ImageView=o}.call(this,s(32),s(1))},function(e){e.exports=JSON.parse('{"default":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"editpdf":{"maxFiles":1,"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":false},"sign":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"organize":{"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":true},"split":{"maxFiles":1,"mimeTypes":[{"title":"Pdf files","extensions":"pdf"}],"multiSelection":false},"imagepdf":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,tif,tiff","mime":"image/jpeg,image/jpg,image/png,image/tiff"}]},"watermarkimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,gif","mime":"image/jpeg,image/jpg,image/png,image/gif"}],"multiSelection":true},"officepdf":{"mimeTypes":[{"title":"Word files","extensions":"doc,docx,odt,ott,stw,sdw,sxw"},{"title":"Excel files","extensions":"xls,xlsx,ods,ots,sdc,sxc"},{"title":"Powerpoint files","extensions":"ppt,pptx,odp,pps,ppsx,sxi"}]},"wordpdf":{"mimeTypes":[{"title":"Word files","extensions":"doc,docx,odt,ott,stw,sdw,sxw"}]},"powerpointpdf":{"mimeTypes":[{"title":"Powerpoint files","extensions":"ppt,pptx,odp,pps,ppsx,sxi"}]},"excelpdf":{"mimeTypes":[{"title":"Excel files","extensions":"xls,xlsx,ods,ots,sdc,sxc"}]},"resizeimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,gif,png,svg","mime":"image/jpeg,image/jpg,image/gif,image/png,image/svg+xml"}],"multiSelection":true},"cropimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,gif,png","mime":"image/jpeg,image/jpg,image/gif,image/png"}],"multiSelection":false},"fromjpg":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg","mime":"image/jpeg,image/jpg"}],"multiSelection":true},"tojpg":{"mimeTypes":[{"title":"Image files","extensions":"gif,tif,tiff,png,crw,cr2,dng,raf,nef,nrw,orf,rw2,pef,arw,srf,sr2,raw,psd,svg,webp,heic","mime":"image/png,image/x-sony-arw,image/x-canon-cr2,image/x-canon-crw,image/x-kodak-dcr,image/x-adobe-dng,image/x-epson-erf,image/x-kodak-k25,image/x-kodak-kdc,image/x-minolta-mrw,image/x-nikon-nef,image/x-olympus-orf,image/x-pentax-pef,image/x-fuji-raf,image/x-panasonic-raw,image/x-sony-sr2,image/x-sony-srf,image/x-sigma-x3f,image/svg+xml,mage/vnd.adobe.photoshop,application/x-photoshop,image/webp,image/heic"}],"multiSelection":true},"memeimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,gif","mime":"image/jpeg,image/jpg,image/png,image/gif"}],"multiSelection":false},"compressimage":{"mimeTypes":[{"title":"Image files","extensions":"jpg,jpeg,png,gif,svg","mime":"image/jpeg,image/jpg,image/png,image/gif,image/svg"}],"multiSelection":true}}')},function(e,v,y){"use strict";!function(h){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},o=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},f=(Object.defineProperty(v,"__esModule",{value:!0}),v.Process=void 0,y(8)),a=e(y(16)),m=y(18),s=y(84),l=y(99),n=y(48),c=y(58),u=y(41),d=y(15),p=y(148);function g(e){var o=this;this.beforeExecute=function(){return new Promise(function(t,e){if(d.UserModel.isRealPremium())t(!0);else if(!0===o.limitsConfirmShown)t(!0);else{var n=o.limits.checkFileLimits();if(null===n)t(!0);else{try{window.history.pushState({id:"workarea"},"workarea",null)}catch(e){}o.limitsConfirmShown=!0,window.ib&&window.ib.set("p","lp");var i=document.getElementById("process"),r=(i.style.display="none",document.createElement("div"));r.setAttribute("id","confirmOcr"),i.parentNode.insertBefore(r,i),d.UserModel.isPremium();o.contextConfirmFiles&&(o.contextConfirmFiles=null),o.contextConfirmFiles=new p.ConfirmFilesProcessContext({tool:o.limits.getTool(),limits:o.limits,triggerReason:n}),o.contextConfirmFiles.render(r),o.contextConfirmFiles.addEventListener("end",function(e){e.detail?(o.limitsConfirmShown=!1,t(!1),r.remove()):(r.style.display="none",i.style.display="flex",d.UserModel.isRealPremium()?(o.files.resetLimitedFiles(),o.limits.sendEventLimitsChanged()):o.files.removeLimitedFiles(),t(!0))})}}})},this.stopGoDownload=!1,this.stopGoProblem=!1,this.taskId=null,this.tool=null,this.subtool=null,this.realTool=null,this.files=null,this.limits=null,this.ignoredFiles=[],this.filesUploaded={},this.options=null,this.optionFiles=[],this.workerServer=null,this.downloadUrl="",this.apiVersion="v1",this.appVersion=null,this.exceptions=null,this.userId=null,this.site=null,this.token=null,this.encrypted=!1,this.encryptKey=null,this.processStarted=!1,this.uploadInterval=null,this.processCheckCount=3,this.processWait=!1,this.outToPage=!1,this.processForceEnd=!1,this.params=null,this.status="ok",this.toolEvent=null,this.askedPassword=!1,this.afterFilesLoaded=null,this.processCount=0,Object.assign(this,e),null!=this.tool&&(this.toolEvent=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool)),this.stopGoDownload="dev"==u.Settings.env()&&this.stopGoDownload,this.stopGoProblem="dev"==u.Settings.env()&&this.stopGoProblem,this.initApi()}g.prototype.initApi=function(){this.api=new n.Api({tool:this.tool,taskId:this.taskId,workerServer:this.workerServer,downloadUrl:this.downloadUrl,token:this.token,encrypted:this.encrypted,encryptKey:this.encryptKey})},g.prototype.setOptions=function(e){Object.assign(this.options,e)},g.prototype.setUploadedFiles=function(){this.filesUploaded=this.files.getUploadedFiles()},g.prototype.process=function(){return t(this,void 0,void 0,function(){var t,n,i;return o(this,function(e){switch(e.label){case 0:return this.showProcess(),t=this,window.googletag&&window.googletag.pubads&&window.googletag.pubads().setTargeting&&window.googletag.pubads().setTargeting("pos","pro"),1==t.processForceEnd?[2]:[4,this.beforeExecute()];case 1:if(0!=e.sent())if(1==this.files.checkFilesUploaded())this.showProcess(),n={},h.each(this.files.files,function(e,t){t=/(?:\.([^.]+))?$/.exec(t.name)[1];n[t]=null==n[t]?1:n[t]+1}),i=0,h.each(n,function(e,t){var n=Math.max(i,t);i<t&&(i=n,0)}),this.execute().then(function(e){t.processExecute=!1,t.actionProcess(e)},function(e){-100!=e.status&&(t.processExecute=!1,500==e.status?t.actionProcessError(e,"500 in process"):504==e.status?t.actionProcessError(e,"504 in process"):400==e.status&&e.error&&e.error.param&&e.error.param[0]&&e.error.param[0].error&&"WrongPassword"==e.error.param[0].error?t.askForPassword(e.error.param).then(function(){t.showProcess(),t.setUploadedFiles(),t.processCount=0,t.process()},function(e){t.options.ignore_errors=!0,t.showProcess(),t.setUploadedFiles(),t.processCount=0,t.process()}):400==e.status&&e.error&&e.error.param&&e.error.param.task&&e.error.param.task[0]&&1==e.error.param.task[0].includes("complete status")?(a.captureMessage("Process error repaired "+t.subtool+t.processCount),window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3)):400==e.status?t.actionProcessError(e,{params:t.options}):(window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3)))});else{if(1==this.processStarted)return 0==t.checkFatalError()&&window.setTimeout(function(){t.process()},1e3),[2];this.showUpload(),this.processStarted=!0}return[2]}})})},g.prototype.checkTaskProcess=function(){var t=this;this.processCheckCount--,this.api.getTask().then(function(e){"TaskWaiting"==e.status?(t.setUploadedFiles(),t.process()):"TaskProcessing"==e.status?(window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3)):"TaskSuccess"==e.status||"TaskSuccessWithWarnings"==e.status?t.actionProcess(e):t.actionProcessError(e,{info:"in check task",params:t.options})},function(e){t.processCheckCount<0?t.actionProcessError(e,{info:"in check task error",params:t.options}):(window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3))})},g.prototype.actionProcess=function(e){var t={filesize:e.filesize,server:this.workerServer,status_message:e.status_message,status:e.status,timer:e.timer,tool:this.tool,output_filenumber:e.output_filenumber,output_filesize:e.output_filesize,output_extensions:e.output_extensions,toolUrl:function(e,t){var n=e.split("?");if(2<=n.length){for(var i=encodeURIComponent(t)+"=",r=n[1].split(/[&;]/g),o=r.length;0<o--;)-1!==r[o].lastIndexOf(i,0)&&r.splice(o,1);return n[0]+(0<r.length?"?"+r.join("&"):"")}return e}(window.location.href,"from"),download_filename:e.download_filename,process_start:(new Date).toUTCString()};"warnings"in e&&(t.warnings=e.warnings),!0!==this.stopGoDownload&&(window.ib&&window.ib.count&&window.ib.count("t"),"pdfa"==this.tool&&window.ib&&window.ib.set("u","a"),Cookies.set(this.taskId,t,{expires:1/480})),this.goDownload(e)},g.prototype.actionProcessError=function(t,n){void 0===n&&(n=null);var i=this,e={error:t,server:i.api.getSubdomain(i.workerServer),taskId:i.taskId,tool:i.tool,subtool:i.subtool,toolUrl:window.location.href.split("?")[0]};if(!0!==this.stopGoProblem&&Cookies.set("error",e,{expires:1/480}),t&&t.error&&t.error.param&&t.error.param[0]&&t.error.param[0].error&&("NoText"==t.error.param[0].error||"NoImages"==t.error.param[0].error||"noTablesToExtract"==t.error.param[0].error)||(a.configureScope(function(e){e.setExtra("processError",t),e.setExtra("params",i.options),e.setExtra("extra",n)}),a.captureMessage("Process error "+i.subtool)),t.error){if(t.error.param&&t.error.param[0]&&t.error.param[0].error)return void i.goProblem(t.error.param[0].error);if(t.error.type)return void i.goProblem(t.error.type)}i.goProblem("ServerError")},g.prototype.execute=function(){var t=this,n=this;if(!0===this.processExecute)return new Promise(function(e,t){t({status:-100})});this.processExecute=!0,n.showProcess(),n.setUploadedFiles(),null!=this.afterFilesLoaded&&(this.options=this.afterFilesLoaded(this.files,this.options)),n.params=c.FormDataHelper.jsonToFormData(this.options),n.params.append("task",this.taskId),n.params.append("tool",this.tool),n.options.packaged_filename||(r=this.tool.replace("image","")+"ed",n.params.append("packaged_filename",this.site+"-"+f.Lang.t(r="splited"==(r="resizeed"==(r="croped"==r?"crop":r)?"resized":r)?"split":r)));var e,i,r=d.UserModel.get(),o=(r&&(n.params.append("custom_int",r.id),n.params.append("custom_string",r.loginkey)),0);for(e in n.filesUploaded)n.isIgnored(e)||(i=this.filesUploaded[e],n.params.append("files["+o+"][server_filename]",i.server_filename),n.params.append("files["+o+"][filename]",i.filename),i.rotate&&n.params.append("files["+o+"][rotate]",i.rotate),i.password&&n.params.append("files["+o+"][password]",i.password),i.pages&&n.params.append("files["+o+"][pages]",i.pages),i.elementArray&&c.FormDataHelper.buildFormData(n.params,i.elementArray,"files["+o+"][elementArray]"),i.processed&&n.params.append("files["+o+"][processed]",i.processed),o++);return this.processCount++,0==n.filesUploaded.length?(a.configureScope(function(e){e.setExtra("files",n.filesUploaded),e.setExtra("tool",n.subtool),e.setExtra("count",t.processCount)}),a.captureMessage("Process without files"),new Promise(function(e,t){t({status:400,error:{type:"DamagedFile"}})})):this.api.process(n.params)},g.prototype.showProcess=function(){"error"!=this.status&&(h("body").addClass("process-run"),h(".uploading").hide(),h(".process").css("display","flex").show(),setTimeout(function(){h("#waitnotify").html(f.Lang.t("waitnotify")),h("#waitnotify").show()},1e4))},g.prototype.showUpload=function(){if(1!=this.processStarted){if("error"==this.status)return this.stop(),!0;var t=this,p=(h("body").addClass("process-run"),h(".process").hide(),h(".uploading").css("display","flex").hide().fadeIn(),f.Lang.t("Uploading..."));!0!==this.uploadShowStarted&&(h(".uploading__status__title.drive").hide(),h(".uploading__status__title.dropbox").hide(),h(".uploading__status__title.user").hide(),h(".uploading__bar").hide(),h(".uploading__status__percent").hide(),this.uploadShowStarted=!0),t.uploadInterval=setInterval(function(){var e,n=0,i=0,r=0,o=0,a=0,s=0,l=0,c=0,u=0,d=!0;"error"==t.status&&t.stop(),t.checkFatalError(),h.each(t.files.files,function(e,t){!(t.percent<100)&&"server_filename"in t||!0!==t.error&&(d=!1,t.service,t.service),100==t.percent&&i++,s++,"drive"==t.service?(c++,100==t.percent&&o++):"dropbox"==t.service?(u++,100==t.percent&&a++):(l++,100==t.percent?r++:0<t.percent&&t.percent<100&&"html5"==t.runtime?(p=t.name+" ("+m.Tools.bytesToSize(t.size)+")",h("#upload_"+t.id).addClass("uploading__files__item--active")):h("#upload_"+t.id).removeClass("uploading__files__item--active"),t.loaded,t.size,n+=t.percent)}),h(".uploading__status__percent__value").html(parseInt((n/l).toString())+"%"),h(".uploading__bar__completed").css("width",n/l+"%"),h(".uploading__status__file").html(p),h(".uploading__status__total").html(l.toString()),0<l?(h(".uploading__status__title.user").show(),h(".uploading__bar").show(),h(".uploading__bar--small").hide(),h(".uploading__status__percent").show()):(h(".uploading__status__file").hide(),h(".uploading__status__info").hide()),0<c&&h(".uploading__status__title.drive").show(),0<u&&h(".uploading__status__title.dropbox").show(),r==l&&(h(".uploading__status__file").html(f.Lang.t("uploadComplete")),h(".uploading__bar").hide(),h(".uploading__status__percent").hide()),o==c&&0<c&&h(".uploading__status__title.drive").addClass("done").html("<strong>Google Drive:</strong> "+f.Lang.t("uploadComplete")),a==u&&0<c&&h(".uploading__status__title.dropbox").addClass("done").html("<strong>Dropbox:</strong> "+f.Lang.t("uploadComplete")),h(".uploading__status__title").removeClass("last"),h(".uploading__status__title:visible:last").addClass("last"),i==s&&d&&"error"!=t.status?(clearInterval(t.uploadInterval),window.setTimeout(function(){t.process()},200)):(e=Math.min(r+1,l),h(".uploading__status__current").html(e.toString()))},100)}},g.prototype.goDownload=function(e){1!=this.stopGoDownload&&(window.location.href=this.downloadUrl+"/"+this.taskId+"/"+this.getWorkerNumber())},g.prototype.getWorkerNumber=function(){return this.workerServer.split(".")[0].replace(/^\D+/g,"")},g.prototype.goProblem=function(e){void 0===e&&(e=null);var t="/problem/"+this.tool+"/"+this.taskId+"/"+this.getWorkerNumber();"en-US"!=window.lang&&(t="/"+window.lang+t),null!==e&&("string"==typeof e?t=t+"/"+e:e.error&&"string"==typeof e.error?t=t+"/"+e.error:t+="/ServerError"),1!=this.stopGoProblem&&(window.location.href=t)},g.prototype.askForPassword=function(e){var o=this,n=[];return h.each(e,function(e,t){"WrongPassword"==t.error&&n.push(o.files.getFileByServerFilename(t.server_filename))}),new Promise(function(e,t){h("#process").hide(),0==h("#passwordAsk").length&&(h(s.OptionsTemplate.askPassword()).insertAfter(h("#process")),1<o.files.files.length?h("#ignorePwdFiles").show():h("#ignorePwdFiles").hide(),"unlock"==o.tool&&h("#useUnlock").hide(),h(".passwords").append(h(s.OptionsTemplate.askPasswordField({id:"all",server_filename:""}))),h("#pwd-all").hide(),h("#allPwd").on("change",function(){1==h("#allPwd").is(":checked")?(h(".password").hide(),h("#pwd-all").show()):(h(".password").show(),h("#pwd-all").hide())})),h("#pwdSend").unbind("click").on("click",function(){var i=null,r=(1==h("#allPwd").is(":checked")&&(i=h("#pwd-all input").val()),!0);h.each(o.files.files,function(e,t){var n=null==i?h("#pwd-"+t.id+" input").val():i;if(""==n)return r=!1,h("#pwd-"+t.id+" input").focus(),window.Toastr.error(f.Lang.t("passwordRequiredFor",{filename:t.name}),f.Lang.t("paswordRequired"),{timeOut:5e3,positionClass:"toast-top-left"}),!1;o.files.updateFile(t.id,{password:n})}),!0===r&&(h("#passwordAsk").hide(),e({}))}),h("#pwdCancel").unbind("click").on("click",function(){h.each(n,function(e,t){o.files.removeFile(t.id),h("#pwd-"+t.id).remove()}),h("#passwordAsk").hide(),t()}),h("#pwdIgnore").unbind("click").on("click",function(){h("#passwordAsk").hide(),t()}),h("#passwordAsk .passwordInput").hide(),h(".password").hide(),h.each(n,function(e,t){0==h("#pwd-"+t.id).length&&(h(".passwords").append(h(s.OptionsTemplate.askPasswordField({id:t.id,server_filename:t.name}))),h("#pwd-"+t.id+" .showPassword").on("click",function(e){e.preventDefault(),h(".password input").attr("type","text"==h(".password input").attr("type")?"password":"text")})),h("#pwd-"+t.id).show()}),n.length<2&&h("#allPwd").parent().parent().hide(),h("#passwordAsk").show(),setTimeout(function(){h("#passwordAsk input:visible:first").focus()},1e3),0==o.askedPassword&&(o.askedPassword=!0,window.ev("send","event","password","ask",o.subtool),window.ev("event","password",{tool:o.subtool}))})},g.prototype.fatalError=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),"ConnectionError"!=(e=void 0===e?null:e)&&l.IloveError.fatalError(e,this.tool,this.workerServer,t,n)},g.prototype.removeFile=function(e){var t,n,e=this.files.getFile(e);return null==e?new Promise(function(e,t){e({})}):(t=e.server_filename,n=e.status,this.files.removeFile(e.id),5!=n?new Promise(function(e,t){e({})}):this.api.removeFile(t))},g.prototype.addIgnoredFile=function(e){this.ignoredFiles.push(e)},g.prototype.getIgnoredFiles=function(){return this.ignoredFiles},g.prototype.isIgnored=function(e){return-1!=this.ignoredFiles.indexOf(e)},g.prototype.deleteIgnored=function(e){e=this.ignoredFiles.indexOf(e);-1!==e&&this.ignoredFiles.splice(e,1)},g.prototype.stop=function(){clearInterval(this.uploadInterval)},g.prototype.checkFatalError=function(){if("error"==this.status)return this.stop(),!0;var n=this;if(0==this.files.files.length)return this.fatalError({error:"NoFiles"}),this.status="error",this.stop(),!0;try{h.each(n.files.files,function(e,t){if("errorData"in t)throw n.fatalError(t.errorData,t.name,"error data on task"),t.errorData})}catch(e){return n.status="error",n.stop(),!0}if(1==n.files.files.length&&!0===n.files.files[0].error)return n.status="error",n.fatalError(n.files.files[0].errorData,n.files.files[0].name,"error field on task"),n.stop(),!0;try{h.each(n.files.files,function(e,t){if("FileRemoved"==t.errorData)throw n.fatalError(t.errorData,t.name,"file removed on task"),t.errorData})}catch(e){return n.stop(),n.status="error",!0}if("merge"==this.tool)try{h.each(n.files.files,function(e,t){if("errorData"in t)throw n.fatalError(t.errorData,t.name,"error data on task, merge tool"),t.errorData})}catch(e){return n.status="error",n.stop(),!0}return!1},v.Process=g}.call(this,y(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.AuthState=void 0,n(85)),n=(r=n.AbstractAuthState,o(a,r),a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.onDomReady=function(){t.initAbstractAuth(),t.ctx.tool&&(t.extraLoginParams={tool:t.ctx.tool}),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){var e=t.ctx._getInitialState();t.ctx.changeState(e),e.render(t.domRoot)},t}t.AuthState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.CannotTrialState=void 0,n(121)),n=n(64),n=(r=n.AbstractPaymentState,o(s,r),s);function s(){var n=null!==r&&r.apply(this,arguments)||this;return n.name="CannotTrialState",n.LAYOUT_TEMPLATE_NAME="new-premium",n.INITIAL_SCREEN="default",n.onDomReady=function(){n.changeScreen(n.INITIAL_SCREEN),n.initAbstractPayment({paymentAction:"become_premium",paymentInterval:{type:"gui",gui:"boxes"},currentPaymentMethod:n.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:n.t("paymentButtonText")},{name:"paypal"}]}).then(n._onAbstractPaymentInited)},n._onPaymentSuccess=function(e){var t="dialog"===n.ctx.getContextPlacement()?"popup":"auth",t=(window.ev("send","event","user","premium",t),window.ev("event","premium",{origin:t}),new a.SubscriptionSuccessState);n.ctx.changeState(t),t.render(n.domRoot)},n._onPaymentFailed=function(e){},n._onAbstractPaymentInited=function(){setTimeout(n.clearLoadingScreen,150)},n}t.CannotTrialState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionSuccessState=void 0,n(7)),s=n(8),l=n(15),n=n(17),n=(r=n.StateBase,o(c,r),c.prototype.init=function(){this.actionBtn.addEventListener("click",this._onDoneButtonClick);var e=this.dialogSubtitle;e.innerHTML=e.innerHTML.replace("${email}","<b>${email}</b>"),e.innerHTML=s.Lang.tr(e.innerHTML,{email:this.authenticatedUserEmail})},c.prototype.hideHeaderAndFooter=function(){var e=this.domRoot.querySelector(".dialog__header");if(!e)throw"Header not found";var t=this.domRoot.querySelector(".dialog__footer");if(!t)throw"Footer not found";e.style.display="none",t.style.display="none"},Object.defineProperty(c.prototype,"dialogSubtitle",{get:function(){var e=this.domStateRoot.querySelector(".dialog__subtitle");if(e)return e;throw"Description elem not found"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"authenticatedUserEmail",{get:function(){var e=l.UserModel.get();if(e)return e.email;throw"Authenticated user not found!"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action [next-from-payment-completed]");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),c);function c(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="SubscriptionSuccessState",e.LAYOUT_TEMPLATE_NAME="new-premium",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.ctx.setEndState(),e.changeScreen(e.INITIAL_SCREEN),e.init(),e.hideHeaderAndFooter(),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new a.IloveEvent("end"))},e}t.SubscriptionSuccessState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.CanTrialState=void 0,n(64)),s=n(123),n=(r=a.AbstractPaymentState,o(l,r),l);function l(){var i=null!==r&&r.apply(this,arguments)||this;return i.name="CanTrialState",i.LAYOUT_TEMPLATE_NAME="new-premium",i.INITIAL_SCREEN="default",i.onDomReady=function(){i.changeScreen(i.INITIAL_SCREEN),i.initAbstractPayment({paymentAction:"become_premium",paymentInterval:{type:"gui",gui:"radio"},currentPaymentMethod:i.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:i.t("paymentButtonText")},{name:"paypal"}]}).then(i._onAbstractPaymentInited)},i._onPaymentSuccess=function(e,t){var n="dialog"===i.ctx.getContextPlacement()?"popup":"auth",n=(window.ev("send","event","user","premium",n),window.ev("event","premium",{origin:n}),new s.TrialSuccessState);i.ctx.changeState(n),n.render(i.domRoot)},i._onPaymentFailed=function(e,t){},i._onAbstractPaymentInited=function(){setTimeout(i.clearLoadingScreen,150)},i}t.CanTrialState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.TrialSuccessState=void 0,n(7)),s=n(8),l=n(15),n=n(17),n=(r=n.StateBase,o(c,r),c.prototype.init=function(){this.actionBtn.addEventListener("click",this._onDoneButtonClick);var e=this.dialogSubtitle;e.innerHTML=e.innerHTML.replace("${email}","<b>${email}</b>"),e.innerHTML=s.Lang.tr(e.innerHTML,{email:this.authenticatedUserEmail})},c.prototype.hideHeaderAndFooter=function(){var e=this.domRoot.querySelector(".dialog__header");if(!e)throw"Header not found";var t=this.domRoot.querySelector(".dialog__footer");if(!t)throw"Footer not found";e.style.display="none",t.style.display="none"},Object.defineProperty(c.prototype,"dialogSubtitle",{get:function(){var e=this.domStateRoot.querySelector(".dialog__subtitle");if(e)return e;throw"Description elem not found"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"authenticatedUserEmail",{get:function(){var e=l.UserModel.get();if(e)return e.email;throw"Authenticated user not found!"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action [next-from-payment-completed]");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),c);function c(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="TrialSuccessState",e.LAYOUT_TEMPLATE_NAME="new-premium",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.ctx.setEndState(),e.changeScreen(e.INITIAL_SCREEN),e.init(),e.hideHeaderAndFooter(),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new a.IloveEvent("end"))},e}t.TrialSuccessState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.PremiumState=void 0,n(7)),n=n(17),n=(r=n.StateBase,o(s,r),s.prototype.render=function(e){this.dispatchEvent(new a.IloveEvent("end"))},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="PremiumState",e.LAYOUT_TEMPLATE_NAME="new-premium",e.INITIAL_SCREEN="default",e.onDomReady=function(){},e}t.PremiumState=n},function(e,i,t){"use strict";!function(t){function n(){}Object.defineProperty(i,"__esModule",{value:!0}),i.Network=void 0,n.checkNetwork=function(){var e=navigator.onLine;window.setInterval(function(){navigator.onLine?0==e&&(e=!0,n.hideNetworkAlert()):1==e&&(e=!1,n.showNetworkAlert(),t("#uploadSpeed").html("0 KB/s"),t("#timeLeft").html("&infin;"))},1e3)},n.showNetworkAlert=function(){t("#network").css("display","flex").hide().fadeIn()},n.hideNetworkAlert=function(){t("#network").fadeOut()},n.waitForConnection=function(i){void 0===i&&(i=null);var r=0;return new Promise(function(e,t){var n=window.setInterval(function(){navigator.onLine&&(window.clearInterval(n),e()),r+=1e3,null!=i&&i<=r&&(window.clearInterval(n),t())},1e3)})},i.Network=n}.call(this,t(1))},function(e,t,n){"use strict";!function(i){function e(){}Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0,e.init=function(){i(document).on({"show.bs.modal":function(){e.setZindex(this)},"hidden.bs.modal":function(){e.cleanZindex()}},".modal")},e.setZindex=function(e){var n=1050;i(".modal:visible, .dialog:visible").each(function(e,t){n=Math.max(n,parseInt(i(t).css("z-index"))+10)}),i(e).css("z-index",n),setTimeout(function(){i(".modal-backdrop").not(".modal-stack").css("z-index",n-1).addClass("modal-stack")},10)},e.cleanZindex=function(){0<i(".modal:visible, .dialog:visible").length&&setTimeout(function(){i(document.body).addClass("modal-open")},10)},t.Modal=e}.call(this,n(1))},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.DriveService=void 0,o(n(26))),s=n(63);function l(e){var t=this;void 0===e&&(e={}),this.init=function(){t.startLoadingBtn(),t.load().then(function(){setTimeout(function(){t.endLoadingBtn(),t.drive()},500)},function(){})},this.srcApi="https://apis.google.com/js/platform.js",this.srcGsi="https://accounts.google.com/gsi/client",this.appId="391438661644",this.developerKey="AIzaSyAscL1olxYauMLc0sj0LXpCWL2Jmztr8dA",this.clientId="391438661644-2uum636mg2ckariol0if8h3364a1h6dc.apps.googleusercontent.com",this.scope="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/drive",this.URL_API="https://www.googleapis.com/drive/v3/",this.preloadSrc=s.checkPreloadIsNeeded(),Object.assign(this,e)}l.prototype.start=function(){1==this.preloadSrc?this.init():this.waitForClickToInit()},l.prototype.waitForClickToInit=function(){document.getElementById(this.id).addEventListener("click",this.init)},l.prototype.startLoadingBtn=function(){var e=document.getElementById(this.id);1==this.preloadSrc?e.classList.remove("active"):e.classList.add("load")},l.prototype.endLoadingBtn=function(){var e=document.getElementById(this.id);1==this.preloadSrc?(e.classList.add("active"),document.getElementById(this.id).addEventListener("click",this.init)):e.classList.remove("load")},l.prototype.load=function(){var i=this;return new Promise(function(e,t){if(null===window.gapi||void 0!==window.gapi)return e(!0);a.lazyload(i.srcApi),a.lazyload(i.srcGsi);var n=window.setInterval(function(){if(null!==window.gapi&&"object"==typeof window.gapi&&null!==window.google&&"object"==typeof window.google)return clearInterval(n),e(!0)},100)})},l.prototype.drive=function(){},t.DriveService=l},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.DropboxService=void 0,o(n(26))),s=n(63);function l(e){var t=this;void 0===e&&(e={}),this.init=function(){t.startLoadingBtn(),t.load().then(function(){setTimeout(function(){t.endLoadingBtn(),t.initDropbox()},500)},function(){})},this.dropbox=function(){},this.src="https://www.dropbox.com/static/api/2/dropins.js",this.appKey="xntw8za866940lz",this.id=null,this.preloadSrc=s.checkPreloadIsNeeded(),Object.assign(this,e)}l.prototype.start=function(){1==this.preloadSrc?this.init():this.waitForClickToInit()},l.prototype.waitForClickToInit=function(){document.getElementById(this.id).addEventListener("click",this.init)},l.prototype.startLoadingBtn=function(){var e=document.getElementById(this.id);1==this.preloadSrc?e.classList.remove("active"):e.classList.add("load")},l.prototype.endLoadingBtn=function(){var e=document.getElementById(this.id);1==this.preloadSrc?e.classList.add("active"):e.classList.remove("load")},l.prototype.load=function(){var i=this;return new Promise(function(e,t){if(null===window.Dropbox||void 0!==window.Dropbox)return e(!0);a.lazyload(i.src,{"data-app-key":i.appKey,id:"dropboxjs"});var n=window.setInterval(function(){if(null!==window.Dropbox&&"object"==typeof window.Dropbox||"function"==typeof window.Dropbox)return clearInterval(n),e(!0)},100)})},l.prototype.initDropbox=function(){1==this.preloadSrc?document.getElementById(this.id).addEventListener("click",this.dropbox):(document.getElementById(this.id).removeEventListener("click",this.init),document.getElementById(this.id).addEventListener("click",this.dropbox),this.dropbox())},t.DropboxService=l},function(e,t,n){e.exports=n(31),n(90),n(47),n(130),n(91),n(131),n(92),n(132),n(133)},function(e,t,n){var i,r;!function(){"use strict";r=[n(31),n(47)],void 0!==(r="function"==typeof(i=function(r){"use strict";if(typeof fetch!=="undefined"&&typeof Request!=="undefined")r.fetchBlob=function(e,t,n){if(r.hasMetaOption(n))fetch(new Request(e,n)).then(function(e){return e.blob()}).then(t).catch(function(e){console.log(e);t()});else t()};else if(typeof XMLHttpRequest!=="undefined"&&typeof ProgressEvent!=="undefined")r.fetchBlob=function(e,t,n){if(r.hasMetaOption(n)){n=n||{};var i=new XMLHttpRequest;i.open(n.method||"GET",e);if(n.headers)Object.keys(n.headers).forEach(function(e){i.setRequestHeader(e,n.headers[e])});i.withCredentials=n.credentials==="include";i.responseType="blob";i.onload=function(){t(i.response)};i.onerror=i.onabort=i.ontimeout=function(e){console.log(e);t()};i.send(n.body)}else t()}})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,t,n){var i,r;!function(){"use strict";r=[n(31),n(91)],void 0!==(r="function"==typeof(i=function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)};var t=e.ExifMap.prototype,n=t.tags,i=t.map,r;for(r in n)if(Object.prototype.hasOwnProperty.call(n,r))i[n[r]]=r;e.ExifMap.prototype.getAll=function(){var e={};var t;var n;for(t in this)if(Object.prototype.hasOwnProperty.call(this,t)){n=this.tags[t];if(n)e[n]=this.getText(n)}return e}})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,t,n){var i,r;!function(){"use strict";r=[n(31),n(92)],void 0!==(r="function"==typeof(i=function(e){"use strict";e.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},e.IptcMap.prototype.getText=function(e){var t=this.get(e);return String(t)};var t=e.IptcMap.prototype,n=t.tags,i=t.map||{},r;for(r in n)if(Object.prototype.hasOwnProperty.call(n,r))i[n[r]]=r;e.IptcMap.prototype.getAll=function(){var e={};var t;var n;for(t in this)if(Object.prototype.hasOwnProperty.call(this,t)){n=this.tags[t];if(n)e[n]=this.getText(n)}return e}})?i.apply(t,r):i)&&(e.exports=r)}()},function(e,t,n){var i,r;!function(){"use strict";r=[n(31),n(90),n(47)],void 0!==(r="function"==typeof(i=function(l){"use strict";var t=l.hasCanvasOption,n=l.hasMetaOption,c=l.transformCoordinates,s=l.getTransformedOptions,e="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA"+"AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA"+"QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE"+"BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x"+"ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA"+"AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",i=document.createElement("img");i.onload=function(){l.orientation=i.width===1&&i.height===2},i.src=e,l.hasCanvasOption=function(e){return!!e.orientation===true&&!l.orientation||e.orientation>1&&e.orientation<9||t.call(l,e)},l.hasMetaOption=function(e){return e&&e.orientation===true&&!l.orientation||n.call(l,e)},l.transformCoordinates=function(e,t){c.call(l,e,t);var n=e.getContext("2d");var i=e.width;var r=e.height;var o=e.style.width;var a=e.style.height;var s=t.orientation;if(!(s>1&&s<9))return;if(s>4){e.width=r;e.height=i;e.style.width=a;e.style.height=o}switch(s){case 2:n.translate(i,0);n.scale(-1,1);break;case 3:n.translate(i,r);n.rotate(Math.PI);break;case 4:n.translate(0,r);n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI);n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI);n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI);n.translate(i,-r);n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI);n.translate(-i,0);break}},l.getTransformedOptions=function(e,t,n){var i=s.call(l,e,t);var r=i.orientation;var o;var a;if(r===true){if(l.orientation)return i;r=n&&n.exif&&n.exif.get("Orientation")}if(!(r>1&&r<9))return i;o={};for(a in i)if(Object.prototype.hasOwnProperty.call(i,a))o[a]=i[a];o.orientation=r;switch(r){case 2:o.left=i.right;o.right=i.left;break;case 3:o.left=i.right;o.top=i.bottom;o.right=i.left;o.bottom=i.top;break;case 4:o.top=i.bottom;o.bottom=i.top;break;case 5:o.left=i.top;o.top=i.left;o.right=i.bottom;o.bottom=i.right;break;case 6:o.left=i.top;o.top=i.right;o.right=i.bottom;o.bottom=i.left;break;case 7:o.left=i.bottom;o.top=i.right;o.right=i.top;o.bottom=i.left;break;case 8:o.left=i.bottom;o.top=i.left;o.right=i.top;o.bottom=i.right;break}if(o.orientation>4){o.maxWidth=i.maxHeight;o.maxHeight=i.maxWidth;o.minWidth=i.minHeight;o.minHeight=i.minWidth;o.sourceWidth=i.sourceHeight;o.sourceHeight=i.sourceWidth}return o}})?i.apply(t,r):i)&&(e.exports=r)}()},function(t,n,i){var a;!function(e){"use strict";var r=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,s=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),l=s&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),c=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,u=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,o=(s||c)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,n,i,r,o,a=e.match(u);if(!a)throw new Error("invalid data URI");for(t=a[2]?a[1]:"text/plain"+(a[3]||";charset=US-ASCII"),o=!!a[4],e=e.slice(a[0].length),n=(o?atob:decodeURIComponent)(e),a=new ArrayBuffer(n.length),i=new Uint8Array(a),r=0;r<n.length;r+=1)i[r]=n.charCodeAt(r);return s?new Blob([l?i:a],{type:t}):((o=new c).append(a),o.getBlob(t))};e.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(e,t,n){var i=this;setTimeout(function(){n&&r.toDataURL&&o?e(o(i.toDataURL(t,n))):e(i.mozGetAsFile("blob",t))})}:r.toDataURL&&o&&(r.msToBlob?r.toBlob=function(e,t,n){var i=this;setTimeout(function(){(t&&"image/png"!==t||n)&&r.toDataURL&&o?e(o(i.toDataURL(t,n))):e(i.msToBlob(t))})}:r.toBlob=function(e,t,n){var i=this;setTimeout(function(){e(o(i.toDataURL(t,n)))})})),void 0!==(a=function(){return o}.call(n,i,n,t))&&(t.exports=a)}(window)},function(e,t,v){!function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i,r,o,a,s,l,T={};function c(e,t,n,i){for(var r=0;r<t.length;r++)e[t[r]]=n+r*i}T.decode=function(e){T.decode._decodeG3.allow2D=null;for(var t=new Uint8Array(e),n="II"==T._binBE.readASCII(t,0,2)?T._binLE:T._binBE,i=(n.readUshort(t,2),n.readUint(t,4)),r=[];;){var o=T.decode._readIFD(n,t,i,r);if(0==(i=n.readUint(t,o)))break}for(var a=0;a<r.length;a++){var s=r[a],l=(s.width=s.t256[0],delete s.t256,s.height=s.t257[0],delete s.t257,s.t259[0]),c=(delete s.t259,s.t266?s.t266[0]:1),u=(delete s.t266,s.t284&&s.t284[0],(s.t258?s.t258[0]:1)*(s.t277?s.t277[0]:1)),d=s.t273,p=(null==d&&(d=s.t324),s.t279),h=(null==(p=1==l&&1==d.length?[s.height*s.width*u>>3]:p)&&(p=s.t325),new Uint8Array(s.width*s.height*u>>3)),f=0;if(null!=s.t322){for(var m=s.t322[0],g=s.t323[0],v=Math.floor((s.width+m-1)/m),y=Math.floor((s.height+g-1)/g),_=new Uint8Array(m*g*u>>3),b=0;b<y;b++)for(var w=0;w<v;w++){for(var E=b*v+w,S=0;S<_.length;S++)_[S]=0;T.decode._decompress(s,t,d[E],p[E],l,_,0,c),T._copyTile(_,m*u>>3,g,h,s.width*u>>3,s.height,w*m*u>>3,b*g)}f=h.length<<3}else{for(var x=s.t278?s.t278[0]:s.height,x=Math.min(x,s.height),E=0;E<d.length;E++)T.decode._decompress(s,t,d[E],p[E],l,h,f>>3,c),f+=s.width*u*x;f=Math.min(f,h.length<<3)}s.data=new Uint8Array(h.buffer,0,f>>3)}return r},T.decode._decompress=function(e,t,n,i,r,o,a,s){var l=v(137);if(1==r)for(var c=0;c<i;c++)o[a+c]=t[n+c];else if(3==r)T.decode._decodeG3(t,n,i,o,a,e.width,s);else if(4==r)T.decode._decodeG4(t,n,i,o,a,e.width,s);else if(5==r)T.decode._decodeLZW(t,n,o,a);else if(8==r)for(var s=new Uint8Array(t.buffer,n,i),u=l.inflate(s),d=0;d<u.length;d++)o[a+d]=u[d];else 32773==r?T.decode._decodePackBits(t,n,i,o,a):32809==r&&T.decode._decodeThunder(t,n,i,o,a);if(e.t317&&2==e.t317[0])for(var p=e.t277?e.t277[0]:1,h=e.t278?e.t278[0]:e.height,f=e.width*p,m=0;m<h;m++)for(var g=a+m*f,c=p;c<f;c++)o[g+c]=o[g+c]+o[g+c-p]&255},T.decode._decodePackBits=function(e,t,n,i,r){for(var o=new Int8Array(e.buffer),a=new Int8Array(i.buffer),s=t+n;t<s;){var l=o[t];if(t++,0<=l&&l<128)for(var c=0;c<l+1;c++)a[r]=o[t],r++,t++;if(-127<=l&&l<0){for(c=0;c<1-l;c++)a[r]=o[t],r++;t++}}},T.decode._decodeThunder=function(e,t,n,i,r){for(var o=[0,1,0,-1],a=[0,1,2,3,0,-3,-2,-1],s=t+n,l=2*r,c=0;t<s;){var u,d=e[t],p=d>>6,h=63&d;if(t++,3==p&&(i[l>>1]|=(c=15&h)<<4*(1-l&1),l++),0==p)for(var f=0;f<h;f++)i[l>>1]|=c<<4*(1-l&1),l++;if(2==p)for(f=0;f<2;f++)4!=(u=h>>3*(1-f)&7)&&(c+=a[u],i[l>>1]|=c<<4*(1-l&1),l++);if(1==p)for(f=0;f<3;f++)2!=(u=h>>2*(2-f)&3)&&(c+=o[u],i[l>>1]|=c<<4*(1-l&1),l++)}},T.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},T.decode._lens=(n="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",i="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",r="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",o=(o="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100").split(","),n=n.split(","),i=i.split(","),r=r.split(","),a="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111".split(","),l={},c(s={},o,0,1),c(s,i,64,64),c(s,a,1792,64),c(l,n,0,1),c(l,r,64,64),c(l,a,1792,64),[s,l]),T.decode._decodeG4=function(e,t,n,i,r,o,a){for(var s=T.decode,l=t<<3,c=0,u="",d=[],p=[],h=0;h<o;h++)p.push(0);for(var p=s._makeDiff(p),f=0,m=0,g=0,v="",y=0;l>>3<t+n;){var _=s._findDiff(p,f+(0==f?0:1),1-m),b=s._findDiff(p,_,m),w=0;1==a&&(w=e[l>>3]>>7-(7&l)&1),2==a&&(w=e[l>>3]>>(7&l)&1),l++,u+=w,"H"==v?null!=s._lens[m][u]&&(w=s._lens[m][u],u="",c+=w,w<64)&&(s._addNtimes(d,c,m),f+=c,m=1-m,(c=0)==--y)&&(v=""):("0001"==u&&(u="",s._addNtimes(d,b-f,m),f=b),"001"==u&&(u="",v="H",y=2),null!=s._dmap[u]&&(w=_+s._dmap[u],s._addNtimes(d,w-f,m),f=w,u="",m=1-m)),d.length==o&&""==v&&(s._writeBits(d,i,8*r+g*o),g++,f=m=0,p=s._makeDiff(d),d=[])}},T.decode._findDiff=function(e,t,n){for(var i=0;i<e.length;i+=2)if(e[i]>=t&&e[i+1]==n)return e[i]},T.decode._makeDiff=function(e){var t=[];1==e[0]&&t.push(0,1);for(var n=1;n<e.length;n++)e[n-1]!=e[n]&&t.push(n,e[n]);return t.push(e.length,0,e.length,1),t},T.decode._decodeG3=function(e,t,n,i,r,o,a){for(var s=T.decode,l=t<<3,c=0,u="",d=[],p=[],h=0;h<o;h++)d.push(0);for(var f=0,m=0,g=-1,v="",y=0,_=!1;l>>3<t+n;){var b,w=s._findDiff(p,f+(0==f?0:1),1-m),E=s._findDiff(p,w,m),S=0;1==a&&(S=e[l>>3]>>7-(7&l)&1),2==a&&(S=e[l>>3]>>(7&l)&1),l++,u+=S,_?null!=s._lens[m][u]&&(b=s._lens[m][u],u="",c+=b,b<64)&&(s._addNtimes(d,c,m),m=1-m,c=0):"H"==v?null!=s._lens[m][u]&&(b=s._lens[m][u],u="",c+=b,b<64)&&(s._addNtimes(d,c,m),f+=c,m=1-m,(c=0)==--y)&&(v=""):("0001"==u&&(u="",s._addNtimes(d,E-f,m),f=E),"001"==u&&(u="",v="H",y=2),null!=s._dmap[u]&&(S=w+s._dmap[u],s._addNtimes(d,S-f,m),f=S,u="",m=1-m)),u.endsWith("000000000001")&&(0<=g&&s._writeBits(d,i,8*r+g*o),_=1==(e[l>>3]>>(7&l)&1),l++,null==s._decodeG3.allow2D&&(s._decodeG3.allow2D=_),s._decodeG3.allow2D||(_=!0,l--),u="",g++,f=m=0,p=s._makeDiff(d),d=[])}d.length==o&&s._writeBits(d,i,8*r+g*o)},T.decode._addNtimes=function(e,t,n){for(var i=0;i<t;i++)e.push(n)},T.decode._writeBits=function(e,t,n){for(var i=0;i<e.length;i++)t[n+i>>3]|=e[i]<<7-(n+i&7)},T.decode._decodeLZW=function(e,t,n,i){for(var r=[],o=9,a=t<<3,s=0,l=0;;){if(s=(e[a>>3]<<16|e[a+8>>3]<<8|e[a+16>>3])>>24-(7&a)-o&(1<<o)-1,a+=o,0==r.length&&256!=s)return;if(257==s)break;if(256==s){for(var o=9,r=[],c=0;c<258;c++)r[c]=[c];if(s=(e[a>>3]<<16|e[a+8>>3]<<8|e[a+16>>3])>>24-(7&a)-o&(1<<o)-1,a+=o,257==s)break;for(c=0;c<r[s].length;c++)n[i+c]=r[s][c];i+=r[s].length}else{if(s<r.length){for(c=0;c<r[s].length;c++)n[i+c]=r[s][c];i+=r[s].length;var u=r[l].slice(0);u.push(r[s][0]),r.push(u)}else{var d=r[l].slice(0);d.push(d[0]);for(c=0;c<d.length;c++)n[i+c]=d[c];i+=d.length,r.push(d)}r.length+1==1<<o&&o++}l=s}},T.tags={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffset",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",286:"XPosition",287:"YPosition",292:"T4Options",296:"ResolutionUnit",297:"PageNumber",305:"Software",306:"DateTime",315:"Artist",317:"Predictor",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffset",325:"TileByteCounts",336:"DotRange",338:"ExtraSample",339:"SampleFormat",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",33432:"Copyright",34377:"Photoshop"},T.decode._readIFD=function(e,t,n,i){var r=e.readUshort(t,n),o=(n+=2,{});i.push(o);for(var a=0;a<r;a++){var s=e.readUshort(t,n),l=(n+=2,e.readUshort(t,n)),c=(n+=2,e.readUint(t,n)),u=(n+=4,e.readUint(t,n)),d=(n+=4,o["t"+s]=[]);if(1==l||7==l)for(var p=0;p<c;p++)d.push(t[(c<5?n-4:u)+p]);if(2==l&&d.push(e.readASCII(t,c<5?n-4:u,c-1)),3==l)for(p=0;p<c;p++)d.push(e.readUshort(t,(c<3?n-4:u)+2*p));if(4==l)for(p=0;p<c;p++)d.push(e.readUint(t,(c<2?n-4:u)+4*p));if(5==l)for(p=0;p<c;p++)d.push(e.readUint(t,u+8*p)/e.readUint(t,u+8*p+4));d.length}return n},T.toRGBA8=function(e){var t=e.width*e.height,n=4*t,i=e.data,r=new Uint8Array(4*t),o=e.t262[0],a=e.t258?e.t258[0]:1;if(0==o){if(1==a)for(var s=0;s<t;s++){var l=s<<2,c=i[s>>3]>>7-(7&s)&1;r[l]=r[l+1]=r[l+2]=255*(1-c),r[l+3]=255}if(4==a)for(s=0;s<t;s++){l=s<<2,c=i[s>>1]>>4-4*(1&s)&15;r[l]=r[l+1]=r[l+2]=17*(15-c),r[l+3]=255}if(8==a)for(s=0;s<t;s++){l=s<<2,c=i[s];r[l]=r[l+1]=r[l+2]=255-c,r[l+3]=255}}if(1==o){if(1==a)for(s=0;s<t;s++){l=s<<2,c=i[s>>3]>>7-(7&s)&1;r[l]=r[l+1]=r[l+2]=255*c,r[l+3]=255}if(2==a)for(s=0;s<t;s++){l=s<<2,c=i[s>>2]>>6-2*(3&s)&3;r[l]=r[l+1]=r[l+2]=85*c,r[l+3]=255}if(8==a)for(s=0;s<t;s++){l=s<<2,c=i[s];r[l]=r[l+1]=r[l+2]=c,r[l+3]=255}if(16==a)for(s=0;s<t;s++){l=s<<2,c=Math.max(0,i[2*s+1]-5)<<8|i[2*s];r[l]=r[l+1]=r[l+2]=Math.min(255,c),r[l+3]=255}}if(2==o)if(8==a)if(e.t338)if(1==e.t338[0])for(s=0;s<n;s++)r[s]=i[s];else for(s=0;s<n;s+=4)r[s]=i[s],r[s+1]=i[s+1],r[s+2]=i[s+2],r[s+3]=255;else for(s=0;s<t;s++){var u=3*s;r[l=s<<2]=i[u],r[l+1]=i[u+1],r[l+2]=i[u+2],r[l+3]=255}else for(s=0;s<t;s++){u=6*s;r[l=s<<2]=i[u],r[l+1]=i[u+2],r[l+2]=i[u+4],r[l+3]=255}if(3==o)for(var d=e.t320,s=0;s<t;s++){var l=s<<2,p=i[s];r[l]=d[p]>>8,r[l+1]=d[256+p]>>8,r[l+2]=d[512+p]>>8,r[l+3]=255}if(5==o)for(s=0;s<t;s++){var h=255-i[l=s<<2],f=255-i[l+1],m=255-i[l+2],g=(255-i[l+3])*(1/255);r[l]=Math.round(h*g),r[l+1]=Math.round(f*g),r[l+2]=Math.round(m*g),r[l+3]=255}return r},T.replaceIMG=function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++){var n=e[t],i=n.getAttribute("src"),r=i.split(".").pop().toLowerCase();"tif"!=r&&"tiff"!=r||(r=new XMLHttpRequest,T._xhrs.push(r),T._imgs.push(n),r.open("GET",i),r.responseType="arraybuffer",r.onload=T._imgLoaded,r.send())}},T._xhrs=[],T._imgs=[],T._imgLoaded=function(e){for(var t=T.decode(e.target.response)[0],n=T.toRGBA8(t),i=t.width,t=t.height,e=T._xhrs.indexOf(e.target),r=T._imgs[e],o=(T._xhrs.splice(e,1),T._imgs.splice(e,1),document.createElement("canvas")),e=(o.width=i,o.height=t,o.getContext("2d")),a=e.createImageData(i,t),s=0;s<n.length;s++)a.data[s]=n[s];e.putImageData(a,0,0);for(var l=["style","class","id"],s=0;s<l.length;s++)o.setAttribute(l[s],r.getAttribute(l[s]));r.parentNode.replaceChild(o,r)},T._binBE={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUint:function(e,t){var n=T._binBE.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t],T._binBE.ui32[0]},readASCII:function(e,t,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(e[t+r]);return i}},T._binBE.ui8=new Uint8Array(4),T._binBE.ui32=new Uint32Array(T._binBE.ui8.buffer),T._binLE={nextZero:T._binBE.nextZero,readUshort:function(e,t){return e[t+1]<<8|e[t]},readUint:function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},readASCII:T._binBE.readASCII},T._copyTile=function(e,t,n,i,r,o,a,s){for(var l=0;l<n;l++)for(var c=0;c<t;c++){var u=a+c,d=s+l;u<r&&d<o&&(i[d*r+u]=e[l*t+c])}},"object"==t(e)&&(e.exports=T)}.call(this,v(136)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var i={};(0,n(34).assign)(i,n(138),n(141),n(97)),e.exports=i},function(e,t,n){"use strict";var a=n(139),s=n(34),l=n(95),i=n(65),r=n(96),c=Object.prototype.toString;function o(e){if(!(this instanceof o))return new o(e);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});e=this.options;if(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,(this.strm.avail_out=0)!==(t=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy)))throw new Error(i[t]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var t,e="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if(0!==(t=a.deflateSetDictionary(this.strm,e)))throw new Error(i[t]);this._dict_set=!0}}function u(e,t){t=new o(t);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}o.prototype.push=function(e,t){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?r.input=l.string2buf(e):"[object ArrayBuffer]"===c.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new s.Buf8(o),r.next_out=0,r.avail_out=o),1!==(n=a.deflate(r,i))&&0!==n)return this.onEnd(n),!(this.ended=!0)}while(0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(r.output,r.next_out))):this.onData(s.shrinkBuf(r.output,r.next_out))),(0<r.avail_in||0===r.avail_out)&&1!==n);return 4===i?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==i||(this.onEnd(0),!(r.avail_out=0))},o.prototype.onData=function(e){this.chunks.push(e)},o.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=o,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},function(j,e,t){"use strict";var s,d=t(34),l=t(140),p=t(93),h=t(94),F=t(65),c=0,u=4,f=0,m=-2,N=-1,B=4,U=2,g=8,z=9,n=286,H=30,q=19,V=2*n+1,W=15,v=3,y=258,_=y+v+1,b=42,w=113,E=1,S=2,x=3,T=4;function P(e,t){return e.msg=F[t],t}function k(e){return(e<<1)-(4<e?9:0)}function I(e){for(var t=e.length;0<=--t;)e[t]=0}function C(e){var t=e.state,n=t.pending;0!==(n=n>e.avail_out?e.avail_out:n)&&(d.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending)&&(t.pending_out=0)}function M(e,t){l._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,C(e.strm)}function O(e,t){e.pending_buf[e.pending++]=t}function A(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function o(e,t){var n,i,r=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-_?e.strstart-(e.w_size-_):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+y,h=c[o+a-1],f=c[o+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===f&&c[n+a-1]===h&&c[n]===c[o]&&c[++n]===c[o+1]){for(o+=2,n++;c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p;);if(i=y-(p-o),o=p-y,a<i){if(e.match_start=t,s<=(a=i))break;h=c[o+a-1],f=c[o+a]}}}while((t=d[t&u])>l&&0!=--r);return a<=e.lookahead?a:e.lookahead}function L(e){var t,n,i,r,o,a,s,l,c,u=e.w_size;do{if(l=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-_)){for(d.arraySet(e.window,e.window,u,u,0),e.match_start-=u,e.strstart-=u,e.block_start-=u,t=n=e.hash_size;i=e.head[--t],e.head[t]=u<=i?i-u:0,--n;);for(t=n=u;i=e.prev[--t],e.prev[t]=u<=i?i-u:0,--n;);l+=u}if(0===e.strm.avail_in)break;if(o=e.strm,a=e.window,s=e.strstart+e.lookahead,l=l,c=void 0,c=o.avail_in,n=0===(c=l<c?l:c)?0:(o.avail_in-=c,d.arraySet(a,o.input,o.next_in,c,s),1===o.state.wrap?o.adler=p(o.adler,a,c,s):2===o.state.wrap&&(o.adler=h(o.adler,a,c,s)),o.next_in+=c,o.total_in+=c,c),e.lookahead+=n,e.lookahead+e.insert>=v)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+v-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<v)););}while(e.lookahead<_&&0!==e.strm.avail_in)}function i(e,t){for(var n,i;;){if(e.lookahead<_){if(L(e),e.lookahead<_&&t===c)return E;if(0===e.lookahead)break}if(n=0,e.lookahead>=v&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+v-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-_&&(e.match_length=o(e,n)),e.match_length>=v)if(i=l._tr_tally(e,e.strstart-e.match_start,e.match_length-v),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=v){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+v-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(M(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<v-1?e.strstart:v-1,t===u?(M(e,!0),0===e.strm.avail_out?x:T):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?E:S}function r(e,t){for(var n,i,r;;){if(e.lookahead<_){if(L(e),e.lookahead<_&&t===c)return E;if(0===e.lookahead)break}if(n=0,e.lookahead>=v&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+v-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=v-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-_&&(e.match_length=o(e,n),e.match_length<=5)&&(1===e.strategy||e.match_length===v&&4096<e.strstart-e.match_start)&&(e.match_length=v-1),e.prev_length>=v&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-v,i=l._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-v),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+v-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=v-1,e.strstart++,i&&(M(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((i=l._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=l._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<v-1?e.strstart:v-1,t===u?(M(e,!0),0===e.strm.avail_out?x:T):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?E:S}function a(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*V),this.dyn_dtree=new d.Buf16(2*(2*H+1)),this.bl_tree=new d.Buf16(2*(2*q+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(W+1),this.heap=new d.Buf16(2*n+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*n+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function D(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=U,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?b:w,e.adler=2===t.wrap?0:1,t.last_flush=c,l._tr_init(t),f):P(e,m)}function R(e){var t=D(e);return t===f&&((e=e.state).window_size=2*e.w_size,I(e.head),e.max_lazy_match=s[e.level].max_lazy,e.good_match=s[e.level].good_length,e.nice_match=s[e.level].nice_length,e.max_chain_length=s[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=v-1,e.match_available=0,e.ins_h=0),t}function Y(e,t,n,i,r,o){if(!e)return m;var a=1;if(t===N&&(t=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),r<1||z<r||n!==g||i<8||15<i||t<0||9<t||o<0||B<o)return P(e,m);8===i&&(i=9);var s=new G;return(e.state=s).strm=e,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+v-1)/v),s.window=new d.Buf8(2*s.w_size),s.head=new d.Buf16(s.hash_size),s.prev=new d.Buf16(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new d.Buf8(s.pending_buf_size),s.d_buf=+s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,R(e)}s=[new a(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(L(e),0===e.lookahead&&t===c)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,M(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-_&&(M(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?x:T):(e.strstart>e.block_start&&(M(e,!1),e.strm.avail_out),E)}),new a(4,4,8,4,i),new a(4,5,16,8,i),new a(4,6,32,32,i),new a(4,4,16,16,r),new a(8,16,32,32,r),new a(8,16,128,128,r),new a(8,32,128,256,r),new a(32,128,258,1024,r),new a(32,258,258,4096,r)],e.deflateInit=function(e,t){return Y(e,t,g,15,8,0)},e.deflateInit2=Y,e.deflateReset=R,e.deflateResetKeep=D,e.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?m:(e.state.gzhead=t,f)},e.deflate=function(e,t){var n,i,r,o;if(!e||!e.state||5<t||t<0)return e?P(e,m):m;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return P(e,0===e.avail_out?-5:m);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===b&&(2===i.wrap?(e.adler=0,O(i,31),O(i,139),O(i,8),i.gzhead?(O(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),O(i,255&i.gzhead.time),O(i,i.gzhead.time>>8&255),O(i,i.gzhead.time>>16&255),O(i,i.gzhead.time>>24&255),O(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),O(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(O(i,255&i.gzhead.extra.length),O(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=h(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(O(i,0),O(i,0),O(i,0),O(i,0),O(i,0),O(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),O(i,3),i.status=w)):(a=g+(i.w_bits-8<<4)<<8,a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=w,A(i,a),0!==i.strstart&&(A(i,e.adler>>>16),A(i,65535&e.adler)),e.adler=1)),69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=h(e.adler,i.pending_buf,i.pending-r,r)),C(e),r=i.pending,i.pending!==i.pending_buf_size));)O(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=h(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=h(e.adler,i.pending_buf,i.pending-r,r)),C(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}}while(o=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,O(i,o),0!==o);i.gzhead.hcrc&&i.pending>r&&(e.adler=h(e.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=h(e.adler,i.pending_buf,i.pending-r,r)),C(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}}while(o=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,O(i,o),0!==o);i.gzhead.hcrc&&i.pending>r&&(e.adler=h(e.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&C(e),i.pending+2<=i.pending_buf_size&&(O(i,255&e.adler),O(i,e.adler>>8&255),e.adler=0,i.status=w)):i.status=w),0!==i.pending){if(C(e),0===e.avail_out)return i.last_flush=-1,f}else if(0===e.avail_in&&k(t)<=k(n)&&t!==u)return P(e,-5);if(666===i.status&&0!==e.avail_in)return P(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var a=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(L(e),0===e.lookahead)){if(t===c)return E;break}if(e.match_length=0,n=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(M(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?x:T):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?E:S}(i,t):3===i.strategy?function(e,t){for(var n,i,r,o,a=e.window;;){if(e.lookahead<=y){if(L(e),e.lookahead<=y&&t===c)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=v&&0<e.strstart&&(i=a[r=e.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){for(o=e.strstart+y;i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o;);e.match_length=y-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=v?(n=l._tr_tally(e,1,e.match_length-v),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(M(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?x:T):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?E:S}(i,t):s[i.level].func(i,t);if(a!==x&&a!==T||(i.status=666),a===E||a===x)return 0===e.avail_out&&(i.last_flush=-1),f;if(a===S&&(1===t?l._tr_align(i):5!==t&&(l._tr_stored_block(i,0,0,!1),3===t)&&(I(i.head),0===i.lookahead)&&(i.strstart=0,i.block_start=0,i.insert=0),C(e),0===e.avail_out))return i.last_flush=-1,f}return t!==u||!(i.wrap<=0)&&(2===i.wrap?(O(i,255&e.adler),O(i,e.adler>>8&255),O(i,e.adler>>16&255),O(i,e.adler>>24&255),O(i,255&e.total_in),O(i,e.total_in>>8&255),O(i,e.total_in>>16&255),O(i,e.total_in>>24&255)):(A(i,e.adler>>>16),A(i,65535&e.adler)),C(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending)?f:1},e.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==b&&69!==t&&73!==t&&91!==t&&103!==t&&t!==w&&666!==t?P(e,m):(e.state=null,t===w?P(e,-3):f):m},e.deflateSetDictionary=function(e,t){var n,i,r,o,a,s,l,c=t.length;if(!e||!e.state)return m;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==b||n.lookahead)return m;for(1===o&&(e.adler=p(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(I(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new d.Buf8(n.w_size),d.arraySet(l,t,c-n.w_size,n.w_size,0),t=l,c=n.w_size),l=e.avail_in,a=e.next_in,s=e.input,e.avail_in=c,e.next_in=0,e.input=t,L(n);n.lookahead>=v;){for(i=n.strstart,r=n.lookahead-(v-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+v-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--r;);n.strstart=i,n.lookahead=v-1,L(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=v-1,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=l,n.wrap=o,f},e.deflateInfo="pako deflate (from Nodeca project)"},function(n,e,o){"use strict";var a=o(34),u=0,d=1;function t(e){for(var t=e.length;0<=--t;)e[t]=0}var s,l,c,p=29,h=256,f=h+1+p,m=30,g=19,T=2*f+1,P=15,i=16,B=7,v=256,y=16,_=17,b=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(f+2)),k=(t(x),new Array(2*m)),I=(t(k),new Array(512)),C=(t(I),new Array(256)),M=(t(C),new Array(p)),O=(t(M),new Array(m));function A(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?I[e]:I[256+(e>>>7)]}function r(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function R(e,t,n){e.bi_valid>i-n?(e.bi_buf|=t<<e.bi_valid&65535,r(e,e.bi_buf),e.bi_buf=t>>i-e.bi_valid,e.bi_valid+=n-i):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function j(e,t,n){R(e,n[2*t],n[2*t+1])}function z(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function H(e,t,n){for(var i,r=new Array(P+1),o=0,a=1;a<=P;a++)r[a]=o=o+n[a-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=z(r[s]++,s))}}function q(e){for(var t=0;t<f;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<g;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*v]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function V(e){8<e.bi_valid?r(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function F(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&W(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!W(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function G(e,t,n){var i,r,o,a,s=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0==i?j(e,r,t):(j(e,(o=C[r])+h+1,t),0!==(a=w[o])&&R(e,r-=M[o],a),j(e,o=D(--i),n),0!==(a=E[o])&&R(e,i-=O[o],a)),s<e.last_lit;);j(e,v,t)}function N(e,t){var n,i,r,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=T,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=a[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)F(e,o,n);for(r=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],F(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,F(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var u,d,p,h,f,m=e,g=t.dyn_tree,v=t.max_code,y=t.stat_desc.static_tree,_=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,w=t.stat_desc.extra_base,E=t.stat_desc.max_length,S=0,x=0;x<=P;x++)m.bl_count[x]=0;for(g[2*m.heap[m.heap_max]+1]=0,u=m.heap_max+1;u<T;u++)E<(x=g[2*g[2*(d=m.heap[u])+1]+1]+1)&&(x=E,S++),g[2*d+1]=x,v<d||(m.bl_count[x]++,h=0,w<=d&&(h=b[d-w]),f=g[2*d],m.opt_len+=f*(x+h),_&&(m.static_len+=f*(y[2*d+1]+h)));if(0!==S){do{for(x=E-1;0===m.bl_count[x];)x--}while(m.bl_count[x]--,m.bl_count[x+1]+=2,m.bl_count[E]--,0<(S-=2));for(x=E;0!==x;x--)for(d=m.bl_count[x];0!==d;)v<(p=m.heap[--u])||(g[2*p+1]!==x&&(m.opt_len+=(x-g[2*p+1])*g[2*p],g[2*p+1]=x),d--)}H(o,c,e.bl_count)}function Y(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=t[2*(i+1)+1],++s<l&&r===a||(s<c?e.bl_tree[2*r]+=s:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*_]++:e.bl_tree[2*b]++,o=r,c=(s=0)===a?(l=138,3):r===a?(l=6,3):(l=7,4))}function X(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(r=a,a=t[2*(i+1)+1],!(++s<l&&r===a)){if(s<c)for(;j(e,r,e.bl_tree),0!=--s;);else 0!==r?(r!==o&&(j(e,r,e.bl_tree),s--),j(e,y,e.bl_tree),R(e,s-3,2)):s<=10?(j(e,_,e.bl_tree),R(e,s-3,3)):(j(e,b,e.bl_tree),R(e,s-11,7));o=r,c=(s=0)===a?(l=138,3):r===a?(l=6,3):(l=7,4)}}t(O);var K=!1;function Q(e,t,n,i){R(e,0+(i?1:0),3),i=t,t=n,n=!0,V(e=e),n&&(r(e,t),r(e,~t)),a.arraySet(e.pending_buf,e.window,i,t,e.pending),e.pending+=t}e._tr_init=function(e){if(!K){for(var t,n,i,r=new Array(P+1),o=0,a=0;a<p-1;a++)for(M[a]=o,t=0;t<1<<w[a];t++)C[o++]=a;for(C[o-1]=a,a=i=0;a<16;a++)for(O[a]=i,t=0;t<1<<E[a];t++)I[i++]=a;for(i>>=7;a<m;a++)for(O[a]=i<<7,t=0;t<1<<E[a]-7;t++)I[256+i++]=a;for(n=0;n<=P;n++)r[n]=0;for(t=0;t<=143;)x[2*t+1]=8,t++,r[8]++;for(;t<=255;)x[2*t+1]=9,t++,r[9]++;for(;t<=279;)x[2*t+1]=7,t++,r[7]++;for(;t<=287;)x[2*t+1]=8,t++,r[8]++;for(H(x,f+1,r),t=0;t<m;t++)k[2*t+1]=5,k[2*t]=z(t,5);s=new A(x,w,h+1,f,P),l=new A(k,E,0,m,P),c=new A(new Array(0),U,0,g,B),K=!0}e.l_desc=new L(e.dyn_ltree,s),e.d_desc=new L(e.dyn_dtree,l),e.bl_desc=new L(e.bl_tree,c),e.bi_buf=0,e.bi_valid=0,q(e)},e._tr_stored_block=Q,e._tr_flush_block=function(e,t,n,i){var r,o,a=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return u;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return d;for(n=32;n<h;n++)if(0!==e.dyn_ltree[2*n])return d;return u}(e)),N(e,e.l_desc),N(e,e.d_desc),a=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=g-1;3<=t&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t)Q(e,t,n,i);else if(4===e.strategy||o===r)R(e,2+(i?1:0),3),G(e,x,k);else{R(e,4+(i?1:0),3);var s,l=e,t=e.l_desc.max_code+1,n=e.d_desc.max_code+1,c=a+1;for(R(l,t-257,5),R(l,n-1,5),R(l,c-4,4),s=0;s<c;s++)R(l,l.bl_tree[2*S[s]+1],3);X(l,l.dyn_ltree,t-1),X(l,l.dyn_dtree,n-1),G(e,e.dyn_ltree,e.dyn_dtree)}q(e),i&&V(e)},e._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(C[n]+h+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},e._tr_align=function(e){R(e,2,3),j(e,v,x),16===(e=e).bi_valid?(r(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},function(e,t,n){"use strict";var d=n(142),p=n(34),h=n(95),f=n(97),i=n(65),r=n(96),o=n(145),m=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options,e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0,d.inflateInit2(this.strm,t.windowBits));if(e!==f.Z_OK)throw new Error(i[e]);if(this.header=new o,d.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=h.string2buf(t.dictionary):"[object ArrayBuffer]"===m.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(e=d.inflateSetDictionary(this.strm,t.dictionary))!==f.Z_OK)throw new Error(i[e])}function s(e,t){t=new a(t);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}a.prototype.push=function(e,t){var n,i,r,o,a,s=this.strm,l=this.options.chunkSize,c=this.options.dictionary,u=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof e?s.input=h.binstring2buf(e):"[object ArrayBuffer]"===m.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new p.Buf8(l),s.next_out=0,s.avail_out=l),(n=(n=d.inflate(s,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&c?d.inflateSetDictionary(this.strm,c):n)===f.Z_BUF_ERROR&&!0===u&&(n=f.Z_OK,u=!1),n!==f.Z_STREAM_END&&n!==f.Z_OK)return this.onEnd(n),!(this.ended=!0)}while(!s.next_out||0!==s.avail_out&&n!==f.Z_STREAM_END&&(0!==s.avail_in||i!==f.Z_FINISH&&i!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(r=h.utf8border(s.output,s.next_out),o=s.next_out-r,a=h.buf2string(s.output,r),s.next_out=o,s.avail_out=l-o,o&&p.arraySet(s.output,s.output,r,o,0),this.onData(a)):this.onData(p.shrinkBuf(s.output,s.next_out))),0===s.avail_in&&0===s.avail_out&&(u=!0),(0<s.avail_in||0===s.avail_out)&&n!==f.Z_STREAM_END);return(i=n===f.Z_STREAM_END?f.Z_FINISH:i)===f.Z_FINISH?(n=d.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f.Z_OK):i!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(s.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=a,t.inflate=s,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,s(e,t)},t.ungzip=s},function(e,t,n){"use strict";var O=n(34),A=n(93),L=n(94),D=n(143),R=n(144),j=1,F=2,N=0,B=-2,U=1,i=852,r=592;function z(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new O.Buf16(320),this.work=new O.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=U,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new O.Buf32(i),t.distcode=t.distdyn=new O.Buf32(r),t.sane=1,t.back=-1,N):B}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):B}function l(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?B:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,s(e))}function c(e,t){var n;return e?(n=new o,(e.state=n).window=null,(n=l(e,t))!==N&&(e.state=null),n):B}var H,q,V=!0;function W(e,t,n,i){var r,e=e.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new O.Buf8(e.wsize)),i>=e.wsize?(O.arraySet(e.window,t,n-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(i<(r=e.wsize-e.wnext)&&(r=i),O.arraySet(e.window,t,n-i,r,e.wnext),(i-=r)?(O.arraySet(e.window,t,n-i,i,0),e.wnext=i,e.whave=e.wsize):(e.wnext+=r,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=r))),0}t.inflateReset=s,t.inflateReset2=l,t.inflateResetKeep=a,t.inflateInit=function(e){return c(e,15)},t.inflateInit2=c,t.inflate=function(e,t){var n,i,r,o,a,s,l,c,u,d,p,h,f,m,g,v,y,_,b,w,E,S,x,T,P=0,k=new O.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return B;12===(n=e.state).mode&&(n.mode=13),a=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,p=l,S=N;e:for(;;)switch(n.mode){case U:if(0===n.wrap)n.mode=13;else{for(;u<16;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(2&n.wrap&&35615===c)k[n.check=0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0),u=c=0,n.mode=2;else if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31)e.msg="incorrect header check",n.mode=30;else if(8!=(15&c))e.msg="unknown compression method",n.mode=30;else{if(u-=4,E=8+(15&(c>>>=4)),0===n.wbits)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<E,e.adler=n.check=1,n.mode=512&c?10:12,u=c=0}}break;case 2:for(;u<16;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(n.flags=c,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0)),u=c=0,n.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=L(n.check,k,4,0)),u=c=0,n.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0)),u=c=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=L(n.check,k,2,0)),u=c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=s<(h=n.length)?s:h)&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),O.arraySet(n.head.extra,i,o,h,E)),512&n.flags&&(n.check=L(n.check,i,h,o)),s-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;for(h=0;E=i[o+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E)),E&&h<s;);if(512&n.flags&&(n.check=L(n.check,i,h,o)),s-=h,o+=h,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;for(h=0;E=i[o+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E)),E&&h<s;);if(512&n.flags&&(n.check=L(n.check,i,h,o)),s-=h,o+=h,E)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}u=c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}e.adler=n.check=z(c),u=c=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last)c>>>=7&u,u-=7&u,n.mode=27;else{for(;u<3;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}switch(n.last=1&c,--u,3&(c>>>=1)){case 0:n.mode=14;break;case 1:C=M=void 0;var C,M=n;if(V){for(H=new O.Buf32(512),q=new O.Buf32(32),C=0;C<144;)M.lens[C++]=8;for(;C<256;)M.lens[C++]=9;for(;C<280;)M.lens[C++]=7;for(;C<288;)M.lens[C++]=8;for(R(j,M.lens,0,288,H,0,M.work,{bits:9}),C=0;C<32;)M.lens[C++]=5;R(F,M.lens,0,32,q,0,M.work,{bits:5}),V=!1}if(M.lencode=H,M.lenbits=9,M.distcode=q,M.distbits=5,n.mode=20,6!==t)break;c>>>=2,u-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,u-=2}break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,u=c=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(h=n.length){if(0===(h=l<(h=s<h?s:h)?l:h))break e;O.arraySet(r,i,o,h,a),s-=h,o+=h,l-=h,a+=h,n.length-=h}else n.mode=12;break;case 17:for(;u<14;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}n.lens[I[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},S=R(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,S){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(P=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&P,!((g=P>>>24)<=u);){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(y<16)c>>>=g,u-=g,n.lens[n.have++]=y;else{if(16===y){for(T=g+2;u<T;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}E=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(17===y){for(T=g+3;u<T;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}E=0,h=3+(7&(c>>>=g)),c>>>=3,u=u-g-3}else{for(T=g+7;u<T;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}E=0,h=11+(127&(c>>>=g)),c>>>=7,u=u-g-7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;h--;)n.lens[n.have++]=E}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,x={bits:n.lenbits},S=R(j,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,S){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},S=R(F,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,S){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=s&&258<=l){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,D(e,p),a=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,c=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;v=(P=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&P,!((g=P>>>24)<=u);){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(v&&0==(240&v)){for(_=g,b=v,w=y;v=(P=n.lencode[w+((c&(1<<_+b)-1)>>_)])>>>16&255,y=65535&P,!(_+(g=P>>>24)<=u);){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=g,u-=g,n.back+=g,n.length=y,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(T=n.extra;u<T;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(P=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&P,!((g=P>>>24)<=u);){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(0==(240&v)){for(_=g,b=v,w=y;v=(P=n.distcode[w+((c&(1<<_+b)-1)>>_)])>>>16&255,y=65535&P,!(_+(g=P>>>24)<=u);){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=g,u-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(T=n.extra;u<T;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(n.offset>(h=p-l)){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}f=h>n.wnext?(h-=n.wnext,n.wsize-h):n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=r,f=a-n.offset,h=n.length;for(l-=h=l<h?l:h,n.length-=h;r[a++]=m[f++],--h;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;r[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=i[o++]<<u,u+=8}if(p-=l,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=(n.flags?L:A)(n.check,r,p,a-p)),p=l,(n.flags?c:z(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}u=c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=i[o++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}u=c=0}n.mode=29;case 29:S=1;break e;case 30:S=-3;break e;case 31:return-4;default:return B}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&W(e,e.output,e.next_out,p-e.avail_out)?(n.mode=31,-4):(d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=(n.flags?L:A)(n.check,r,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==d&&0===p||4===t)&&S===N?-5:S)},t.inflateEnd=function(e){var t;return e&&e.state?((t=e.state).window&&(t.window=null),e.state=null,N):B},t.inflateGetHeader=function(e,t){return!e||!e.state||0==(2&(e=e.state).wrap)?B:((e.head=t).done=!1,N)},t.inflateSetDictionary=function(e,t){var n,i=t.length;return!e||!e.state||0!==(n=e.state).wrap&&11!==n.mode?B:11===n.mode&&A(1,t,i,0)!==n.check?-3:W(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,N)},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,i,r,o,a,s,l=e.state,c=e.next_in,u=e.input,d=c+(e.avail_in-5),p=e.next_out,h=e.output,f=p-(t-e.avail_out),m=p+(e.avail_out-257),g=l.dmax,v=l.wsize,y=l.whave,_=l.wnext,b=l.window,w=l.hold,E=l.bits,S=l.lencode,x=l.distcode,T=(1<<l.lenbits)-1,P=(1<<l.distbits)-1;e:do{for(E<15&&(w+=u[c++]<<E,E+=8,w+=u[c++]<<E,E+=8),n=S[w&T];;){if(w>>>=i=n>>>24,E-=i,0===(i=n>>>16&255))h[p++]=65535&n;else{if(!(16&i)){if(0==(64&i)){n=S[(65535&n)+(w&(1<<i)-1)];continue}if(32&i){l.mode=12;break e}e.msg="invalid literal/length code",l.mode=30;break e}for(r=65535&n,(i&=15)&&(E<i&&(w+=u[c++]<<E,E+=8),r+=w&(1<<i)-1,w>>>=i,E-=i),E<15&&(w+=u[c++]<<E,E+=8,w+=u[c++]<<E,E+=8),n=x[w&P];;){if(w>>>=i=n>>>24,E-=i,!(16&(i=n>>>16&255))){if(0==(64&i)){n=x[(65535&n)+(w&(1<<i)-1)];continue}e.msg="invalid distance code",l.mode=30;break e}if(o=65535&n,E<(i&=15)&&(w+=u[c++]<<E,(E+=8)<i)&&(w+=u[c++]<<E,E+=8),g<(o+=w&(1<<i)-1)){e.msg="invalid distance too far back",l.mode=30;break e}if(w>>>=i,E-=i,(i=p-f)<o){if(y<(i=o-i)&&l.sane){e.msg="invalid distance too far back",l.mode=30;break e}if(s=b,(a=0)===_){if(a+=v-i,i<r){for(r-=i;h[p++]=b[a++],--i;);a=p-o,s=h}}else if(_<i){if(a+=v+_-i,(i-=_)<r){for(r-=i;h[p++]=b[a++],--i;);if(a=0,_<r){for(r-=i=_;h[p++]=b[a++],--i;);a=p-o,s=h}}}else if(a+=_-i,i<r){for(r-=i;h[p++]=b[a++],--i;);a=p-o,s=h}for(;2<r;)h[p++]=s[a++],h[p++]=s[a++],h[p++]=s[a++],r-=3;r&&(h[p++]=s[a++],1<r)&&(h[p++]=s[a++])}else{for(a=p-o;h[p++]=h[a++],h[p++]=h[a++],h[p++]=h[a++],2<(r-=3););r&&(h[p++]=h[a++],1<r)&&(h[p++]=h[a++])}break}}break}}while(c<d&&p<m);w&=(1<<(E-=(r=E>>3)<<3))-1,e.next_in=c-=r,e.next_out=p,e.avail_in=c<d?d-c+5:5-(c-d),e.avail_out=p<m?m-p+257:257-(p-m),l.hold=w,l.bits=E}},function(e,t,n){"use strict";var D=n(34),R=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],j=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],N=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,i,r,o,a,s){for(var l,c,u,d,p,h,f,m,g,v=s.bits,y=0,_=0,b=0,w=0,E=0,S=0,x=0,T=0,P=0,k=0,I=null,C=0,M=new D.Buf16(16),O=new D.Buf16(16),A=null,L=0,y=0;y<=15;y++)M[y]=0;for(_=0;_<i;_++)M[t[n+_]]++;for(E=v,w=15;1<=w&&0===M[w];w--);if(w<E&&(E=w),0===w)r[o++]=20971520,r[o++]=20971520,s.bits=1;else{for(b=1;b<w&&0===M[b];b++);for(E<b&&(E=b),y=T=1;y<=15;y++)if((T=(T<<=1)-M[y])<0)return-1;if(0<T&&(0===e||1!==w))return-1;for(O[1]=0,y=1;y<15;y++)O[y+1]=O[y]+M[y];for(_=0;_<i;_++)0!==t[n+_]&&(a[O[t[n+_]]++]=_);if(h=0===e?(I=A=a,19):1===e?(I=R,C-=257,A=j,L-=257,256):(I=F,A=N,-1),y=b,p=o,x=_=k=0,u=-1,d=(P=1<<(S=E))-1,1===e&&852<P||2===e&&592<P)return 1;for(;;){for(g=a[_]<h?(m=0,a[_]):a[_]>h?(m=A[L+a[_]],I[C+a[_]]):(m=96,0),l=1<<(f=y-x),b=c=1<<S;r[p+(k>>x)+(c-=l)]=f<<24|m<<16|g|0,0!==c;);for(l=1<<y-1;k&l;)l>>=1;if(k=0!==l?(k&l-1)+l:0,_++,0==--M[y]){if(y===w)break;y=t[n+a[_]]}if(E<y&&(k&d)!==u){for(p+=b,T=1<<(S=y-(x=0===x?E:x));S+x<w&&!((T-=M[S+x])<=0);)S++,T<<=1;if(P+=1<<S,1===e&&852<P||2===e&&592<P)return 1;r[u=k&d]=E<<24|S<<16|p-o|0}}0!==k&&(r[p+k]=y-x<<24|64<<16|0),s.bits=E}return 0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},,function(e,g,v){"use strict";!function(a){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=(Object.defineProperty(g,"__esModule",{value:!0}),g.IloveTool=void 0,v(76)),t=v(118),n=v(150),o=v(101),l=e(v(16)),c=v(154),u=v(13),d=v(18),p=v(15),h=v(125),f=v(126);function m(e){var n=this;void 0===e&&(e={}),this.initTool=function(){n.config=new o.Config({tool:n.tool,subtool:n.subtool,config:n.configData}),n.initProcessManager(),n.optionsManager=n.getOptionsManager(),n.initUploader(),n.beforeInit().then(function(){},function(){}),n.listenEventTaskIdChanged()},this.action=null,this.alias=null,this.tool=null,this.subtool=null,this.realTool=null,this.toolText=null,this.fileLimits=null,this.taskId=null,this.parentId=null,this.parentTool=null,this.covers_hidden=!1,this.token=null,this.userId=null,this.startServer=null,this.workerServer=null,this.level="user",this.levelTemp="user",this.userToken=null,this.servers=null,this.downloadUrl=null,this.error=null,this.site=null,this.country=null,this.isInitialized=!1,this.files=new s.FileStack,this.processManager=null,this.uploadManager=null,this.optionsManager=null,this.defaultOptions=null,this.configData=v(155),this.config=null,Object.assign(this,e),this.subtool||(this.subtool=this.tool),this.alias&&(this.subtool=this.alias),null!=this.userId&&l.configureScope(function(e){e.setUser({id:n.userId})}),null!=this.country&&l.configureScope(function(e){e.setTag("country",n.country)}),null!=this.taskId&&l.configureScope(function(e){e.setTag("taskId",n.taskId)}),this.servers&&this.servers.forEach(function(e,t){e.includes(".com")?n.servers[t]="//"+e:n.servers[t]="//"+e+"."+n.site+".com"}),null==this.workerServer&&this.servers&&(this.workerServer=this.servers[Math.floor(Math.random()*this.servers.length)]),window.Sentry=l,window.ilovetools={user:p.UserModel},f.Modal.init()}m.prototype.variableUserLevel=function(){var e=document.URL.split("#"),e=1<e.length?e[1]:null;if("n"!==e){for(var t=window.ilovepdfConfig.fp,n=!1,i=0;i<t;i++){var r,o=null;if(window.Cookies&&(r="fp","upscaleimage"==this.tool&&(r="fpu"),o=window.Cookies.get(r+i)),null==o){n=!0;break}}!0===n&&"premium"!==this.level&&(window.ilovepdfConfig.fileLimits=this.fileLimits=this.allFileLimits.temp_limits,"user"==this.level?this.allFileLimits.limits=this.allFileLimits.temp_limits:this.allFileLimits.registered_limits=this.allFileLimits.temp_limits,window.ilovepdfConfig.levelTemp=this.levelTemp="premium")}},m.prototype.init=function(){var e;"tool"==this.action&&null!=this.tool&&(e=this.tool==this.subtool?this.tool.replace("image",""):this.tool.replace("image",this.subtool),this.alias=e,window.Cookies&&window.Cookies.set("lastTool",e),this.variableUserLevel(),this.initTool(),h.Network.checkNetwork()),this.isInitialized=!0},m.prototype.beforeInit=function(){var t=this,o=this;return new Promise(function(i,e){var r;null==o.parentId?i():(d.Tools.loadingFromPreviousStart(),window.ev("send","event","tool","chained",t.tool+"-"+t.parentTool),window.ev("event","chained",{to:t.tool,from:t.parentTool}),(r=new c.Chain({parentId:o.parentId,workerServer:o.workerServer,preWorker:o.preWorker,tool:o.tool,token:o.token})).makeChild().then(function(e){o.uploadManager.taskId=o.uploadManager.plupload.taskId=o.processManager.api.taskId=o.processManager.taskId=o.taskId=e.task,o.uploadManager.plupload&&o.uploadManager.plupload.uploader&&o.uploadManager.plupload.uploader&&o.uploadManager.plupload.uploader.settings&&(o.uploadManager.plupload.uploader.settings.multipart_params.task=o.uploadManager.taskId);try{o.optionsManager.limits&&o.optionsManager.limits.checkFileLimits(0,Object.keys(e.files).length)}catch(e){return d.Tools.loadingFromPreviousFail(),void a("#closePrevious").on("click",function(){d.Tools.loadingFromPreviousEnd(),i()})}for(var t in e.files){var n;e.files.hasOwnProperty(t)&&(n=d.Tools.randomId(),n=new s.File({id:n,canvasId:n,filename:e.files[t],name:e.files[t],server_filename:t,url:r.getFileUrl(e.task,t),loaded:100,percent:100,origin:"chained",runtime:"html5"}),o.files.addFile(n),o.optionsManager.fileAdded(n,o.uploadManager.id))}d.Tools.loadingFromPreviousEnd(),i()},function(t){""==t?(l.configureScope(function(e){e.setExtra("parent_id",o.parentId),e.setExtra("tool",o.tool)}),l.captureMessage("Error on child creation: Options fail",u.Severity.Error)):t.error&&t.error.type&&"TaskRestartError"==t.error.type?(l.configureScope(function(e){e.setExtra("parent_id",o.parentId),e.setExtra("tool",o.tool),e.setExtra("error",t)}),l.captureMessage("Error on child creation, parent removed",u.Severity.Error)):(l.configureScope(function(e){e.setExtra("parent_id",o.parentId),e.setExtra("tool",o.tool),e.setExtra("error",t)}),l.captureMessage("Error on child creation",u.Severity.Error)),d.Tools.loadingFromPreviousFail(),a("#closePrevious").on("click",function(){d.Tools.loadingFromPreviousEnd(),i()})}))})},m.prototype.initProcessManager=function(){this.processManager=new t.Process({taskId:this.taskId,tool:this.tool,site:this.site,subtool:this.subtool,options:{},startServer:this.startServer,workerServer:this.workerServer,files:this.files,token:this.token,userId:this.userId,downloadUrl:this.downloadUrl})},m.prototype.initUploader=function(){this.uploadManager=new n.UploadManager({id:"pickfiles",files:this.files,startServer:this.startServer,workerServer:this.workerServer,optionsManager:this.optionsManager,processManager:this.processManager,config:this.config,token:this.token,taskId:this.taskId,tool:this.tool,servers:this.servers})},m.prototype.getOptionsManager=function(){return null},m.prototype.getToolOptions=function(){return{processManager:this.processManager,tool:this.tool,subtool:this.subtool,toolText:this.toolText,startServer:this.startServer,workerServer:this.workerServer,defaultOptions:this.defaultOptions,files:this.files,pdfViewer:this.pdfViewer,config:this.config,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,level:this.level,levelTemp:this.levelTemp,userToken:this.userToken}},m.prototype.changeServer=function(e){this.uploadManager.workerServer=e,this.uploadManager.plupload.workerServer=e,this.uploadManager.plupload.uploader.setOption("url",e+"/"+this.uploadManager.plupload.apiVersion+"/upload"),"changeServer"in this.optionsManager&&this.optionsManager.changeServer(e),this.uploadManager.workerServer=e},m.prototype.listenEventTaskIdChanged=function(){var t=this;window.addEventListener("taskIdChanged",function(e){e=e.detail.taskId;t.processManager.taskId=e,t.uploadManager.plupload.changeTaskId(e),t.processManager.api.taskId=e,window.ilovepdfConfig.taskId=t.processManager.taskId=t.processManager.api.taskId=e})},g.IloveTool=m}.call(this,v(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmFilesProcessContext=void 0,n(46)),s=n(149),l=n(7),n=(r=a.ContextBase,o(c,r),c.prototype.getInitialState=function(){return new s.DefaultState},c.prototype.remove=function(){var e=this.getState();e._cleanup(),e.dispatchEvent(new l.IloveEvent("end",{unload:!0}))},c);function c(e){var t=r.call(this,e)||this;return t.contentName="ConfirmFilesProcessContext",t.triggerReason="triggerReason"in e?e.triggerReason:void 0,t.limits="limits"in e?e.limits:void 0,t.premiumFeatureName="premiumFeatureName"in e?e.premiumFeatureName:void 0,t.tool=e.tool,t}t.ConfirmFilesProcessContext=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultState=void 0,n(17)),l=n(7),c=a(n(62)),u=n(72),d=n(15),p=n(37),x=n(8),T=n(60),a=(r=s.StateBase,o(h,r),h.prototype.getInitialScreen=function(){return this.INITIAL_SCREEN},h.prototype.init=function(){this.setTexts(),this.showCorrectImage(),window.ev("sendOnce","event","limits","show",this.ctx.limits.getTool()),window.ev("eventOnce","limit-action",{action:"show",tool:this.ctx.limits.getTool()});var e=this.actionAllFilesYesBtn;if(e&&0<e.length)for(var t=0;t<e.length;t++)e[t].addEventListener("click",this._onYesButtonClick);var n=this.actionAllFilesNoBtn;if(n&&0<n.length)for(var i=0;i<n.length;i++)n[i].addEventListener("click",this._onNoButtonClick);this.initActions()},h.prototype.showFilesToRemove=function(){var e=this.ctx.limits.getLimitedFilenames();this.domRoot.querySelector("#confirmFiles").innerHTML=e.join("<br>")},h.prototype.showCorrectImage=function(){var e=this.domRoot.querySelector(".ocr__icon img"),t="limit";switch(this.ctx.triggerReason){case T.REASON.ERROR_FILES:t="files";break;case T.REASON.ERROR_SIZE:t="size";break;case T.REASON.ERROR_PAGES:t="pages"}e.src=e.src.replace("limit.svg",t+".svg")},Object.defineProperty(h.prototype,"actionAllFilesYesBtn",{get:function(){return this.domStateRoot.querySelectorAll("[next-from-confirm-files-yes]")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"actionAllFilesNoBtn",{get:function(){return this.domStateRoot.querySelectorAll("[next-from-confirm-files-no]")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"taskLimits",{get:function(){var e;return this.currentLimits&&this.premiumLimits||(e=[this.ctx.limits.fileLimits[this.ctx.tool],this.ctx.limits.allFileLimits.premium_limits[this.ctx.tool]],this.currentLimits=e[0],this.premiumLimits=e[1]),[this.currentLimits,this.premiumLimits]},enumerable:!1,configurable:!0}),h.prototype.setTexts=function(){var e,t,n,i,r,o=this.domRoot.querySelector("#confirmTitle"),a=this.domRoot.querySelector("#confirmCurrent"),s=this.domRoot.querySelector("#confirmPremium"),l=this.domRoot.querySelector(".limit-slide__slide__current"),c=this.domRoot.querySelector("#confirmRemove"),u=this.domRoot.querySelector("#confirmLimit"),d=this.domRoot.querySelector("#confirmUse"),p=this.domRoot.querySelector("[next-from-confirm-files-no]"),h=this.domRoot.querySelector("[next-from-confirm-files-yes]"),f=this.ctx.limits.canContinueWithoutPremium(),m=this.taskLimits,g=m[0],v=m[1];switch(this.ctx.triggerReason){case T.REASON.ERROR_FILES:if(!this.ctx.limits)throw"Limits object is needed to translate text";e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_title"]').innerHTML,o.innerHTML=x.Lang.tr(e,{n:g.files}),r=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_added"]').innerHTML,l.setAttribute("data-title",x.Lang.tr(r,{n:this.ctx.limits.files.countNotIgnored()})),n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_premium"]').innerHTML,s.innerHTML=x.Lang.tr(n,{n:v.files}),t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_premium"]').innerHTML,a.innerHTML=x.Lang.tr(t,{n:g.files}),0==f&&(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesNum_cancel"]').innerHTML,c.innerHTML=x.Lang.tr(i,{n:v.files}));break;case T.REASON.ERROR_SIZE:if(!this.ctx.limits)throw"Limits object is needed to translate text";var y=g.mb,_=Math.round(100*y/1e3)/100,b=v.mb,w=Math.round(100*b/1e3)/100,E=Math.round(100*this.ctx.limits.files.getFileSizeNotIgnored()/1024/1024)/100,S=Math.round(100*E/1e3)/100;y<1e3?(e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_title"]').innerHTML,o.innerHTML=x.Lang.tr(e,{n:y})):(e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_title"]').innerHTML,o.innerHTML=x.Lang.tr(e,{n:_})),E<1e3?(r=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_added"]').innerHTML,l.setAttribute("data-title",x.Lang.tr(r,{n:E}))):(r=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_added"]').innerHTML,l.setAttribute("data-title",x.Lang.tr(r,{n:S}))),b<1e3?(n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_premium"]').innerHTML,s.innerHTML=x.Lang.tr(n,{n:b})):(n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_premium"]').innerHTML,s.innerHTML=x.Lang.tr(n,{n:w})),y<1e3?(t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_current"]').innerHTML,a.innerHTML=x.Lang.tr(t,{n:y})):(t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_current"]').innerHTML,a.innerHTML=x.Lang.tr(t,{n:_})),0==f&&(b<1e3?(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeMb_cancel"]').innerHTML,c.innerHTML=x.Lang.tr(i,{n:b})):(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesSizeGb_cancel"]').innerHTML,c.innerHTML=x.Lang.tr(i,{n:w})));break;case T.REASON.ERROR_PAGES:if(!this.ctx.limits)throw"Limits object is needed to translate text";e=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_title"]').innerHTML,o.innerHTML=x.Lang.tr(e,{n:g.pages}),r=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_added"]').innerHTML,l.setAttribute("data-title",x.Lang.tr(r,{n:this.ctx.limits.files.getFilePagesNotIgnored()})),n=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_premium"]').innerHTML,s.innerHTML=x.Lang.tr(n,{n:v.pages}),t=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_current"]').innerHTML,a.innerHTML=x.Lang.tr(t,{n:g.pages}),0==f&&(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFilesPages_cancel"]').innerHTML,c.innerHTML=x.Lang.tr(i,{n:v.pages}))}m=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_limit"]').innerHTML,u.innerHTML=x.Lang.tr(m,{n:this.ctx.limits.files.countNotLimited()}),u=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_use"]').innerHTML,d.innerHTML=x.Lang.tr(u,{n:this.ctx.limits.files.countNotIgnored()}),0==f?(p.innerHTML=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_cancel"]').innerHTML,h.querySelector("#confirmUse").remove(),this.initAllFeaturesTooltip(this.domRoot)):(i=document.querySelector('.confirm-files__text-translations [data-key="triggerReason_errorFiles_remove"]').innerHTML,c.innerHTML=x.Lang.tr(i,{n:this.ctx.limits.getLimitedFiles().length}),(m=c.querySelector("span"))&&m.setAttribute("title",this.getFilesToRemove()))},Object.defineProperty(h.prototype,"limitSilder",{get:function(){return this.domRoot.querySelector(".limit-slide__slide__free")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"addedSilder",{get:function(){return this.domRoot.querySelector(".limit-slide__slide__current")},enumerable:!1,configurable:!0}),h.prototype.initActions=function(){var e,t,n,i=this,r=this.taskLimits,o=r[0],a=r[1];switch(this.ctx.triggerReason){case T.REASON.ERROR_FILES:e=o.files,t=this.ctx.limits.files.countNotIgnored(),n=a.files;break;case T.REASON.ERROR_SIZE:e=o.mb,t=this.ctx.limits.files.getFileSizeNotIgnored(),n=1024*a.mb*1024;break;case T.REASON.ERROR_PAGES:e=o.pages,t=this.ctx.limits.files.getFilePagesNotIgnored(),n=a.pages}var s=100*e/n,l=100*t/n;s<3&&(s=3),l<4&&(l=4),this.sliderTimeout=window.setTimeout(function(){i.limitSilder.style.width=s+"%";var e=i.addedSilder;document.body.classList.contains("rtl")?e.style.right=l+"%":e.style.left=l+"%",e.classList.add("tooltip"),i.sliderTooltipTimeout=window.setTimeout(function(){p.Tooltip.init()},1e3)},200)},h.prototype._cleanup=function(){var e,t=this.addedSilder;window.clearTimeout(this.sliderTimeout),window.clearTimeout(this.sliderTooltipTimeout),t&&(null!=(e=null==(e=t)?void 0:e._tippy)&&e.destroy(),t.classList.remove("tooltip"))},h.prototype.getFilesToRemove=function(){var e=this.ctx.limits.getLimitedFilenames();return e.slice(0,5).join("<br>")+(5<e.length?"<br>...":"")},h.prototype.initAllFeaturesTooltip=function(e){var t,n=this;this.tooltipRoot||(this.tooltipRoot=e.querySelector(".new-premium__all-features-tooltip"),this.tooltipRoot&&(t=e.querySelector(".new-premium__all-features-tooltip__html-template"))&&(this.tooltipRoot.classList.add("tooltip"),window.setTimeout(function(){window.tippy(n.tooltipRoot,{allowHTML:!0,theme:"light new-premium-all-features-tooltip",content:t.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0,zIndex:99999})},1e3)))},h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="DefaultState",t.LAYOUT_TEMPLATE_NAME="confirm-files",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.getInitialScreen()),t.clearLoadingScreen(),t.init()},t._onYesButtonClick=function(e){e.preventDefault(),d.UserModel.isRealPremium()?t.dispatchEvent(new l.IloveEvent("end")):((e=new c.default({dialogName:"becomePremium"})).setContentBuilder(function(){return new u.PremiumContext({tool:t.ctx.tool,triggerReason:t.ctx.triggerReason,limits:t.ctx.limits})}),e.show(),e.addEventListener("closed",function(){d.UserModel.isPremium()&&(window.ev("sendOnce","event","limits","premium",t.ctx.tool+"-"+t.ctx.triggerReason),window.ev("eventOnce","limit-action",{action:"premium",tool:t.ctx.tool,reason:t.ctx.triggerReason}),t._cleanup(),t.dispatchEvent(new l.IloveEvent("end")))}))},t._onNoButtonClick=function(e){e.preventDefault(),!1===t.ctx.limits.canContinueWithoutPremium()?(window.ev("sendOnce","event","limits","cancel",t.ctx.tool+"-"+t.ctx.triggerReason),window.ev("eventOnce","limit-action",{action:"cancel",tool:t.ctx.tool,reason:t.ctx.triggerReason}),window.location.reload()):(window.ev("sendOnce","event","limits","free",t.ctx.tool+"-"+t.ctx.triggerReason),window.ev("eventOnce","limit-action",{action:"free",tool:t.ctx.tool,reason:t.ctx.triggerReason}),t._cleanup(),t.dispatchEvent(new l.IloveEvent("end")))},t}t.DefaultState=a},function(e,s,l){"use strict";!function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.UploadManager=void 0;var n=l(151),i=l(152),r=l(115),o=l(37),a=l(153);function e(e){this.id="pickfiles",this.optionsManager=null,this.processManager=null,this.config=null,this.files=null,this.workerServer=null,this.startServer=null,this.token=null,this.tool=null,this.taskId=null,this.servers=null,Object.assign(this,e),this.plupload=null,this.drive=null,this.dropbox=null,this.firstFile=!1,this.init()}e.prototype.init=function(){this.plupload=new r.PluploadUpload({id:this.id,optionsManager:this.optionsManager,processManager:this.processManager,config:this.config,files:this.files,workerServer:this.workerServer,startServer:this.startServer,token:this.token,tool:this.tool,taskId:this.taskId,servers:this.servers,haveDrop:!0,dropElement:"workArea"}),window.pluploader=this.plupload,this.drive=new n.DriveUpload({id:"gdrive_file_selector",optionsManager:this.optionsManager,processManager:this.processManager,config:this.config}),this.dropbox=new i.DropboxUpload({id:"dropbox_file_selector",optionsManager:this.optionsManager,processManager:this.processManager,config:this.config}),this.ws=new a.WsUpload({optionsManager:this.optionsManager});var e=this;t("#pickfiles").on("click",function(){e.firstClick()}),o.Tooltip.disable("#pickfiles"),t("#gdrive_file_selector").on("click",function(){e.firstClick()}),t("#dropbox_file_selector").on("click",function(){e.firstClick()})},e.prototype.firstClick=function(){"pickfiles"==this.id&&0==this.firstFile&&(this.firstFile=!0)},s.UploadManager=e}.call(this,l(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},f=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},m=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.DriveUpload=void 0,n(127)),u=l(n(16)),l=(r=c.DriveService,o(d,r),d.prototype.getUploadParams=function(e){e={task:this.processManager.taskId,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0,drive_token:this.oauthToken,cloud_source:"drive",cloud_file:e.id};return e},d.prototype.drive=function(){var s,e,t,n,i,r,o,a,l,c,u=this;function d(){return f(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,window.gapi.client.load("https://www.googleapis.com/discovery/v1/apis/drive/v3/rest")];case 1:return e.sent(),a=!0,p(),[2]}})})}function p(){a&&l&&!function(){var e=this;r.callback=function(t){return f(e,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:if(void 0!==t.error)throw t;return o=t.access_token,s.oauthToken=o,[4,c()];case 1:return e.sent(),[2]}})})},r.requestAccessToken()}()}function h(e){var t,a;e.action===window.google.picker.Action.PICKED&&(t=e[window.google.picker.Response.DOCUMENTS],a=!1,JSON.stringify(e,null,2),t.forEach(function(e,n){var i=e[window.google.picker.Document.ID],r=(e[window.google.picker.Document.URL],e[window.google.picker.Document.NAME]),o=e[window.google.picker.Document.SIZE_BYTES];window.setTimeout(function(){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return a?[2]:[4,window.gapi.client.drive.files.get({fileId:i,fields:"*"})];case 1:return t=e.sent(),JSON.stringify(t.result,null,2),t.result.originalFilename=r,t.result.fileSize=o,s.fileAdded(t.result).then(function(){s.uploadFile(t.result,n)},function(e){s.optionsManager.removeFile(t.result.id),a=!0}),[2]}})})},150*(n+1))}))}1==this.preloadSrc?this.preloadSrc=!1:(e=(s=this).scope,t=this.clientId,n=this.developerKey,i=this.appId,o=null,l=a=!1,c=function(){var e=window.google.picker.ViewId.DOCS,t=u.config.getConfig("mimeTypes"),e=("Pdf files"==t[0].title?e=window.google.picker.ViewId.PDFS:"Word files"==t[0].title?e=window.google.picker.ViewId.DOCUMENTS:"Excel files"==t[0].title?e=window.google.picker.ViewId.SPREADSHEETS:"Powerpoint files"==t[0].title?e=window.google.picker.ViewId.PRESENTATIONS:"Image files"==t[0].title&&(e=window.google.picker.ViewId.DOCS_IMAGES),new window.google.picker.View(e));null!=t[0].mime&&e.setMimeTypes(t[0].mime),(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.NAV_HIDDEN).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED).setDeveloperKey(n).setAppId(i).setOAuthToken(o).addView(e).addView(new window.google.picker.DocsUploadView).setCallback(h).build().setVisible(!0)},window.gapi.load("client:picker",d),r=window.google.accounts.oauth2.initTokenClient({client_id:t,scope:e,callback:""}),l=!0,p())},d.prototype.fileAdded=function(e){e.runtime="html5",e.percent=0,e.service="drive",e.origin="drive",e.name=e.originalFilename,e.filename=e.originalFilename,e.uri=this.URL_API+"files/"+e.id+"?alt=media",e.url=this.getThumbnailLink(e.thumbnailLink),e.size=null!=(t=e.size)?t:e.fileSize,e.token=this.oauthToken,e.canvasId=e.id,e.extension=e.fileExtension;try{e.width=e.imageMediaMetadata.width,e.height=e.imageMediaMetadata.height}catch(e){}if(e.mimeType)switch(e.mimeType){case"application/vnd.google-apps.document":e.extension="docx";break;case"application/vnd.google-apps.presentation":e.extension="pptx";break;case"application/vnd.google-apps.spreadsheet":e.extension="xlsx"}this.optionsManager.files.addFile(e);var t=this.optionsManager.checkLimits([e],"drive");return 0<t.length?this.optionsManager.fileAdded(t[0],"drive"):Promise.reject()},d.prototype.uploadFile=function(n,e){var t=this,i=this,e=500*(e=void 0===e?0:e);window.setTimeout(function(){t.processManager.api.request("POST","upload",i.getUploadParams(n)).then(function(e){i.processManager.files.updateFile(n.id,{process:100,percent:100,server_filename:e.server_filename}),i.optionsManager.fileUploaded(n.id,e)},function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}t.file=n.id,n.error=!0,i.processManager.files.updateFile(n.id,{process:0,percent:0,error:!0}),i.optionsManager.invalidUpload({error:"CloudError",file:{id:n.id}}),u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("Upload from drive error"),i.optionsManager.invalidUpload(t)})},e)},d.prototype.downloadFile=function(i){var r=this;return new Promise(function(t,e){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onload=function(){var e;200===n.status&&(e=n.response,t(e))},n.onprogress=function(e){e.loaded,e.total},n.open("GET",r.URL_API+"files/"+i.id+"?alt=media"),n.setRequestHeader("Authorization","Bearer "+r.oauthToken),n.send()})},d);function d(e){var n=r.call(this,e=void 0===e?{}:e)||this;return n.getThumbnailLink=function(e){var t;return(null==(t=n.config.getConfig("uploader"))?void 0:t.drive.thumbnailLinkWithoutSize)?n.substringBeforeChars(e,"="):e},n.substringBeforeChars=function(e,t){t=e.lastIndexOf(t);return-1!==t?e.substring(0,t):e},n.optionsManager=null,n.processManager=null,n.pickerApiLoaded=!1,n.oauthToken=null,n.userEmail=null,n.id=null,n.config=null,Object.assign(n,e),n.start(),n}t.DriveUpload=l},function(e,u,d){"use strict";!function(r){var i,n,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=(Object.defineProperty(u,"__esModule",{value:!0}),u.DropboxUpload=void 0,d(128)),l=t(d(16)),t=(n=s.DropboxService,e(c,n),c.prototype.fileAdded=function(e){e.id=e.id.replace(":",""),e.runtime="html5",e.percent=0,e.service="dropbox",e.url=e.link,e.size=e.bytes,e.canvasId=e.id,e.filename=e.name,e.origin="dropbox",this.optionsManager.files.addFile(e),this.optionsManager.checkLimits([],""),this.optionsManager.fileAdded(e,"dropbox")},c.prototype.getUploadParams=function(e){return{task:this.processManager.taskId,cloud_source:"dropbox",cloud_file:e.link,dropbox_link:e.link,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0}},c.prototype.uploadFile=function(n){var i=this;this.processManager.api.request("POST","upload",this.getUploadParams(n)).then(function(e){i.processManager.files.updateFile(n.id,{process:100,percent:100,server_filename:e.server_filename}),i.optionsManager.fileUploaded(n.id,e)},function(t){n.error=!0,i.processManager.files.updateFile(n.id,{process:0,percent:0,error:!0}),i.optionsManager.invalidUpload({error:"CloudError",file:{id:n.id}}),l.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),l.captureMessage("Upload from dropbox error")})},c);function c(e){var t=n.call(this,e=void 0===e?{}:e)||this;return t.dropbox=function(){var n=t,e=t.config.getConfig("mimeTypes")[0].extensions.split(","),i=[];r.each(e,function(e,t){i.push("."+t)}),window.Dropbox.choose({success:function(e){r.each(e,function(e,t){n.fileAdded(t),n.uploadFile(t)})},cancel:function(){},error:function(t){l.configureScope(function(e){e.setExtra("error",t)}),l.captureMessage("Dropbox upload error")},linkType:"direct",multiselect:!0,extensions:i})},t.optionsManager=null,t.processManager=null,t.id=null,t.config=null,Object.assign(t,e),t.start(),t}u.DropboxUpload=t}.call(this,d(1))},function(e,t,n){"use strict";function i(e){e=e.optionsManager;this.optionsManager=e}Object.defineProperty(t,"__esModule",{value:!0}),t.WsUpload=void 0,i.prototype.fileArrayAdded=function(e){var t=this;e.forEach(function(e){e.id=t.escape(e.id),e.canvasId=e.id,t.optionsManager.files.getFile(e.id)||(t.optionsManager.files.addFile(e),t.optionsManager.fileAdded(e,"WebSocket"))})},i.prototype.fileRemoved=function(e){e=this.escape(e),this.optionsManager.removeFile(e),this.optionsManager.fileRemoved(e)},i.prototype.fileUploaded=function(e,t){e=this.escape(e),this.optionsManager.files.updateFile(e,{server_filename:t,percent:100}),this.optionsManager.fileChanged(e)},i.prototype.fileProgressUpdated=function(e,t){e=this.escape(e),this.optionsManager.files.updateFile(e,{percent:t}),this.optionsManager.fileChanged(e)},i.prototype.escape=function(e){for(var t="",n=0;n<e.length;n++){var i=e[n];t+=Number(i.charCodeAt(0)).toString(36)}return"str"+t},t.WsUpload=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chain=void 0;var r=n(48);function i(e){this.parentId=null,this.tool=null,this.token=null,this.preWorker=null,Object.assign(this,e)}i.prototype.makeChild=function(){var e=this,i=this;return new Promise(function(t,n){null==i.parentId?t():(e.api=new r.Api({taskId:null,tool:i.tool,workerServer:i.workerServer,preWorker:i.preWorker,token:i.token}),e.api.next(i.parentId,i.tool,i.preWorker).then(function(e){t(e)},function(e){n(e)}))})},i.prototype.getFileUrl=function(e,t){return this.api.nextFile(e,t)},t.Chain=i},function(e){e.exports=JSON.parse('{"default":{"mimeTypes":[{"title":"All files"}],"multiSelection":true}}')},function(e,E,S){"use strict";!function(s){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(E,"__esModule",{value:!0}),E.OptionsManager=void 0,S(84)),o=S(60),l=S(8),c=S(37),u=e(S(16)),a=S(13),d=S(18),p=S(15),h=S(99),f=S(73),m=S(81),g=S(157),v=S(72),y=S(79),_=t(S(62)),b=t(S(83));function w(e){void 0===e&&(e={}),this.backCount=0,this.forwardCount=0,this.backRefreshInterval=null,this._BACKREFRESH_TIME=3e5,this.limitDialogOpen=null,this.config={},this.processManager=null,this.tool=null,this.subtool=null,this.toolText="Process",this.template=null,this.defaultOptions={},this.fileLimits=null,this.allFileLimits=null,this.level="user",this.userToken=null,this.workerServer=null,this.startServer=null,this.hideRotation=!1,this.levelTemp="user",this.options={},this.values={},this.files=null,this.started=!1,this.workareaStarted=!1,this.viewManager=null,this.limits=null,this.ignoreLimits=!1,this.damagedRemove=!1,this.premiumTask=!1,this.processBtnPulseTimeout=7e3,this.showFileGroups=!0,this.processBlock=!1,this.checkServerStatusOnStart=!1,Object.assign(this,e),null==this.subtool&&(this.subtool=this.tool),null==this.toolText&&(this.toolText=this.tool),this.limits=new o.Limits({files:this.files,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,tool:this.tool,subtool:this.subtool}),this.removedFiles=0,window.processStart=!1,window.iuser=p.UserModel,f.LinkTitle.disable(s("#pickfiles")),this.tryInitByParent(),this.removeFilesOnLimitReatched="b"==(null!=(e=window.ab)&&e.limits?window.ab.limits:"a"),this.checkBackRefresh()}w.prototype.tryInitByParent=function(){var n=this;0<this.files.files.length&&(this.init(),s.each(this.files.files,function(e,t){n.fileAdded(t,"parent").then(function(){},function(){})}))},w.prototype.init=function(){!0!==this.started&&(s("#sidebar").prepend(this.getInnactiveView()),this.startPanels(),this.started=!0),this.initViewManager()},w.prototype.initViewManager=function(){},w.prototype.checkLimits=function(e,t){var n=this.getLimit();return this.actionLimitReatched(n),e=null===n||1!=this.limits.hasSurpasedLimits(n)&&1!=this.removeFilesOnLimitReatched?e:this.removeLimitFiles(e,!0)},w.prototype.getLimit=function(){return this.limits.checkFileLimits(this.files.getFileSizeNotIgnored(),this.files.countNotIgnored(),this.files.getFilePagesNotIgnored())},w.prototype.actionLimitReatched=function(e,t){var n,i=this;void 0===t&&(t=!1),null!==e?(window.ib&&window.ib.set("p","l"),this.setLimitedFiles(),n=this.limits.hasSurpasedLimits(e),!t&&this.alertElement&&!n&&!0!==this.removeFilesOnLimitReatched||null!=this.limitDialogOpen&&!0!==this.removeFilesOnLimitReatched?this.displayLimitsAlert():(this.limitDialogOpen=this.displayLimitsDialog(e),this.limitDialogOpen&&this.limitDialogOpen.addEventListener("closed",function(e){var t;p.UserModel.isRealPremium()?(i.files.resetLimitedFiles(),i.hideLimitsAlert(),i.limits.sendEventLimitsChanged()):null==(t=i.getLimit())||i.limits.hasSurpasedLimits(t)?(i.limits.sendEventLimitsChanged(),i.hideLimitsAlert()):i.displayLimitsAlert(),i.limitDialogOpen=null}))):(this.files.resetLimitedFiles(),this.hideLimitsAlert())},Object.defineProperty(w.prototype,"alertElementId",{get:function(){return"limitAlert"},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"alertElement",{get:function(){return document.getElementById(this.alertElementId)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"alertElementHeader",{get:function(){return document.querySelector("#"+this.alertElementId+" .limit-alert__header")},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"alertElementContent",{get:function(){return document.querySelector("#"+this.alertElementId+" .limit-alert__content")},enumerable:!1,configurable:!0}),w.prototype.displayLimitsAlert=function(){var e=this,t=this.alertElement,n=this.alertElementHeader,i=this.alertElementContent,n=(t||((t=document.createElement("div")).id=this.alertElementId,t.classList.add("limit-alert"),(n=document.createElement("div")).classList.add("limit-alert__header"),(i=document.createElement("div")).classList.add("limit-alert__content"),i.innerHTML=n.innerHTML=l.Lang.t("upgradePremium"),t.appendChild(n),t.appendChild(i),t.addEventListener("click",function(){e.actionLimitReatched(e.getLimit(),!0)}),document.getElementById("workArea").appendChild(t)),this.limits.getLimitTexts());i.innerHTML="<div>"+n.current+"</div><div>"+n.premium+"</div>",t.style.display="block",t.classList.add("limit-alert--"+n.limit)},w.prototype.hideLimitsAlert=function(){this.alertElement&&(this.alertElement.style.display="none",this.limits.resetEventSent())},w.prototype.displayLimitsDialog=function(e,t){var n=this,i=(void 0===t&&(t=!1),this.limits.getNextLimit(e)),t=t||!1===i.nextValue,i=null,r=y.Dialog.getVisibleDialogs().find(function(e){return"PremiumContext"===e.getContent().contentName||"NoMoreLimitsContext"===e.getContent().contentName});if(e===o.REASON.ERROR_FEATURE){if(r)return;i=function(){return new v.PremiumContext({tool:n.limits.getTool(),limits:n.limits,triggerReason:e})}}else if(t)i=function(){return new g.NoMoreLimitsContext({tool:n.limits.getTool(),limits:n.limits,triggerReason:e})};else{if(r)return;i=function(){return new v.PremiumContext({tool:n.limits.getTool(),limits:n.limits,triggerReason:e})}}t=new _.default({dialogName:"Limits"});return t.setContentBuilder(i),t.show(),s("#pickfiles").addClass("limitsShow"),t},w.prototype.removeLimitFiles=function(e,t){void 0===t&&(t=!1);var n=this.limits.checkFileLimits(this.files.getFileSizeNotIgnored(),this.files.countNotIgnored()),i=this.limits.hasSurpasedLimits(n);if(null!==n&&(1==t&&1==i||1==this.removeFilesOnLimitReatched)){n=e.pop();try{n&&([].push(n.id),this.files.removeFile(n.id,!0))}catch(e){}if(0<e.length)try{e=this.removeLimitFiles(e,t)}catch(e){}}return e},w.prototype.setLimitedFiles=function(){this.limits.setFileLimits()},w.prototype.fileAdded=function(i,e,r){var o=this,a=(void 0===r&&(r=!1),this);return i.name&&(i.name=m.TextHelper.stripTags(i.name).replace('"',"")),i.filename&&(i.filename=m.TextHelper.stripTags(i.filename).replace('"',"")),new Promise(function(t,n){1==r&&(a.limits.addIgnoredFile(i.id),a.processManager.addIgnoredFile(i.id),a.files.updateFile(i.id,{ignored:!0}));var e=a.limits.checkFileLimits(a.files.getFileSizeNotIgnored(),a.files.countNotIgnored(),a.files.getFilePagesNotIgnored());null!==e&&(a.limits.setFileLimits(),o.alertElement&&0==o.limits.hasSurpasedLimits(e)?o.displayLimitsAlert():o.displayLimitsDialog(e),a.setFilecount()),a.makeWorkarea().then(function(){var e=null,e=("function"==typeof i.getSource&&(e=i.getSource().getSource()),{name:i.name,id:i.id,canvasId:i.canvasId,tool:a.tool,subtool:a.subtool,size:i.size,source:e,url:i.url,uri:i.uri,token:i.token,runtime:i.runtime,service:i.service,thumbnail:i.thumbnail,rotable:i.rotable});i.extension&&(e.name+="."+i.extension),0==a.config.getConfig("multiSelection")&&s("#uploader").hide(),a.viewManager.addFileDOM(e).then(function(e){a.setValue("numPages",e.numPages),a.printValues("numPages",e.numPages),a.setValue("width",e.width),a.printValues("height",e.height),a.fileReady(i),1!=r&&a.setFilecount(),a.initFileNameEditable(i.id),c.Tooltip.init(),t({})},function(e){"PasswordException"==e.name?(s("#"+i.id).attr("title",l.Lang.t("paswordRequired")).attr("data-title",l.Lang.t("paswordRequired")),c.Tooltip.setContent(s("#"+i.id),l.Lang.t("paswordRequired"))):(s("#"+i.id).attr("title",l.Lang.t("damaged file?")).attr("data-title",l.Lang.t("damaged file?")),c.Tooltip.setContent(s("#"+i.id),l.Lang.t("damaged file?"))),s("#"+i.id+" .file__info__size").hide(),c.Tooltip.init();try{if("removeFile"==e.name)return void n()}catch(e){}"function"==typeof a.damagedAction&&a.damagedAction(),1==a.damagedRemove?(a.fileAddError(i.id),n()):(a.setFilecount(),c.Tooltip.init(s("#"+i.id+" .remove")),"noRenderMode"!=e&&s("#cover-"+i.canvasId).addClass("error"),t({}))}),0==a.config.getConfig("multiSelection")&&s("#uploader").hide()},function(e){u.captureMessage("Fail: createworkarea"),n()})})},w.prototype.initFileNameEditable=function(e){var t,n,i=this;!1!==this.nameEditable&&0!=(t=s("#"+e+" .file__info__name")).length&&(n=t.text().split(".").pop(),t.attr("contenteditable","true"),t.attr("data-ext","true"),t.attr("data-orig",t.text()),t.on("change keyup mouseup",function(){i.files.updateFile(e,{rename:m.TextHelper.stripTags(t.text().replace(/"/g,""))})}),t.on("blur",function(){t.html(m.TextHelper.stripTags(t.text().replace(/"/g,""))),""!=t.text()&&t.text()!="."+n||t.html(t.attr("data-orig")),t.text()==n&&t.html(n+"."+n),t.text().split(".").pop()!=n&&(t.html(t.text()+"."+n),i.files.updateFile(e,{rename:t.text()}))}))},w.prototype.setFilecount=function(){var e=this.files.countNotIgnored(),t=s("#filecount");0==t.length?s("#uploader").prepend('<div id="filecount">'+e+"</div>"):t.html(e.toString())},w.prototype.fileUploaded=function(e,t){this.files.updateFile(e,t);var n;null!==this.viewManager&&(null!=(n=this.files.getFile(e))&&"thumbnail"in n&&null!=n.thumbnail&&(n.thumbnail=this.workerServer+"/thumbnails/"+n.thumbnail),this.viewManager.fileUploaded(e,t))},w.prototype.changeServer=function(e){this.processManager.workerServer=e,this.processManager.api.workerServer=e,this.workerServer=e},w.prototype.fileReady=function(e){var t=e.canvasId,n=e.canvasId;this.limits.checkHasLimits("pages")&&0==this.checkLimits([e],null).length?(this.viewManager.removeFile(t),this.fileRemoved(n)):(this.fileChanged(e),t=s("#"+e.id),n=d.Tools.bytesToSize(e.size),0<t.length&&"width"in e&&"height"in e?(n=n+" - "+e.width+"x"+e.height,t.attr("data-width",e.width).attr("data-height",e.height)):"file"in e&&e.file&&"numPages"in e.file&&(n=n+" - "+l.Lang.t("numPages",{numPages:e.file.numPages})),this.checkRotation(e),t.attr("title",n).attr("data-title",n).addClass("tooltip"),c.Tooltip.init(),this.setFilecount())},w.prototype.checkRotation=function(t){if(!0===this.hideRotation)s(".rotate").hide();else try{var e=t.name.substr(t.name.lastIndexOf(".")+1).toUpperCase();-1==["JPG","JPEG","PNG","GIF","PDF","DOC","DOCX","XLS","XLSX","PPT","PPTX"].indexOf(e)&&s("#"+t.canvasId+" .rotate").hide()}catch(e){s("#"+t.canvasId+" .rotate").hide()}},w.prototype.makeWorkarea=function(){var n=this;return new Promise(function(e,t){1!=n.workareaStarted&&(n.workareaStarted=!0,s("#contentArea").hide(),s(".tool__workarea__rendered").css("display","flex").hide().fadeIn(),0==n.showFileGroups&&s("#fileGroups").hide(),n.moveUploader(),n.workareaActions()),e({})})},w.prototype.workareaActions=function(){},w.prototype.moveUploader=function(){var e=s("#uploader"),t=(c.Tooltip.init(),s("#uploadDisk").on("click",function(){s("#uploader input").trigger("click")}),e.attr("data-title"));void 0!==t&&"false"!==t||(t=e.attr("title"),e.attr("data-title",t)),e.attr("title",""),e.hide(),s("body").addClass("sidebar-active"),s("body").addClass("tool-"+this.tool),s(".uploader__extra a").removeClass("tooltip--right").addClass("tooltip--left"),this.init(),e.detach(),e.addClass("box"),s("#settingsToogle").on("click",function(){s(".tool").toggleClass("tool--toggle")}),s("#orderByName").on("click",function(){s(this).toggleClass("order--desc");var e=s(this).data("order");"asc"==e?s(this).data("order","desc"):s(this).data("order","asc"),s("#fileGroups > div").tsort({order:e,natural:!0})});try{e.insertAfter("#settingsToogle")}catch(e){}this.onUploaderMoved(e)},w.prototype.onUploaderMoved=function(e){var t=this;window.googletag&&window.googletag.pubads&&window.googletag.pubads().setTargeting&&window.googletag.pubads().setTargeting("pos","wrk"),t.config.getConfig("multiSelection")&&e.fadeIn("slow",function(){t.onUploaderMovedAndShow()})},w.prototype.onUploaderMovedAndShow=function(){s("#pickfiles").addClass("tooltip"),c.Tooltip.enable(s("#pickfiles")),0<s(".modal.show").length||s("#pickfiles").hasClass("limitsShow")||(c.Tooltip.show(s("#pickfiles"),5e3),window.tooltip=c.Tooltip)},w.prototype.checkProcessBtn=function(){"no"==s(".option__panel--active").data("process")?s("#processTask").fadeOut():(s("#processTask").fadeIn(),this.checkProcessPulse())},w.prototype.checkProcessPulse=function(){var e;window.Cookies&&1!=s("#processTask").is(":disabled")&&(e=parseInt(b.default.get("pulse"))||0,e++,window.Cookies.set("pulse",""+e),e<3)&&setTimeout(function(){s("#processTask").addClass("pulse")},this.processBtnPulseTimeout)},w.prototype.startPanels=function(){1!=this.panelsStarted&&(this.panelsStarted=!0,this.initDefaultOptions(),this.initDefaultValues(),this.initActions(),this.initFromUrl(),this.addButtonTask(),this.checkProcessBtn(),this.premiumActions())},w.prototype.premiumActions=function(){p.UserModel.isRealPremium()&&s("#ocr-options").show()},w.prototype.initDefaultOptions=function(){var n=this;s.each(n.defaultOptions,function(e,t){n.setOption(e,t)})},w.prototype.initDefaultValues=function(){var n=this;s.each(n.defaultOptions,function(e,t){n.setValue(e,t)}),n.setValue("numPages",0)},w.prototype.initFromUrl=function(){var e=location.hash.substr(1).split(",");if("process"!=e[0]){var t="",n="";e[0]&&(t=e[0]),e[1]&&(n=e[1]);try{""!=t&&0==s("#"+t).length&&(t="")}catch(e){t=""}if(""==t||"undefined"==t?(t=s(".option__panel--active").attr("id"),this.callPanelActions(t)):s(".option__panel").first().attr("id")!=t&&(s(".option__panel").first().removeClass("option__panel--active").addClass("option__panel--inactive"),s("#"+t).addClass("option__panel--active"),this.callPanelActions(t)),s("#"+t+" .option__tab__select__item").removeClass("option--active"),s("#"+t+" .option__tab__content").removeClass("option__tab__content--active"),void 0!==n&&""!=n)try{s("#tab-"+n).addClass("option--active"),s("#tab-content-"+n).addClass("option__tab__content--active"),this.callTabActions(n)}catch(e){}else{e=s("#"+t+" .option__tab__select__item");0<e.length&&(n=e.first().attr("data-target"),e.first().trigger("click"))}}},w.prototype.initActions=function(){function t(e){var t=(s(e).val()-parseInt(s(e).attr("min")))/(parseInt(s(e).attr("max"))-parseInt(s(e).attr("min")));s(e).attr("data-value",t),s(e).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+t+", #E5322D), color-stop("+t+", #7A9FAB))")}var r=this,e=(window.addEventListener("fileRemoved",function(e){r.fileRemoved(e.detail)},!1),this.initBackFromProcessListenEvent(),1<s(".option__panel").length&&window.addEventListener("popstate",function(e){var e=e.state,t=null,t=null===e?s(".option__panel").first().attr("id"):e.id;s("#"+t).addClass("option__panel--inactive"),s(".option__panel").removeClass("option__panel--active"),s("#"+t).removeClass("option__panel--inactive").addClass("option__panel--active"),r.checkProcessBtn(),r.callPanelActions(t)}),s(".option__description__more__toggle").each(function(){s(this).on("click",function(e){e.stopPropagation(),s(this).parent().toggleClass("option__description__more--extend")})}),s(".option__select__item").on("click",function(){if(s(this).hasClass("option--disabled"))return!0;s(this).siblings().removeClass("option--active"),s(this).siblings().find(".option").removeClass("option--active"),"panel"!=s(this).data("action")&&s(this).addClass("option--active"),r.options[s(this).data("name")]=s(this).data("value")}),s(".option__tab__select__item").on("click",function(){if(s(this).hasClass("option--disabled"))return!0;var e=s(this).data("name"),t=s(this).data("value"),e=(s(this).siblings().removeClass("option--active"),s(this).addClass("option--active"),"undefined"!=e&&r.setOption(e,t),s(this).data("target")),t=(s(this).parent().parent().find(".option__tab__content").removeClass("option__tab__content--active"),s("#tab-content-"+e).addClass("option__tab__content--active"),s(this).parent().parent().parent().attr("id")),e=s(this).data("target"),n=s(this).attr("id"),i={id:n};history.pushState(i,n,"#"+t+","+e),r.checkProcessBtn(),r.callTabActions(e)}),s(".option__image__item").on("click",function(e){if(s(this).hasClass("option--disabled"))return!0;var t=s(this).data("name"),n=s(this).data("value");s(this).siblings().removeClass("option--active"),s(this).addClass("option--active"),null!=t&&r.setOption(t,n)}),s(".option__panel .back").each(function(){s(this).on("click",function(){if(s(this).hasClass("option--disabled"))return!0;var e=s(this).data("target"),t=s(".option__panel--active").attr("id");history.pushState({id:t},t,"#"),s("#"+e).addClass("option__panel--active"),s(".option__panel--active").removeClass("option__panel--active"),s("#"+e).removeClass("option__panel--inactive").addClass("option__panel--active"),r.checkProcessBtn(),r.callPanelActions(e)})}),s("[data-action]").each(function(){s(this).hasClass("option--disabled")||s(this).on("click",function(){r.callFormAction(s(this).data("action"),s(this),"click")})}),s(".option__panel .option").on("click",function(e){if(s(this).hasClass("option--disabled"))return!0;var t=s(this).data("name"),n=s(this).data("value");t&&n&&(r.options[t]=n,s('*[data-show="'+t+'"]').html(n))}),null),n=(s("input.option").on("keyup mouseup",function(){clearTimeout(e);var n=s(this);e=setTimeout(function(){var e=n.attr("name"),t=n.val();r.setOption(e,t),null!=n.data("action")&&r.callFormAction(n.data("action"),n,"keyup")},1e3)}),s(".option:checkbox").change(function(){var e=s(this).attr("name"),t=s(this).is(":checked"),n=null;1==t&&s(this)[0].hasAttribute("data-checked")?n=s(this).attr("data-checked"):0==t&&s(this)[0].hasAttribute("data-unchecked")&&(n=s(this).attr("data-unchecked")),null!=n?r.setOption(e,n):r.setOption(e,t)}),s(".option:radio").change(function(){var e=s(this).attr("name"),t=s('[name="'+e+'"]:checked').val();null!=t&&r.setOption(e,t)}),s("select.option").on("change",function(){var e=s(this).attr("name"),t=s(this).val();r.setOption(e,t)}),s("textarea.option").on("keyup change",function(){var e=s(this).attr("name"),t=s(this).val();r.setOption(e,t)}),s(".option--radio").on("click",function(){if(s(this).hasClass("option--disabled"))return!0;s(this).hasClass("option--active")?(r.setValue(s(this).data("name"),s(this).data("inactive")),r.options[s(this).data("name")]=s(this).data("inactive")):(r.setValue(s(this).data("name"),s(this).data("active")),r.options[s(this).data("name")]=s(this).data("active"))}),s('input[type="range"]').each(function(){t(this)}),null);s('input[type="range"]').change(function(){null!==n&&clearTimeout(n);var e=this;n=setTimeout(function(){t(e)},1e3)})},w.prototype.initSidetoolsActions=function(){},w.prototype.fileRemoved=function(e){this.removedFiles++,this.fileChanged(e),this.setFilecount(),this.checkLimits(null,null)},w.prototype.fileChanged=function(e){this.updateOrderStatus(),0<this.files.countNotIgnored()?("string"!=typeof e&&(null!=e&&"upBy"in e&&"pickwatermark"==e.upBy?this.checkProcessBtn():this.enableProcessBtn()),s(".tool__sidebar__inactive").fadeOut(),s(".tool__sidebar").css("overflow-y","auto")):(this.disableProcessBtn(l.Lang.t("No file selected.")),s(".tool__sidebar").css("overflow-y","hidden"),s(".tool__sidebar__inactive").css("display","flex").hide().fadeIn(),this.showUploaderTooltip())},w.prototype.showUploaderTooltip=function(){c.Tooltip.show(s("#pickfiles"),8e3)},w.prototype.updateOrderStatus=function(){1<this.files.countNotIgnored()?s("#orderByName").css("display","flex"):s("#orderByName").hide()},w.prototype.addButtonTask=function(){var e=this;0==s("#processTask").length&&(s(".main .tool").append(n.OptionsTemplate.processButton({tool:e.tool,toolText:e.toolText})),s("#processTask").on("click",function(){1!=e.premiumTask||p.UserModel.isPremium()||"premium"==window.ilovepdfConfig.levelTemp?(s("#processTask").attr("disabled","true"),Math.floor(((new Date).getTime()-window.startTime)/1e3),e.processTask()):(s('#highres-options [data-value="0"]').trigger("click"),e.displayLimitsDialog(o.REASON.ERROR_FEATURE),window.ev("send","event","limits","feature-exceeded","pdfa"),window.ev("event","limit",{reason:"feature",tool:"pdfa"}))}))},w.prototype.setOption=function(e,t){if("undefined"==e)throw"InvalidOption "+e+":"+t;this.options[e]=t,this.values[e]=t,this.printOption(e,t)},w.prototype.setValue=function(e,t){this.values[e]=t,this.printValues(e,t)},w.prototype.printOption=function(t,n){if(null!=n&&""!=n.toString()){try{s('*[data-name="'+t+'"]').removeClass("option--active"),s('*[data-name="'+t+'"][data-value="'+n+'"]').addClass("option--active")}catch(e){u.configureScope(function(e){e.setExtra("dataKey",t),e.setExtra("dataValue",n)}),u.captureMessage("setting option error")}s('input[type="text"][name="'+t+'"]').val(n),s('input[type="number"][name="'+t+'"]').val(n),s('input[type="color"][name="'+t+'"]').val(n),s('input[type="checkbox"][name="'+t+'"]').attr("checked",n);try{s('input[type="radio"][name="'+t+'"][value="'+n.toString()+'"]').attr("checked","true")}catch(e){}s('select[name="'+t+'"]').val(n),s('.option--radio[data-name="'+t+'"]').each(function(){s(this).attr("data-active")==n?s(this).addClass("option--active"):s(this).removeClass("option--active")}),s('input[type="checkbox"][name="'+t+'"]').attr("checked",n),s('*[data-show="'+t+'"]').attr("data-value",n).html(n),s(".option__value--color").each(function(){s(this).css("background-color",s(this).attr("data-value"))}),s('*[data-show="'+t+'"]').html(this.printTransform(t,n)),s('*[data-show="'+t+'"]').attr("data-value",n),s('*[data-show="'+t+'"][data-type="color"]').css("background-color",n),s('*[data-if="'+t+'"]').each(function(){s(this).attr("data-value")==n?s(this).show():s(this).hide()})}},w.prototype.applyAllOptions=function(){for(var e in this.options)this.options.hasOwnProperty(e)&&this.printOption(e,this.options[e])},w.prototype.printTransform=function(e,t){return t},w.prototype.printValues=function(e,t){s("."+e).html(t),s("input."+e).val(t)},w.prototype.getValue=function(e){return this.values[e]},w.prototype.processTask=function(){var e,t=this;1!=this.processBlock&&(this.processBlock=!0,this.disableProcessBtn(),(e=this).getPanelActiveOptions(),e.beforeProcess().then(function(){e.savePremium().then(function(){t.hideLimitsAlert(),e.processManager.setOptions(e.options),e.processManager.limits=t.limits,t.checkBackForward(),t.clearBackRefreshDetection(),e.processManager.process()},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("Error on save premium task data")})},function(e){t.onBeforeProcessReject(e)}))},w.prototype.onBeforeProcessReject=function(t){t instanceof Error&&(u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("onBeforeProcessReject error")),this.enableProcessBtn()},w.prototype.beforeProcess=function(){return new Promise(function(e,t){var n=!!window.MSInputMethodContext&&!!document.documentMode;if(window.processStart=!0,n)document.createEvent("Event").initEvent("goProcess",!0,!0);else try{var i=new Event("goProcess");window.dispatchEvent(i)}catch(e){}e({})})},w.prototype.getOption=function(e){return this.options[e]},w.prototype.getOptions=function(){return this.options},w.prototype.getPanelActiveOptions=function(){var i=this,e=s(".option__panel--active");e.find(".option--active").each(function(e,t){var n=s(t).attr("data-name");null!=n&&(0<n.indexOf("[]")?(i.options[n]instanceof Array||(i.options[n]=[]),i.options[n].push(s(t).attr("data-value"))):i.options[n]=s(t).attr("data-value"))}),e.find('input[type="text"], input[type="number"], input[type="color"], select, input[type="hidden"]').each(function(e,t){var n=s(t).attr("data-name");null==n&&null==(n=s(t).attr("name"))||(0<n.indexOf("[]")?(i.options[n]instanceof Array||(i.options[n]=[]),i.options[n].push(s(t).val())):i.options[n]=s(t).val())}),e.find('input[type="checkbox"]').each(function(e,t){var n=s(t).attr("name");i.options[n]=s(t).is(":checked")}),i.unsetUndefinedOptions()},w.prototype.unsetUndefinedOptions=function(){"undefined"in this.options&&delete this.options.undefined},w.prototype.callPanelActions=function(e){null!=e&&(e="action"+e.camelCase().ucFirst())in this&&this[e]()},w.prototype.callTabActions=function(e){null!=e&&""!=e&&(e="action"+e.camelCase().ucFirst())in this&&this[e]()},w.prototype.callOptionAction=function(e,n,i){var r;void 0===i&&(i="click"),null!=e&&(e=e.split(" "),r=this,s.each(e,function(e,t){null!=t&&(t="actionOption"+t.camelCase().ucFirst())in r&&r[t](n,i)}))},w.prototype.callFormAction=function(e,n,i){var r;void 0===i&&(i="click"),null!=e&&(e=e.split(" "),r=this,s.each(e,function(e,t){null!=t&&(t="actionForm"+t.camelCase().ucFirst())in r&&r[t](n,i)}))},w.prototype.actionFormPanel=function(e,t){var n,e=e.data("target"),i=s(".option__panel--active").attr("id"),r={id:i};history.pushState(r,i,"#"+e),s(".option__panel--active").removeClass("option__panel--active").addClass("option__panel--inactive"),s("#"+e).addClass("option__panel--active"),this.checkProcessBtn(),this.callPanelActions(e),0<s("#"+e).find(".option__tab").length&&(n=s(".option__tab__select__item.option--active").data("target"),this.callTabActions(n)),history.pushState(r,i,"#"+e)},w.prototype.actionFormShowOptions=function(e,t){var n=s(e).val();s(".option--if").hide(),s('*[data-if="'+name+'"]').each(function(){e.data("value")==n?e.show():e.hide()})},w.prototype.actionFormDecimal=function(e,t){void 0===t&&(t=null);t=s(e=void 0===e?null:e).val();s(e).val(t.replace(",","."))},w.prototype.getInnactiveView=function(){return'<div class="tool__sidebar__inactive"><p>'+l.Lang.t("No file selected.")+'</p><svg xmlns="http://www.w3.org/2000/svg" width="75" height="66" viewBox="0 0 150 132"><path fill="#FFF" d="M0,0 C0,18.75 28.125,56.25 93.75,56.25 L93.75,18.75 L150,75 L93.75,131.25 L93.75,93.75 C42.0594727,93.75 0,51.6905273 0,0 Z" transform="rotate(-180 75 66)"/></svg><p>'+l.Lang.t("Please add a file to activate options")+"</p></div>"},w.prototype.initPremium=function(){p.UserModel.isPremium()&&(s(this.getPremiumView()).insertBefore(s(".gobutton")),s("#save_options").change(function(){s(this).is(":checked")}))},w.prototype.savePremium=function(){var i=this,r=this;return new Promise(function(e,t){var n;s("#save_options").length&&s("#save_options").is(":checked")?((n=r.getOptions()).tool=i.tool,n=r.beforeSavePremiumOptions(n),r.processManager.api.saveToolConfig(r.tool,n,p.UserModel.get().token).then(function(){e({})},function(){t()})):e({})})},w.prototype.invalidUpload=function(t,n){var i=this,r=(void 0===n&&(n=null),h.IloveError.getError(t)),e=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool);if(s("body").hasClass("process-run"))try{"object"==typeof t&&"file"in t&&"id"in t.file&&this.files.updateFile(t.file.id,{error:!0,percent:100,errorData:r})}catch(e){}else{0<=["FileSizeExceeded","FileTooLarge","FileRemoved"].indexOf(r)?(window.ev("sendOnce","event","upload-info",r,e),window.ev("eventOnce","upload_info",{tool:e,reason:r})):(window.ev("send","event","upload-invalid",e,r),window.ev("event","upload_invalid",{tool:e,error:r}),u.configureScope(function(e){e.setExtra("error",t)}),null!=n&&u.configureScope(function(e){e.setExtra("error_extra",n),e.setExtra("task_id",i.processManager.taskId)}),u.captureMessage("upload-invalid."+r,a.Severity.Error));try{"object"==typeof t&&"file"in t?(this.viewManager.removeFile(t.file.canvasId),window.Toastr.error(l.Lang.t(r)+"<br>"+t.file.name,l.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"})):this.fatalError(r)}catch(e){this.fatalError(r)}}},w.prototype.beforeSavePremiumOptions=function(e){return e},w.prototype.getPremiumView=function(){return""},w.prototype.disableProcessBtn=function(e){void 0===e&&(e=null);var t=s("#processTask"),n=s("#processTaskWrapper");t.attr("disabled","true"),t.removeClass("pulse"),n.addClass("tooltip tooltip--top").removeAttr("title").show(),null!=e&&"undefined"!=e?(n.attr("data-title",e),n.attr("title",e),c.Tooltip.setContent(n,e),c.Tooltip.enable(n)):c.Tooltip.disable(n)},w.prototype.enableProcessBtn=function(){s("#processTask").removeClass("tooltip tooltip--top").removeAttr("title").removeAttr("disabled"),c.Tooltip.hide("#processTaskWrapper"),s("#processTaskWrapper").hide(),this.processBlock=!1},w.prototype.fatalError=function(e){h.IloveError.fatalError(e,this.tool,this.workerServer)},w.prototype.timeout=function(){window.location.reload()},w.prototype.timeoutPopup=function(){var n=this,i=[],r=[],e=(s.each(this.files.files,function(e,t){"canvasId"in t?i.push(t.canvasId):"id"in t&&r.push(t.id)}),s.each(i,function(e,t){n.viewManager.removeFile(t)}),s.each(r,function(e,t){n.files.removeFile(t)}),d.Tools.modalViewOk({id:"timelimit",title:l.Lang.t("Wops"),content:"<p>"+l.Lang.t("Welcome back after upload")+"</p>"}));s(e).modal()},w.prototype.removeFile=function(e){try{this.viewManager.removeFile(e)}catch(e){}this.files.removeFile(e),this.checkLimits(null,null)},w.prototype.loadingStart=function(){0===s(".item-loading").length&&0==s(".loading").length&&s("body").append('<div class="item-loading"></div>'),s(".item-loading").show()},w.prototype.loadingEnd=function(){s(".item-loading").hide()},w.prototype.fileAddError=function(e,t,n){void 0===n&&(n="DamagedFile"),1==(t=void 0===t?!1:t)?window.Toastr.error(l.Lang.t(n),l.Lang.t("Error"),{timeOut:0,closeButton:!0,preventDuplicates:!0,positionClass:"toast-top-left"}):window.Toastr.error(l.Lang.t(n),l.Lang.t("Error"),{timeOut:5e3,positionClass:"toast-top-left"}),this.removeFile(e),this.loadingEnd()},w.prototype.initBackFromProcessListenEvent=function(){var t=this;window.addEventListener("popstate",function(e){e.state;t.processManager.contextConfirmFiles&&(t.backCount++,s(".process").hide(),s(".uploading").hide(),t.processManager.contextConfirmFiles.remove(),document.body.classList.remove("process-run"),t.checkLimits([],null),t.enableProcessBtn(),t.checkProcessBtn(),e=t.getLimit(),window.ev("sendOnce","event","limits","back",t.tool+"-"+e),window.ev("eventOnce","limit-action",{action:"back",tool:t.tool,reason:e}),t.processManager.contextConfirmFiles=null,t.initBackRefreshDetection())})},w.prototype.checkBackForward=function(){var e;0<this.backCount&&(this.forwardCount++,e=this.getLimit()||"solved",window.ev("sendOnce","event","limits","forward",e),window.ev("eventOnce","limit-actions",{action:"back",tool:this.tool,reason:e}))},w.prototype.initBackRefreshDetection=function(){var e=new Date((new Date).getTime()+this._BACKREFRESH_TIME);b.default.set("br",this.tool,{expires:e})},w.prototype.refreshBackDetection=function(){b.default.get("br")==this.tool&&b.default.set("brt",(new Date).getTime().toString(),{expires:1})},w.prototype.clearBackRefreshDetection=function(){b.default.remove("br")},w.prototype.checkBackRefresh=function(){var e=b.default.get("br");e&&(this.clearBackRefreshDetection(),window.ev("sendOnce","event","limits","back-"+(e==this.tool?"refresh":"change"),this.tool),window.ev("eventOnce","limit-actions",{action:"back-"+(e==this.tool?"refresh":"change"),tool:this.tool}))},E.OptionsManager=w}.call(this,S(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.NoMoreLimitsContext=void 0,n(46)),s=n(158),n=(r=a.ContextBase,o(l,r),l.prototype.getInitialState=function(){return new s.DefaultState({reason:this.limits.getLimitTexts().limit})},l);function l(e){var t=r.call(this,e=void 0===e?{}:e)||this;return t.contentName="NoMoreLimitsContext",t.triggerReason="triggerReason"in e?e.triggerReason:void 0,t.limits="limits"in e?e.limits:void 0,t.tool="tool"in e?e.tool:void 0,t}t.NoMoreLimitsContext=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultState=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),l.prototype.init=function(){var e=this.getUserOperativeSystem(),e=(this.showPlatform(e),this.showReasonMessage(),this.actionBtn);e&&e.addEventListener("click",this._onDoneButtonClick)},l.prototype.showPlatform=function(e){for(var t=this.domRoot.querySelectorAll("[platform-mac], [platform-win]"),n=0;n<t.length;n++)t[n].style.display="none";for(var i=this.domRoot.querySelectorAll("[platform-"+e+"]"),n=0;n<i.length;n++)i[n].style.display="block"},l.prototype.showReasonMessage=function(){var e=this.domRoot.querySelector('[ data-reason="'+this.params.reason+'" ]');e&&(e.hidden=!1)},l.prototype.getUserOperativeSystem=function(){return-1!=window.navigator.platform.indexOf("Mac")?"mac":(-1==navigator.userAgent.indexOf("WOW64")&&navigator.userAgent.indexOf("Win64"),"win")},Object.defineProperty(l.prototype,"actionBtn",{get:function(){return this.domStateRoot.querySelector("[next-from-no-more-limits]")},enumerable:!1,configurable:!0}),l);function l(e){var t=r.call(this)||this;return t.name="DefaultState",t.LAYOUT_TEMPLATE_NAME="no-more-limits",t.INITIAL_SCREEN="default",t.onDomReady=function(){"sign"==t.ctx.tool?t.changeScreen("sign"):t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen(),t.init()},t._onDoneButtonClick=function(e){e.preventDefault(),t.dispatchEvent(new s.IloveEvent("end"))},t.params=e,t}t.DefaultState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.ViewManager=void 0,n(160)),s=n(161),l=n(116),c=n(162),u=n(163),n=(r=a.ViewManager,o(d,r),d.prototype.init=function(){r.prototype.init.call(this),this.pdfViewer=new s.PdfView({screenSize:this.screenSize,files:this.files}),this.imageViewer=new l.ImageView({screenSize:this.screenSize,files:this.files}),this.officeViewer=new c.OfficeView({screenSize:this.screenSize,files:this.files}),this.previewViewer=new u.PreviewView({screenSize:this.screenSize,files:this.files})},d);function d(e){return r.call(this,e)||this}t.ViewManager=n},function(e,a,s){"use strict";!function(c){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},u=(Object.defineProperty(a,"__esModule",{value:!0}),a.ViewManager=void 0,e(s(16))),d=s(13),n=s(18),o=s(8);function t(e){void 0===e&&(e={}),this.files=null,this.tool=null,this.subtool=null,this.pdfViewer=null,this.imageViewer=null,this.officeViewer=null,this.previewViewer=null,this.fileBox="",this.covers_hidden=!1,this.processManager=null,this.onBeforeRemoveFile=null,this.onRemoveFile=null,this.resizeTimeout=!1,this.screenSizes={sm:{w:70,h:100},md:{w:99,h:140},lg:{w:127,h:180}},this.screenSize=this.screenSizes.md,this.currentSize="md",1281<window.innerWidth?(this.screenSize=this.screenSizes.lg,this.currentSize="lg"):window.innerWidth<640&&(this.screenSize=this.screenSizes.sm,this.currentSize="sm"),Object.assign(this,e),this.init()}t.prototype.init=function(){var t=this;window.addEventListener("resize",function(e){t.resize()})},t.prototype.resize=function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){1280<window.innerWidth&&"lg"!=e.currentSize?(e.screenSize=e.screenSizes.lg,e.currentSize="lg",e.reRender()):window.innerWidth<640&&"sm"!=e.currentSize?(e.screenSize=e.screenSizes.sm,e.currentSize="sm",e.reRender()):640<window.innerWidth&&window.innerWidth<1280&&"md"!=e.currentSize&&(e.screenSize=e.screenSizes.md,e.currentSize="md",e.reRender()),"object"==typeof e.pdfViewer&&null!=e.pdfViewer&&(e.pdfViewer.screenSize=e.screenSize),"object"==typeof e.imageViewer&&null!=e.imageViewer&&(e.imageViewer.screenSize=e.screenSize),"object"==typeof e.officeViewer&&e.officeViewer,"object"==typeof e.previewViewer&&e.previewViewer},500)},t.prototype.reRender=function(){var r=this;c(".file canvas, .range__element canvas").each(function(e,t){var n=c(t).attr("data-file"),i=c(t).attr("data-page");n&&i&&(i=parseInt(c(t).attr("data-page").toString()),t=c(t).attr("id"),r.renderPDF(n,i,t))})},t.prototype.addFileDOM=function(s){var l=this;return new Promise(function(t,n){var i,r,o=l,e=(l.totalFilesSelectedHistory++,l.boxfiles++,s.name.substr(s.name.lastIndexOf(".")+1).toUpperCase()),a=(s.extension&&(e=s.extension.toUpperCase()),s.service||(s.service="user"),l.getFileboxTemplate({tool:o.tool,subtool:o.subtool,screenSize:o.screenSize,fileName:s.name,fileID:s.canvasId,filesize:s.size,service:s.service,rotable:s.rotable}));c("#fileGroups").append(a),o.initRotate(s),c("#"+s.canvasId+" .remove").on("click",function(){o.removeFile(s.canvasId)}),"html5"==s.runtime&&(i="cover-"+s.canvasId,r=document.getElementById(i),"user"==s.service?(r.className=r.className+" "+e.toLowerCase()+" ",null!=s.thumbnail?(r.className="image "+r.className,l.renderPreview(s.id,i,null).then(function(){t(s)},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("render preview thumbnail error",d.Severity.Info),n(t)})):"url"in s&&null!=s.url?"PDF"==e&&0==l.covers_hidden?o.pdfViewer.loadUrlPDF(s.url,null).then(function(e){o.files.updateFile(s.id,{file:e}),"size"in e&&o.files.updateFile(s.id,{size:e.size}),o.renderPDF(s.id,1,i),t(e)},function(e){"removeFile"==e.name?o.removeFile(s.canvasId):"PasswordException"==e.name?r.className=r.className+" password ":"UnexpectedResponseException"==e.name?o.removeFile(s.id):("InvalidPDFException"!=e.name&&e.name,r.className=r.className+" error "),n(e)}):l.renderUrl(s.id,i,null).then(function(e){"size"in e&&o.files.updateFile(s.id,{size:e.size}),t(s)},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("render url error",d.Severity.Info),n(t)}):"PDF"==e&&0==l.covers_hidden?o.pdfViewer.loadSourcePDF(s.id,s.source).then(function(e){o.files.updateFile(s.id,{file:e}),o.renderPDF(s.id,1,i),t(e)},function(e){"removeFile"==e.name?o.removeFile(s.canvasId):"PasswordException"==e.name&&(r.className=r.className+" password "),"UnexpectedResponseException"==e.name?o.removeFile(s.canvasId):(e.name,r.className=r.className+" error "),n(e)}):"JPG"==e||"JPEG"==e?l.renderImageJpg(s.id,i,null).then(function(){t(s)},function(e){n(e)}):"HEIC"===e?l.renderHeic(s.id,i).then(function(){t(s)}).catch(n):"PNG"==e||"GIF"==e||"WEBP"==e?l.renderImage(s.id,i,null).then(function(){t(s)},function(e){n(e)}):"SVG"==e?(r.className="image "+r.className,l.renderSvg(s.id,i,!1).then(function(){t(s)},function(e){n(e)})):"TIF"==e||"TIFF"==e?(r.className=r.className+" image tif",l.renderTif(s.id,i).then(function(){t(s)},function(e){})):"DOC"==e||"DOCX"==e?(l.renderDoc(s.id,i),r.className=r.className+" word "+e.toLowerCase(),t(s)):"XLS"==e||"XLSX"==e?(l.renderDoc(s.id,i),r.className=r.className+" excel "+e.toLowerCase(),t(s)):"PPT"==e||"PPTX"==e?(l.renderDoc(s.id,i),r.className=r.className+" powerpoint "+e.toLowerCase(),t(s)):(r.className=r.className+e.toLowerCase(),n("noRenderMode"))):"drive"==s.service?(r.className=r.className+" "+e.toLowerCase(),"PDF"==e&&0==l.covers_hidden?!s.size||s.size<2e8?o.pdfViewer.loadUrlPDF(s.uri,s.token).then(function(e){o.files.updateFile(s.id,{file:e}),o.renderPDF(s.id,1,i),t(e)},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("drive url pdf error"),n(t)}):n():null!=s.url?l.renderUrl(s.id,i,null).then(function(e){t(s)},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.configureScope(function(e){e.setExtra("url",s.url)}),u.captureMessage("drive with url error"),n(t)}):(u.configureScope(function(e){e.setExtra("file",s)}),u.captureMessage("drive viewer not set"),n("drive viewer not exists"))):"dropbox"==s.service?"PDF"==e&&0==l.covers_hidden?s.size<2e8&&o.pdfViewer.loadUrlPDF(s.url,s.token).then(function(e){o.files.updateFile(s.id,{file:e}),o.renderPDF(s.id,1,i),t(e)},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("dropbox load error"),n(t)}):null!=s.url?((a=document.getElementById(i)).className=a.className+" image "+e.toLowerCase(),l.renderUrl(s.id,i,null).then(function(e){t(s)},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("dropbox with url error"),n(t)})):(u.captureMessage("dropbox preview not set"),n("uooops, dropbox viewer not set here!")):(u.captureMessage("unknow method/origin to render file"),n("unknow method/origin to render file")))})},t.prototype.initRotate=function(n){var i=this;c("#"+n.canvasId+" .rotate").on("click",function(){var e=parseInt(c(this).attr("data-rotate")),t=(280==(e+=90)&&(e=0),c(this).attr("data-rotate",e),c("#"+n.canvasId+" .file__canvas"));t.css({WebkitTransform:"rotate("+e+"deg)"}),t.css({"-moz-transform":"rotate("+e+"deg)"}),t.css({transform:"rotate("+e+"deg)"}),i.files.updateFile(n.id,{rotate:e})})},t.prototype.removeFile=function(e){var t=this;"function"==typeof t.onBeforeRemoveFile&&t.onBeforeRemoveFile(e),c("#"+e).remove(),t.processManager.removeFile(e).then(function(){"function"==typeof t.onRemoveFile&&t.onRemoveFile(e),c(".uploader.box").show()},function(e){})},t.prototype.renderPDF=function(e,t,n,i){void 0===i&&(i=null);var r=this;"object"==typeof r.pdfViewer&&null!=r.pdfViewer&&r.pdfViewer.onFileReady().then(function(){r.pdfViewer.renderPage(e,t,n).then(function(){},function(){})},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("Error pdf file not ready")})},t.prototype.renderImage=function(e,i,r){void 0===r&&(r=!1);var o=this,a=o.files.getFile(e),s=a.getSource().getSource();return new Promise(function(t,n){o.imageViewer.renderImage(s,i,r).then(function(e){return a.width=e.width,a.height=e.height,t(e)},function(e){n(e)})})},t.prototype.renderImageJpg=function(e,t,n){return this.renderImage(e,t,n=void 0===n?!1:n)},t.prototype.renderUrl=function(e,i,r){void 0===r&&(r=!1);var o=this,a=o.files.getFile(e),s=a.url;return new Promise(function(t,n){o.imageViewer.renderUrl(s,i,r).then(function(e){"size"in e&&(a.size=e.size),"width"in a?t({width:a.width,height:a.height}):((e=new Image).addEventListener("load",function(){a.width=this.naturalWidth,a.height=this.naturalHeight,t({width:this.naturalWidth,height:this.naturalHeight})}),e.src=a.url)},function(e){n()})})},t.prototype.renderPreview=function(e,n,i){void 0===i&&(i=!1);var r=this,o=r.files.getFile(e).thumbnail;return new Promise(function(e,t){r.previewViewer.renderPreview(o,n,i),e({})})},t.prototype.renderSvg=function(e,i,r){void 0===r&&(r=!1);var o=this,a=o.files.getFile(e),s=a.getSource().getSource();return new Promise(function(t,n){o.imageViewer.renderSvg(s,i,r).then(function(e){return a.width=e.width,a.height=e.height,t(e)},function(e){n(e)})})},t.prototype.renderTif=function(e,n){var i=this,r=i.files.getFile(e).getSource().getSource();return new Promise(function(e,t){i.imageViewer.renderTif(r,n).then(function(){e()},function(){t()})})},t.prototype.renderHeic=function(e,t){e=this.files.getFile(e).getSource().getSource();return this.imageViewer.renderHeic(e,t)},t.prototype.renderDoc=function(e,t){e=this.files.getFile(e).getSource().getSource();return this.officeViewer.renderDocument(e,t)},t.prototype.getFileboxTemplate=function(e){var t=/(?:\.([^.]+))?$/.exec(e.fileName)[1];return'<div class="file file--'+e.tool+' tooltip--top" id="'+e.fileID+'" rel="'+e.service+'" data-size="'+e.filesize+'" data-extension="'+t.toUpperCase()+'"  title="image size..."><div class="file__actions"><a class="file__btn rotate tooltip--top tooltip" data-rotate="0" title="'+o.Lang.t("Rotate")+'">'+n.Tools.svgRotate()+'</a><a class="file__btn remove tooltip--top tooltip" title="'+o.Lang.t("Remove this file")+'">'+n.Tools.svgRemove()+'</a></div><div class="file__canvas"><canvas id="cover-'+e.fileID+'" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'" class="'+t+'"></canvas></div><div class="file__info"><span class="file__info__name">'+e.fileName+"</span></div></div>\n        "},t.prototype.fileUploaded=function(e,t){var n=document.getElementById(e),i="cover-"+e;"object"==typeof t&&"thumbnail"in t&&t.thumbnail&&null!=n&&(n.className=n.className+" image",this.renderPreview(e,i,null).then(function(e){},function(t){u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("Render preview on file upload",d.Severity.Info)}))},a.ViewManager=t}.call(this,s(1))},function(e,n,a){"use strict";!function(d){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=(Object.defineProperty(n,"__esModule",{value:!0}),n.PdfView=void 0,e(a(26))),p=a(18),s=a(8);function t(e){void 0===e&&(e={}),this.hasPdfjs=!1,this.pdfIsLoaded=!1,this.renderProcess=!1,this.pdfjs=null,this.files=null,this.coversShow=!0,this.screenSize={},this.notRendered={},this.rendering=!1,this.needPassword=!1,this.passwordCount={},this.passwordLimit=3,this.scale=1,Object.assign(this,e),this.init()}t.prototype.init=function(){var e=this;this.initPdfJs().then(function(){e.configPdfjs()},function(){}),this.scrollControl()},t.prototype.scrollControl=function(){var e=this;p.Tools.scrollControl(d("#workArea"),function(){e.checkIfNotRendered()},function(){e.checkIfNotRendered()}),p.Tools.scrollControl(d(".tool__preview"),function(){e.checkIfNotRendered()},function(){e.checkIfNotRendered()})},t.prototype.checkIfNotRendered=function(){var n=this;0==n.rendering&&(n.rendering=!0,window.setTimeout(function(){d.each(n.notRendered,function(e,t){1==p.Tools.isElementInView(d("#"+t.canvasId))&&(n.renderPage(t.fileId,t.pageNum,t.canvasId,t.full).then(function(){},function(){}),delete n.notRendered[t.canvasId])}),n.rendering=!1},500))},t.prototype.initPdfJs=function(){var n=this,i=this;return new Promise(function(e,t){null!==window.PDFJS&&void 0===window.PDFJS&&(o.lazyload("/js/pdfjs/pdf.min.js"),n.pdfjsInterval=window.setInterval(function(){if(null!==window.PDFJS&&"object"==typeof window.PDFJS)return i.hasPdfjs=!0,i.pdfjs=window.PDFJS,clearInterval(i.pdfjsInterval),e(i.hasPdfjs)},100))})},t.prototype.configPdfjs=function(){},t.prototype.loadSourcePDF=function(r,o,e){var t=this,a=(void 0===e&&(e=null),this);return void 0===this.passwordCount[r]&&(this.passwordCount[r]=0),new Promise(function(n,i){0==d("#"+r).length||a.passwordCount[r]>a.passwordLimit?i({name:"removeFile"}):t.loadPDF(o,null,null,e).then(function(e){n(e)},function(e){var t;"PasswordException"!=e.name||1!=a.needPassword||("Incorrect Password"==e.message&&(t=a.files.getFile(r).name,window.Toastr.error(s.Lang.t("incorrectPassword")+"<br>"+t,s.Lang.t("Wops"),{timeOut:5e3,positionClass:"toast-top-left"})),0==d("#"+r).length)||a.passwordCount[r]>a.passwordLimit?i(e):a.askForPassword(r).then(function(e){a.passwordCount[r]++,a.loadSourcePDF(r,o,e.password).then(function(e){n(e)},function(e){i(e)})},function(e){i(e)})})})},t.prototype.askForPassword=function(o){var a=this;return new Promise(function(n,i){var e,r=a.files.getFile(o);0==d("#pwd-"+r.id).length?(a.passwordCount[o]=0,e=p.Tools.modalViewOk({id:"pwd-"+r.id,title:s.Lang.t("This file requires password"),content:"<p>"+r.name+'</p><br><form><input type="password" autocomplete="false"></form>'}),d(e).modal()):(a.passwordCount[o]>a.passwordLimit&&(a.passwordCount[o]=0,i({name:"removeFile"})),d("#pwd-"+r.id+" input").val("")),d("#pwd-"+o+" input").first().focus(),setTimeout(function(){var t=!1;d("#pwd-"+o).off("hidden.bs.modal").on("hidden.bs.modal",function(){0==t?i({name:"removeFile"}):t=!1}),d("#pwd-"+r.id).modal("show"),d("#pwd-"+o+" form").submit(function(e){e.preventDefault(),d("#pwd-"+o+" .btn").trigger("click")}),d("#pwd-"+o+" .btn").on("click",function(){var e=d("#pwd-"+o+" input").val();t=!0,""==e?i({name:"removeFile"}):(a.files.updateFile(o,{password:e}),d("#pwd-"+o).modal(),r.password=e,n(r))})},800)})},t.prototype.loadUrlPDF=function(e,t,n){return this.loadPDF(null,e,t=void 0===t?null:t,n=void 0===n?null:n)},t.prototype.loadPDF=function(u,d,p,h){void 0===u&&(u=null),void 0===d&&(d=null),void 0===p&&(p=null),void 0===h&&(h=null);var f=this;return new Promise(function(s,l){var c=window.setInterval(function(){function i(t){if(f.pdfIsLoaded=!0,null!=d){if(t)try{t.getDownloadInfo().then(function(e){t.size=e.length,s(t)},function(){s(t)})}catch(e){l("file removed while reading")}}else s(t);t.getMetadata().then(function(e){},function(){})}function r(e){l(e)}function e(e){var t=this.result,n=null;(n=null==h?f.pdfjs.getDocument(t).then(i).catch(r):n).onProgress=function(e){}}var o,t,n,a;!0===f.hasPdfjs&&(clearInterval(c),(o=null)!=u?null!=h?((t=new FileReader).onload=function(e){var t,n=new Uint8Array(e.target.result),n=new Blob([n]);try{t=(window.URL||window.webkitURL).createObjectURL(n)}catch(e){return void l(e)}o=f.pdfjs.getDocument({url:t,password:h}).then(i).catch(r);try{o.getDownloadInfo().then(function(e){},function(){})}catch(e){}},t.readAsArrayBuffer(u)):(n=u,(a=new FileReader).onload=e,a.readAsArrayBuffer(n),a.onerror=r):null!=d&&(null===p?null==h?f.pdfjs.getDocument(d).then(i).catch(r):f.pdfjs.getDocument({url:d,password:h}).then(i).catch(r):(t={url:d,httpHeaders:{Authorization:"Bearer "+p}},null==h?((n=f.pdfjs.getDocument(t).then(i).catch(r)).onProgress=function(e){},n.onPassword=function(e,t){"PasswordException"===t.name?e(h):l(t)}):(t.password=h,f.pdfjs.getDocument(t).then(i).catch(r)))))},100)})},t.prototype.onFileReady=function(){var i=this;return new Promise(function(e,t){var n=window.setInterval(function(){!0===i.pdfIsLoaded&&(clearInterval(n),e())},200)})},t.prototype.renderPage=function(e,t,n,c){var i,u=this,r=(void 0===c&&(c=!1),this.files.getFile(e));return null==r?new Promise(function(e,t){t()}):(i=r.file,this.renderProcess=!0,t=parseInt(t),d("#"+n).attr("data-file",e),d("#"+n).attr("data-page",t),new Promise(function(r,o){var a=u;if("file"!=n&&0==p.Tools.isElementInView(d("#"+n)))return u.notRendered[n]={fileId:e,pageNum:t,canvasId:n,full:c},r();var s=document.getElementById(n),l=s.getContext("2d");i?i.getPage(t).then(function(e){var t,n=e.getViewport(a.scale,e.pageInfo.rotate),i=(s.setAttribute("data-width",n.width),s.setAttribute("data-height",n.height),1==c?(n=e.getViewport(a.scale,e.pageInfo.rotate),s.width=n.width,s.height=n.height):n.width>n.height?(i=a.screenSize.h,n=e.getViewport(i/n.width,e.pageInfo.rotate),s.width=a.screenSize.h,s.height=n.height):(i=a.screenSize.h,n=e.getViewport(i/n.height,e.pageInfo.rotate),s.height=a.screenSize.h,s.width=n.width),{canvasContext:l,viewport:n});!0===a.coversShow&&((n=e.render(i)).promise.then(t=function(){s.style.backgroundImage="none",a.renderProcess=!1,r()},function(e){a.renderProcess=!1,o(e)}),window.renderTask=n,window.setTimeout(function(){1==a.renderProcess&&t()},5e3))},function(e){"PasswordException"==e.name?s.className=s.className+" password":"InvalidPDFException"==e.name?s.className=s.className+" damaged":s.className=s.className+" error",o(e)}):o()}))},n.PdfView=t}.call(this,a(1))},function(e,t,n){"use strict";function i(e){void 0===e&&(e={}),this.documentIsLoaded=!1,Object.assign(this,e),this.init()}Object.defineProperty(t,"__esModule",{value:!0}),t.OfficeView=void 0,i.prototype.init=function(){},i.prototype.renderDocument=function(e,t){var n=this;return new Promise(function(e,t){n.documentIsLoaded=!0,e()})},i.prototype.onFileReady=function(){var i=this;return new Promise(function(e,t){var n=window.setInterval(function(){!0===i.documentIsLoaded&&(clearInterval(n),e(!0))},200)})},t.OfficeView=i},function(e,t,n){"use strict";!function(r){function e(e){void 0===e&&(e={}),this.coversShow=!0,Object.assign(this,e),this.init()}Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewView=void 0,e.prototype.init=function(){},e.prototype.renderPreview=function(e,t,n){void 0===n&&(n=!1);var i=document.getElementById(t),n=(n?r(i).attr("src",e):r(i).attr("style","background-color: transparent; background-image: url("+e+");background-size:contain; width: 100%;background-repeat: no-repeat;background-position: center;"),r("#"+t+" canvas"));0<n.length&&n.remove()},t.PreviewView=e}.call(this,n(1))},,function(e,k,m){"use strict";!function(E){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},t=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},u=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=this&&this.__rest||function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},d=(Object.defineProperty(k,"__esModule",{value:!0}),k.ElementBase=k.MIN_ELEMENT_HEIGHT=k.MAX_ELEMENT_HEIGHT=k.ELEMENT_BASE_ADJUST_Y=k.ELEMENT_BASE_ADJUST_X=k.ELEMENT_BASE_FONT_SIZE=k.ELEMENT_BASE_HEIGHT=k.ELEMENT_BASE_WIDTH=void 0,m(18)),S=m(199),a=o(m(206)),p=m(37),s=m(8),l=m(174),x=e(m(16)),T=m(13),c=m(75),P=m(173),h=m(252);k.ELEMENT_BASE_WIDTH=140,k.ELEMENT_BASE_HEIGHT=24,k.ELEMENT_BASE_FONT_SIZE=16,k.ELEMENT_BASE_ADJUST_X=12,k.ELEMENT_BASE_ADJUST_Y=2,k.MAX_ELEMENT_HEIGHT=64,k.MIN_ELEMENT_HEIGHT=20;function f(){this.id=d.Tools.randomId(),this.askSigner=!0,this.mode="request",this.filesPages={},this.childs=[],this.width=k.ELEMENT_BASE_WIDTH,this.height=k.ELEMENT_BASE_HEIGHT,this.fontSize=k.ELEMENT_BASE_FONT_SIZE}f.prototype.setElementsSelector=function(e){this.elementsSelector=e=void 0===e?null:e},f.prototype.setSigner=function(e){this.signer=e=void 0===e?null:e},f.prototype.fromTemplate=function(){},f.prototype.setZoom=function(e){void 0===e&&(e=null);var t=P.EditorPage.parsePageInfoFromHtmlEl(document.querySelector(".editor__page")).viewFactor;this.applyZoom(e,t)},f.prototype.applyZoom=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom||(this.zoom=1),this.zoomSize(e,t)},f.prototype.zoomPosition=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.position.x=this.position.x*t,this.position.y=this.position.y*t,this.position=S.ElementHelper.sanitizePosition(this.position),this.applyZoomPosition(e)},f.prototype.applyZoomPosition=function(e){var e=null==(e=void 0===e?null:e)?this.allHtmlChilds:[document.getElementById(e)],t=this.position.y+"px",n=this.position.x+"px";e.forEach(function(e){e.style.top=t,e.style.left=n})},f.prototype.zoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom=this.zoom*t,this.width=this.width*t,this.height=this.height*t;var n=k.ELEMENT_BASE_HEIGHT/k.ELEMENT_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,45),this.applyZoomSize(e,t)},f.prototype.applyZoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1);e=null==e?this.allHtmlChilds:[document.getElementById(e)];this.applyZoomApplied(e,t),this.applyZoomAppliedContent(e,t),this.applyZoomAppliedContentImg(e,t)},f.prototype.applyZoomApplied=function(e,t){!0!==isNaN(t)&&0!=t||(t=1);var n=this.width+"px",i=this.getElementTotalHeightByRatio(t)+"px";e.forEach(function(e){e.style.width=n,e.style.height=i})},f.prototype.applyZoomAppliedContent=function(e,i){var r=this,t=(!0!==isNaN(i)&&0!=i||(i=1),this.height+"px"),n=this.width+"px",o=this.fontSize+"px",a=this.height+"px";e.forEach(function(e){e=e.querySelector(" .sign__element__content__applied");e.style.height=t,e.style.width=n,e.style.fontSize=o,e.style.lineHeight=a}),this.applyZoomAppliedContentName(e,i);try{e.forEach(function(e){var t=e.querySelector(".sign__element__icon"),n=e.style.padding.split(" ").map(function(e){return Number(e.replace("px",""))*i+"px"});e.style.padding=n.join(" "),t&&(t.style.transform="scale("+r.zoom+")")})}catch(e){}},f.prototype.applyZoomAppliedContentName=function(e,t){!0!==isNaN(t)&&0!=t||(t=1);var n=this.height+"px",i=this.fontSize+"px",r=Math.floor(this.height/6)+"px";e.forEach(function(e){e=e.querySelector(".sign__element__name");e.style.height=n,e.style.fontSize=i,e.style.lineHeight=r})},f.prototype.applyZoomAppliedContentImg=function(e,t){e.forEach(function(e){var t=e.querySelector(".sign__element__content__applied"),e=e.querySelector(".sign__element__content img");e&&(e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.width="auto",e.style.height="auto",t.offsetWidth>e.offsetWidth)&&t.offsetHeight>e.offsetHeight&&(t=l.ImageHelper.calculateAspectRatioFit(e.offsetWidth,e.offsetHeight,t.offsetWidth,t.offsetHeight),e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.width=t.width+"px",e.style.height=t.height+"px")})},f.prototype.applyResize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1,x.configureScope(function(e){e.setExtra("window.width",window.innerWidth),e.setExtra("window.height",window.innerHeight)}),x.captureMessage("Sign element - Ratio NaN error",T.Severity.Info)),this.ratio=this.ratio*t,this.width=this.width*t,this.height=this.height*t;var n=k.ELEMENT_BASE_HEIGHT/k.ELEMENT_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,45),this.applySize(e,t)},f.prototype.applyPosition=function(e){E(null==(e=void 0===e?null:e)?'[data-id="'+this.id+'"]':"#"+e).css({top:this.position.y+"px",left:this.position.x+"px"})},f.prototype.cleanSize=function(e){e=E(null==(e=void 0===e?null:e)?'[data-id="'+this.id+'"]':"#"+e);e.css({width:this.width+"px",height:this.height+"px"}),e.find(".sign__element__content__applied").css({width:"",height:""})},f.prototype.applySize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1);e=E(null==e?'[data-id="'+this.id+'"]':"#"+e);this.applySizeApplied(e,t),this.applySizeAppliedContent(e,t),this.applySizeAppliedContentImg(e,t)},f.prototype.applySizeApplied=function(e,t){void 0===t&&(t=1),e.css({width:this.width+"px",height:this.getElementTotalHeight()*t+"px"})},f.prototype.applySizeAppliedContent=function(e,t){void 0===t&&(t=1);t={height:this.height+"px",width:this.width+"px","font-size":this.fontSize+"px","line-height":this.height+"px"};e.find(" .sign__element__content__applied").css(t);e.find(" .sign__element__content__name").css(t);t=n(t,["width"]);t["line-height"]=Math.floor(this.height/6)+"px",e.find(" .sign__element__name").css(t)},f.prototype.applySizeAppliedContentImg=function(e,t){void 0===t&&(t=1);var t=e.find(".sign__element__content img"),e=e.find(".sign__element__content__applied");t.css({maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}),e.width()>t.width()&&e.height()>t.height()&&(e=l.ImageHelper.calculateAspectRatioFit(t.width(),t.height(),e.width(),e.height()),t.css({maxWidth:"100%",maxHeight:"100%",width:e.width+"px",height:e.height+"px"}))},f.prototype.trim=function(e,t){var n,i,r,o,a,s,l=this,c=(void 0===e&&(e=null),void 0===t&&(t=!0),document.body.classList.contains("tool-signature")),u=document.body.classList.contains("mode-single"),d=document.body.classList.contains("mode-multiple"),p=E(null==e?'[data-id="'+this.id+'"]':"#"+e),h=p.toArray().find(function(e){return document.body.contains(e)});h&&(a=this.getDataRatio(),a=this.getMinSize(a).height,h=P.EditorPage.getPageFromEl(h),n=p.find(".sign__element__content"),i=p.find(".sign__element__content__applied"),r=this,o=i.find("img"),(u||c)&&1==t&&(s=c?this.size:this.heightBeforeTrim,c&&s&&0<s?(this.setSize({size:s,file:h.fileId,page:h.page}),this.setWidthFromHeight(),this.applySize()):u&&s&&0<s&&(s<a?(this.height=a,this.applySize()):s>this.height&&(this.height=s,this.applySize()))),i.css("width","auto"),0==i.width()?window.setTimeout(function(){r.trim(e,t)},100):(i.css("width",i.width()+"px"),p.css("width",i.width()+"px"),this.width=n.width(),o&&(0==(h=o.height())?window.setTimeout(function(){r.trim(e,t)},100):(c&&this.moveToInitialPosition(e),h<this.height&&(a=this.height-h,this.height=h,this.position.y+=a/2,(s=p.find(".sign__element__content__applied")).css({height:s.height()-a+"px"}),p.css({height:p.height()-a+"px",top:this.position.y})),u&&this.moveToInitialPosition(e),(u||d)&&this.repositionElementIfOutOfBoundaries(e),this.elementsSelector&&(this.elementsSelector.dragSelect.getSelection()||[]).some(function(e){return e.dataset.id===l.id})&&this.elementsSelector.restart()))))},f.prototype.repositionElementIfOutOfBoundaries=function(e){var t=null==(e=void 0===e?null:e)?'[data-id="'+this.id+'"]':"#"+e,t=document.querySelector(t),t=P.EditorPage.getElementAdjustmentOutside(t);(t.xAdjust||t.yAdjust)&&(t.xAdjust&&(this.position.x+=t.xAdjust),t.yAdjust&&(this.position.y+=t.yAdjust),this.applyPosition(e))},f.prototype.moveToInitialPosition=function(e){void 0===e&&(e=null),this.initialPosition&&(this.position.y=this.initialPosition.y,this.position.x=this.initialPosition.x,this.applyPosition(e))},f.prototype.cloneBatch=function(l,c){return t(this,void 0,void 0,function(){var r,o,t,a,n,s=this;return u(this,function(e){switch(e.label){case 0:if(r=document.querySelector('[data-id="'+this.id+'"]'),0==c.length)return[2];o=new h.DelayedFunctionExecutor(500,100),t=function(t){var i,n;return u(this,function(e){switch(e.label){case 0:return(i=c[t],a.existsInPage(l,i))?[2,"continue"]:(n=function(e){var t=d.Tools.randomId(),n=e.cloneNode(!0),n=(n.id=t,S.ElementHelper.appendHtmlElementToPage(n,l,i,s.signer),document.getElementById(t));s.applyBasicStylesToElement(n),s.applyEventsToChildElement(n),s.initDraggable(t),s.appendChildToFilePages(l,i,t),"request"==s.mode?(s.initRequestActions(t),p.Tooltip.setContent(e,s.signer.name)):"selfsigned"==s.mode&&s.initSelfsignedActions(t)},[4,o.executeFunction(n.bind(a,r))]);case 1:return e.sent(),[2]}})},a=this,n=0,e.label=1;case 1:return n<c.length?[5,t(n)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return this.checkLinked(),[2]}})})},f.prototype.insert=function(e,t){var n=(t=void 0===t?{}:t).triggerEvents,n=void 0===n||n,t=t.triggerCheckLinked,t=void 0===t||t,i=d.Tools.randomId(),r=(e=this.recalculateInsertPoint(e),this.position={x:e.x,y:e.y},this.copyInitialPosition(),this.makeElement(i,e)),r=(S.ElementHelper.appendHtmlElementToPage(r,e.file,e.page,this.signer),document.getElementById(i));return this.applyBasicStylesToElement(r),this.applyEventsToChildElement(r),this.appendChildToFilePages(e.file,e.page,i),this.heightBeforeTrim=this.height,"request"==this.mode?(this.initDraggable(i),this.initRequestActions(i),p.Tooltip.setContent(r,this.signer.name)):"selfsigned"==this.mode?(this.initDraggable(i),this.initSelfsignedActions(i),this.applySingature({triggerEvents:n})):this.signatureModel&&"signed"==this.mode?(this.signed=!0,this.applySingature({triggerEvents:n})):this.signatureModel&&"sign"==this.mode?(p.Tooltip.setContent(r,this.signer.name),this.initSignActions(i)):this.signatureModel&&"review"==this.mode&&this.initReviewActions(i),"sign"==this.mode&&p.Tooltip.setContent("#"+i,s.Lang.t("clickToSign")),E("#groupActions").css("opacity",0),E("#"+i).css("opacity",0),window.setTimeout(function(){E("#"+i).css("opacity",""),E("#groupActions").css("opacity","")},100),n&&(this.sendEventPreviewRefreshBullets(e.file,e.page),this.sendEventElementAdded(),this.sendEventCheckProcessBtn()),t&&this.checkLinked(),i},f.prototype.loadBasicElementFromTemplate=function(e,t,n){e=document.getElementById(e).content,e=document.importNode(e,!0).firstElementChild;return e.classList.add(this.signer.colorClass),"request"===this.mode&&e.setAttribute("title",this.signer.name),e.setAttribute("data-id",this.id),e.id=t,Object.assign(e.style,{top:n.y+"px",left:n.x+"px",position:"absolute"}),e},f.prototype.applyBasicStylesToElement=function(e){var t=e.querySelector(".sign__element__content__applied"),n=t.querySelector("img"),i={"font-size":this.fontSize+"px","line-height":this.height+"px",height:this.height+"px",width:this.width+"px"};e.classList.add(this.mode),Object.assign(t.style,i),n&&(t={"max-width":this.width+"px","max-height":this.height+"px"},Object.assign(n.style,t)),Object.assign(e.style,{width:this.width+"px",height:this.getElementTotalHeight()+"px"})},f.prototype.applyEventsToChildElement=function(e){var t=this;e.querySelector(".sign__element__link").addEventListener("click",function(){t.sendEventDetachElement(e.id)})},f.prototype.appendChildToFilePages=function(e,t,n){this.filesPages[e]||(this.filesPages[e]=[]),this.filesPages[e].push(t),this.filesPages[e].sort(function(e,t){return e-t});e=this.filesPages[e].findIndex(function(e){return e==t});this.childs.splice(e,0,n)},f.prototype.getElementTotalHeight=function(){return this.height},f.prototype.getElementTotalHeightByRatio=function(e){return this.height},f.prototype.initDraggable=function(e){var t=this,n=!(this.position={x:parseInt(E("#"+e).css("left")),y:parseInt(E("#"+e).css("top"))});a.default("#"+e).draggable({ignoreFrom:".sign__element__close, .sign__group__actions, .sign__element--list, .sign__element__custom, sign__element__edit",modifiers:[a.default.modifiers.restrictRect({restriction:"parent"})],listeners:{start:function(e){"request"==t.mode&&p.Tooltip.hide(E(e.currentTarget)),t.elementsSelector&&(n=t.elementsSelector.amISelectedAlone(t.id))},move:function(e){t.position.x+=e.dx,t.position.y+=e.dy,t.position=S.ElementHelper.sanitizePosition(t.position),e.currentTarget.style.top=t.position.y+"px",e.currentTarget.style.left=t.position.x+"px",e.currentTarget.style.opacity="0.5",1==n&&t.elementsSelector.moveSelectorFromElementMove(e)},end:function(e){t.onDragEnd(e),"request"==t.mode&&p.Tooltip.show(E(e.currentTarget)),n=!1}}})},f.prototype.copyInitialPosition=function(){this.initialPosition={x:this.position.x,y:this.position.y}},f.prototype.onDragEnd=function(e){this.position=S.ElementHelper.sanitizePosition(this.position),this.copyInitialPosition(),E('[data-id="'+this.id+'"]').css({top:this.position.y+"px",left:this.position.x+"px",opacity:"1"})},f.prototype.initRequestActions=function(e){},f.prototype.initSelfsignedActions=function(e){},f.prototype.initSignActions=function(e){var t=this;1==this.autoApply?this.applySingature():(E("#"+e).on("click",function(e){e.currentTarget.classList.contains("signed")||t.applySingature()}),p.Tooltip.init("#"+e+".tooltip"))},f.prototype.initReviewActions=function(e){1==this.autoReviewApply&&this.applySingature()},f.prototype.recalculateInsertPoint=function(e){return e},f.prototype.makeElement=function(e,t,n){return document.createElement("div")},f.prototype.addLinkedItems=function(e){var t=document.querySelector("#linkTemplate").content,t=document.importNode(t,!0).firstElementChild;return e.querySelector(".sign__element__name").appendChild(t.cloneNode(!0)),e.querySelector(".sign__element__content").appendChild(t.cloneNode(!0)),e},f.prototype.sendEventElementRemoved=function(){c.SignatureEventManager.dispatchEvent("signature:elements_manager:removed",{elementId:this.id,type:this.type})},f.prototype.sendEventElementAdded=function(){c.SignatureEventManager.dispatchEvent("signature:elements_manager:added",{elementId:this.id,type:this.type})},f.prototype.sendEventCheckProcessBtn=function(){c.SignatureEventManager.dispatchEvent("signature:check_process_button",{})},f.prototype.sendEventElementChanged=function(){c.SignatureEventManager.dispatchEvent("signature:elements_manager:element_changed",{elementId:this.id,signed:this.signed,type:this.type,auto:this.autoApply})},f.prototype.sendEventDetachElement=function(e){e=this.getPageViewOf(e),e={elementIds:[this.id],fileId:e.fileId,currentPage:e.page,containsOneLinkedElement:1<this.childs.length};c.SignatureEventManager.dispatchEvent("signature:elements_selector:ask_detach_group",e)},f.prototype.sendEventPreviewRefreshBullets=function(e,t){c.SignatureEventManager.dispatchEvent("signature:preview_manager:refresh_bullets",{fileId:e,page:t})},f.prototype.remove=function(e,t){void 0===t&&(t=!1);if(null==(e=void 0===e?null:e)){for(var n in this.childs.forEach(function(e){null!=(e=document.getElementById(e))&&e.remove()}),this.filesPages)this.sendEventPreviewRefreshBullets(n);this.filesPages={},this.childs=[],this.removed=!0,this.sendEventElementRemoved()}else{var i,r=document.getElementById(e),o=(r&&(n=(i=P.EditorPage.getPageFromEl(r)).fileId,i=i.page,this.filesPages[n]&&-1!==(o=this.filesPages[n].indexOf(i))&&this.filesPages[n].splice(o,1),r.remove(),this.sendEventPreviewRefreshBullets(n,i)),this.childs.indexOf(e));-1!==o&&this.childs.splice(o,1),0==this.childs.length?(0==t?this.removed=!0:this.removedSilent=!0,this.sendEventElementRemoved()):this.checkLinked()}},f.prototype.updateSigner=function(e){var t=this;this.allHtmlChilds.forEach(function(e){e.classList.remove(t.signer.colorClass)}),this.signer=e,this.allHtmlChilds.forEach(function(e){e.classList.add(t.signer.colorClass)})},f.prototype.applySingature=function(e){e=(e=void 0===e?{}:e).triggerEvents,e=void 0===e||e;if(this.signatureModel){this.signed=!0,"sign"!=this.mode&&"review"!=this.mode||(this.mode="signed");var t=E('[data-id="'+this.id+'"]');if(t.removeClass("sign").addClass(this.mode),p.Tooltip.disable(t),"request"===this.mode&&(t.attr("title",this.signatureModel.signature),p.Tooltip.setContent(t,this.signatureModel.signature.trunc(25))),this.applyResize(),t[0])try{t.find(".sign__element__id").css("width","100%"),this.trim()}catch(e){}e&&this.sendEventCheckProcessBtn()}},f.prototype.insertFromData=function(e,t){},f.prototype.getDataRatio=function(e){if(null==(e=void 0===e?null:e))for(var t in this.filesPages)e=t;var n=this.filesPages[e];return null===e||0===(null==n?void 0:n.length)||null==n?0:P.EditorPage.getPageInfo(e,n[0]).viewFactor},f.prototype.getData=function(e,t){var n=this;if(void 0===t&&(t=null),null==(e=void 0===e?null:e)){var i,r=[];for(i in this.filesPages)this.filesPages.hasOwnProperty(i)&&(r=r.concat(this.getData(i)));return r}var o,a,s,l,c,u,d,p,h,f,m,g,v,t=this.filesPages[e],y=E('.editor__page[data-file="'+e+'"][data-page="'+t[0]+'"]'),t=(P.EditorPage.getPageInfo(e,t[0]),parseFloat(y.attr("data-width"))),_=parseFloat(y.attr("data-height")),b=window.document.body.classList.contains("selfsigned"),w=window.document.body.classList.contains("mode-multiple");return 0==E('[data-id="'+this.id+'"]').length||(o=(f=E('[data-id="'+this.id+'"]').first()).find(".sign__element__content__applied img"),a=1==f.hasClass("signed"),h=this.position.x,d=this.position.y,"signature-element"!==this.type&&"initials-element"!==this.type&&"stamp-element"!==this.type&&(w?(h+=k.ELEMENT_BASE_ADJUST_X,d+=(m=(this.height-this.fontSize)/4-1)*m/2):d=(d+=k.ELEMENT_BASE_ADJUST_Y)+(m=(this.height-this.fontSize)/4-1)*m/2),w=t*h/y.width(),t=_*d/y.height(),h=f[0].getBoundingClientRect().height,d=f[0].getBoundingClientRect().width,_/=y.height(),y=h*_,s=this.fontSize*_,l=0,u=d/h,c=d/this.fontSize,"signature-element"==this.type&&(u=d/(h-(h=(d=f.find(".sign__element__id"))[0].getBoundingClientRect().height)-(f=(f=0)!=h?parseFloat(d.css("margin-top")):f)),y=y-(l=h*_)-(f*=_)),isNaN(y))?[]:(d=w+" "+(t<=0?"0":"-"+t),p={type:this.type.replace("-element",""),position:d,x:this.position.x,y:this.position.y,pages:S.ElementHelper.makeRange(this.filesPages[e].join(",")),size:Math.floor(y),size_full:y,font_size:Math.round(2*s)/2,font_size_width_factor:c,reference:this.reference,width_height_factor:u},"signature-element"==this.type&&(p.frame_size=Math.floor(l)),"signature-element"==this.type&&(b||a)&&(h=Math.round(o.height()*_),f=Math.round(o.width()*_),m=p.size-h,p.size=Math.floor(o.height()*_),p.position=w+" "+((t+=m)<=0?"0":"-"+t),p.width_height_factor=f/h),0==p.size&&(g={},this.childs.forEach(function(e,t){g[e]=E("#"+e).length}),x.configureScope(function(e){e.setExtra("elementData",p),e.setExtra("element",n),e.setExtra("childsOnView",g)}),x.captureMessage("Signature element size error",T.Severity.Error)),isNaN(w)&&(v={},this.childs.forEach(function(e,t){v[e]=E("#"+e).length}),x.configureScope(function(e){e.setExtra("elementData",p),e.setExtra("element",n),e.setExtra("childsOnView",v)}),x.captureMessage("Signature element position NaN error",T.Severity.Error)),[p])},f.prototype.instantiateNewSelf=function(){return new f},f.prototype.copyProperties=function(e){this.type===e.type&&(this.signatureModel=e.signatureModel,this.mode=e.mode,this.width=e.width,this.height=e.height,this.fontSize=e.fontSize,this.zoom=e.zoom,this.heightBeforeTrim=e.heightBeforeTrim,this.setElementsSelector(e.elementsSelector),this.setSigner(e.signer))},f.prototype.detach=function(e){var t=this.instantiateNewSelf(),n=document.getElementById(e),n=P.EditorPage.getPageFromEl(n),e=(t.copyProperties(this),this.remove(e),{file:n.fileId,page:n.page,x:this.position.x,y:this.position.y});return t.insert(e),t.applySize(),this.checkLinked(),t},f.prototype.applyStylesFrom=function(e){},f.prototype.existsInPage=function(e,t){return this.filesPages[e]&&this.filesPages[e].includes(t)},f.prototype.checkLinked=function(){var e,t,n=this,i=document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__link');this.isLinked?(e=this.childs.length,t=this.getLinkedElementText(e),i.forEach(function(e){p.Tooltip.setContent(e,t),e.style.display="block","request"===n.mode&&(e.addEventListener("mouseenter",function(e){e=e.currentTarget;p.Tooltip.hide(e.closest(".sign__element"))}),e.addEventListener("mouseout",function(e){e=e.currentTarget;p.Tooltip.show(e.closest(".sign__element"))}))})):i.forEach(function(e){e.style.display="none"})},f.prototype.getLinkedElementText=function(e){var t="type"+(t=this.type.replace("-element","")).charAt(0).toUpperCase()+t.slice(1);return s.Lang.t("linked",{quantity:e-1,elementType:s.Lang.t(t)})},f.prototype.checkHasSignerDataInFile=function(e,t){return this.filesPages&&this.filesPages[e]&&this.signer.id==t},f.prototype.getSizeInView=function(){var e=document.querySelector('[data-id="'+this.id+'"]');return e?{width:(e=e.getBoundingClientRect()).width,height:e.height}:{width:0,height:0}},f.prototype.setData=function(e){if(null!=(e=void 0===e?null:e)){var t,n={};if(e.info)try{n=JSON.parse(e.info)}catch(e){return}for(t in n.content=e.content,n)this.hasOwnProperty(t)&&(this[t]=n[t]);this.setSize(e)}},f.prototype.setSize=function(e){var t;null==(e=void 0===e?null:e)||(t=parseFloat(e.size),isNaN(t))||(this.height=this.getHeightFromSize(t,e.file,e.page))},f.prototype.getHeightFromSize=function(e,t,n){return e/P.EditorPage.getPageInfo(t,n).factor},f.prototype.setWidthFromHeight=function(){this.width=this.height*k.ELEMENT_BASE_WIDTH/k.ELEMENT_BASE_HEIGHT},f.prototype.inSamePage=function(e,t){return this.filesPages[e]&&this.filesPages[e].includes(t)},f.prototype.getMinSize=function(e){return{width:k.MIN_ELEMENT_HEIGHT*k.ELEMENT_BASE_WIDTH/k.ELEMENT_BASE_HEIGHT*e,height:k.MIN_ELEMENT_HEIGHT*e}},f.prototype.getMaxSize=function(e){return{width:k.MAX_ELEMENT_HEIGHT*k.ELEMENT_BASE_WIDTH/k.ELEMENT_BASE_HEIGHT*e,height:k.MAX_ELEMENT_HEIGHT*e}},f.prototype.setElementMinimumSizeForText=function(){var r,o=this,e=E('[data-id="'+this.id+'"] .sign__element__textImage');0!=e.length&&((r=new Image).onload=function(){var e=r.height,t=r.width,n=E('[data-id="'+o.id+'"]'),i=n.width(),n=n.height(),i=l.ImageHelper.calculateAspectRatioFit(t,e,i,n),n=14*o.getDataRatio();i.height<n&&(o.height=n,o.width=o.height/e*t,o.applyResize(),o.trim())},r.src=e.attr("src"))},f.prototype.getChildFromPage=function(e,t){e=this.filesPages[e],e=null==e?void 0:e.indexOf(t);if(null!=e&&0<=e)return this.getChildElement(this.childs[e])},f.prototype.getChildElement=function(e){return document.getElementById(e)},f.prototype.getPageViewOf=function(e){return P.EditorPage.getPageFromEl(this.getChildElement(e))},Object.defineProperty(f.prototype,"allHtmlChilds",{get:function(){return Array.from(document.querySelectorAll('[data-id="'+this.id+'"]'))},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isLinked",{get:function(){return 1<this.childs.length},enumerable:!1,configurable:!0}),k.ElementBase=f}.call(this,m(1))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(202))),o=n(203),l=n(82),c=n(204);function u(){var s=this;this.inputListener=function(){},this.pricesMap={},this.initialQtyIsValid=!0,this._isValid=!0,this.overrideBubbleTemplateQuantity={},this.showCustom=function(){return s.customElement.classList.remove("hidden"),s.sliderElement.classList.add("hidden"),s.mode="custom",!0},this.showSlider=function(){return s.customElement.classList.add("hidden"),s.sliderElement.classList.remove("hidden"),s.mode="slider",!0},this.setBubbleText=function(){var e=s.getText();s.bubble.setText(e),s._inputChanged()},this._inputChanged=function(){var e=s.getStatusByMaxMin();(e=s.initialQtyIsValid?e:e&&s.getQuantity()!==s.initialQty)?s.setValid():s.setInvalid(),s.inputListener()},this.getStatusByMaxMin=function(){var e=s.getQuantity();return!(e<s.getMin()||e>s.getMax())},this.setCustomText=function(){s.customElement&&(s.textCustom.innerHTML=s.getText(),s._inputChanged())},this.addInputListeners_IE11=function(){s.inputRange.addEventListener("change",function(){s.setBubbleText()}),s.customElement&&s.inputCustom.addEventListener("input",function(){s.setCustomText()})},this.addInputListeners=function(){s.inputRange.addEventListener("input",function(){s.setBubbleText()}),s.customElement&&s.inputCustom.addEventListener("input",function(){s.setCustomText()})},this.getDataPrices=function(){var e=JSON.parse(s.inputRange.dataset.packages),t=[];return e.forEach(function(e){t[e]=s.getPackPrice(e)}),t},this.getPackPrice=function(n){var i=JSON.parse(s.inputRange.dataset.discount),r=JSON.parse(s.inputRange.dataset.basePrice),e=""==s.inputRange.dataset.priceInterval?1:parseInt(s.inputRange.dataset.priceInterval),t=""==s.inputRange.dataset.overallPriceDiscount?1:parseFloat(s.inputRange.dataset.overallPriceDiscount),o=0,a=0;return Object.keys(i).forEach(function(e){var t=parseInt(e),e=i[e];a<n&&(o+=t<=n?(t-a)*r*e:(n-a)*r*e,a=t)}),o=o*e*t,s.roundPrice(o)},this.onInput=function(e){s.inputListener=e},this.getPrice=function(){var e;return"custom"==s.mode?s.getPackPrice(Number(s.inputCustom.value)):((e=s.getCurrentPriceItem())[0],e=e[1],s.roundPrice(e))},this.getQuantity=function(){var e;return"custom"==s.mode?Number(s.inputCustom.value):(e=s.getCurrentPriceItem()[0],Number(e))},this.getCurrentPriceItem=function(){return Object.entries(s.pricesMap).find(function(e,t){return Number(s.inputRange.value)===t})},this.setQuantity=function(t){var e=Object.entries(s.pricesMap).findIndex(function(e){e=e[0];return Number(e)===t});s.inputRange.value=e.toString(),s.setBubbleText(),s.inputCustom&&(s.inputCustom.value=t.toString(),s.setCustomText())},this.setPrices=function(e){s.pricesMap=e;e=Object.keys(s.pricesMap);s.setMin(Number(e[0])),s.setMax(Number(e[e.length-1])),s.setInputElements(e.length)},this.getPricesMap=function(){return s.pricesMap},this.getQuantities=function(){return Object.keys(s.getPricesMap()).map(function(e){return Number(e)})},this.setMin=function(e){s.container.setAttribute("data-min",e.toString())},this.setMax=function(e){s.container.setAttribute("data-max",e.toString())},this.setInputElements=function(e){s.inputRange.max=""+(e-1),s.inputRange.min="0";for(var t=s.container.querySelector(".slider__element__slider-datalist"),n="",i=0;i<e;i++)n+='<span class="slider__element__slider-datalist__option"></span>';t.innerHTML=n}}u.prototype.init=function(t,o){return i(this,void 0,void 0,function(){var r=this;return a(this,function(e){if(t.hasAttribute("data-min"))return[2];o.mode||(o.mode="slider"),"initialQtyIsValid"in o&&"initialQty"in o&&(this.initialQtyIsValid=o.initialQtyIsValid),this.container=t,this.inputRange=t.querySelector('input[type="range"]'),this.inputCustom=t.querySelector('input[type="number"]'),this.sliderElement=t.querySelector(".slider__element__slider"),this.customElement=t.querySelector(".slider__element__custom"),this.switchElement=t.querySelector(".slider__element__mode"),this.textCustom=t.querySelector("[data-select-text]"),this.bubble=new s.default,this.bubble.init(this.inputRange),this.bubbleTemplate=this.inputRange.dataset.bubbleTemplate,this.currencyCode=this.inputRange.dataset.currencyCode;try{this.overrideBubbleTemplateQuantity=JSON.parse(this.inputRange.dataset.overrideBubbleTemplateQuantity)}catch(e){}return c.isIE11()?this.addInputListeners_IE11():this.addInputListeners(),this.setPrices(this.getDataPrices()),this.mode=o.mode,this.switchElement&&this.enableSwitchMode(),[2,new Promise(function(e,t){var n,i=null;o.minQty&&r.setMin(o.minQty),o.maxQty&&r.setMax(o.maxQty),o.initialQty&&(n=r.getQuantities().sort(function(e,t){return e-t}),i="function"==typeof o.initialQty?n.find(o.initialQty):o.initialQty),i=null!=i?i:r.getQuantities()[0],r.initialQty=i,r.setQuantity(i),e()})]})})},u.prototype.enableSwitchMode=function(){this.switchElement.classList.remove("hidden"),this.switchElement.style.display="block",this.initSwitchModeActions()},u.prototype.initSwitchModeActions=function(){var e=this,t=this.switchElement.querySelector('[data-select-mode="slide"]'),n=this.switchElement.querySelector('[data-select-mode="custom"]');t.addEventListener("click",function(){t.classList.add("payment-period__payments__item--active"),n.classList.remove("payment-period__payments__item--active"),e.showSlider(),e._inputChanged()}),n.addEventListener("click",function(){n.classList.add("payment-period__payments__item--active"),t.classList.remove("payment-period__payments__item--active"),e.showCustom(),e._inputChanged()})},u.prototype.getText=function(){var e=this.getQuantity(),t=o.localePrice(this.getPrice(),this.currencyCode),n=this.bubbleTemplate;return"string"==typeof this.overrideBubbleTemplateQuantity[e]&&(n=this.overrideBubbleTemplateQuantity[e]),l.Tools.parseTemplate(n,{quantity:o.localeNumber(e),price:t})},u.prototype.isValid=function(){return this._isValid},u.prototype.setInvalid=function(){this._isValid=!1,this.sliderElement.classList.add("invalid")},u.prototype.setValid=function(){this._isValid=!0,this.sliderElement.classList.remove("invalid")},u.prototype.roundPrice=function(e){return Number(Math.round(e))},u.prototype.getMin=function(){return Number(this.container.getAttribute("data-min"))},u.prototype.getMax=function(){return Number(this.container.getAttribute("data-max"))},t.default=u},,function(e,t,n){var i,r;!function(){"use strict";r=[n(1),n(169)],void 0!==(r="function"==typeof(i=function(e,o){"use strict";e.tinysort={defaults:o.defaults},e.fn.extend({tinysort:function(){var e=Array.prototype.slice.call(arguments),t,n;e.unshift(this);t=o.apply(null,e);n=t.length;for(var i=0,r=this.length;i<r;i++)if(i<n)this[i]=t[i];else delete this[i];this.length=n;return this}}),e.fn.tsort=e.fn.tinysort})?i.apply(t,r):i)&&(e.exports=r)}()},function(t,n,i){var r;!function(e){"use strict";void 0!==(r="function"==typeof(r=function(){return e})?r.call(n,i,n,t):r)&&(t.exports=r)}(function(){"use strict";var w,e=window,E=e.document,S=parseFloat,x=/(-?\d+\.?\d*)\s*$/g,T=/(\d+\.?\d*)\s*$/g,P=[],k=0,I=0,C=String.fromCharCode(4095),M={selector:null,order:"asc",attr:null,data:null,useVal:!1,place:"org",returns:!1,cases:!1,natural:!1,forceStrings:!1,ignoreDashes:!1,sortFunction:null,useFlex:!1,emptyEnd:!1};function O(e,t){for(var n,i=e.length,r=i;r--;)t(e[n=i-r-1],n)}function A(e,t,n){for(var i in t)!n&&e[i]!==w||(e[i]=t[i]);return e}function t(e,t,n){P.push({prepare:e,sort:t,sortBy:n})}return e.Element&&((e=Element.prototype).matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=(this.parentNode||this.document).querySelectorAll(e),n=-1;t[++n]&&t[n]!=this;);return!!t[n]}),A(t,{loop:O}),A(function(e,t){(e=b(e)?E.querySelectorAll(e):e).length;var n,r,i,o,a=E.createDocumentFragment(),s=[],l=[],c=[],d=[],u=!0,p=e.length&&e[0].parentNode,h=p.rootNode!==document,t=e.length&&(t===w||!1!==t.useFlex)&&!h&&-1!==getComputedStyle(p,null).display.indexOf("flex"),h=(!function(){0===arguments.length?f({}):O(arguments,function(e){f(b(e)?{selector:e}:e)});k=d.length}.apply(null,Array.prototype.slice.call(arguments,1)),O(e,function(e,t){r?r!==e.parentNode&&(u=!1):r=e.parentNode;var n=d[0],i=n.hasFilter,n=n.selector,i=!n||i&&e.matchesSelector(n)||n&&e.querySelector(n)?l:c,n={elm:e,pos:t,posn:i.length};s.push(n),i.push(n)}),n=l.slice(0),l.sort(function(e,t){var n=0;0!==I&&(I=0);for(;0===n&&I<k;){var i,r,o,a,s,l,c=d[I],u=c.ignoreDashes?T:x;O(P,function(e){e=e.prepare;e&&e(c)}),n=c.sortFunction?c.sortFunction(e,t):"rand"==c.order?Math.random()<.5?1:-1:(i=!1,r=_(e,c),o=_(t,c),s=""===r||r===w,a=""===o||o===w,r===o?0:c.emptyEnd&&(s||a)?s&&a?0:s?1:-1:(c.forceStrings||(a=!!b(r)&&r&&r.match(u),s=!!b(o)&&o&&o.match(u),a&&s&&(u=r.substr(0,r.length-a[0].length),l=o.substr(0,o.length-s[0].length),u==l)&&(i=!0,r=S(a[0]),o=S(s[0]))),r===w||o===w?0:c.natural&&(isNaN(r)||isNaN(o))?function(e,t,n){for(var i=n(e.toString()),r=n(t.toString()),o=0;i[o]&&r[o];o++){var a,s;if(i[o]!==r[o])return a=Number(i[o]),s=Number(r[o]),a==i[o]&&s==r[o]?a-s:i[o]>r[o]?1:-1}return i.length-r.length}(r,o,m):r<o?-1:o<r?1:0)),O(P,function(e){e=e.sort;e&&(n=e(c,i,r,o,n))}),0===(n*=c.sortReturnNumber)&&I++}0===n&&(n=e.pos>t.pos?1:-1);return n}),l.length===s.length);function f(e){var t=!!e.selector,n=t&&":"===e.selector[0],e=A(e||{},M);d.push(A({hasSelector:t,hasAttr:!(null===e.attr||""===e.attr),hasData:null!==e.data,hasFilter:n,sortReturnNumber:"asc"===e.order?1:-1},e))}function m(e){for(var t,n=[],i=0,r=-1,o=0;a=(t=e.charAt(i++)).charCodeAt(0);){var a=46==a||48<=a&&a<=57;a!==o&&(n[++r]="",o=a),n[r]+=t}return n}function g(){return l.forEach(function(e){a.appendChild(e.elm)}),a}function v(e){var t=e.elm,n=E.createElement("div");return e.ghost=n,t.parentNode.insertBefore(n,t),e}function y(e,t){var n=e.ghost,i=n.parentNode;i.insertBefore(t,n),i.removeChild(n),delete e.ghost}function _(e,t){var n,e=e.elm;return t.selector&&(t.hasFilter?e.matchesSelector(t.selector)||(e=null):e=e.querySelector(t.selector)),t.hasAttr?n=e.getAttribute(t.attr):t.useVal?n=e.value||e.getAttribute("value"):t.hasData?n=e.getAttribute("data-"+t.data):e&&(n=e.textContent),n=null===(n=b(n)?(n=t.cases?n:n.toLowerCase()).replace(/\s+/g," "):n)?C:n}function b(e){return"string"==typeof e}return u&&h?t?l.forEach(function(e,t){e.elm.style.order=t}):r&&r.appendChild(g()):(h=d[0].place,p="start"===h,e="end"===h,t="first"===h,i="last"===h,"org"===h?(l.forEach(v),l.forEach(function(e,t){y(n[t],e.elm)})):p||e?(h=n[p?0:n.length-1],o=h&&h.elm.parentNode,(p=o&&(p&&o.firstChild||o.lastChild))&&(v(h=p!==h.elm?{elm:p}:h),e&&o.appendChild(h.ghost),y(h,g()))):(t||i)&&y(v(n[t?0:n.length-1]),g())),l.map(function(e){return e.elm})},{plugin:t,defaults:M})}())},function(e,t,n){"use strict";!function(n){function e(){}Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0,e.init=function(){var t=1==n("body").hasClass("rtl")?"left":"right";1!=window.toolbarStarted&&(window.toolbarStarted=!0,n(".editor__toolbar__options").hide(),n(".tool__workarea").on("scroll",function(){var e=n(this).scrollTop();!(e+n(this).innerHeight()>=n(this)[0].scrollHeight)&&e<=16+n(".add").height()?n(".editor__toolbar").removeClass("fixed").css("margin-"+t,""):n(".editor__toolbar").addClass("fixed").css("margin-"+t,n("#sidebar").width()+1+"px")}),n(".editor__toolbar__options#fileSelectorToolbar").css("display","flex"))},e.refresh=function(){window.removeEventListener("resize",e.setToolbar),window.addEventListener("resize",e.setToolbar),e.setToolbar()},e.setToolbar=function(){var e=1==n("body").hasClass("rtl")?"left":"right";n(".editor__toolbar").addClass("fixed").css("margin-"+e,n("#sidebar").width()+1+"px")},e.show=function(e){n(".editor__toolbar__options").hide(),n(".editor__toolbar__options#"+e).css("display","flex")},e.hide=function(){n(".editor__toolbar__options").hide(),n(".editor__toolbar__options#fileSelectorToolbar").css("display","flex")},t.Toolbar=e}.call(this,n(1))},function(e,t,n){"use strict";!function(a){function s(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollHelper=void 0,s.scrollToPage=function(e,t){var n=a('.editor__page[data-file="'+e+'"][data-page="'+t+'"]');0<n.length&&(a("#workArea").animate({scrollTop:n.position().top},500),s.scrollToPreview(e,t))},s.scrollToPreview=function(e,t){e=a('.preview__page[data-file="'+e+'"][data-page="'+t+'"]'),t=a(".tool__preview__pages");0<e.length&&t.animate({scrollTop:t.scrollTop()+e.offset().top-200},500)},s.scrollToFirstItem=function(e,t){var n=a('.editor__page[data-file="'+e+'"][data-page="'+t+'"]'),i=(a('.preview__page[data-file="'+e+'"][data-page="'+t+'"]'),n.height());n.children(".sign__element, .sign__group").each(function(e,t){t=parseInt(a(t).css("top"));isNaN(t)||(i=Math.min(i,t))}),a("#workArea").animate({scrollTop:n.position().top+i-parseInt((a(".tool__workarea").height()/3).toString())},500),s.scrollToPreview(e,t)},s.scrollToElement=function(r,o){return void 0===o&&(o=null),new Promise(function(e,t){0==a(r).length&&e();var n=a(r).parent().position().top+a(r).position().top,n=(a("#workArea").animate({scrollTop:n-parseInt((a(".tool__workarea").height()/3).toString()),duration:500},function(){null!=o&&o(),e()}),a(r).parent().attr("data-file")),i=a(r).parent().attr("data-page");s.scrollToPreview(n,i)})},t.ScrollHelper=s}.call(this,n(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryState=void 0,n(231)),c=n(64),u=n(78),d=n(182),n=(r=c.AbstractPaymentState,o(p,r),p.prototype.renderSummary=function(r){return a(this,void 0,void 0,function(){var t,n,i=this;return s(this,function(e){return t=r.getPaymentSummary_package(this.ctx.summaryParams.packageName,this.ctx.summaryParams.packageQty),n=this.domStateRoot.querySelector(".summary-template").innerHTML,t.then(function(e){new d.SummaryBuilder(n,e).setTexts({new:i.t("purchaseDetails")}).render(i.summariesDomRoot)}).catch(function(e){}),[2]})})},Object.defineProperty(p.prototype,"summariesDomRoot",{get:function(){var e=this.domStateRoot.querySelector(".summaries-root");if(e)return e;throw"summariesDomRoot not found"},enumerable:!1,configurable:!0}),p.prototype.cleanUpState=function(){this.summariesDomRoot.innerHTML="",this.domRoot.querySelectorAll(".payment__mountpoint").forEach(function(e){return e.innerHTML=""}),this.goBackBtn.removeEventListener("click",this._goBackState)},p.prototype.initBackAction=function(){this.ctx.canGoToAPreviousState()?(this.goBackBtn.style.display="",this.goBackBtn.addEventListener("click",this._goBackState)):this.goBackBtn.style.display="none"},Object.defineProperty(p.prototype,"goBackBtn",{get:function(){var e=this.domRoot.querySelector(".dialog__back");if(e)return e;throw"Go back btn not found"},enumerable:!1,configurable:!0}),p);function p(){var i=null!==r&&r.apply(this,arguments)||this;return i.name="SummaryState",i.LAYOUT_TEMPLATE_NAME="packages",i.INITIAL_SCREEN="default",i.onDomReady=function(){i.changeScreen(i.INITIAL_SCREEN),i.initBackAction();var e=new u.UserPayment,t=i.renderSummary(e),e=i.initAbstractPayment({paymentAction:"pay_package",userPayment:e,currentPaymentMethod:i.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:i.t("paymentButtonText")},{name:"paypal"}],package:{name:i.ctx.summaryParams.packageName,qty:i.ctx.summaryParams.packageQty}});Promise.all([t,e]).then(i._onEverythingReady)},i._onPaymentSuccess=function(e){var t=i.ctx.summaryParams,n=t.packageName,t=t.packageQty,n=(window.ev("send","event","payment",n,String(t)),window.ev("event","payment",{type:n,quantity:t}),new l.PaymentCompletedState);i.ctx.changeState(n),n.render(i.domRoot)},i._onPaymentFailed=function(e){},i._onEverythingReady=function(){setTimeout(i.clearLoadingScreen,150)},i._goBackState=function(){i.cleanUpState(),i.ctx.goToPreviousState().render(i.domRoot)},i._goNextState=function(){var e=new l.PaymentCompletedState;i.ctx.changeState(e),e.render(i.domRoot)},i}t.SummaryState=n},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPage=void 0,i.allPagesSameSize=function(e){var e=this.getAllPageInfoInFile(e),t=e[0];return e.every(function(e){return e.width==t.width&&e.height==t.height})},i.getAllPageInfoInFile=function(e){var t=this,e=this.getAllHtmlPagesOfFile(e);return Array.from(e).map(function(e){return t.parsePageInfoFromHtmlEl(e)})},i.getAllHtmlPagesOfFile=function(e){return document.querySelectorAll('.editor__page[data-file="'+e+'"]')},i.getHtmlPageElement=function(e,t){return document.querySelector('.editor__page[data-file="'+e+'"][data-page="'+t+'"]')},i.getAllSignElements=function(e,t){t=t?'.editor__page[data-file="'+e+'"][data-page="'+t+'"] .sign__element':'.editor__page[data-file="'+e+'"] .sign__element';return document.querySelectorAll(t)},i.getPageInfo=function(e,t){e=this.getHtmlPageElement(e,t);return this.parsePageInfoFromHtmlEl(e)},i.parsePageInfoFromHtmlEl=function(e){var t,n,i;return e?(t=e.getBoundingClientRect(),n=parseFloat(e.dataset.width),i=parseFloat(e.dataset.height),{page:parseInt(e.dataset.page),fileId:e.dataset.file,width:n,height:i,factor:i/t.height,viewFactor:t.width/800,rect:t}):{page:void 0,fileId:void 0,width:NaN,height:NaN,factor:NaN,viewFactor:NaN,rect:null}},i.getPageHtmlFromEl=function(e){return e.closest(".editor__page")},i.getPageFromEl=function(e){e=this.getPageHtmlFromEl(e);return this.parsePageInfoFromHtmlEl(e)},i.isElementOutsidePage=function(e){e=this.getElementAdjustmentOutside(e);return null!==e.xAdjust||null!==e.yAdjust},i.getElementAdjustmentOutside=function(e){var t=i.getPageFromEl(e);return this.getOutOfBoundariesAdjustment(e.getBoundingClientRect(),t.rect)},i.getOutOfBoundariesAdjustment=function(e,t){var n=null,i=null,e=this.getElementBoundaries(e),t=this.getElementBoundaries(t);return e.topLeft.x<t.topLeft.x?i=e.topLeft.x-t.topLeft.x:e.topRight.x>t.topRight.x?i=t.topRight.x-e.topRight.x:e.bottomLeft.x<t.bottomLeft.x?i=e.bottomLeft.x-t.bottomLeft.x:e.bottomRight.x>t.bottomRight.x&&(i=t.bottomRight.x-e.bottomRight.x),e.topLeft.y<t.topLeft.y?n=e.topLeft.y-t.topLeft.y:e.topRight.y<t.topRight.y?n=e.topRight.y-t.topRight.y:e.bottomLeft.y>t.bottomLeft.y?n=t.bottomLeft.y-e.bottomLeft.y:e.bottomRight.y>t.bottomRight.y&&(n=t.bottomRight.y-e.bottomRight.y),{yAdjust:n,xAdjust:i}},i.getElementBoundaries=function(e){return{topLeft:{x:e.x,y:e.y},topRight:{x:e.x+e.width,y:e.y},bottomLeft:{x:e.x,y:e.y+e.height},bottomRight:{x:e.x+e.width,y:e.y+e.height}}},t.EditorPage=i},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageHelper=void 0,i.getBase64=function(r,o){return void 0===o&&(o=!1),new Promise(function(e,t){var n=new FileReader,i=null;n.readAsDataURL(r.getNative()),n.onerror=function(e){t(e)},n.onload=function(){i=n.result,1!=o&&(i=i.substring(i.indexOf(",")+1)),e(i)}})},i.urlToBase64=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.onload=function(){500==i.status&&n();var e=new FileReader;e.onloadend=function(){t(e.result)},e.onerror=function(e){n()},e.readAsDataURL(i.response)},i.onerror=function(e){n()},i.open("GET",e),i.responseType="blob",i.send()})},i.preload=function(e){(new Image).src=e},i.calculateAspectRatioFit=function(e,t,n,i){n=Math.min(n/e,i/t);return{width:e*n,height:t*n}},t.ImageHelper=i},function(e,p,h){"use strict";!function(i){var r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},t=(Object.defineProperty(p,"__esModule",{value:!0}),p.FONT_STYLES=p.FONT_FAMILY_EXPLORER=p.FONT_FAMILY_SERVER=p.FONT_FAMILY_NAMES=p.DEFAULT_FONT=p.DEFAULT_COLOR=p.DEFAULT_INITIALS_MODE=p.DEFAULT_SIGNATURE_MODE=p.SignatureModel=void 0,h(183)),a=h(15),n=h(174),s=h(194),l=e(h(16)),c=h(13),u=h(75);function d(e){this.uuid=(e=e||{}).uuid||t.Frame.uuid(),this.setData(e)}d.prototype.setApi=function(e){this.api=e},d.prototype.setData=function(e){var t;e.mode&&(e.signatureMode=e.mode,e.initialsMode=e.mode,delete e.mode),this.signatureMode=e.signatureMode||p.DEFAULT_SIGNATURE_MODE,this.initialsMode=e.initialsMode||p.DEFAULT_INITIALS_MODE,this.color=p.DEFAULT_COLOR,this.signature=e.signature||"",this.initials=e.initials||"",!e.font&&(e.image||e.draw)||(this.fontFamily=(null==(t=e.font)?void 0:t.fontFamily)||"alex",this.color=(null==(t=e.font)?void 0:t.color)||"#555555",this.signatureFontImage=null,this.initialsFontImage=null),e.draw&&(!e.draw.initialsData||"object"==typeof e.draw.initialsData&&0===Object.keys(e.draw.initialsData).length)&&(delete e.draw.initials,delete e.draw.initialsData,delete e.draw.initialsBase64,"draw"==this.initialsMode)&&(this.initialsMode="font"),this.signatureImageService=null!=(t=null==(t=e.image)?void 0:t.signature)?t:null,this.initialsImageService=null!=(t=null==(t=e.image)?void 0:t.initials)?t:null,this.stampImageService=null!=(t=null==(t=e.image)?void 0:t.stamp)?t:null,this.signatureImageApi=null!=(t=null==(t=e.image)?void 0:t.signatureApi)?t:null,this.initialsImageApi=null!=(t=null==(t=e.image)?void 0:t.initialsApi)?t:null,this.stampImageApi=null!=(t=null==(t=e.image)?void 0:t.stampApi)?t:null,this.signatureImageBase64=null!=(t=null==(t=e.image)?void 0:t.signatureBase64)?t:null,this.initialsImageBase64=null!=(t=null==(t=e.image)?void 0:t.initialsBase64)?t:null,this.stampImageBase64=null!=(t=null==(t=e.image)?void 0:t.stampBase64)?t:null,this.signatureDrawService=null!=(t=null==(t=e.draw)?void 0:t.signature)?t:null,this.initialsDrawService=null!=(t=null==(t=e.draw)?void 0:t.initials)?t:null,this.signatureDrawApi=null!=(t=null==(t=e.draw)?void 0:t.signatureApi)?t:null,this.initialsDrawApi=null!=(t=null==(t=e.draw)?void 0:t.initialsApi)?t:null,this.signatureDrawData=null!=(t=null==(t=e.draw)?void 0:t.signatureData)?t:null,this.initialsDrawData=null!=(t=null==(t=e.draw)?void 0:t.initialsData)?t:null,this.signatureDrawBase64=null!=(t=null==(t=e.draw)?void 0:t.signatureBase64)?t:null,this.initialsDrawBase64=null!=(t=null==(t=e.draw)?void 0:t.initialsBase64)?t:null,this.color=null!=(e=null==(t=e.draw)?void 0:t.color)?e:"#555555",this.signatureDrawBase64&&n.ImageHelper.preload(this.signatureDrawBase64),this.initialsDrawBase64&&n.ImageHelper.preload(this.initialsDrawBase64)},d.prototype.cleanStrings=function(){this.signature=this.signature.trim(),this.initials=this.initials.trim()},d.prototype.correctEmptyInitials=function(){""!=this.initials&&null!=this.initials||""!=this.signature&&null!=this.signature&&(this.initials=this.signature.charAt(0))},d.prototype.getServiceData=function(){return this.cleanStrings(),this.correctEmptyInitials(),{signatureMode:this.signatureMode,initialsMode:this.initialsMode,signature:this.signature,initials:this.initials,font:{fontFamily:this.fontFamily,color:this.color},draw:{signature:this.signatureDrawService,initials:this.initialsDrawService,signatureData:this.signatureDrawData,initialsData:this.initialsDrawData,color:this.color},image:{signature:this.signatureImageService,initials:this.initialsImageService,stamp:this.stampImageService}}},d.prototype.getPreviewFor=function(e,t){switch(e){case"signature":return this.getSignaturePreview(t);case"initials":return this.getInitialsPreview(t);case"stamp":return this.getStampPreview()}},d.prototype.getSignaturePreview=function(e){var t=this,n=(void 0===e&&(e=this.signatureMode),this.createBaseImgPreviewEl);return"font"==e?(this.signatureFontImage||(this.signatureFontImage=s.CanvasHelper.textToImage(this.signature,p.FONT_FAMILY_EXPLORER[this.fontFamily],this.color)),n.src=this.signatureFontImage,n.classList.add("sign__element__textImage"),n):"draw"==e?(this.signatureDrawBase64&&this.signatureDrawBase64?n.src=this.signatureDrawBase64:this.signatureDrawService&&(n.src=this.signatureDrawService+"?t="+Date.now(),n.addEventListener("error",function(e){delete t.signatureDrawService,t.signatureMode=p.DEFAULT_SIGNATURE_MODE,t.saveConfig(),t.triggerInvalidInfo("signature","draw")},{once:!0})),n):"image"==e?(this.signatureImageBase64&&""!=this.signatureImageBase64?n.src=this.signatureImageBase64:this.signatureImageService?(n.addEventListener("error",function(e){delete t.signatureImageService,t.signatureMode=p.DEFAULT_SIGNATURE_MODE,t.saveConfig(),t.triggerInvalidInfo("signature","image")},{once:!0}),n.src=this.signatureImageService+"?t="+Date.now()):"image"==this.signatureMode&&(this.signatureMode=p.DEFAULT_SIGNATURE_MODE,this.saveConfig(),this.triggerInvalidInfo("signature","image")),n):void 0},d.prototype.getFrame=function(){var e=document.createElement("div");return e.classList.add("signature__firm"),e.innerHTML=t.Frame.make(this.uuid),e},d.prototype.getNamePreview=function(){return'<span class="sign__name">'+this.signature+"</span>"},d.prototype.getInitialsPreview=function(e){var t=this,n=(void 0===e&&(e=this.initialsMode),this.createBaseImgPreviewEl);return"font"==e?(this.initialsFontImage&&null!=this.initialsFontImage||(this.initialsFontImage=s.CanvasHelper.textToImage(this.initials,p.FONT_FAMILY_EXPLORER[this.fontFamily],this.color)),n.classList.add("sign__element__textImage"),n.src=this.initialsFontImage):"draw"==e?this.initialsDrawBase64&&""!=this.initialsDrawBase64?n.src=this.initialsDrawBase64:this.initialsDrawService?(n.src=this.initialsDrawService+"?t="+Date.now(),n.addEventListener("error",function(e){delete t.initialsDrawService,t.initialsMode=p.DEFAULT_INITIALS_MODE,t.saveConfig(),t.triggerInvalidInfo("initials","draw")},{once:!0})):"draw"==this.initialsMode&&(this.initialsMode=p.DEFAULT_INITIALS_MODE,this.saveConfig(),this.triggerInvalidInfo()):"image"==e&&(this.initialsImageBase64&&""!=this.initialsImageBase64?n.src=this.initialsImageBase64:this.initialsImageService?(n.src=this.initialsImageService+"?t="+Date.now(),n.addEventListener("error",function(e){delete t.initialsImageService,t.initialsMode=p.DEFAULT_INITIALS_MODE,t.saveConfig(),t.triggerInvalidInfo("initials","image")},{once:!0})):"image"==this.initialsMode&&(this.initialsMode=p.DEFAULT_INITIALS_MODE,this.saveConfig(),this.triggerInvalidInfo("initials","image"))),n},d.prototype.getStampPreview=function(){var t=this,e=this.createBaseImgPreviewEl;return this.stampImageBase64&&""!=this.stampImageBase64?e.src=this.stampImageBase64:this.stampImageService&&(e.addEventListener("error",function(e){delete t.stampImageService,t.saveConfig(),t.triggerInvalidInfo("stamp","image")},{once:!0}),e.src=this.stampImageService+"?t="+Date.now()),e},d.prototype.saveConfig=function(){var i=this;return new Promise(function(t,n){var e;a.UserModel.isUser()&&i.api?(e=i.getServiceData(),window.userModel.signature=e,i.api.saveToolConfig("signature",e,window.userModel.token).then(function(e){t()},function(e){n(e)})):t()})},d.prototype.getData=function(){var e,t=this,n=(this.cleanStrings(),this.correctEmptyInitials(),{initials:this.initials,name:this.signature,signature_type:this.signatureMode,initials_type:this.initialsMode});return n.font=p.FONT_FAMILY_SERVER.arial,"image"==this.signatureMode&&""==this.signatureImageApi?(l.configureScope(function(e){e.setExtra("signature data",t),e.setExtra("signatureImageApi",t.signatureImageApi)}),l.captureMessage("Signature forced from image to font",c.Severity.Error)):"draw"==this.signatureMode&&""==this.signatureDrawApi&&(l.configureScope(function(e){e.setExtra("signature data",t),e.setExtra("signatureDrawApi",t.signatureDrawApi)}),l.captureMessage("Signature forced from draw to font",c.Severity.Error)),"image"==this.initialsMode&&""==this.initialsImageApi?(l.configureScope(function(e){e.setExtra("signature data",t),e.setExtra("initialsImageApi",t.initialsImageApi)}),l.captureMessage("Initials forced from image to font",c.Severity.Error)):"draw"==this.initialsMode&&""==this.initialsDrawApi&&(l.configureScope(function(e){e.setExtra("signature data",t),e.setExtra("initialsDrawApi",t.initialsDrawApi)}),l.captureMessage("Initials forced from draw to font",c.Severity.Error)),"image"==this.signatureMode?(n.signature_type="image",n.signature_image_server_filename=this.signatureImageApi):"draw"==this.signatureMode?(n.signature_type="sign",n.signature_image_server_filename=this.signatureDrawApi):"font"==this.signatureMode&&(n.signature_type="text",n.color=this.color,n.font=p.FONT_FAMILY_SERVER.arial,p.FONT_FAMILY_SERVER[this.fontFamily])&&(n.font=p.FONT_FAMILY_SERVER[this.fontFamily]),"image"==this.initialsMode?(n.initials_type="image",n.initials_image_server_filename=this.initialsImageApi):"draw"==this.initialsMode?(n.initials_type="sign",n.initials_image_server_filename=this.initialsDrawApi):"font"==this.initialsMode&&(n.initials_type="text",n.color=this.color,n.font=p.FONT_FAMILY_SERVER.arial,p.FONT_FAMILY_SERVER[this.fontFamily])&&(n.font=p.FONT_FAMILY_SERVER[this.fontFamily]),""!==this.stampImageApi&&(n.stamp_image_server_filename=this.stampImageApi),n.browser_signed=window.navigator.userAgent.substring(0,249),1==a.UserModel.isUser()&&(e=a.UserModel.get(),n.custom_string=e.loginkey,n.custom_int=e.id),1==i("body").hasClass("rtl")&&(n.rtl=1),n},d.prototype.triggerInvalidInfo=function(e,t){this.saveConfig().then(function(e){u.SignatureEventManager.dispatchEvent("signature:settings:invalid_info:save_finished",{})}),u.SignatureEventManager.dispatchEvent("signature:settings:invalid_info",{signatureType:e,signatureMode:t})},d.prototype.validateData=function(){var e=this.getData();return!!("font"===this.signatureMode||e.signature_image_server_filename&&""!=e.signature_image_server_filename)&&!!("font"===this.initialsMode||e.initials_image_server_filename&&""!=e.initials_image_server_filename)},Object.defineProperty(d.prototype,"hasStamp",{get:function(){var e;return""!=(null!=(e=this.stampImageBase64)?e:"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"createBaseImgPreviewEl",{get:function(){return document.createElement("img")},enumerable:!1,configurable:!0}),p.SignatureModel=d,p.DEFAULT_SIGNATURE_MODE="font",p.DEFAULT_INITIALS_MODE="font",p.DEFAULT_COLOR="#555555",p.DEFAULT_FONT="alex",p.FONT_FAMILY_NAMES=["alex","allura","handle","kristi","aurore","mark","reenie","satisfy","zeyada","shadows"],p.FONT_FAMILY_SERVER={arial:"Arial-Unicode-MS",shadows:"Shadows-Into-Light",aurore:"La-Belle-Aurore",alex:"Alex-Brush-Regular",allura:"Allura-Regular",handle:"Handlee-Regular",kristi:"Kristi-Regular",mark:"Marck-Script",reenie:"Reenie-Beanie",satisfy:"Satisfy-Regular",smooth:"SmoothStone-Regular",secret:"TheSecret-Regular",zeyada:"Zeyada"},p.FONT_FAMILY_EXPLORER={arial:"Arial-Unicode",shadows:"Shadows Into Light",aurore:"La Belle Aurore",alex:"Alex Brush",allura:"Allura",handle:"Handlee",kristi:"Kristi",mark:"Marck Script",reenie:"Reenie Beanie",satisfy:"Satisfy",smooth:"SmoothStone",secret:"TheSecret",zeyada:"Zeyada"},p.FONT_STYLES="https://fonts.googleapis.com/css?family=Alex+Brush|Allura|Handlee|Kristi|La+Belle+Aurore|Marck+Script|Reenie+Beanie|Satisfy|Shadows+Into+Light|Zeyada&display=swap"}.call(this,h(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryState=void 0,n(78)),c=n(64),u=n(182),d=n(222),p=n(223),n=(r=c.AbstractPaymentState,o(h,r),h.prototype.renderSummary=function(t){return a(this,void 0,void 0,function(){var n=this;return s(this,function(e){return t.getPaymentSummary_updateSubscription(this.ctx.summaryParams.numSignatures,this.ctx.summaryParams.numUsers,this.ctx.summaryParams.paymentInterval,this.ctx.summaryParams.couponCode).then(function(e){new u.SummaryBuilder(n.getSummaryTemplate_html(),e).setTexts({current:n.t("currentSubscription"),new:n.t("newSubscription"),next:n.t("nextSubscription")}).render(n.summariesDomRoot,n.summaryWarningTextDomRoot)}).catch(function(e){var t=new p.SummaryFailedState;n.ctx.changeState(t),t.render(n.domRoot)}),[2]})})},h.prototype.getSummaryTemplate_html=function(){if(!this._summaryTemplate_html){var e=this.domStateRoot.querySelector("template.summary-template");if(!e)throw"template.summary-template not found";this._summaryTemplate_html=e.innerHTML}return this._summaryTemplate_html},Object.defineProperty(h.prototype,"summariesDomRoot",{get:function(){var e=this.domStateRoot.querySelector(".summaries-root");if(e)return e;throw".summaries-root not found"},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"summaryWarningTextDomRoot",{get:function(){var e=this.domStateRoot.querySelector(".summary__warning-text");if(e)return e;throw".summary__warning-text not found"},enumerable:!1,configurable:!0}),h.prototype.cleanUpState=function(){this.summariesDomRoot.innerHTML="",this.domRoot.querySelectorAll(".payment__mountpoint").forEach(function(e){return e.innerHTML=""}),this.goBackBtn.removeEventListener("click",this._goBackState)},h.prototype.initBackAction=function(){this.ctx.canGoToAPreviousState()?(this.goBackBtn.style.display="",this.goBackBtn.addEventListener("click",this._goBackState)):this.goBackBtn.style.display="none"},Object.defineProperty(h.prototype,"goBackBtn",{get:function(){var e=this.domRoot.querySelector(".dialog__back");if(e)return e;throw"Go Back btn not found"},enumerable:!1,configurable:!0}),h);function h(){var n=null!==r&&r.apply(this,arguments)||this;return n.name="SummaryState",n.LAYOUT_TEMPLATE_NAME="subscription-update",n.INITIAL_SCREEN="default",n.onDomReady=function(){n.changeScreen(n.INITIAL_SCREEN),n.initBackAction();var e=new l.UserPayment,t=n.renderSummary(e),e=n.initAbstractPayment({paymentAction:"subsc_update",userPayment:e,currentPaymentMethod:n.ctx.userCurrentPaymentMethod,paymentProviderProps:n._getPaymentProviderProps(n.ctx.paymentProviders),numSignatures:function(){return n.ctx.summaryParams.numSignatures},numUsers:function(){return n.ctx.summaryParams.numUsers},couponCode:function(){return n.ctx.summaryParams.couponCode},paymentInterval:{type:"predefined",value:n.ctx.summaryParams.paymentInterval}});Promise.all([t,e]).then(n._onEverythingReady)},n._getPaymentProviderProps=function(t){return void 0===t&&(t=[]),[{name:"stripe",paymentButtonText:n.t("paymentButtonText")},{name:"paypal"}].filter(function(e){return t.includes(e.name)})},n._onEverythingReady=function(){setTimeout(n.clearLoadingScreen,150)},n._onPaymentSuccess=function(e){n.ctx.summaryParams.numSignatures&&(t=n.ctx.summaryParams.numSignatures,window.ev("send","event","premium","signatures",String(t)),window.ev("event","payment",{element:"signatures",quantity:t}));var t=new d.PaymentCompletedState;n.ctx.changeState(t),t.render(n.domRoot)},n._onPaymentFailed=function(e){var t=new p.SummaryFailedState;n.ctx.changeState(t),t.render(n.domRoot)},n._goBackState=function(){n.cleanUpState(),n.ctx.goToPreviousState().render(n.domRoot)},n}t.SummaryState=n},,function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignApi=t.INSUFICIENT_SIGNATURES=t.INSUFICIENT_CERTS=t.DOCUMENT_DELETED=t.DOCUMENT_DECLINED=t.DOCUMENT_EXPIRED=t.DOCUMENT_VOIDED=t.DOCUMENT_COMPLETED=t.DOCUMENT_VALIDATED=t.DOCUMENT_SIGNED=t.DOCUMENT_NOT_VIEWED_YET=void 0,n(48)),s=n(58),n=(t.DOCUMENT_NOT_VIEWED_YET="Signer is trying to sign but did not view the document",t.DOCUMENT_SIGNED="The signer can't be updated. Signer status is signed",t.DOCUMENT_VALIDATED="The signer can't be updated. Signer status is validated",t.DOCUMENT_COMPLETED="The signer can't be updated. Signature status is completed",t.DOCUMENT_VOIDED="The signer can't be updated. Signature status is void",t.DOCUMENT_EXPIRED="The signer can't be updated. Signature status is expired",t.DOCUMENT_DECLINED="The signer can't be updated. Signature status is declined",t.DOCUMENT_DELETED="The signer can't be updated. Signature status is deleted",t.INSUFICIENT_CERTS="Signature can't be updated because ilovepdf.com user does not have enough certificates",t.INSUFICIENT_SIGNATURES="Signature can't be updated because ilovepdf.com user does not have enough signatures",r=a.Api,o(l,r),l.prototype.sign=function(e,t){return this.query("PUT","signature/signer/"+e,t)},l.prototype.signature=function(e){return this.query("POST","signature",e)},l.prototype.signatureUpdate=function(e,t){return this.query("PUT","signature/"+e,t)},l.prototype.uploadCloudFile=function(e,t){e=s.FormDataHelper.jsonToFormData({task:e,cloud_file:t});return this.query("POST","upload",e)},l.prototype.templateGet=function(e){return this.query("GET","signature/template/load/"+e)},l.prototype.templateSave=function(e){return this.query("POST","signature/template",e)},l.prototype.templateUpdate=function(e,t){return this.query("PUT","signature/template/"+e,t)},l.prototype.templateDelete=function(e,t){return this.query("DELETE","signature/template/"+e,t)},l.prototype.delete=function(e){return this.query("DELETE","signature/"+e)},l.prototype.remove=function(e){return this.query("DELETE","signature/signer/"+e)},l.prototype.saveSettings=function(e,t){return this.query("POST","settings/"+e,t)},l.prototype.getSignature=function(e,t,n){return void 0===n&&(n=null),null!=(t=void 0===t?null:t)&&null!=n?this.query("GET","signature/"+e+"?custom_int="+t+"&custom_string="+n):this.query("GET","signature/"+e)},l);function l(){return null!==r&&r.apply(this,arguments)||this}t.SignApi=n},function(t,n,i){"use strict";function m(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function M(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};for(var n,i={},r=Object.keys(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}function e(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var _=e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),b=e(/Edge/i),y=e(/firefox/i),w=e(/safari/i)&&!e(/chrome/i)&&!e(/android/i),E=e(/iP(ad|od|hone)/i),S=e(/chrome/i)&&e(/android/i),x={capture:!1,passive:!1};function l(e,t,n){e.addEventListener(t,n,!_&&x)}function o(e,t,n){e.removeEventListener(t,n,!_&&x)}function T(e,t){if(t&&(">"===t[0]&&(t=t.substring(1)),e))try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return}}function O(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"!==t[0]||e.parentNode===n)&&T(e,t)||i&&e===n)return e}while(e!==n&&(e=(r=e).host&&r!==document&&r.host.nodeType?r.host:r.parentNode))}var r;return null}var P,k=/\s+/g;function A(e,t,n){var i;e&&t&&(e.classList?e.classList[n?"add":"remove"](t):(i=(" "+e.className+" ").replace(k," ").replace(" "+t+" "," "),e.className=(i+(n?" "+t:"")).replace(k," ")))}function L(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];i[t=t in i||-1!==t.indexOf("webkit")?t:"-webkit-"+t]=n+("string"==typeof n?"":"px")}}function h(e,t){var n="";if("string"==typeof e)n=e;else do{var i=L(e,"transform")}while(i&&"none"!==i&&(n=i+" "+n),!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Z(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function I(){var e=document.scrollingElement;return e||document.documentElement}function D(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var o,a,s,l,c,u,d=e!==window&&e.parentNode&&e!==I()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,u=o.height,o.width):(s=a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth);if((t||n)&&e!==window&&(r=r||e.parentNode,!_))do{if(r&&r.getBoundingClientRect&&("none"!==L(r,"transform")||n&&"static"!==L(r,"position"))){var p=r.getBoundingClientRect();a-=p.top+parseInt(L(r,"border-top-width")),s-=p.left+parseInt(L(r,"border-left-width")),l=a+o.height,c=s+o.width;break}}while(r=r.parentNode);return i&&e!==window&&(i=(t=h(r||e))&&t.a,e=t&&t.d,t)&&(l=(a/=e)+(u/=e),c=(s/=i)+(d/=i)),{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function J(e,t,n){for(var i=C(e,!0),r=D(e)[t];i;){var o=D(i)[n];if(!("top"===n||"left"===n?o<=r:r<=o))return i;if(i===I())break;i=C(i,!1)}return!1}function R(e,t,n,i){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==K.ghost&&(i||a[o]!==K.dragged)&&O(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function $(e,t){for(var n=e.lastElementChild;n&&(n===K.ghost||"none"===L(n,"display")||t&&!T(n,t));)n=n.previousElementSibling;return n||null}function j(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===K.clone||t&&!T(e,t)||n++;return n}function ee(e){var t=0,n=0,i=I();if(e)do{var r=h(e),o=r.a,r=r.d}while(t+=e.scrollLeft*o,n+=e.scrollTop*r,e!==i&&(e=e.parentNode));return[t,n]}function C(e,t){if(e&&e.getBoundingClientRect){var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=L(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return I();if(i||t)return n;i=!0}}}while(n=n.parentNode)}return I()}function te(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ne(t,n){return function(){var e;P||(1===(e=arguments).length?t.call(this,e[0]):t.apply(this,e),P=setTimeout(function(){P=void 0},n))}}function ie(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function re(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var F="Sortable"+(new Date).getTime();function oe(){var t,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){var t,n;"none"!==L(e,"display")&&e!==K.ghost&&(i.push({target:e,rect:D(e)}),t=M({},i[i.length-1].rect),e.thisAnimationDuration&&(n=h(e,!0))&&(t.top-=n.f,t.left-=n.e),e.fromRect=t)})},addAnimationState:function(e){i.push(e)},removeAnimationState:function(e){i.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(i,{target:e}),1)},animateAll:function(e){var c,u,d=this;this.options.animation?(c=!1,u=0,i.forEach(function(e){var t,n=0,i=e.target,r=i.fromRect,o=D(i),a=i.prevFromRect,s=i.prevToRect,e=e.rect,l=h(i,!0);l&&(o.top-=l.f,o.left-=l.e),i.toRect=o,i.thisAnimationDuration&&te(a,o)&&!te(r,o)&&(e.top-o.top)/(e.left-o.left)==(r.top-o.top)/(r.left-o.left)&&(l=e,a=a,s=s,t=d.options,n=Math.sqrt(Math.pow(a.top-l.top,2)+Math.pow(a.left-l.left,2))/Math.sqrt(Math.pow(a.top-s.top,2)+Math.pow(a.left-s.left,2))*t.animation),te(o,r)||(i.prevFromRect=r,i.prevToRect=o,n=n||d.options.animation,d.animate(i,e,o,n)),n&&(c=!0,u=Math.max(u,n),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},n),i.thisAnimationDuration=n)}),clearTimeout(t),c?t=setTimeout(function(){"function"==typeof e&&e()},u):"function"==typeof e&&e(),i=[]):(clearTimeout(t),"function"==typeof e&&e())},animate:function(e,t,n,i){var r,o;i&&(L(e,"transition",""),L(e,"transform",""),o=(r=h(this.el))&&r.a,r=r&&r.d,o=(t.left-n.left)/(o||1),t=(t.top-n.top)/(r||1),e.animatingX=!!o,e.animatingY=!!t,L(e,"transform","translate3d("+o+"px,"+t+"px,0)"),this.forRepaintDummy=e.offsetWidth,L(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),L(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){L(e,"transition",""),L(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},i))}}}var s=[],ae={initializeByDefault:!0},se={mount:function(t){for(var e in ae)!ae.hasOwnProperty(e)||e in t||(t[e]=ae[e]);s.forEach(function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),s.push(t)},pluginEvent:function(t,n,i){var e=this,r=(this.eventCanceled=!1,i.cancel=function(){e.eventCanceled=!0},t+"Global");s.forEach(function(e){n[e.pluginName]&&(n[e.pluginName][r]&&n[e.pluginName][r](M({sortable:n},i)),n.options[e.pluginName])&&n[e.pluginName][t]&&n[e.pluginName][t](M({sortable:n},i))})},initializePlugins:function(n,i,r,e){for(var t in s.forEach(function(e){var t=e.pluginName;(n.options[t]||e.initializeByDefault)&&((e=new e(n,i,n.options)).sortable=n,e.options=n.options,n[t]=e,a(r,e.defaults))}),n.options){var o;n.options.hasOwnProperty(t)&&void 0!==(o=this.modifyOption(n,t,n.options[t]))&&(n.options[t]=o)}},getEventProperties:function(t,n){var i={};return s.forEach(function(e){"function"==typeof e.eventProperties&&a(i,e.eventProperties.call(n[e.pluginName],t))}),i},modifyOption:function(t,n,i){var r;return s.forEach(function(e){t[e.pluginName]&&e.optionListeners&&"function"==typeof e.optionListeners[n]&&(r=e.optionListeners[n].call(t[e.pluginName],i))}),r}};function le(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,o=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,e=e.extraEventProperties;if(t=t||n&&n[F]){var f,m,g=t.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1),y=(!window.CustomEvent||_||b?(f=document.createEvent("Event")).initEvent(i,!0,!0):f=new CustomEvent(i,{bubbles:!0,cancelable:!0}),f.to=a||n,f.from=s||n,f.item=r||n,f.clone=o,f.oldIndex=l,f.newIndex=c,f.oldDraggableIndex=u,f.newDraggableIndex=d,f.originalEvent=p,f.pullMode=h?h.lastPutMode:void 0,M(M({},e),se.getEventProperties(i,t)));for(m in y)f[m]=y[m];n&&n.dispatchEvent(f),g[v]&&g[v].call(t,f)}}function N(e,t){var n=(i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).evt,i=v(i,ce);se.pluginEvent.bind(K)(e,t,M({dragEl:z,parentEl:H,ghostEl:q,rootEl:V,nextEl:W,lastDownEl:me,cloneEl:c,cloneHidden:r,dragStarted:Ee,putSortable:X,activeSortable:K.active,originalEvent:n,oldIndex:f,oldDraggableIndex:ge,newIndex:G,newDraggableIndex:Y,hideGhostForTarget:pe,unhideGhostForTarget:he,cloneNowHidden:function(){r=!0},cloneNowShown:function(){r=!1},dispatchSortableEvent:function(e){B({sortable:t,name:e,originalEvent:n})}},i))}var ce=["evt"];function B(e){le(M({putSortable:X,cloneEl:c,targetEl:z,rootEl:V,oldIndex:f,oldDraggableIndex:ge,newIndex:G,newDraggableIndex:Y},e))}function ue(e,t){var n,i=L(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=R(e,0,t),e=R(e,1,t),t=o&&L(o),a=e&&L(e),s=t&&parseInt(t.marginLeft)+parseInt(t.marginRight)+D(o).width,l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+D(e).width;return"flex"===i.display?"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal":"grid"===i.display?i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":o&&t.float&&"none"!==t.float?(n="left"===t.float?"left":"right",!e||"both"!==a.clear&&a.clear!==n?"horizontal":"vertical"):o&&("block"===t.display||"flex"===t.display||"table"===t.display||"grid"===t.display||r<=s&&"none"===i[je]||e&&"none"===i[je]&&r<s+l)?"vertical":"horizontal"}function de(e){function s(o,a){return function(e,t,n,i){var r=e.options.group.name&&t.options.group.name&&e.options.group.name===t.options.group.name;return!(null!=o||!a&&!r)||null!=o&&!1!==o&&(a&&"clone"===o?o:"function"==typeof o?s(o(e,t,n,i),a)(e,t,n,i):(r=(a?e:t).options.group.name,!0===o||"string"==typeof o&&o===r||o.join&&-1<o.indexOf(r)))}}var t={},n=e.group;n&&"object"==g(n)||(n={name:n}),t.name=n.name,t.checkPull=s(n.pull,!0),t.checkPut=s(n.put),t.revertClone=n.revertClone,e.group=t}function pe(){!Ne&&q&&L(q,"display","none")}function he(){!Ne&&q&&L(q,"display","")}function U(e){if(z){e=e.touches?e.touches[0]:e;r=e.clientX,o=e.clientY,Ie.some(function(e){var t,n,i=e[F].options.emptyInsertThreshold;if(i&&!$(e))return n=D(e),t=r>=n.left-i&&r<=n.right+i,n=o>=n.top-i&&o<=n.bottom+i,t&&n?a=e:void 0});var t=a;if(t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[F]._onDragOver(i)}}var r,o,a}function fe(e){z&&z.parentNode[F]._isOutsideThisEl(e.target)}var z,H,q,V,W,me,c,r,f,G,ge,Y,ve,X,u,d,ye,_e,be,we,Ee,Se,xe,Te,p,Pe=!1,ke=!1,Ie=[],Ce=!1,Me=!1,Oe=[],Ae=!1,Le=[],De="undefined"!=typeof document,Re=E,je=b||_?"cssFloat":"float",Fe=De&&!S&&!E&&"draggable"in document.createElement("div"),Ne=function(){var e;if(De)return!_&&((e=document.createElement("x")).style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}();De&&document.addEventListener("click",function(e){if(ke)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ke=!1},!0);function K(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[F]=this;var n,i,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ue(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==K.supportPointer&&"PointerEvent"in window&&!w,emptyInsertThreshold:5};for(n in se.initializePlugins(this,e,r),r)n in t||(t[n]=r[n]);for(i in de(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Fe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?l(e,"pointerdown",this._onTapStart):(l(e,"mousedown",this._onTapStart),l(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(l(e,"dragover",this),l(e,"dragenter",this)),Ie.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,oe())}function Be(e,t,n,i,r,o,a,s){var l,c,u=e[F],d=u.options.onMove;return!window.CustomEvent||_||b?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=o||D(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),c=d?d.call(u,l,a):c}function Ue(e){e.draggable=!1}function ze(){Ae=!1}function He(e){return setTimeout(e,0)}function qe(e){return clearTimeout(e)}K.prototype={constructor:K,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Se=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,z):this.options.direction},_onTapStart:function(t){if(t.cancelable){for(var n=this,i=this.el,e=this.options,r=e.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=e.filter,u=i,d=(Le.length=0,u.getElementsByTagName("input")),p=d.length;p--;){var h=d[p];h.checked&&Le.push(h)}if(!z&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||e.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!w||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=O(s,e.draggable,i,!1))&&s.animated||me===s)){if(f=j(s),ge=j(s,e.draggable),"function"==typeof c){if(c.call(this,t,s,this))return B({sortable:n,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),N("filter",n,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(c=c&&c.split(",").some(function(e){if(e=O(l,e.trim(),i,!1))return B({sortable:n,rootEl:e,name:"filter",targetEl:s,fromEl:i,toEl:i}),N("filter",n,{evt:t}),!0}))return void(r&&t.cancelable&&t.preventDefault());e.handle&&!O(l,e.handle,i,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(e,t,n){var i,r=this,o=r.el,a=r.options,s=o.ownerDocument;n&&!z&&n.parentNode===o&&(i=D(n),V=o,H=(z=n).parentNode,W=z.nextSibling,me=n,ve=a.group,u={target:K.dragged=z,clientX:(t||e).clientX,clientY:(t||e).clientY},be=u.clientX-i.left,we=u.clientY-i.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,z.style["will-change"]="all",o=function(){N("delayEnded",r,{evt:e}),K.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!y&&r.nativeDraggable&&(z.draggable=!0),r._triggerDragStart(e,t),B({sortable:r,name:"choose",originalEvent:e}),A(z,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){Z(z,e.trim(),Ue)}),l(s,"dragover",U),l(s,"mousemove",U),l(s,"touchmove",U),l(s,"mouseup",r._onDrop),l(s,"touchend",r._onDrop),l(s,"touchcancel",r._onDrop),y&&this.nativeDraggable&&(this.options.touchStartThreshold=4,z.draggable=!0),N("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(b||_)?o():K.eventCanceled?this._onDrop():(l(s,"mouseup",r._disableDelayedDrag),l(s,"touchend",r._disableDelayedDrag),l(s,"touchcancel",r._disableDelayedDrag),l(s,"mousemove",r._delayedDragTouchMoveHandler),l(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&l(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(o,a.delay)))},_delayedDragTouchMoveHandler:function(e){e=e.touches?e.touches[0]:e;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){z&&Ue(z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._delayedDragTouchMoveHandler),o(e,"touchmove",this._delayedDragTouchMoveHandler),o(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?l(document,"pointermove",this._onTouchMove):l(document,t?"touchmove":"mousemove",this._onTouchMove):(l(z,"dragend",this),l(V,"dragstart",this._onDragStart));try{document.selection?He(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){var n;Pe=!1,V&&z?(N("dragStarted",this,{evt:t}),this.nativeDraggable&&l(document,"dragover",fe),n=this.options,e||A(z,n.dragClass,!1),A(z,n.ghostClass,!0),K.active=this,e&&this._appendGhost(),B({sortable:this,name:"start",originalEvent:t})):this._nulling()},_emulateDragOver:function(){if(d){this._lastX=d.clientX,this._lastY=d.clientY,pe();for(var e=document.elementFromPoint(d.clientX,d.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(d.clientX,d.clientY))!==t;)t=e;if(z.parentNode[F]._isOutsideThisEl(e),t)do{if(t[F])if(t[F]._onDragOver({clientX:d.clientX,clientY:d.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}while(t=(e=t).parentNode);he()}},_onTouchMove:function(e){if(u){var t=this.options,n=t.fallbackTolerance,t=t.fallbackOffset,i=e.touches?e.touches[0]:e,r=q&&h(q,!0),o=q&&r&&r.a,a=q&&r&&r.d,s=Re&&p&&ee(p),o=(i.clientX-u.clientX+t.x)/(o||1)+(s?s[0]-Oe[0]:0)/(o||1),t=(i.clientY-u.clientY+t.y)/(a||1)+(s?s[1]-Oe[1]:0)/(a||1);if(!K.active&&!Pe){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}q&&(r?(r.e+=o-(ye||0),r.f+=t-(_e||0)):r={a:1,b:0,c:0,d:1,e:o,f:t},s="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")"),L(q,"webkitTransform",s),L(q,"mozTransform",s),L(q,"msTransform",s),L(q,"transform",s),ye=o,_e=t,d=i),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!q){var e=this.options.fallbackOnBody?document.body:V,t=D(z,!0,Re,!0,e),n=this.options;if(Re){for(p=e;"static"===L(p,"position")&&"none"===L(p,"transform")&&p!==document;)p=p.parentNode;p!==document.body&&p!==document.documentElement?(p===document&&(p=I()),t.top+=p.scrollTop,t.left+=p.scrollLeft):p=I(),Oe=ee(p)}A(q=z.cloneNode(!0),n.ghostClass,!1),A(q,n.fallbackClass,!0),A(q,n.dragClass,!0),L(q,"transition",""),L(q,"transform",""),L(q,"box-sizing","border-box"),L(q,"margin",0),L(q,"top",t.top),L(q,"left",t.left),L(q,"width",t.width),L(q,"height",t.height),L(q,"opacity","0.8"),L(q,"position",Re?"absolute":"fixed"),L(q,"zIndex","100000"),L(q,"pointerEvents","none"),K.ghost=q,e.appendChild(q),L(q,"transform-origin",be/parseInt(q.style.width)*100+"% "+we/parseInt(q.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;N("dragStart",this,{evt:e}),K.eventCanceled?this._onDrop():(N("setupClone",this),K.eventCanceled||((c=re(z)).draggable=!1,c.style["will-change"]="",this._hideClone(),A(c,this.options.chosenClass,!1),K.clone=c),n.cloneId=He(function(){N("clone",n),K.eventCanceled||(n.options.removeCloneOnHide||V.insertBefore(c,z),n._hideClone(),B({sortable:n,name:"clone"}))}),t||A(z,r.dragClass,!0),t?(ke=!0,n._loopId=setInterval(n._emulateDragOver,50)):(o(document,"mouseup",n._onDrop),o(document,"touchend",n._onDrop),o(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData)&&r.setData.call(n,i,z),l(document,"drop",n),L(z,"transform","translateZ(0)")),Pe=!0,n._dragStartId=He(n._dragStarted.bind(n,t,e)),l(document,"selectstart",n),Ee=!0,w&&L(document.body,"user-select","none"))},_onDragOver:function(n){var i,r,o,a=this.el,s=n.target,t=this.options,e=t.group,l=K.active,c=ve===e,u=t.sort,d=X||l,p=this,h=!1;if(!Ae){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),s=O(s,t.draggable,a,!0),P("dragOver"),K.eventCanceled)return h;if(z.contains(n.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return I(!1);if(ke=!1,l&&!t.disabled&&(c?u||(r=H!==V):X===this||(this.lastPutMode=ve.checkPull(this,l,z,n))&&e.checkPut(this,l,z,n))){if(o="vertical"===this._getDirection(n,s),i=D(z),P("dragOverValid"),K.eventCanceled)return h;if(r)return H=V,k(),this._hideClone(),P("revert"),K.eventCanceled||(W?V.insertBefore(z,W):V.appendChild(z)),I(!0);e=$(a,t.draggable);if(!e||function(e,t,n){n=D($(n.el,n.options.draggable));return t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}(n,o,this)&&!e.animated){if(e===z)return I(!1);if((s=e&&a===n.target?e:s)&&(v=D(s)),!1!==Be(V,a,z,i,s,v,n,!!s))return k(),a.appendChild(z),H=a,C(),I(!0)}else if(e&&function(e,t,n){n=D(R(n.el,0,n.options,!0));return t?e.clientX<n.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-10||e.clientY<n.bottom&&e.clientX<n.left}(n,o,this)){e=R(a,0,t,!0);if(e===z)return I(!1);if(v=D(s=e),!1!==Be(V,a,z,i,s,v,n,!1))return k(),a.insertBefore(z,e),H=a,C(),I(!0)}else if(s.parentNode===a){var f,m,g,v=D(s),e=z.parentNode!==a,y=(S=z.animated&&z.toRect||i,y=s.animated&&s.toRect||v,w=(T=o)?S.left:S.top,_=T?S.right:S.bottom,S=T?S.width:S.height,x=T?y.left:y.top,b=T?y.right:y.bottom,T=T?y.width:y.height,!(w===x||_===b||w+S/2===x+T/2)),_=o?"top":"left",b=J(s,"top","top")||J(z,"top","top"),w=b?b.scrollTop:void 0;if(Se!==s&&(m=v[_],Ce=!1,Me=!y&&t.invertSwap||e),0!==(f=function(e,t,n,i,r,o,a,s){var e=i?e.clientY:e.clientX,l=i?n.height:n.width,c=i?n.top:n.left,i=i?n.bottom:n.right,n=!1;if(!a)if(s&&Te<l*r){if(Ce=!Ce&&(1===xe?c+l*o/2<e:e<i-l*o/2)?!0:Ce)n=!0;else if(1===xe?e<c+Te:i-Te<e)return-xe}else if(c+l*(1-r)/2<e&&e<i-l*(1-r)/2)return function(e){return j(z)<j(e)?1:-1}(t);if((n=n||a)&&(e<c+l*o/2||i-l*o/2<e))return c+l/2<e?1:-1;return 0}(n,s,v,o,y?1:t.swapThreshold,null==t.invertedSwapThreshold?t.swapThreshold:t.invertedSwapThreshold,Me,Se===s)))for(var E=j(z);(g=H.children[E-=f])&&("none"===L(g,"display")||g===q););if(0===f||g===s)return I(!1);xe=f;var S=(Se=s).nextElementSibling,x=!1,T=Be(V,a,z,i,s,v,n,x=1===f);if(!1!==T)return 1!==T&&-1!==T||(x=1===T),Ae=!0,setTimeout(ze,30),k(),x&&!S?a.appendChild(z):s.parentNode.insertBefore(z,x?S:s),b&&ie(b,0,w-b.scrollTop),H=z.parentNode,void 0===m||Me||(Te=Math.abs(m-D(s)[_])),C(),I(!0)}if(a.contains(z))return I(!1)}return!1}function P(e,t){N(e,p,M({evt:n,isOwner:c,axis:o?"vertical":"horizontal",revert:r,dragRect:i,targetRect:v,canSort:u,fromSortable:d,target:s,completed:I,onMove:function(e,t){return Be(V,a,z,i,e,D(e),n,t)},changed:C},t))}function k(){P("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function I(e){return P("dragOverCompleted",{insertion:e}),e&&(c?l._hideClone():l._showClone(p),p!==d&&(A(z,(X||l).options.ghostClass,!1),A(z,t.ghostClass,!0)),X!==p&&p!==K.active?X=p:p===K.active&&(X=X&&null),d===p&&(p._ignoreWhileAnimating=s),p.animateAll(function(){P("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d)&&(d.animateAll(),d._ignoreWhileAnimating=null),(s===z&&!z.animated||s===a&&!s.animated)&&(Se=null),t.dragoverBubble||n.rootEl||s===document||(z.parentNode[F]._isOutsideThisEl(n.target),e)||U(n),!t.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),h=!0}function C(){G=j(z),Y=j(z,t.draggable),B({sortable:p,name:"change",toEl:a,newIndex:G,newDraggableIndex:Y,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){o(document,"mousemove",this._onTouchMove),o(document,"touchmove",this._onTouchMove),o(document,"pointermove",this._onTouchMove),o(document,"dragover",U),o(document,"mousemove",U),o(document,"touchmove",U)},_offUpEvents:function(){var e=this.el.ownerDocument;o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"pointerup",this._onDrop),o(e,"touchcancel",this._onDrop),o(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;G=j(z),Y=j(z,n.draggable),N("drop",this,{evt:e}),H=z&&z.parentNode,G=j(z),Y=j(z,n.draggable),K.eventCanceled||(Ce=Me=Pe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qe(this.cloneId),qe(this._dragStartId),this.nativeDraggable&&(o(document,"drop",this),o(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),w&&L(document.body,"user-select",""),L(z,"transform",""),e&&(Ee&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),q&&q.parentNode&&q.parentNode.removeChild(q),(V===H||X&&"clone"!==X.lastPutMode)&&c&&c.parentNode&&c.parentNode.removeChild(c),z)&&(this.nativeDraggable&&o(z,"dragend",this),Ue(z),z.style["will-change"]="",Ee&&!Pe&&A(z,(X||this).options.ghostClass,!1),A(z,this.options.chosenClass,!1),B({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:e}),V!==H?(0<=G&&(B({rootEl:H,name:"add",toEl:H,fromEl:V,originalEvent:e}),B({sortable:this,name:"remove",toEl:H,originalEvent:e}),B({rootEl:H,name:"sort",toEl:H,fromEl:V,originalEvent:e}),B({sortable:this,name:"sort",toEl:H,originalEvent:e})),X&&X.save()):G!==f&&0<=G&&(B({sortable:this,name:"update",toEl:H,originalEvent:e}),B({sortable:this,name:"sort",toEl:H,originalEvent:e})),K.active)&&(null!=G&&-1!==G||(G=f,Y=ge),B({sortable:this,name:"end",toEl:H,originalEvent:e}),this.save())),this._nulling()},_nulling:function(){N("nulling",this),V=z=H=q=W=c=me=r=u=d=Ee=G=Y=f=ge=Se=xe=X=ve=K.dragged=K.ghost=K.clone=K.active=null,Le.forEach(function(e){e.checked=!0}),Le.length=ye=_e=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":var t;z&&(this._onDragOver(e),(t=e).dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable)&&t.preventDefault();break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)O(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||function(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;for(;n--;)i+=t.charCodeAt(n);return i.toString(36)}(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(e,t){t=i.children[t];O(t,this.options.draggable,i,!1)&&(n[e]=t)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return O(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=se.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&de(n)},destroy:function(){N("destroy",this);var e=this.el;e[F]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),o(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ie.splice(Ie.indexOf(this.el),1),this.el=e=null},_hideClone:function(){r||(N("hideClone",this),K.eventCanceled)||(L(c,"display","none"),this.options.removeCloneOnHide&&c.parentNode&&c.parentNode.removeChild(c),r=!0)},_showClone:function(e){"clone"!==e.lastPutMode?this._hideClone():r&&(N("showClone",this),K.eventCanceled||(z.parentNode!=V||this.options.group.revertClone?W?V.insertBefore(c,W):V.appendChild(c):V.insertBefore(c,z),this.options.group.revertClone&&this.animate(z,c),L(c,"display",""),r=!1))}},De&&l(document,"touchmove",function(e){(K.active||Pe)&&e.cancelable&&e.preventDefault()}),K.utils={on:l,off:o,css:L,find:Z,is:function(e,t){return!!O(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:ne,closest:O,toggleClass:A,clone:re,index:j,nextTick:He,cancelNextTick:qe,detectDirection:ue,getChild:R},K.get=function(e){return e[F]},K.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(t=t[0].constructor===Array?t[0]:t).forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(K.utils=M(M({},K.utils),e.utils)),se.mount(e)})},K.create=function(e,t){return new K(e,t)};var Ve,We,Ge,Ye,Xe,Ke,Q=[],Qe=!(K.version="1.14.0");function Ze(){Q.forEach(function(e){clearInterval(e.pid)}),Q=[]}function Je(){clearInterval(Ke)}function $e(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,e=e.unhideGhostForTarget;t&&(r=n||r,a(),a=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,t=document.elementFromPoint(a.clientX,a.clientY),e(),r)&&!r.el.contains(t)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}var et=ne(function(n,e,t,i){if(e.scroll){var r,o=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=I(),u=!1,d=0,p=Ve=We!==t&&(We=t,Ze(),Ve=e.scroll,r=e.scrollFn,!0===Ve)?C(t,!0):Ve;do{var h=p,f=D(h),m=f.top,g=f.bottom,v=f.left,y=f.right,_=f.width,f=f.height,b=void 0,w=void 0,E=h.scrollWidth,S=h.scrollHeight,x=L(h),T=h.scrollLeft,P=h.scrollTop,w=h===c?(b=_<E&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),f<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(b=_<E&&("auto"===x.overflowX||"scroll"===x.overflowX),f<S&&("auto"===x.overflowY||"scroll"===x.overflowY)),x=b&&(Math.abs(y-o)<=s&&T+_<E)-(Math.abs(v-o)<=s&&!!T),b=w&&(Math.abs(g-a)<=s&&P+f<S)-(Math.abs(m-a)<=s&&!!P);if(!Q[d])for(var k=0;k<=d;k++)Q[k]||(Q[k]={});Q[d].vx==x&&Q[d].vy==b&&Q[d].el===h||(Q[d].el=h,Q[d].vx=x,Q[d].vy=b,clearInterval(Q[d].pid),0==x&&0==b)||(u=!0,Q[d].pid=setInterval(function(){i&&0===this.layer&&K.active._onTouchMove(Xe);var e=Q[this.layer].vy?Q[this.layer].vy*l:0,t=Q[this.layer].vx?Q[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(K.dragged.parentNode[F],t,e,n,Xe,Q[this.layer].el)||ie(Q[this.layer].el,t,e)}.bind({layer:d}),24)),d++}while(e.bubbleScroll&&p!==c&&(p=C(p,!1)));Qe=u}},30);function tt(){}function nt(){}tt.prototype={startIndex:null,dragStart:function(e){e=e.oldDraggableIndex;this.startIndex=e},onSpill:function(e){var t=e.dragEl,e=e.putSortable,n=(this.sortable.captureAnimationState(),e&&e.captureAnimationState(),R(this.sortable.el,this.startIndex,this.options));n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),e&&e.animateAll()},drop:$e},a(tt,{pluginName:"revertOnSpill"}),nt.prototype={onSpill:function(e){var t=e.dragEl,e=e.putSortable||this.sortable;e.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),e.animateAll()},drop:$e},a(nt,{pluginName:"removeOnSpill"});K.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){e=e.originalEvent;this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):this.options.supportPointer?l(document,"pointermove",this._handleFallbackAutoScroll):e.touches?l(document,"touchmove",this._handleFallbackAutoScroll):l(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){e=e.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?o(document,"dragover",this._handleAutoScroll):(o(document,"pointermove",this._handleFallbackAutoScroll),o(document,"touchmove",this._handleFallbackAutoScroll),o(document,"mousemove",this._handleFallbackAutoScroll)),Je(),Ze(),clearTimeout(P),P=void 0},nulling:function(){Xe=We=Ve=Qe=Ke=Ge=Ye=null,Q.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(t,n){var i,r=this,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,e=document.elementFromPoint(o,a);Xe=t,n||this.options.forceAutoScrollFallback||b||_||w?(et(t,this.options,e,n),i=C(e,!0),!Qe||Ke&&o===Ge&&a===Ye||(Ke&&Je(),Ke=setInterval(function(){var e=C(document.elementFromPoint(o,a),!0);e!==i&&(i=e,Ze()),et(t,r.options,e,n)},10),Ge=o,Ye=a)):this.options.bubbleScroll&&C(e,!0)!==I()?et(t,this.options,C(e,!1),!1):Ze()}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),K.mount(nt,tt),n.a=K},,function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.IlovepdfTool=void 0,n(147)),s=n(89),a=(r=a.IloveTool,o(l,r),l.prototype.getOptionsManager=function(){return new s.OptionsManager(this.getToolOptions())},l.prototype.getToolOptions=function(){return{processManager:this.processManager,tool:this.tool,subtool:this.subtool,toolText:this.toolText,startServer:this.startServer,workerServer:this.workerServer,defaultOptions:this.defaultOptions,files:this.files,screenSize:this.screenSize,pdfViewer:this.pdfViewer,config:this.config,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,level:this.level,levelTemp:this.levelTemp,userToken:this.userToken}},l);function l(e){e=r.call(this,e=void 0===e?{}:e)||this;return e.configData=n(117),window.configData=e.configData,e.init(),e}t.IlovepdfTool=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryBuilder=void 0;var d=n(82);function i(e,t){this.htmlTemplate=e,this.data=t}i.prototype.render=function(e,t){return void 0===t&&(t=null),this.domRoot=e,this.summaryWarningTextDomRoot=t,this.fillSummaryTables(),this},i.prototype.setTexts=function(e){return this.texts=e,this},i.prototype.fillSummaryTables=function(){var e,t=this.domRoot,n=this.data,i=n.summary,n=n.text;if(n&&"string"==typeof n&&0<n.length){if(!this.summaryWarningTextDomRoot)throw"'summaryWarningTextDomRoot' not present";this.summaryWarningTextDomRoot.innerHTML=n,this.summaryWarningTextDomRoot.style.display=""}else this.summaryWarningTextDomRoot&&(this.summaryWarningTextDomRoot.style.display="none");i.current&&(e=this.buildSummaryTable("summary--current",this.texts.current,i.current),t.appendChild(e)),i.new&&(e=this.buildSummaryTable("summary--new",this.texts.new,i.new),t.appendChild(e)),i.next&&(e=this.buildSummaryTable("summary--next",this.texts.next,i.next),t.appendChild(e))},i.prototype.buildSummaryTable=function(e,t,n){for(var i=d.Tools.createHTMLFromText(this.htmlTemplate),r=(i.classList.add(e),i.querySelector(".summary__title").innerHTML=t,i.querySelector(".summary__items")),o=i.querySelector(".summary__total"),a=0;a<n.length;a++){var s,l,c,u=n[a];u.total?(o.classList.add("summary__total--visible"),i.querySelector(".summary__total__label").innerHTML=u.text,i.querySelector(".summary__total__value").innerHTML=u.price):(s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),s.classList.add("summary__item"),l.classList.add("summary__item__text"),c.classList.add("summary__item__price"),s.appendChild(l),s.appendChild(c),l.innerHTML=u.text,c.innerHTML=u.price,r.appendChild(s))}return i},t.SummaryBuilder=i},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=void 0,i.make=function(e){return'\n    <div class="signature__firm__by">\n    <svg xmlns="http://www.w3.org/2000/svg" width="7" height="10" fill="#0062c5" fill-rule="nonzero"><path d="M.13 5.068L0 9.713c-.001.04.03.07.07.072.026.001.05-.013.063-.035l1.494-2.57c-.28-.263-.357-.692-.156-1.038.235-.405.757-.543 1.165-.3s.548.752.313 1.157a.85.85 0 0 1-.982.385l-1.5 2.563a.07.07 0 0 0 .026.096c.022.013.05.013.072-.001l3.977-2.427a.42.42 0 0 0 .2-.317l.3-2.858a.42.42 0 0 0-.21-.407L3.1 3.034c-.145-.083-.325-.074-.46.023L.307 4.738a.42.42 0 0 0-.176.33zm5.276-1.08L2.864 2.53c-.135-.078-.166-.277-.068-.445l.575-1c.098-.168.287-.24.422-.164L6.335 2.4c.135.078.166.277.068.445l-.575 1c-.098.168-.287.24-.422.164z"/></svg>\n        SIGNED VIA ILOVEPDF\n        </div>\n        <div class="signature__firm__code">\n            '+(e=null==(e=void 0===e?null:e)?i.uuid():e)+"\n            </div>\n    "},i.uuidv4=function(){return"object"!=typeof crypto?"1111-1111-1111-1111":([1e7]+(-1e3).toString()+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},i.uuid=function(){return i.uuidv4()},t.Frame=i},function(e,t,n){"use strict";!function(p){Object.defineProperty(t,"__esModule",{value:!0}),t.PdfrenderView=void 0;var h=n(191),f=n(48);function e(e){void 0===e&&(e={}),Object.assign(this,e)}e.prototype.fileInfo=function(e,t){this.workerServer},e.prototype.renderPage=function(e,t,n,i,r,o,a,s){var l,c,u=this,d=(void 0===r&&(r=150),void 0===o&&(o=null),void 0===a&&(a={}),void 0===s&&(s=2),this.workerServer+"/v1/pdfrender/"+e+"/"+t+"/"+n+"/"+r);null!=o&&(d+="/1/"+o),d+="?token="+window.ilovepdfConfig.token,"resetForms"in a&&(l=!0===a.resetForms?1:0,d+="&reset_forms="+l),(c=p("string"==typeof i?"#"+i:c=i)).attr("src",d),c.attr("data-dpi",r),h.ImageHelper.test(d).then(function(){},function(){c.attr("src","data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22/%3E"),0<s?window.setTimeout(function(){f.Api.ping(d,!0).then(function(){s--,u.renderPage(e,t,n,i,r,o,a,s)},function(){})},500):c.attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjeJSQ8B8ABmwCooj3XREAAAAASUVORK5CYII=")})},t.PdfrenderView=e}.call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;var r=n(186);function i(){this._eventEmitterCallbacks={}}i.prototype.addEventListener=function(e,t,n){(n=void 0===n?!1:n)?(e in this._eventEmitterCallbacks||(this._eventEmitterCallbacks[e]=[]),this._eventEmitterCallbacks[e].push(t)):document.addEventListener(e,function(e){e=e.detail;t(e)})},i.prototype.dispatchEvent=function(e,t,n){void 0===n&&(n=!0);var i=new r.IloveEventBase(e,t);i.name in this._eventEmitterCallbacks&&this._eventEmitterCallbacks[i.name].forEach(function(e){return e(i)}),n&&(t=new CustomEvent(e,{detail:i}),document.dispatchEvent(t))},t.EventManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IloveEventBase=void 0,t.IloveEventBase=function(e,t){this.name=e,this.detail=t}},function(e,t,n){"use strict";function i(e,t,n){this.x=e,this.y=t,this.time=n||Date.now()}Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0,i.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},i.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},i.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},t.Point=i},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementFile=void 0,n(211)),s=n(37),n=(r=a.SignerElementUploaderBase,o(l,r),l.prototype.init=function(){r.prototype.init.call(this),this.initUploaderActions()},l.prototype.isValid=function(){return this.haveFilesToUpload||""!=this.getServiceFile()||""!=this.getApiFile()},l.prototype.validate=function(){var e=document.getElementById(this.uploaderContainerId),t=e.querySelector(".signature__upload__area"),n=this.isValid();return n||window.setTimeout(function(){e.classList.add("shake"),t.classList.add("error")},500),n},l.prototype.cleanErrors=function(){var e=document.getElementById(this.uploaderContainerId),t=e.querySelector(".signature__upload__area");e.classList.remove("error"),e.classList.remove("shake"),t.classList.remove("error"),e.removeAttribute("data-title"),e.removeAttribute("title"),s.Tooltip.disable(e)},l.prototype.fileUploaded=function(e,t){r.prototype.fileUploaded.call(this,e,t);t=this.files.getFile(e);t&&this.previewFile(t)},l.prototype.reset=function(){var e;(this.fileBase64Temp=null)!=(e=this.files)&&e.removeAllFiles(!0),this.applyModel()},Object.defineProperty(l.prototype,"haveFilesToUpload",{get:function(){var e;return 0<parseInt(null==(e=this.files)?void 0:e.count().toString())},enumerable:!1,configurable:!0}),l);function l(e){e=r.call(this,{elementMode:"image",elementType:e.elementType,api:e.api,signatureModel:e.signatureModel})||this;return e.haveDrop=!0,e}t.SignerElementFile=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementBase=void 0;var i=n(81),r=n(37),o=n(8);function a(e){this.required=!1,this.disabled=!1,this.api=e.api,this.signatureModel=e.signatureModel,this.elementMode=e.elementMode}Object.defineProperty(a.prototype,"rootElement",{get:function(){return document.getElementById(this.elementType+"Tab")},enumerable:!1,configurable:!0}),a.prototype.init=function(){1!=this.started&&(this.elementModeCurrent=this.elementMode,this.started=!0,this.initModeSelector())},a.prototype.initModeSelector=function(){var n=this,i=this.rootElement.querySelectorAll(".subtab-nav li");i.forEach(function(t){t.addEventListener("click",function(e){t.classList.contains("disabled")?e.preventDefault():(i.forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),n.showModeElement())})})},Object.defineProperty(a.prototype,"currentActiveMode",{get:function(){return this.activeSubtab.getAttribute("data-mode")},enumerable:!1,configurable:!0}),a.prototype.showElement=function(){this.tab.classList.remove("hidden"),this.showModeElement()},a.prototype.showModeElement=function(){this.elementModeCurrent=this.currentActiveMode,this.activateSubtab(this.elementModeCurrent)},a.prototype.isElementTabActive=function(){return document.getElementById(this.elementType+"-tab").classList.contains("active")},a.prototype.getTabModeElement=function(e){return e=(e=void 0===e?null:e)||this.elementMode,this.rootElement.querySelector('.subtab-nav li[data-mode="'+e+'"]')},a.prototype.isTabModeEnabled=function(e){return!this.getTabModeElement(e=void 0===e?null:e).classList.contains("disabled")},Object.defineProperty(a.prototype,"tab",{get:function(){return document.getElementById(this.elementType+"-tab")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeSubtab",{get:function(){var e=this.rootElement.querySelector(".subtab-nav li.active");return e||(e=this.signatureModel[this.elementType+"Mode"]?this.rootElement.querySelector('[data-mode="'+this.signatureModel[this.elementType+"Mode"]+'"]'):this.rootElement.querySelector(".subtab-nav li:not(.disabled)")).classList.add("active"),e},enumerable:!1,configurable:!0}),a.prototype.activateSubtab=function(e){var t;this.signatureModel[this.elementType+"Mode"]&&!(t=this.rootElement.querySelector('[data-mode="'+e+'"]')).classList.contains("disabled")&&(this.rootElement.querySelectorAll(".subtab-nav li").forEach(function(e){e.classList.remove("active")}),t.classList.add("active")),this.showActiveSubtabContent(e)},a.prototype.activateElementModeSubtab=function(){this.activateSubtab(this.elementMode)},a.prototype.showActiveSubtabContent=function(t){var n=this;this.rootElement.querySelectorAll(".subtab-content").forEach(function(e){e.id==n.elementType+i.TextHelper.ucFirst(t)?e.classList.add("active"):e.classList.remove("active")}),window.setTimeout(function(){n.initActiveSubtab(t)},800)},a.prototype.setOnlyMode=function(t){return this.elementModeCurrent=t,this.elementMode=t,this.subTabs.forEach(function(e){t!==e.getAttribute("data-mode")&&(e.classList.add("disabled"),e.classList.remove("active"),r.Tooltip.setContent(e,o.Lang.t("signOptionDisabled")))}),this.activeSubtab},a.prototype.setStatus=function(e){1==e?this.enable():this.disable()},a.prototype.setRequired=function(e){this.required=e},a.prototype.disable=function(){var e;this.disabled=!0,this.signatureModel[this.elementType+"Disabled"]=!0,this.tab.classList.add("disabled"),this.tab.style.display="none",this.tab.classList.contains("active")&&((e=this.tab.nextElementSibling)?e.click():(e=this.tab.previousElementSibling)&&e.click())},a.prototype.enable=function(){this.disabled=!1,this.tab.classList.remove("disabled"),this.tab.style.display="block"},a.prototype.checkIsRequired=function(){var e;return 1==this.required||!!(e=document.getElementById("addElement"+i.TextHelper.ucFirst(this.elementType)))&&!!(e=e.querySelector(".sign__draggable__count"))&&!isNaN(parseInt(e.innerHTML))},Object.defineProperty(a.prototype,"subTabs",{get:function(){return this.rootElement.querySelectorAll("[data-mode]")},enumerable:!1,configurable:!0}),t.SignerElementBase=a},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0,i.set=function(e,t,n){var i=0,n=(0!=(n=void 0===n?60:n)&&(i=(new Date).getTime()+60*n*1e3),{value:JSON.stringify(t),timestamp:i});try{localStorage.setItem(e,JSON.stringify(n))}catch(e){}return t},i.get=function(e,t){void 0===t&&(t=null);var n=null;try{n=JSON.parse(localStorage.getItem(e))}catch(e){}return null==n?t:0==(0==n.timestamp||(new Date).getTime()<n.timestamp)?(localStorage.removeItem(e),t):JSON.parse(n.value)},i.touch=function(e,t){var t=60*(t=void 0===t?60:t)*1e3,n=null;try{n=JSON.parse(localStorage.getItem(e))}catch(e){return n}return 1==(new Date).getTime()<n.timestamp&&(n.timestamp=(new Date).getTime()+t,localStorage.setItem(e,JSON.stringify(n))),n},i.check=function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(e){}return null!=t&&(0==(t=(new Date).getTime()<t.timestamp)&&localStorage.removeItem(e),t)},i.remove=function(e){try{localStorage.removeItem(e)}catch(e){}},i.cleanSign=function(){try{localStorage.removeItem("sign.task"),localStorage.removeItem("sign.mode"),localStorage.removeItem("sign.files"),localStorage.removeItem("sign.receivers"),localStorage.removeItem("sign.signature"),localStorage.removeItem("sign.elements")}catch(e){}},t.Storage=i},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageHelper=void 0,i.test=function(i,r,o){return void 0===r&&(r=null),void 0===o&&(o=null),new Promise(function(e,t){var n=new Image;n.addEventListener("load",function(){r&&"function"==typeof r&&r();e()}),n.addEventListener("error",function(){o&&"function"==typeof o&&o();t()}),n.src=i})},t.ImageHelper=i},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),i.setCaretToEnd=function(e){var t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n.removeAllRanges(),n.addRange(t)},i.restrictInputToByteSize=function(e,t,n){var i=e.value;t<this.getBytesFromString(i)&&(e.value=this.restrictBytesOnString(i,t)),n&&(n.innerHTML=this.getBytesFromString(e.value)+"/"+t)},i.restrictHtmlElByteSize=function(e,t,n){var i=e.innerText;t<this.getBytesFromString(i)&&(i=this.restrictBytesOnString(e.innerText,t),e.innerText=i),this.setCaretToEnd(e),n&&(n.innerHTML=this.getBytesFromString(i)+"/"+t)},i.restrictBytesOnString=function(e,n){var i=this,r="";return this.getCharactersArray(e).every(function(e){var t=i.getBytesFromString(r)+i.getBytesFromString(e);return!(n<t||(r+=e,0))}),r},i.getCharactersArray=function(e){return Array.from(e)},i.getBytesFromString=function(e){return new Blob([e]).size},t.default=i},function(e,a,n){"use strict";!function(o){Object.defineProperty(a,"__esModule",{value:!0}),a.RECEIVER_COLORS_VALUES=a.ReceiverModel=void 0;var t=n(18);function e(e){this.id=(e=void 0===e?{}:e).id||t.Tools.randomId(),this.email=e.email||"",this.name=e.name||"",this.num=e.num||1,this.type=e.type||"signer",this.phone=e.phone||"",this.password=e.password||"",this.allowCostumize=e.allowCostumize||"all",this.num=e.num||o(".receiver-list__item").length,window.colors=a.RECEIVER_COLORS_VALUES,this.colorClass=e.colorClass||this.getNextColor()}e.prototype.isSmsValidationEnabled=function(){return this.phone&&0<this.phone.length},e.prototype.getNextColor=function(e){void 0===e&&(e=0);for(var t=null,n=0,i=a.RECEIVER_COLORS_VALUES;n<i.length;n++){var r=i[n];if(o(".receiver__count."+r).length==e){t=r;break}}return t=null==t?this.getNextColor(++e):t},e.prototype.cleanData=function(){this.name="",this.email="",this.password="",this.phone="",this.type="signer",this.allowCostumize="all"},e.prototype.getData=function(){var e={id:this.id,name:this.name,email:this.email,type:this.type,files:[],force_signature_type:this.allowCostumize,letter_color:this.colorClass.replace("file","")};return""!=this.password&&(e.access_code=this.password),""!=this.phone&&(e.phone=this.phone),e},a.ReceiverModel=e,a.RECEIVER_COLORS_VALUES=["fileA","fileB","fileC","fileD","fileE","fileF","fileG","fileH","fileI","fileJ"]}.call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasHelper=void 0;var i=n(88);function o(){}o.makeImgFromText=function(e,t,n){void 0===n&&(n="black");var i=document.createElement("canvas"),r=(i.id="textCanvas",i.width=1824,i.height=300,i.style.zIndex="0",i.style.position="absolute",i.getContext("2d"));return r.font='normal 68px "'+t+'"',r.fillStyle=n,r.textAlign="center",r.fillText(e,i.width/2,i.height/2),o.trimCanvas(r),i},o.forcePrerenderFonts=function(e,t){for(var n in(t=void 0===t?null:t)&&i.lazyloadCss(t),e)o.forcePrerenderFont(e[n])},o.forcePrerenderFont=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.left="-999999px",t.style.width="100px",t.style.fontFamily=e,t.innerHTML="force text",document.body.appendChild(t)},o.trimCanvas=function(t){try{for(var e,n=t.canvas,i=n.width,r=n.height,o={x:[],y:[]},a=t.getImageData(0,0,n.width,n.height),s=void 0,l=void 0,l=0;l<r;l++)for(s=0;s<i;s++)e=4*(l*i+s),0<a.data[3+e]&&(o.x.push(s),o.y.push(l));o.x.sort(function(e,t){return e-t}),o.y.sort(function(e,t){return e-t});var c=o.x.length-1,i=1+o.x[c]-o.x[0],r=1+o.y[c]-o.y[0],u=t.getImageData(o.x[0],o.y[0],i,r);return n.width=i,n.height=r,t.putImageData(u,0,0),t}catch(e){return t}},o.canvasToImgUrl=function(e){return e.toDataURL("image/png").toString()},o.textToImage=function(e,t,n){return o.canvasToImgUrl(o.makeImgFromText(e,t,n=void 0===n?"black":n))},t.CanvasHelper=o},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.PackagesContext=void 0,n(46)),s=n(230),l=n(232),c=n(233),u=n(205),d=n(234),p=n(172),n=(r=a.ContextBase,o(h,r),h.prototype.getInitialState=function(){return this.isLoggedIn()?this._getInitialState():new u.AuthState},h.prototype._getInitialState=function(){if(1==this.isTeamManaged())return new d.TeamManagedState;switch(this.requestedAction){case"selectPackageCerts":return new s.SelectPackageCertsState;case"selectPackageSignatures":return new l.SelectPackageSignaturesState;case"selectPackageSms":return new c.SelectPackageSmsState;case"teamManaged":return new d.TeamManagedState;case"summary":return new p.SummaryState;default:throw"Requested Action '"+this.requestedAction+"' is not handled"}throw"Not implemented 'initialState' when userType is "+this.userType},h);function h(e){var t=r.call(this,e)||this;return t.contentName="PackagesContext",t.requestedAction=e.requestedAction,t.neededNumberOfPkgItems=e.neededNumberOfPkgItems,t.creditType=e.creditType,t}t.PackagesContext=n},function(e,d,p){"use strict";!function(n){var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(d,"__esModule",{value:!0}),d.SignatureDialogs=void 0,e(p(62))),r=p(195),t=p(72),o=e(p(263)),a=p(201),s=p(237),l=p(60),c=p(15);function u(){}u.auth=function(e){return n(".modal:visible").removeAttr("tabindex"),s.DialogCollection.auth(e)},u.updateSignaturesSubscription=function(e,t){return void 0===t&&(t=!0),n(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"updateSignaturesSubscription",canBeClosedByUser:t}).setContentBuilder(function(){return new a.SubscriptionContext({requestedAction:"selectSignatures",neededSignatures:e})})},u.buySignaturesPackages=function(e,t){return void 0===t&&(t=!0),n(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"buySignaturesPackages",canBeClosedByUser:t}).setContentBuilder(function(){return new r.PackagesContext({requestedAction:"selectPackageSignatures",neededNumberOfPkgItems:e,creditType:"signature"})})},u.becomePremium=function(e){return void 0===e&&(e="sign"),n(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"becomePremium"}).setContentBuilder(function(){return new t.PremiumContext({tool:e,triggerReason:l.REASON.ERROR_FEATURE,limits:null})})},u.templateCannotSave=function(){return n(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"cannnotSaveTemplate",canBeClosedByUser:!0}).setContentBuilder(function(){return new o.default({requestedAction:"CannotSave"})})},u.buySmsPackage=function(e,t){return void 0===t&&(t=!0),n(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"smsPackage",canBeClosedByUser:t}).setContentBuilder(function(){return new r.PackagesContext({requestedAction:"selectPackageSms",neededNumberOfPkgItems:e,creditType:"sms"})})},u.teamMemberManaged=function(e,t){return void 0===t&&(t=!0),n(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"teamManaged",canBeClosedByUser:t}).setContentBuilder(function(){return new r.PackagesContext({requestedAction:"teamManaged",neededNumberOfPkgItems:null,creditType:e})})},u.getSuitableDialogToObtainSignatures=function(e,t){var n=c.UserModel.isPremium(),i=n?null==(i=c.UserModel.get())?void 0:i.current_subscription:null;return(n?1==c.UserModel.isTeamManaged()?this.teamMemberManaged("signature"):null==i?this.becomePremium():i.signatures>=t?this.buySignaturesPackages(e):this.updateSignaturesSubscription(e):this.becomePremium()).show()},u.getSuitableDialogToObtainSmsPackage=function(e,t){return void 0===t&&(t=!0),u.buySmsPackage(e).show()},d.SignatureDialogs=u}.call(this,p(1))},function(e,n,i){"use strict";!function(r){Object.defineProperty(n,"__esModule",{value:!0}),n.ToolbarPaginate=void 0;var t=i(170),o=i(18);function e(e){void 0===e&&(e={}),Object.assign(this,e),t.Toolbar.refresh(),this.initToolbarActions()}e.prototype.refreshToolbar=function(e){void 0===e&&(e=!0),r("#editor_file_select").html(""),this.files.files.forEach(function(e){r("#editor_file_select").append('<option value="'+e.id+'" selected="selected">'+e.name+"</option>")});var t=r(".preview__page.active"),n=(0==t.length&&(t=r(".preview__page").first()),this.files.getFile(t.attr("data-file")));n&&(this.currentFile=n.id,this.currentFilePages=parseInt(n.pages),this.currentPage=parseInt(t.attr("data-page")),this.updateValues(),e)&&this.showCurrent()},e.prototype.initToolbarActions=function(){var n=this,i=(r(".next").on("click",function(){r("#workArea").is(":animated")||(n.currentPage<n.currentFilePages&&n.currentPage++,n.updateValues(),n.showCurrent())}),r(".prev").on("click",function(){r("#workArea").is(":animated")||(1<n.currentPage&&n.currentPage--,n.updateValues(),n.showCurrent())}),null);r("#editor_page").on("focus",function(){i=parseInt(r("#editor_page").val().toString())}).on("change",function(e){var t=parseInt(r("#editor_page").val().toString());isNaN(t)?r("#editor_page").val(i):(t=o.Tools.keepInNumericBounds(1,n.currentFilePages,t),r("#editor_page").val(t),n.currentPage=t,n.showCurrent())}),r("#editor_file_select").on("change",function(){var e=n.files.getFile(r("#editor_file_select").val().toString());n.currentPage=1,n.currentFilePages=parseInt(e.pages),n.currentFile=e.id,n.updateValues(),n.showCurrent()})},e.prototype.updateValues=function(){r("#editor_page").val(this.currentPage),r("#editor_file_select").val(this.currentFile),r("#editor_pages").html(this.currentFilePages.toString())},e.prototype.update=function(e,t){this.currentFile=e,this.currentPage=t,this.currentFilePages=parseInt(this.files.getFile(e).pages),this.updateValues()},e.prototype.showCurrent=function(){var e=r('.editor__page[data-file="'+this.currentFile+'"][data-page="'+this.currentPage+'"]');e&&e.position()&&r("#workArea").animate({scrollTop:e.position().top},500)},n.ToolbarPaginate=e}.call(this,i(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(171),l=n(173),i=n(75),s=n(37),c=n(98);function o(e){this.toolbarPaginate=e,this.init()}o.prototype.init=function(){var e,t=this;this.workarea.addEventListener("scroll",function(){e&&window.clearTimeout(e),e=window.setTimeout(function(){t.setViewportPageActive()},200)}),this.onWindowResize(),this.listenRefreshBullets()},o.prototype.setElements=function(e){this.elements=e},o.prototype.setSelector=function(e){this.elementsSelector=e},o.prototype.listenRefreshBullets=function(){var a=this;i.SignatureEventManager.addEventListener("signature:preview_manager:refresh_bullets",function(e){var o=e.detail.fileId,e=e.detail.page;a.getPreviewPages(o,e).forEach(function(e){var t=e.querySelector(".preview__bullet"),n=parseInt(e.dataset.page),i=l.EditorPage.getAllSignElements(o,n).length,r=c.Lang.t("pageElements",{n:i});i?t?(t.innerHTML=i.toString(),t.style.display=null,s.Tooltip.setContent(t,r)):(n=a.createDefaultPreviewBulletElement(o,n,i),e.appendChild(n),s.Tooltip.setContent(n,r)):t&&t.remove()})})},o.prototype.onWindowResize=function(){var e,t=this;window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(t.adjustPages.bind(t),200)})},o.prototype.adjustPages=function(){this.pagesResize(),this.pagesResized()},o.prototype.pagesResize=function(){var r=this;this.allEditorPages.forEach(function(e){var t=e.getBoundingClientRect().width,e=e.querySelector("img"),n=e.getBoundingClientRect(),i=n.width,n=n.height;r.resized=t/i,e.style.width=i*r.resized+"px",e.style.height=n*r.resized+"px"})},o.prototype.pagesResized=function(){var e,t=this;null!=(e=null==(e=this.elements)?void 0:e.all())&&e.forEach(function(e){e.applyZoom(null,t.resized),e.zoomPosition(null,t.resized)}),null!=(e=this.elementsSelector)&&e.restart()},o.prototype.setViewportPageActive=function(){var o,e,a=0,t=this.workarea,s=(t.scrollTop,t.getBoundingClientRect().height);this.allEditorPages.forEach(function(e){var t,n=e.getBoundingClientRect(),n={top:n.top+window.scrollY,left:n.left+window.scrollX}.top,i=getComputedStyle(e),i=e.offsetHeight-parseInt(i.paddingTop)-parseInt(i.paddingBottom)-parseInt(i.borderTopWidth)-parseInt(i.borderBottomWidth),r=n+i;n<s&&0<r&&(n<(t=0)&&s<r?t=s:n<0&&0<r&&r<s?t=r:n<s&&s<r?t=s-n:0<n&&n<s&&r<s&&(t=i),0<t)&&a<t&&(a=t,o=e)}),null!=o&&(e=(t=l.EditorPage.parsePageInfoFromHtmlEl(o)).fileId,t=t.page,this.setActiveFilePage(e,t),this.toolbarPaginate.update(e,t),r.ScrollHelper.scrollToPreview(e,t))},o.prototype.setActiveFilePage=function(e,t){var n,t=this.getPreviewPage(e,t),e=this.getPreviewFile(e);this.allPreviewPages.forEach(function(e){e.classList.remove("active")}),null!=(n=this.allPreviewFiles)&&n.forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),null!=e&&e.classList.add("active")},o.prototype.getPreviewPage=function(e,t){return document.querySelector(this.getPreviewPagesSelector(e,t))},o.prototype.getPreviewPages=function(e,t){return document.querySelectorAll(this.getPreviewPagesSelector(e,t))},o.prototype.getPreviewFile=function(e){return document.querySelector('.preview__file[data-file="'+e+'"]')},o.prototype.getPreviewPagesSelector=function(e,t){return t?'.preview__page[data-file="'+e+'"][data-page="'+t+'"]':'.preview__page[data-file="'+e+'"]'},Object.defineProperty(o.prototype,"allEditorPages",{get:function(){return document.querySelectorAll(".editor__page")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"allPreviewPages",{get:function(){return document.querySelectorAll(".preview__page")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"allPreviewFiles",{get:function(){return document.querySelectorAll(".preview__file")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"workarea",{get:function(){return document.querySelector(".tool__workarea")},enumerable:!1,configurable:!0}),o.prototype.createDefaultPreviewBulletElement=function(t,n,e){void 0===e&&(e=1);var i=document.createElement("div");return i.classList.add("preview__bullet"),i.classList.add("tooltip"),i.classList.add("tooltip--top"),i.innerHTML=e.toString(),i.addEventListener("click",function(e){e.preventDefault(),r.ScrollHelper.scrollToFirstItem(t,n)}),i},t.default=o},function(e,t,i){"use strict";!function(r){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementHelper=void 0;var o=i(173);function n(){}n.getSize=function(e){e=r("#"+e);return{w:e.innerWidth(),h:e.innerHeight()}},n.getPosition=function(e){var e=r("#"+e),t=parseInt(e.css("top")),e=parseInt(e.css("left"));return 1==isNaN(t)&&(t=0),{x:e=1==isNaN(e)?0:e,y:t}},n.sanitizePosition=function(e){return{x:Math.abs(Math.max(e.x,0)),y:Math.abs(Math.max(e.y,0))}},n.getCurrentFile=function(){return 0==r(".preview__page.active").length&&r(".preview__page").first().addClass("active"),r(".preview__page.active").attr("data-file")},n.getCurrentPage=function(){return 0==r(".preview__page.active").length&&r(".preview__page").first().addClass("active"),parseInt(r(".preview__page.active").attr("data-page"))},n.getNearestElementClass=function(e,t,n){var e=Array.from(document.getElementsByClassName(e)),i=e.map(function(e){e=e.getBoundingClientRect();return[e.x,e.y]}),r=[];return i.forEach(function(e){e=Math.hypot(e[0]-parseInt(t),e[1]-parseInt(n));r.push(e)}),e[r.indexOf(Math.min.apply(Math,r))]},n.getNearestElement=function(e,t,n){void 0===n&&(n=null);var i=t.map(function(e){e=e.getBoundingClientRect();return[e.x,e.y]}),r=e.getBoundingClientRect(),o=[],e=(i.forEach(function(e){("up"==n&&e[1]<parseInt(r.y)||"down"==n&&e[1]>parseInt(r.y)||null==n)&&(e=Math.hypot(e[0]-parseInt(r.x),e[1]-parseInt(r.y)),o.push(e))}),o.indexOf(Math.min.apply(Math,o)));return-1==e?null:t[e]},n.familyIsBefore=function(e,t){return 0!==r(e).nextAll().filter(t).length},n.familyIsAfter=function(e,t){return 0!==r(e).prevAll().filter(t).length},n.appendHtmlElementToPage=function(e,t,n,i){null!=(i=void 0===i?null:i)&&e.setAttribute("data-signer",i.id);i=o.EditorPage.getHtmlPageElement(t,n);i&&i.appendChild(e)},n.waitForFileRendered=function(){var i=2;return new Promise(function(e,t){var n=window.setInterval(function(){0<r(".editor__content .editor__page").length&&i<0&&(window.clearInterval(n),e()),i--},200)})},n.positionFromCenter=function(){return{x:r(window).scrollLeft()+r(window).width()/2,y:r(window).scrollTop()+r(window).height()/2}},n.insertPointFromPosition=function(e,t){return 1==(t=void 0===t?!1:t)?{file:n.getCurrentFile(),page:n.getCurrentPage(),x:e.x,y:e.y}:(t=document.elementFromPoint(e.x,e.y),{file:(t=0==(t=r(t).closest(".editor__page")).length?r(".editor__page").first():t).attr("data-file"),page:parseInt(t.attr("data-page")),x:t?e.x-t.offset().left:e.x,y:t?e.y-t.offset().top:e.y})},n.normalizeInsertPoint=function(e){var t=r('.editor__page[data-file="'+e.file+'"][data-page="'+e.page+'"]'),n=parseFloat(t.attr("data-width")),i=parseFloat(t.attr("data-height"));return e.x=t.width()*e.x/n,e.y=Math.abs(t.height()*e.y/i),e},n.normalizeElement=function(e,t,n){t=r('.editor__page[data-file="'+t+'"][data-page="'+n+'"]'),n=parseFloat(t.attr("data-width")),parseFloat(t.attr("data-height")),t=800/n;return e.size=e.size*t,e.frame_size&&(e.frame_size=e.frame_size*t),e.font_size&&(e.font_size=e.font_size*t),e},n.getRatio=function(e,t){e=r('.editor__page[data-file="'+e+'"][data-page="'+t+'"]'),t=parseFloat(e.attr("data-width"));parseFloat(e.attr("data-height"));return 800/t},n.checkCollision=function(e,t){e=document.getElementById(e).getBoundingClientRect(),t=document.getElementById(t).getBoundingClientRect();return e.x<t.x+t.width||e.x+e.width>t.x||e.y<t.y+t.height||e.y+e.height>t.y},n.pageRect=function(e,t){return r('.editor__page[data-file="'+e+'"][data-page="'+t+'"]')[0].getBoundingClientRect()},n.pagesFromRange=function(e){var e=e.split(","),i=[];return e.forEach(function(e){if(1==e.includes("-")){for(var t=e.split("-"),n=parseInt(t[0]);n<parseInt(t[1]);n++)i.push(n);i.push(t[1])}else i.push(e)}),i.join(",")},n.makeRange=function(e){var t,n=!1,i="",r=0,o=0;return e.split(",").sort(function(e,t){return parseInt(e.toString())-parseInt(t.toString())}).forEach(function(e){t=parseInt(e),0==n?(o=t,n=!0):t-1!=r&&(i=o==r?i+","+o:i+","+o+"-"+r,o=t),r=t}),i=(i=o==r?i+","+o:i+","+o+"-"+r).substr(1)},t.ElementHelper=n}.call(this,i(1))},,function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionContext=void 0,n(46)),s=n(209),l=n(221),c=n(224),u=n(176),d=n(225),n=(r=a.ContextBase,o(p,r),p.prototype.getInitialState=function(){return this.isLoggedIn()?this.calculateNextStateAfterAuth():new s.AuthState},p.prototype.calculateNextStateAfterAuth=function(){this.userType;if(1==this.isTeamManaged())return new d.TeamManagedState;switch(this.requestedAction){case"selectUsers":return new l.SelectUsersState;case"selectSignatures":return new c.SelectSignaturesState;case"summary":return new u.SummaryState;default:throw"Requested Action '"+this.requestedAction+"' is not handled"}return null},p);function p(e){var t=r.call(this,e)||this;return t.contentName="SubscriptionContext",t.paymentProviders=["stripe","paypal"],t.requestedAction=e.requestedAction,t.neededSignatures=e.neededSignatures,t.summaryParams={numUsers:void 0,numSignatures:void 0,paymentInterval:void 0,couponCode:void 0},t}t.SubscriptionContext=n},function(e,t,n){"use strict";function i(){var l=this;this.init=function(e){l.input=e,l.isRtl=document.body.classList.contains("rtl");var t=l.createBubbleElement();e.insertAdjacentElement("afterend",t),l.recalculatePosition(),e.addEventListener("input",l.recalculatePosition),window.addEventListener("resize",l.recalculatePosition),window.bubble=l},this.setText=function(e){l.bubble&&(l.bubble.innerHTML=e,l.recalculatePosition())},this.createBubbleElement=function(){var e=document.createElement("div");return(l.bubble=e).classList.add("payment-period__slider__element__bubble"),e},this.recalculatePosition=function(){var e,t=l.input,n=l.bubble,i=Number(t.value),r=t.offsetWidth,o=Number(t.getAttribute("min")),t=Number(t.getAttribute("max")),a=r/t,s=n.offsetWidth/2,o=(i-o)/(t-o)*(r-10-10)+10-s;o<0?(e=s-10-i*a,e+=(o=0)<i?4:2.5,n.style.setProperty("--left",1==l.isRtl?e+"px":"-"+e+"px")):r<o+2*s?(o=r-2*s,e=s-10+2.5,i!==t&&(e-=(t-i)*a-1),n.style.setProperty("--left",1==l.isRtl?"-"+e+"px":e+"px")):n.style.setProperty("--left","0px"),n.style[1==l.isRtl?"right":"left"]=o+"px"}}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.setEnabled=function(){this.bubble.classList.remove("disabled")},i.prototype.setDisabled=function(){this.bubble.classList.add("disabled")},t.default=i},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e){return"certificates"===e||"signatures"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.localeProduct=t.initials=t.fromRgbToHex=t.localePrice=t.localeDateTime=t.localeNumber=void 0,t.localeNumber=function(e){return(-1===navigator.language.toLowerCase().indexOf("es")?Intl.NumberFormat(navigator.languages):Intl.NumberFormat("de-DE")).format(e)},t.localeDateTime=function(e){return Intl.DateTimeFormat(navigator.languages,{dateStyle:"short"}).format(e)},t.localePrice=function(t,n){n={style:"currency",currency:n,currencyDisplay:"narrowSymbol",minimumFractionDigits:0};try{return(-1===navigator.language.toLowerCase().indexOf("es")?Intl.NumberFormat(navigator.languages,n):Intl.NumberFormat("de-DE",n)).format(t)}catch(e){return(-1===navigator.language.toLowerCase().indexOf("es")?Intl.NumberFormat(navigator.languages,i(i({},n),{currencyDisplay:"symbol"})):Intl.NumberFormat("de-DE",i(i({},n),{currencyDisplay:"symbol"}))).format(t)}},t.fromRgbToHex=function(e){var t=(e=e.split(" ").join("").split(","))[0].indexOf("("),t=e[0].substring(t+1),n=e[1],e=e[2].substr(0,e[2].length-1);return"#"+((1<<24)+(Number(t)<<16)+(Number(n)<<8)+Number(e)).toString(16).slice(1)},t.initials=function(e,t){return void 0===t&&(t=2),e.replace(/\s+/g," ").trim().split(" ").map(function(e){return e[0].toUpperCase()}).join("").substr(0,t)},t.localeProduct=function(e,t){return r(e)&&!t?"digital signatures":r(e)&&t?"signatures":"sms"===e?"SMS":e}},function(e,t,n){"use strict";function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function r(){return!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}function o(e){return-1!==(e=void 0===e?i():e).indexOf("FBAN")||-1!==e.indexOf("FBAV")}function a(e){return void 0===e&&(e=i()),/FxiOS/i.test(e)}function s(e){return void 0===e&&(e=i()),/EdgiOS/i.test(e)}function l(e){return-1<(e=void 0===e?i():e).indexOf("Opera Mini")}function c(e){return void 0===e&&(e=i()),/Android/.test(e)}function u(e){return void 0===e&&(e=i()),/iPhone|iPod|iPad/.test(e)}function d(e){return void 0===e&&(e=i()),/\bGSA\b/.test(e)}function p(e){return void 0===e&&(e=i()),/QQBrowser/.test(e)}function h(e){return!!u(e=void 0===e?i():e)&&(!!d(e)||/.+AppleWebKit(?!.*Safari)/.test(e))}function f(e){return!!c(e=void 0===e?i():e)&&/Version\/[\d.]+/.test(e)&&!l(e)}function m(){var e=i();return/Macintosh.*AppleWebKit(?!.*Safari)/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.supportsPopups=t.isMacOsCna=t.isIEIntranet=t.isIECompHeader=t.isIE11=t.isIE=t.isWebView=t.isAndroidWebview=t.isIosWebview=t.isQQBrowser=t.isGoogleSearchApp=t.isIos=t.isAndroid=t.isOperaMini=t.isEdgeIOS=t.isFirefoxIOS=t.isFacebookWebView=t.isStandAlone=t.isDevice=t.getUserAgent=void 0,t.getUserAgent=i,t.isDevice=function(){return!!i().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)},t.isStandAlone=r,t.isFacebookWebView=o,t.isFirefoxIOS=a,t.isEdgeIOS=s,t.isOperaMini=l,t.isAndroid=c,t.isIos=u,t.isGoogleSearchApp=d,t.isQQBrowser=p,t.isIosWebview=h,t.isAndroidWebview=f,t.isWebView=function(){return o()||h()||f()},t.isIE=function(){return!!window.document.documentMode||Boolean(window.navigator&&window.navigator.userAgent&&/Edge|MSIE/i.test(window.navigator.userAgent))},t.isIE11=function(){return!!window.MSInputMethodContext&&!!window.document.documentMode},t.isIECompHeader=function(){var e=window.document.querySelector('meta[http-equiv="X-UA-Compatible"]'),t=window.document.querySelector('meta[content="IE=edge"]');return!(!e||!t)},t.isIEIntranet=function(){if(window.document.documentMode)try{var e=window.status;return(window.status="testIntranetMode")===window.status?(window.status=e,!0):!1}catch(e){}return!1},t.isMacOsCna=m,t.supportsPopups=function(e){return!(h(e=void 0===e?i():e)||f(e)||l(e)||a(e)||s(e)||o(e)||p(e)||m()||r())}},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.AuthState=void 0,n(85)),n=(r=n.AbstractAuthState,o(a,r),a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="packages",t.onDomReady=function(){t.initAbstractAuth(),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){var e=t.ctx._getInitialState();t.ctx.changeState(e),e.render(t.domRoot)},t}t.AuthState=n},function(e,t,n){e.exports=function(){var j={},m=(Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,j.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window},{}),F=(Object.defineProperty(m,"__esModule",{value:!0}),m.getWindow=function(e){return(0,j.default)(e)?e:(e.ownerDocument||e).defaultView||N.window},m.init=B,m.window=m.realWindow=void 0),N=(m.realWindow=F,void 0);function B(e){m.realWindow=F=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),m.window=N=e}m.window=N,"undefined"!=typeof window&&window&&B(window);var T={};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var z=function(e){return!!e&&"object"===U(e)},H=function(e){return"function"==typeof e},q,V=(T.default={window:function(e){return e===m.window||(0,j.default)(e)},docFrag:function(e){return z(e)&&11===e.nodeType},object:z,func:H,number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==U(e))return!1;var t=m.getWindow(e)||m.window;return/object|function/.test("undefined"==typeof Element?"undefined":U(Element))?e instanceof Element||e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return z(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return z(e)&&void 0!==e.length&&H(e.splice)}},{});function W(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.prepared.axis;"x"===n?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===n&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function G(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){var i=n.prepared.axis;if("x"===i||"y"===i){var r="x"===i?"y":"x";t.page[r]=n.coords.start.page[r],t.client[r]=n.coords.start.client[r],t.delta[r]=0}}}Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var Y={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.draggable=Y.draggable,t.map.drag=Y,t.methodDict.drag="draggable",i.actions.drag=Y.defaults},listeners:{"interactions:before-action-move":W,"interactions:action-resume":W,"interactions:action-move":G,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.buttons,r=n.options.drag;if(r&&r.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(i&n.options.drag.mouseButtons)))return e.action={name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis},!1}},draggable:function(e){return T.default.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):T.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:W,move:G,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},X,g=(V.default=Y,{}),n=(Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,{init:function(e){var t=e;n.document=t.document,n.DocumentFragment=t.DocumentFragment||K,n.SVGElement=t.SVGElement||K,n.SVGSVGElement=t.SVGSVGElement||K,n.SVGElementInstance=t.SVGElementInstance||K,n.Element=t.Element||K,n.HTMLElement=t.HTMLElement||n.Element,n.Event=t.Event,n.Touch=t.Touch||K,n.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null});function K(){}var Q,E=(g.default=n,{}),i=(Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0,{init:function(e){var t=g.default.Element,n=e.navigator||{};i.supportsTouch="ontouchstart"in e||T.default.func(e.DocumentTouch)&&g.default.document instanceof e.DocumentTouch,i.supportsPointerEvent=!1!==n.pointerEnabled&&!!g.default.PointerEvent,i.isIOS=/iP(hone|od|ad)/.test(n.platform),i.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),i.isIe9=/MSIE 9/.test(n.userAgent),i.isOperaMobile="Opera"===n.appName&&i.supportsTouch&&/Presto/.test(n.userAgent),i.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",i.pEventTypes=i.supportsPointerEvent?g.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,i.wheelEvent=g.default.document&&"onmousewheel"in g.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null}),Z,w=(E.default=i,{});function J(e){var t=e.parentNode;if(T.default.docFrag(t)){for(;(t=t.host)&&T.default.docFrag(t););return t}return t}function $(e,t){return m.window!==m.realWindow&&(t=t.replace(/\/deep\//g," ")),e[E.default.prefixedMatchesSelector](t)}Object.defineProperty(w,"__esModule",{value:!0}),w.closest=function(e,t){for(;T.default.element(e);){if($(e,t))return e;e=J(e)}return null},w.getActualElement=function(e){return e.correspondingUseElement||e},w.getElementClientRect=ie,w.getElementRect=function(e){var t=ie(e);if(!E.default.isIOS7&&t){var n=ne(m.getWindow(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t},w.getPath=function(e){for(var t=[];e;)t.push(e),e=J(e);return t},w.getScrollXY=ne,w.indexOfDeepestElement=function(e){for(var t,n=[],i=0;i<e.length;i++){var r=e[i],o=e[t];if(r&&i!==t)if(o){var a=ee(r),s=ee(o);if(a!==r.ownerDocument)if(s!==r.ownerDocument)if(a!==s){n=n.length?n:te(o);var l=void 0;if(o instanceof g.default.HTMLElement&&r instanceof g.default.SVGElement&&!(r instanceof g.default.SVGSVGElement)){if(r===s)continue;l=r.ownerSVGElement}else l=r;for(var c=te(l,o.ownerDocument),u=0;c[u]&&c[u]===n[u];)u++;var d=[c[u-1],c[u],n[u]];if(d[0])for(var p=d[0].lastChild;p;){if(p===d[1]){t=i,n=c;break}if(p===d[2])break;p=p.previousSibling}}else h=r,f=o,void 0,void 0,(parseInt(m.getWindow(h).getComputedStyle(h).zIndex,10)||0)>=(parseInt(m.getWindow(f).getComputedStyle(f).zIndex,10)||0)&&(t=i);else t=i}else t=i}var h,f;return t},w.matchesSelector=$,w.matchesUpTo=function(e,t,n){for(;T.default.element(e);){if($(e,t))return!0;if((e=J(e))===n)return $(e,t)}return!1},w.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},w.parentNode=J,w.trySelector=function(e){return!!T.default.string(e)&&(g.default.document.querySelector(e),!0)};var ee=function(e){return e.parentNode||e.host};function te(e,t){for(var n,i=[],r=e;(n=ee(r))&&r!==t&&n!==r.ownerDocument;)i.unshift(r),r=n;return i}function ne(e){return{x:(e=e||m.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function ie(e){var t=e instanceof g.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var P={},v=(Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(e,t){for(var n in t)e[n]=t[n];return e},{});function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function oe(e,t,n){return"parent"===e?(0,w.parentNode)(n):"self"===e?t.getRect(n):(0,w.closest)(n,e)}Object.defineProperty(v,"__esModule",{value:!0}),v.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top},v.getStringOptionResult=oe,v.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},v.resolveRectLike=function(e,t,n,i){var r,o=e;return T.default.string(o)?o=oe(o,t,n):T.default.func(o)&&(o=o.apply(void 0,function(e){if(Array.isArray(e))return re(e)}(r=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),T.default.element(o)&&(o=(0,w.getElementRect)(o)),o},v.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,P.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},v.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,P.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e};var ae={},se=(Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=function(e,t,n){var i=e.options[n],r=i&&i.origin||e.options.origin,o=(0,v.resolveRectLike)(r,e,t,[e&&t]);return(0,v.rectToXY)(o)||{x:0,y:0}},{});function le(e){return e.trim().split(/ +/)}Object.defineProperty(se,"__esModule",{value:!0}),se.default=function n(t,i,r){if(r=r||{},T.default.string(t)&&-1!==t.search(" ")&&(t=le(t)),T.default.array(t))return t.reduce(function(e,t){return(0,P.default)(e,n(t,i,r))},r);if(T.default.object(t)&&(i=t,t=""),T.default.func(i))r[t]=r[t]||[],r[t].push(i);else if(T.default.array(i))for(var e=0;e<i.length;e++){var o;o=i[e],n(t,o,r)}else if(T.default.object(i))for(var a in i){var s=le(a).map(function(e){return"".concat(t).concat(e)});n(s,i[a],r)}return r};var k={},ce=(Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0,k.default=function(e,t){return Math.sqrt(e*e+t*t)},{}),S=(Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=function(n,e){n.__set||(n.__set={});var t=function(t){"function"!=typeof n[t]&&"__set"!==t&&Object.defineProperty(n,t,{get:function(){return t in n.__set?n.__set[t]:n.__set[t]=e[t]},set:function(e){n.__set[t]=e},configurable:!0})};for(var i in e)t(i);return n},{});function ue(e){return e instanceof g.default.Event||e instanceof g.default.Touch}function de(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function pe(e,t){return t=t||{x:0,y:0},E.default.isOperaMobile&&ue(e)?(de("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):de("page",e,t),t}function he(e,t){return t=t||{},E.default.isOperaMobile&&ue(e)?de("screen",e,t):de("client",e,t),t}function fe(e){var t=[];return T.default.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function me(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var i=e[n];for(var r in t)t[r]+=i[r]}for(var o in t)t[o]/=e.length;return t}Object.defineProperty(S,"__esModule",{value:!0}),S.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},S.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},S.getClientXY=he,S.getEventTargets=function(e){var t=T.default.func(e.composedPath)?e.composedPath():e.path;return[w.getActualElement(t?t[0]:e.target),w.getActualElement(e.currentTarget)]},S.getPageXY=pe,S.getPointerId=function(e){return T.default.number(e.pointerId)?e.pointerId:e.identifier},S.getPointerType=function(e){return T.default.string(e.pointerType)?e.pointerType:T.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof g.default.Touch?"touch":"mouse"},S.getTouchPair=fe,S.getXY=de,S.isNativePointer=ue,S.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},S.pointerAverage=me,Object.defineProperty(S,"pointerExtend",{enumerable:!0,get:function(){return ce.default}}),S.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},S.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},S.setCoords=function(e,t,n){var i=t.length>1?me(t):t[0];pe(i,e.page),he(i,e.client),e.timeStamp=n},S.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},S.touchAngle=function(e,t){var n=t+"X",i=t+"Y",r=fe(e),o=r[1][n]-r[0][n],a=r[1][i]-r[0][i];return 180*Math.atan2(a,o)/Math.PI},S.touchBBox=function(e){if(!e.length)return null;var t=fe(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},S.touchDistance=function(e,t){var n=t+"X",i=t+"Y",r=fe(e),o=r[0][n]-r[1][n],a=r[0][i]-r[1][i];return(0,k.default)(o,a)};var ge={};function ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(ge,"__esModule",{value:!0}),ge.BaseEvent=void 0;var _e=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,"immediatePropagationStopped",!1),ye(this,"propagationStopped",!1),this._interaction=e}var e,n;return e=t,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&ve(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f=(ge.BaseEvent=_e,Object.defineProperty(_e.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}}),{}),be=(Object.defineProperty(f,"__esModule",{value:!0}),f.remove=f.merge=f.from=f.findIndex=f.find=f.contains=void 0,f.contains=function(e,t){return-1!==e.indexOf(t)},f.remove=function(e,t){return e.splice(e.indexOf(t),1)},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}return e}),we=(f.merge=be,f.from=function(e){return be([],e)},function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}),o=(f.findIndex=we,f.find=function(e,t){return e[we(e,t)]},{});function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Te(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(o,"__esModule",{value:!0}),o.DropEvent=void 0;var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(l,e);var t,n,i,r,s=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ke(i);if(r){var n=ke(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Te(this,e)});function l(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ie(Pe(i=s.call(this,t._interaction)),"dropzone",void 0),Ie(Pe(i),"dragEvent",void 0),Ie(Pe(i),"relatedTarget",void 0),Ie(Pe(i),"draggable",void 0),Ie(Pe(i),"propagationStopped",!1),Ie(Pe(i),"immediatePropagationStopped",!1);var r="dragleave"===n?e.prev:e.cur,o=r.element,a=r.dropzone;return i.type=n,i.target=o,i.currentTarget=o,i.dropzone=a,i.dragEvent=t,i.relatedTarget=t.target,i.draggable=t.interactable,i.timeStamp=t.timeStamp,i}return t=l,(n=[{key:"reject",value:function(){var i=this,e=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&e.cur.dropzone===this.dropzone&&e.cur.element===this.target)if(e.prev.dropzone=this.dropzone,e.prev.element=this.target,e.rejected=!0,e.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var t=e.activeDrops,n=f.findIndex(t,function(e){var t=e.dropzone,n=e.element;return t===i.dropzone&&n===i.target});e.activeDrops.splice(n,1);var r=new l(e,this.dragEvent,"dropdeactivate");r.dropzone=this.dropzone,r.target=this.target,this.dropzone.fire(r)}else this.dropzone.fire(new l(e,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&Se(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(ge.BaseEvent),Me=(o.DropEvent=Ce,{});function Oe(e,t){for(var n=0;n<e.slice().length;n++){var i=e.slice()[n],r=i.dropzone,o=i.element;t.dropzone=r,t.target=o,r.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function Ae(e,t){for(var n=function(e,t){for(var n=e.interactables,i=[],r=0;r<n.list.length;r++){var o=n.list[r];if(o.options.drop.enabled){var a=o.options.drop.accept;if(!(T.default.element(a)&&a!==t||T.default.string(a)&&!w.matchesSelector(t,a)||T.default.func(a)&&!a({dropzone:o,draggableElement:t})))for(var s=T.default.string(o.target)?o._context.querySelectorAll(o.target):T.default.array(o.target)?o.target:[o.target],l=0;l<s.length;l++){var c=s[l];c!==t&&i.push({dropzone:o,element:c,rect:o.getRect(c)})}}}return i}(e,t),i=0;i<n.length;i++){var r=n[i];r.rect=r.dropzone.getRect(r.element)}return n}function Le(e,t,n){for(var i=e.dropState,r=e.interactable,o=e.element,a=[],s=0;s<i.activeDrops.length;s++){var l=i.activeDrops[s],c=l.dropzone,u=l.element,d=l.rect;a.push(c.dropCheck(t,n,r,o,u,d)?u:null)}var p=w.indexOfDeepestElement(a);return i.activeDrops[p]||null}function De(e,t,n){var i=e.dropState,r={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(r.activate=new o.DropEvent(i,n,"dropactivate"),r.activate.target=null,r.activate.dropzone=null),"dragend"===n.type&&(r.deactivate=new o.DropEvent(i,n,"dropdeactivate"),r.deactivate.target=null,r.deactivate.dropzone=null),i.rejected||(i.cur.element!==i.prev.element&&(i.prev.dropzone&&(r.leave=new o.DropEvent(i,n,"dragleave"),n.dragLeave=r.leave.target=i.prev.element,n.prevDropzone=r.leave.dropzone=i.prev.dropzone),i.cur.dropzone&&(r.enter=new o.DropEvent(i,n,"dragenter"),n.dragEnter=i.cur.element,n.dropzone=i.cur.dropzone)),"dragend"===n.type&&i.cur.dropzone&&(r.drop=new o.DropEvent(i,n,"drop"),n.dropzone=i.cur.dropzone,n.relatedTarget=i.cur.element),"dragmove"===n.type&&i.cur.dropzone&&(r.move=new o.DropEvent(i,n,"dropmove"),r.move.dragmove=n,n.dropzone=i.cur.dropzone)),r}function Re(e,t){var n=e.dropState,i=n.activeDrops,r=n.cur,o=n.prev;t.leave&&o.dropzone.fire(t.leave),t.enter&&r.dropzone.fire(t.enter),t.move&&r.dropzone.fire(t.move),t.drop&&r.dropzone.fire(t.drop),t.deactivate&&Oe(i,t.deactivate),n.prev.dropzone=r.dropzone,n.prev.element=r.element}function je(e,t){var n=e.interaction,i=e.iEvent,r=e.event;if("dragmove"===i.type||"dragend"===i.type){var o=n.dropState;t.dynamicDrop&&(o.activeDrops=Ae(t,n.element));var a=i,s=Le(n,a,r);o.rejected=o.rejected&&!!s&&s.dropzone===o.cur.dropzone&&s.element===o.cur.element,o.cur.dropzone=s&&s.dropzone,o.cur.element=s&&s.element,o.events=De(n,0,a)}}Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;var Fe={id:"actions/drop",install:function(t){var e=t.actions,n=t.interactStatic,i=t.Interactable,r=t.defaults;t.usePlugin(V.default),i.prototype.dropzone=function(e){return function(e,t){if(T.default.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=(0,se.default)(t.listeners),i=Object.keys(n).reduce(function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e},{});e.off(e.options.drop.listeners),e.on(i),e.options.drop.listeners=i}return T.default.func(t.ondrop)&&e.on("drop",t.ondrop),T.default.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),T.default.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),T.default.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),T.default.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),T.default.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:T.default.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return T.default.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},i.prototype.dropCheck=function(e,t,n,i,r,o){return function(e,t,n,i,r,o,a){var s=!1;if(!(a=a||e.getRect(o)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,s,e,o,i,r);var l=e.options.drop.overlap;if("pointer"===l){var c=(0,ae.default)(i,r,"drag"),u=S.getPageXY(t);u.x+=c.x,u.y+=c.y;var d=u.x>a.left&&u.x<a.right,p=u.y>a.top&&u.y<a.bottom;s=d&&p}var h=i.getRect(r);if(h&&"center"===l){var f=h.left+h.width/2,m=h.top+h.height/2;s=f>=a.left&&f<=a.right&&m>=a.top&&m<=a.bottom}return h&&T.default.number(l)&&(s=Math.max(0,Math.min(a.right,h.right)-Math.max(a.left,h.left))*Math.max(0,Math.min(a.bottom,h.bottom)-Math.max(a.top,h.top))/(h.width*h.height)>=l),e.options.drop.checker&&(s=e.options.drop.checker(t,n,s,e,o,i,r)),s}(this,e,t,n,i,r,o)},n.dynamicDrop=function(e){return T.default.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},(0,P.default)(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,r.actions.drop=Fe.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,i=(e.event,e.iEvent);if("drag"===n.prepared.name){var r=n.dropState;r.activeDrops=null,r.events=null,r.activeDrops=Ae(t,n.element),r.events=De(n,0,i),r.events.activate&&(Oe(r.activeDrops,r.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:i}))}},"interactions:action-move":je,"interactions:after-action-move":function(e,t){var n=e.interaction,i=e.iEvent;"drag"===n.prepared.name&&(Re(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:i}),n.dropState.events={})},"interactions:action-end":function(e,t){if("drag"===e.interaction.prepared.name){var n=e.interaction,i=e.iEvent;je(e,t),Re(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:i})}},"interactions:stop":function(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:Ae,getDrop:Le,getDropEvents:De,fireDropEvents:Re,defaults:{enabled:!1,accept:null,overlap:"pointer"}},Ne,Be=(Me.default=Fe,{});function Ue(e){var t=e.interaction,n=e.iEvent,i=e.phase;if("gesture"===t.prepared.name){var r=t.pointers.map(function(e){return e.pointer}),o="start"===i,a="end"===i,s=t.interactable.options.deltaSource;if(n.touches=[r[0],r[1]],o)n.distance=S.touchDistance(r,s),n.box=S.touchBBox(r),n.scale=1,n.ds=0,n.angle=S.touchAngle(r,s),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(a){var l=t.prevEvent;n.distance=l.distance,n.box=l.box,n.scale=l.scale,n.ds=0,n.angle=l.angle,n.da=0}else n.distance=S.touchDistance(r,s),n.box=S.touchBBox(r),n.scale=n.distance/t.gesture.startDistance,n.angle=S.touchAngle(r,s),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,T.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}Object.defineProperty(Be,"__esModule",{value:!0}),Be.default=void 0;var ze={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.gesturable=function(e){return T.default.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):T.default.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=ze,t.methodDict.gesture="gesturable",i.actions.gesture=ze.defaults},listeners:{"interactions:action-start":Ue,"interactions:action-move":Ue,"interactions:action-end":Ue,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},He,qe=(Be.default=ze,{});function Ve(e,t,n,i,r,o,a){if(!t)return!1;if(!0===t){var s=T.default.number(o.width)?o.width:o.right-o.left,l=T.default.number(o.height)?o.height:o.bottom-o.top;if(a=Math.min(a,Math.abs(("left"===e||"right"===e?s:l)/2)),s<0&&("left"===e?e="right":"right"===e&&(e="left")),l<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e){var c=s>=0?o.left:o.right;return n.x<c+a}if("top"===e){var u=l>=0?o.top:o.bottom;return n.y<u+a}if("right"===e)return n.x>(s>=0?o.right:o.left)-a;if("bottom"===e)return n.y>(l>=0?o.bottom:o.top)-a}return!!T.default.element(i)&&(T.default.element(t)?t===i:w.matchesUpTo(i,t,r))}function We(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var i=t;n.interactable.options.resize.square?("y"===n.resizeAxes?i.delta.x=i.delta.y:i.delta.y=i.delta.x,i.axes="xy"):(i.axes=n.resizeAxes,"x"===n.resizeAxes?i.delta.y=0:"y"===n.resizeAxes&&(i.delta.x=0))}}Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=void 0;var p={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,n=t.browser,i=t.Interactable,r=t.defaults;p.cursors=function(e){return e.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),p.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,i.prototype.resizable=function(e){return function(e,t,n){return T.default.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),T.default.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=n.defaults.actions.resize.axis),T.default.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:T.default.bool(t.square)&&(e.options.resize.square=t.square),e):T.default.bool(t)?(e.options.resize.enabled=t,e):e.options.resize}(this,e,t)},e.map.resize=p,e.methodDict.resize="resizable",r.actions.resize=p.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.rect;n._rects={start:(0,P.default)({},r),corrected:(0,P.default)({},r),previous:(0,P.default)({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}}(e),We(e)},"interactions:action-move":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.interactable.options.resize.invert,o="reposition"===r||"negate"===r,a=n.rect,s=n._rects,l=s.start,c=s.corrected,u=s.delta,d=s.previous;if((0,P.default)(d,c),o){if((0,P.default)(c,a),"reposition"===r){if(c.top>c.bottom){var p=c.top;c.top=c.bottom,c.bottom=p}if(c.left>c.right){var h=c.left;c.left=c.right,c.right=h}}}else c.top=Math.min(a.top,l.bottom),c.bottom=Math.max(a.bottom,l.top),c.left=Math.min(a.left,l.right),c.right=Math.max(a.right,l.left);for(var f in c.width=c.right-c.left,c.height=c.bottom-c.top,c)u[f]=c[f]-d[f];i.edges=n.prepared.edges,i.rect=c,i.deltaRect=u}}(e),We(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t;i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.element,r=e.rect,o=e.buttons;if(r){var a=(0,P.default)({},t.coords.cur.page),s=n.options.resize;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(o&s.mouseButtons))){if(T.default.object(s.edges)){var l={left:!1,right:!1,top:!1,bottom:!1};for(var c in l)l[c]=Ve(c,s.edges[c],a,t._latestPointer.eventTarget,i,r,s.margin||p.defaultMargin);l.left=l.left&&!l.right,l.top=l.top&&!l.bottom,(l.left||l.right||l.top||l.bottom)&&(e.action={name:"resize",edges:l})}else{var u="y"!==s.axis&&a.x>r.right-p.defaultMargin,d="x"!==s.axis&&a.y>r.bottom-p.defaultMargin;(u||d)&&(e.action={name:"resize",axes:(u?"x":"")+(d?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,i=e.name,r=p.cursors,o=null;if(n)o=r[i+n];else if(t){for(var a="",s=["top","bottom","left","right"],l=0;l<s.length;l++){var c=s[l];t[c]&&(a+=c)}o=r[a]}return o},defaultMargin:null},Ge,Ye=(qe.default=p,{}),Xe=(Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.default=void 0,{id:"actions",install:function(e){e.usePlugin(Be.default),e.usePlugin(qe.default),e.usePlugin(V.default),e.usePlugin(Me.default)}}),h=(Ye.default=Xe,{});Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var a,Ke,Qe=0,Ze,e=(h.default={request:function(e){return a(e)},cancel:function(e){return Ke(e)},init:function(r){if(a=r.requestAnimationFrame,Ke=r.cancelAnimationFrame,!a)for(var e=["ms","moz","webkit","o"],t=0;t<e.length;t++){var n=e[t];a=r["".concat(n,"RequestAnimationFrame")],Ke=r["".concat(n,"CancelAnimationFrame")]||r["".concat(n,"CancelRequestAnimationFrame")]}a=a&&a.bind(r),Ke=Ke&&Ke.bind(r),a||(a=function(e){var t=Date.now(),n=Math.max(0,16-(t-Qe)),i=r.setTimeout(function(){e(t+n)},n);return Qe=t+n,i},Ke=function(e){return clearTimeout(e)})}},{}),y=(Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getContainer=Je,e.getScroll=$e,e.getScrollSize=function(e){return T.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},{defaults:{enabled:!(e.getScrollSizeDelta=function(e,t){var n=e.interaction,i=e.element,r=n&&n.interactable.options[n.prepared.name].autoScroll;if(!r||!r.enabled)return t(),{x:0,y:0};var o=Je(r.container,n.interactable,i),a=$e(o);t();var s=$e(o);return{x:s.x-a.x,y:s.y-a.y}}),margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){y.isScrolling=!0,h.default.cancel(y.i),e.autoScroll=y,y.interaction=e,y.prevTime=y.now(),y.i=h.default.request(y.scroll)},stop:function(){y.isScrolling=!1,y.interaction&&(y.interaction.autoScroll=null),h.default.cancel(y.i)},scroll:function(){var e=y.interaction,t=e.interactable,n=e.element,i=e.prepared.name,r=t.options[i].autoScroll,o=Je(r.container,t,n),a=y.now(),s=(a-y.prevTime)/1e3,l=r.speed*s;if(l>=1){var c={x:y.x*l,y:y.y*l};if(c.x||c.y){var u=$e(o);T.default.window(o)?o.scrollBy(c.x,c.y):o&&(o.scrollLeft+=c.x,o.scrollTop+=c.y);var d=$e(o),p={x:d.x-u.x,y:d.y-u.y};(p.x||p.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:p,interaction:e,container:o})}y.prevTime=a}y.isScrolling&&(h.default.cancel(y.i),y.i=h.default.request(y.scroll))},check:function(e,t){var n;return null==(n=e.options[t].autoScroll)?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&y.check(t.interactable,t.prepared.name))if(t.simulation)y.x=y.y=0;else{var i,r,o,a,s=t.interactable,l=t.element,c=t.prepared.name,u=s.options[c].autoScroll,d=Je(u.container,s,l);if(T.default.window(d))a=n.clientX<y.margin,i=n.clientY<y.margin,r=n.clientX>d.innerWidth-y.margin,o=n.clientY>d.innerHeight-y.margin;else{var p=w.getElementClientRect(d);a=n.clientX<p.left+y.margin,i=n.clientY<p.top+y.margin,r=n.clientX>p.right-y.margin,o=n.clientY>p.bottom-y.margin}y.x=r?1:a?-1:0,y.y=o?1:i?-1:0,y.isScrolling||(y.margin=u.margin,y.speed=u.speed,y.start(t))}}});function Je(e,t,n){return(T.default.string(e)?(0,v.getStringOptionResult)(e,t,n):e)||(0,m.getWindow)(n)}function $e(e){return T.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var et={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=y,y.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=y.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,y.stop(),y.interaction&&(y.interaction=null)},"interactions:stop":y.stop,"interactions:action-move":function(e){return y.onInteractionMove(e)}}},tt,_=(e.default=et,{}),nt=(Object.defineProperty(_,"__esModule",{value:!0}),_.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},_.sign=void 0,_.warnOnce=function(e,t){var n=!1;return function(){return n||(m.window.console.warn(t),n=!0),e.apply(this,arguments)}},_.sign=function(e){return e>=0?1:-1},{});function it(e){return T.default.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function rt(e){return T.default.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=void 0;var ot,at=(nt.default={id:"auto-start/interactableMethods",install:function(o){var e=o.Interactable;e.prototype.getAction=function(e,t,n,i){var r=function(e,t,n,i,r){var o=e.getRect(i),a={action:null,interactable:e,interaction:n,element:i,rect:o,buttons:t.buttons||{0:1,1:4,3:8,4:16}[t.button]};return r.fire("auto-start:check",a),a.action}(this,t,n,i,o);return this.options.actionChecker?this.options.actionChecker(e,t,r,this,i,n):r},e.prototype.ignoreFrom=(0,_.warnOnce)(function(e){return this._backCompatOption("ignoreFrom",e)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,_.warnOnce)(function(e){return this._backCompatOption("allowFrom",e)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=rt,e.prototype.styleCursor=it}},{});function st(e,t,n,i,r){return t.testIgnoreAllow(t.options[e.name],n,i)&&t.options[e.name].enabled&&dt(t,n,e,r)?e:null}function lt(e,t,n,i,r,o,a){for(var s=0,l=i.length;s<l;s++){var c=i[s],u=r[s],d=c.getAction(t,n,e,u);if(d){var p=st(d,c,u,o,a);if(p)return{action:p,interactable:c,element:u}}}return{action:null,interactable:null,element:null}}function ct(e,t,n,i,r){var o=[],a=[],s=i;function l(e){o.push(e),a.push(s)}for(;T.default.element(s);){o=[],a=[],r.interactables.forEachMatch(s,l);var c=lt(e,t,n,o,a,i,r);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;s=w.parentNode(s)}return{action:null,interactable:null,element:null}}function ut(e,t,n){var i=t.action,r=t.interactable,o=t.element;i=i||{name:null},e.interactable=r,e.element=o,(0,_.copyAction)(e.prepared,i),e.rect=r&&i.name?r.getRect(o):null,ft(e,n),n.fire("autoStart:prepared",{interaction:e})}function dt(e,t,n,i){var r=e.options,o=r[n.name].max,a=r[n.name].maxPerElement,s=i.autoStart.maxInteractions,l=0,c=0,u=0;if(!(o&&a&&s))return!1;for(var d=0;d<i.interactions.list.length;d++){var p=i.interactions.list[d],h=p.prepared.name;if(p.interacting()){if(++l>=s)return!1;if(p.interactable===e){if((c+=h===n.name?1:0)>=o)return!1;if(p.element===t&&(u++,h===n.name&&u>=a))return!1}}}return s>0}function pt(e,t){return T.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function ht(e,t,n){var i=n.autoStart.cursorElement;i&&i!==e&&(i.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function ft(e,t){var n=e.interactable,i=e.element,r=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var o="";if(r.name){var a=n.options[r.name].cursorChecker;o=T.default.func(a)?a(r,n,i,e._interacting):t.actions.map[r.name].getCursor(r)}ht(e.element,o||"",t)}else t.autoStart.cursorElement&&ht(t.autoStart.cursorElement,"",t)}Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var mt,gt,vt=(at.default={id:"auto-start/base",before:["actions"],install:function(t){var e=t.interactStatic,n=t.defaults;t.usePlugin(nt.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,P.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return pt(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:dt,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;n.interacting()||ut(n,ct(n,i,r,o,t),t)},"interactions:move":function(e,t){!function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||ut(n,ct(n,i,r,o,t),t)}(e,t),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var i=n.interactable,r=n.prepared.name;r&&i&&(i.options[r].manualStart||!dt(i,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,i,n.element),ft(n,t)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,i=n.interactable;i&&i.options.styleCursor&&ht(n.element,"",t)}},maxInteractions:pt,withinInteractionLimit:dt,validateAction:st},{}),yt=(Object.defineProperty(vt,"__esModule",{value:!0}),vt.default=void 0,{id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,i){var r=e.interaction,o=e.eventTarget,t=e.dx,n=e.dy;if("drag"===r.prepared.name){var a=Math.abs(t),s=Math.abs(n),l=r.interactable.options.drag,c=l.startAxis,u=a>s?"x":a<s?"y":"xy";if(r.prepared.axis="start"===l.lockAxis?u[0]:l.lockAxis,"xy"!==u&&"xy"!==c&&c!==u){r.prepared.name=null;for(var d=o,p=function(e){if(e!==r.interactable){var t=r.interactable.options.drag;if(!t.manualStart&&e.testIgnoreAllow(t,d,o)){var n=e.getAction(r.downPointer,r.downEvent,r,d);if(n&&"drag"===n.name&&function(e,t){if(!t)return!1;var n=t.options.drag.startAxis;return"xy"===e||"xy"===n||n===e}(u,e)&&at.default.validateAction(n,e,d,o,i))return e}}};T.default.element(d);){var h=i.interactables.forEachMatch(d,p);if(h){r.prepared.name="drag",r.interactable=h,r.element=d;break}d=(0,w.parentNode)(d)}}}}}}),_t=(vt.default=yt,{});function bt(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=void 0;var wt,Et,St=(_t.default={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(at.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=bt(t);n>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;bt(t)>0&&(t.prepared.name=null)}},getHoldDuration:bt},{}),xt=(Object.defineProperty(St,"__esModule",{value:!0}),St.default=void 0,{id:"auto-start",install:function(e){e.usePlugin(at.default),e.usePlugin(_t.default),e.usePlugin(vt.default)}}),Tt=(St.default=xt,{});function Pt(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):T.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function kt(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function It(i){var e=i.Interactable;e.prototype.preventDefault=Pt,e.prototype.checkAndPreventDefault=function(e){return function(e,t,n){var i=e.options.preventDefault;if("never"!==i)if("always"!==i){if(t.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var r=(0,m.getWindow)(n.target).document,o=t.getDocOptions(r);if(!o||!o.events||!1!==o.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||T.default.element(n.target)&&(0,w.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,i,e)},i.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var t=0;t<i.interactions.list.length;t++){var n=i.interactions.list[t];if(n.element&&(n.element===e.target||(0,w.nodeContains)(n.element,e.target)))return void n.interactable.checkAndPreventDefault(e)}}})}Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.default=void 0;var Ct={id:"core/interactablePreventDefault",install:Tt.install=It,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=kt,e},{})},Mt=(Tt.default=Ct,{});Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.default=void 0,Mt.default={};var Ot,At={},Lt=(Object.defineProperty(At,"__esModule",{value:!0}),At.default=void 0,Ot||(Ot={}));Lt.touchAction="touchAction",Lt.boxSizing="boxSizing",Lt.noListeners="noListeners",Ot.touchAction,Ot.boxSizing,Ot.noListeners;var Dt,Rt=(At.default={id:"dev-tools",install:function(){}},{}),jt=(Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=function e(t){var n={};for(var i in t){var r=t[i];T.default.plainObject(r)?n[i]=e(r):T.default.array(r)?n[i]=f.from(r):n[i]=r}return n},{});function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Bt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0,jt.getRectOffset=qt;var zt=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ut(this,"states",[]),Ut(this,"startOffset",{left:0,right:0,top:0,bottom:0}),Ut(this,"startDelta",void 0),Ut(this,"result",void 0),Ut(this,"endResult",void 0),Ut(this,"edges",void 0),Ut(this,"interaction",void 0),this.interaction=e,this.result=Ht()}var e,n;return e=t,(n=[{key:"start",value:function(e,t){var n=e.phase,i=this.interaction,r=function(e){var n=e.interactable.options[e.prepared.name],t=n.modifiers;return t&&t.length?t:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(e){var t=n[e];return t&&t.enabled&&{options:t,methods:t._methods}}).filter(function(e){return!!e})}(i);this.prepareStates(r),this.edges=(0,P.default)({},i.edges),this.startOffset=qt(i.rect,t),this.startDelta={x:0,y:0};var o=this.fillArg({phase:n,pageCoords:t,preEnd:!1});return this.result=Ht(),this.startAll(o),this.result=this.setAll(o)}},{key:"fillArg",value:function(e){var t=this.interaction;return e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect=e.rect||t.rect,e.edges=this.edges,e.startOffset=this.startOffset,e}},{key:"startAll",value:function(e){for(var t=0;t<this.states.length;t++){var n=this.states[t];n.methods.start&&(e.state=n,n.methods.start(e))}}},{key:"setAll",value:function(e){var t=e.phase,n=e.preEnd,i=e.skipModifiers,r=e.rect;e.coords=(0,P.default)({},e.pageCoords),e.rect=(0,P.default)({},r);for(var o=i?this.states.slice(i):this.states,a=Ht(e.coords,e.rect),s=0;s<o.length;s++){var l,c=o[s],u=c.options,d=(0,P.default)({},e.coords),p=null;null!=(l=c.methods)&&l.set&&this.shouldDo(u,n,t)&&(e.state=c,p=c.methods.set(e),v.addEdges(this.interaction.edges,e.rect,{x:e.coords.x-d.x,y:e.coords.y-d.y})),a.eventProps.push(p)}a.delta.x=e.coords.x-e.pageCoords.x,a.delta.y=e.coords.y-e.pageCoords.y,a.rectDelta.left=e.rect.left-r.left,a.rectDelta.right=e.rect.right-r.right,a.rectDelta.top=e.rect.top-r.top,a.rectDelta.bottom=e.rect.bottom-r.bottom;var h=this.result.coords,f=this.result.rect;if(h&&f){var m=a.rect.left!==f.left||a.rect.right!==f.right||a.rect.top!==f.top||a.rect.bottom!==f.bottom;a.changed=m||h.x!==a.coords.x||h.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,i=t.coords.cur,r=t.coords.start,o=this.result,a=this.startDelta,s=o.delta;"start"===n&&(0,P.default)(this.startDelta,o.delta);for(var l=0;l<[[r,a],[i,s]].length;l++){var c=Ft([[r,a],[i,s]][l],2),u=c[0],d=c[1];u.page.x+=d.x,u.page.y+=d.y,u.client.x+=d.x,u.client.y+=d.y}var p=this.result.rectDelta,h=e.rect||t.rect;h.left+=p.left,h.right+=p.right,h.top+=p.top,h.bottom+=p.bottom,h.width=h.right-h.left,h.height=h.bottom-h.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,i=e.preEnd,r=e.skipModifiers,o=this.setAll(this.fillArg({preEnd:i,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page}));if(this.result=o,!o.changed&&(!r||r<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){var a=t.coords.cur.page,s={x:e.modifiedCoords.x-a.x,y:e.modifiedCoords.y-a.y};o.coords.x+=s.x,o.coords.y+=s.y,o.delta.x+=s.x,o.delta.y+=s.y}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,i=this.states;if(i&&i.length){for(var r=!1,o=0;o<i.length;o++){var a=i[o];e.state=a;var s=a.options,l=a.methods,c=l.beforeEnd&&l.beforeEnd(e);if(c)return this.endResult=c,!1;r=r||!r&&this.shouldDo(s,!0,e.phase,!0)}r&&t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=(0,P.default)({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var i=0;i<this.states.length;i++){var r=this.states[i];n.state=r,r.methods.stop&&r.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.options,r=n.methods,o=n.name;this.states.push({options:i,methods:r,index:t,name:o})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,i=t.rect,r=t.modification;if(r.result){for(var o=r.startDelta,a=r.result,s=a.delta,l=a.rectDelta,c=[[n.start,o],[n.cur,s]],u=0;u<c.length;u++){var d=Ft(c[u],2),p=d[0],h=d[1];p.page.x-=h.x,p.page.y-=h.y,p.client.x-=h.x,p.client.y-=h.y}i.left-=l.left,i.right-=l.right,i.top-=l.top,i.bottom-=l.bottom}}},{key:"shouldDo",value:function(e,t,n,i){return!(!e||!1===e.enabled||i&&!e.endOnly||e.endOnly&&!t||"start"===n&&!e.setStart)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map(function(e){return(0,Rt.default)(e)}),this.result=Ht((0,P.default)({},e.result.coords),(0,P.default)({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}])&&Bt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function qt(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}jt.default=zt;var s={};function Vt(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}Object.defineProperty(s,"__esModule",{value:!0}),s.addEventModifiers=Vt,s.default=void 0,s.makeModifier=function(e,r){var o=e.defaults,a={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},t=function(e){var t=e||{};for(var n in t.enabled=!1!==t.enabled,o)n in t||(t[n]=o[n]);var i={options:t,methods:a,name:r,enable:function(){return t.enabled=!0,i},disable:function(){return t.enabled=!1,i}};return i};return r&&"string"==typeof r&&(t._defaults=o,t._methods=a),t};var Wt,Gt,Yt=(s.default={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new jt.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":Vt,"interactions:action-move":Vt,"interactions:action-end":Vt,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}},{}),Xt=(Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.defaults=void 0,Yt.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},{});function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Jt(e,t){if(t&&("object"===Kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.InteractEvent=void 0;var en=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(g,e);var t,n,i,r,m=(i=g,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=$t(i);if(r){var n=$t(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jt(this,e)});function g(e,t,n,i,r,o,a){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),x(b(s=m.call(this,e)),"relatedTarget",null),x(b(s),"screenX",void 0),x(b(s),"screenY",void 0),x(b(s),"button",void 0),x(b(s),"buttons",void 0),x(b(s),"ctrlKey",void 0),x(b(s),"shiftKey",void 0),x(b(s),"altKey",void 0),x(b(s),"metaKey",void 0),x(b(s),"page",void 0),x(b(s),"client",void 0),x(b(s),"delta",void 0),x(b(s),"rect",void 0),x(b(s),"x0",void 0),x(b(s),"y0",void 0),x(b(s),"t0",void 0),x(b(s),"dt",void 0),x(b(s),"duration",void 0),x(b(s),"clientX0",void 0),x(b(s),"clientY0",void 0),x(b(s),"velocity",void 0),x(b(s),"speed",void 0),x(b(s),"swipe",void 0),x(b(s),"axes",void 0),x(b(s),"preEnd",void 0),r=r||e.element;var l=e.interactable,c=(l&&l.options||Yt.defaults).deltaSource,u=(0,ae.default)(l,r,n),d="start"===i,p="end"===i,h=d?b(s):e.prevEvent,f=d?e.coords.start:p?{page:h.page,client:h.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return s.page=(0,P.default)({},f.page),s.client=(0,P.default)({},f.client),s.rect=(0,P.default)({},e.rect),s.timeStamp=f.timeStamp,p||(s.page.x-=u.x,s.page.y-=u.y,s.client.x-=u.x,s.client.y-=u.y),s.ctrlKey=t.ctrlKey,s.altKey=t.altKey,s.shiftKey=t.shiftKey,s.metaKey=t.metaKey,s.button=t.button,s.buttons=t.buttons,s.target=r,s.currentTarget=r,s.preEnd=o,s.type=a||n+(i||""),s.interactable=l,s.t0=d?e.pointers[e.pointers.length-1].downTime:h.t0,s.x0=e.coords.start.page.x-u.x,s.y0=e.coords.start.page.y-u.y,s.clientX0=e.coords.start.client.x-u.x,s.clientY0=e.coords.start.client.y-u.y,s.delta=d||p?{x:0,y:0}:{x:s[c].x-h[c].x,y:s[c].y-h[c].y},s.dt=e.coords.delta.timeStamp,s.duration=s.timeStamp-s.t0,s.velocity=(0,P.default)({},e.coords.velocity[c]),s.speed=(0,k.default)(s.velocity.x,s.velocity.y),s.swipe=p||"inertiastart"===i?s.getSwipe():null,s}return t=g,(n=[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||this.timeStamp-e.prevEvent.timeStamp>150)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,i=202.5<=t&&t<337.5;return{up:i,down:!i&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Qt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),g}(ge.BaseEvent),tn=(Xt.InteractEvent=en,Object.defineProperties(en.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}}),{});function nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rn(e,t,n){return t&&nn(e.prototype,t),n&&nn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(tn,"__esModule",{value:!0}),tn.PointerInfo=void 0;var an=rn(function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),on(this,"id",void 0),on(this,"pointer",void 0),on(this,"event",void 0),on(this,"downTime",void 0),on(this,"downTarget",void 0),this.id=t,this.pointer=n,this.event=i,this.downTime=r,this.downTarget=o});tn.PointerInfo=an;var sn,ln,l={};function cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(l,"__esModule",{value:!0}),l.Interaction=void 0,Object.defineProperty(l,"PointerInfo",{enumerable:!0,get:function(){return tn.PointerInfo}}),l.default=l._ProxyValues=l._ProxyMethods=void 0;var un=(l._ProxyValues=sn)||(l._ProxyValues=sn={}),dn=(un.interactable="",un.element="",un.prepared="",un.pointerIsDown="",un.pointerWasMoved="",un._proxy="",(l._ProxyMethods=ln)||(l._ProxyMethods=ln={})),pn=(dn.start="",dn.move="",dn.end="",dn.stop="",dn.interacting="",0),hn=function(){function c(e){var t=this,n=e.pointerType,i=e.scopeFire;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u(this,"interactable",null),u(this,"element",null),u(this,"rect",null),u(this,"_rects",void 0),u(this,"edges",null),u(this,"_scopeFire",void 0),u(this,"prepared",{name:null,axis:null,edges:null}),u(this,"pointerType",void 0),u(this,"pointers",[]),u(this,"downEvent",null),u(this,"downPointer",{}),u(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),u(this,"prevEvent",null),u(this,"pointerIsDown",!1),u(this,"pointerWasMoved",!1),u(this,"_interacting",!1),u(this,"_ending",!1),u(this,"_stopped",!0),u(this,"_proxy",null),u(this,"simulation",null),u(this,"doMove",(0,_.warnOnce)(function(e){this.move(e)},"The interaction.doMove() method has been renamed to interaction.move()")),u(this,"coords",{start:S.newCoords(),prev:S.newCoords(),cur:S.newCoords(),delta:S.newCoords(),velocity:S.newCoords()}),u(this,"_id",pn++),this._scopeFire=i,this.pointerType=n;var r=this;this._proxy={};var o=function(e){Object.defineProperty(t._proxy,e,{get:function(){return r[e]}})};for(var a in sn)o(a);var s=function(e){Object.defineProperty(t._proxy,e,{value:function(){return r[e].apply(r,arguments)}})};for(var l in ln)s(l);this._scopeFire("interactions:new",{interaction:this})}var e,t;return e=c,t=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(e,t,n){var i=this.updatePointer(e,t,n,!0),r=this.pointers[i];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:i,pointerInfo:r,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&((0,_.copyAction)(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?(0,P.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var i,r,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,r=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,k.default)(i,r)>this.pointerMoveTolerance);var a=this.getPointerIndex(e),s={pointer:e,pointerIndex:a,pointerInfo:this.pointers[a],event:t,type:"move",eventTarget:n,dx:i,dy:r,duplicate:o,interaction:this};o||S.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),o||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&S.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||S.setZeroCoords(this.coords.delta),(e=(0,P.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,i){var r=this.getPointerIndex(e);-1===r&&(r=this.updatePointer(e,t,n,!1));var o=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(o),{pointer:e,pointerIndex:r,pointerInfo:this.pointers[r],event:t,eventTarget:n,type:o,curEventTarget:i,interaction:this}),this.simulation||this.end(t),this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),this._ending=!1,!0===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=S.getPointerId(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:f.findIndex(this.pointers,function(e){return e.id===t})}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,i){var r=S.getPointerId(e),o=this.getPointerIndex(e),a=this.pointers[o];return i=!1!==i&&(i||/(down|start)$/i.test(t.type)),a?a.pointer=e:(a=new tn.PointerInfo(r,e,t,null,null),o=this.pointers.length,this.pointers.push(a)),S.setCoords(this.coords.cur,this.pointers.map(function(e){return e.pointer}),this._now()),S.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),i&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,S.pointerExtend(this.downPointer,e),this.interacting()||(S.copyCoords(this.coords.start,this.coords.cur),S.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:i,pointerInfo:a,pointerIndex:o,interaction:this}),o}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var i=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:i,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,i){return new Xt.InteractEvent(this,e,this.prepared.name,t,this.element,n,i)}},{key:"_fireEvent",value:function(e){var t;null==(t=this.interactable)||t.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,i=e.preEnd,r=e.type,o=this.rect;if(o&&"move"===n&&(v.addEdges(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;var a=e.iEvent=this._createPreparedEvent(t,n,i,r);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}],t&&cn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),c}(),fn=l.Interaction=hn,r=(l.default=fn,{});function mn(e){e.pointerIsDown&&(_n(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function gn(e){vn(e.interaction)}function vn(e){if(!function(e){return!(!e.offset.pending.x&&!e.offset.pending.y)}(e))return!1;var t=e.offset.pending;return _n(e.coords.cur,t),_n(e.coords.delta,t),v.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function yn(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function _n(e,t){var n=e.page,i=e.client,r=t.x,o=t.y;n.x+=r,n.y+=o,i.x+=r,i.y+=o}Object.defineProperty(r,"__esModule",{value:!0}),r.addTotal=mn,r.applyPending=vn,r.default=void 0,l._ProxyMethods.offsetBy="";var bn,wn,En=(r.default={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=yn},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return mn(e.interaction)},"interactions:before-action-start":gn,"interactions:before-action-move":gn,"interactions:before-action-end":function(e){var t=e.interaction;if(vn(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}},{});function Sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(En,"__esModule",{value:!0}),En.default=En.InertiaState=void 0;var xn=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"active",!1),c(this,"isModified",!1),c(this,"smoothEnd",!1),c(this,"allowResume",!1),c(this,"modification",void 0),c(this,"modifierCount",0),c(this,"modifierArg",void 0),c(this,"startCoords",void 0),c(this,"t0",0),c(this,"v0",0),c(this,"te",0),c(this,"targetOffset",void 0),c(this,"modifiedOffset",void 0),c(this,"currentOffset",void 0),c(this,"lambda_v0",0),c(this,"one_ve_v0",0),c(this,"timeout",void 0),c(this,"interaction",void 0),this.interaction=e}var e,n;return e=t,(n=[{key:"start",value:function(e){var t=this.interaction,n=Tn(t);if(!n||!n.enabled)return!1;var i=t.coords.velocity.client,r=(0,k.default)(i.x,i.y),o=this.modification||(this.modification=new jt.default(t));if(o.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=r,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg=o.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-t.coords.cur.timeStamp<50&&r>n.minSpeed&&r>n.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=Tn(this.interaction),i=n.resistance,r=-Math.log(n.endSpeed/this.v0)/i;this.targetOffset={x:(t.x-r)/i,y:(t.y-r)/i},this.te=r,this.lambda_v0=i/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var o=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(a),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.onNextFrame(function(){return e.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return e.smoothEndTick()})}},{key:"onNextFrame",value:function(e){var t=this;this.timeout=h.default.request(function(){t.active&&e()})}},{key:"inertiaTick",value:function(){var e,t,n,i,r,o=this,a=this.interaction,s=Tn(a).resistance,l=(a._now()-this.t0)/1e3;if(l<this.te){var c,u=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(0,0,e=this.targetOffset.x,t=this.targetOffset.y,n=this.modifiedOffset.x,i=this.modifiedOffset.y,c={x:kn(r=u,0,e,n),y:kn(r,0,t,i)}):c={x:this.targetOffset.x*u,y:this.targetOffset.y*u};var d={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=d.x,this.currentOffset.y+=d.y,a.offsetBy(d),a.move(),this.onNextFrame(function(){return o.inertiaTick()})}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,i=Tn(t).smoothEndDuration;if(n<i){var r={x:In(n,0,this.targetOffset.x,i),y:In(n,0,this.targetOffset.y,i)},o={x:r.x-this.currentOffset.x,y:r.y-this.currentOffset.y};this.currentOffset.x+=o.x,this.currentOffset.y+=o.y,t.offsetBy(o),t.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return e.smoothEndTick()})}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,i=e.eventTarget,r=this.interaction;r.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),r.updatePointer(t,n,i,!0),r._doPhase({interaction:r,event:n,phase:"resume"}),(0,S.copyCoords)(r.coords.prev,r.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,h.default.cancel(this.timeout)}}])&&Sn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tn(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}En.InertiaState=xn;var Pn={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(r.default),e.usePlugin(s.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new xn(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,i=t.inertia;if(i.active)for(var r=n;T.default.element(r);){if(r===t.element){i.resume(e);break}r=w.parentNode(r)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":s.addEventModifiers,"interactions:action-inertiastart":s.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};function kn(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function In(e,t,n,i){return-n*(e/=i)*(e-2)+t}var Cn,Mn=(En.default=Pn,{});function On(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.immediatePropagationStopped)break;i(e)}}Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Eventable=void 0;var Dn=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),An(this,"options",void 0),An(this,"types",{}),An(this,"propagationStopped",!1),An(this,"immediatePropagationStopped",!1),An(this,"global",void 0),this.options=(0,P.default)({},e||{})}var e,n;return e=t,(n=[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&Ln(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&Ln(e,t)}},{key:"on",value:function(e,t){var n=(0,se.default)(e,t);for(e in n)this.types[e]=f.merge(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=(0,se.default)(e,t);for(e in n){var i=this.types[e];if(i&&i.length)for(var r=0;r<n[e].length;r++){var o=n[e][r],a=i.indexOf(o);-1!==a&&i.splice(a,1)}}}},{key:"getRect",value:function(e){return null}}])&&On(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Rn=(Mn.Eventable=Dn,{}),jn=(Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1},{}),Fn=(Object.defineProperty(jn,"__esModule",{value:!0}),jn.createInteractStatic=function(r){var e=function e(t,n){var i=r.interactables.get(t,n);return i||((i=r.interactables.new(t,n)).events.global=e.globalEvents),i};return e.getPointerAverage=S.pointerAverage,e.getTouchBBox=S.touchBBox,e.getTouchDistance=S.touchDistance,e.getTouchAngle=S.touchAngle,e.getElementRect=w.getElementRect,e.getElementClientRect=w.getElementClientRect,e.matchesSelector=w.matchesSelector,e.closest=w.closest,e.globalEvents={},e.version="1.10.17",e.scope=r,e.use=function(e,t){return this.scope.usePlugin(e,t),this},e.isSet=function(e,t){return!!this.scope.interactables.get(e,t&&t.context)},e.on=(0,_.warnOnce)(function(e,t,n){if(T.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),T.default.array(e)){for(var i=0;i<e.length;i++){var r=e[i];this.on(r,t,n)}return this}if(T.default.object(e)){for(var o in e)this.on(o,e[o],t);return this}return(0,Rn.default)(e,this.scope.actions)?this.globalEvents[e]?this.globalEvents[e].push(t):this.globalEvents[e]=[t]:this.scope.events.add(this.scope.document,e,t,{options:n}),this},"The interact.on() method is being deprecated"),e.off=(0,_.warnOnce)(function(e,t,n){if(T.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),T.default.array(e)){for(var i=0;i<e.length;i++){var r=e[i];this.off(r,t,n)}return this}if(T.default.object(e)){for(var o in e)this.off(o,e[o],t);return this}var a;return(0,Rn.default)(e,this.scope.actions)?e in this.globalEvents&&-1!==(a=this.globalEvents[e].indexOf(t))&&this.globalEvents[e].splice(a,1):this.scope.events.remove(this.scope.document,e,t,n),this},"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return E.default.supportsTouch},e.supportsPointerEvent=function(){return E.default.supportsPointerEvent},e.stop=function(){for(var e=0;e<this.scope.interactions.list.length;e++)this.scope.interactions.list[e].stop();return this},e.pointerMoveTolerance=function(e){return T.default.number(e)?(this.scope.interactions.pointerMoveTolerance=e,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(e,t){this.scope.addDocument(e,t)},e.removeDocument=function(e){this.scope.removeDocument(e)},e},{});function Nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.Interactable=void 0;var Bn=function(){function r(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),d(this,"options",void 0),d(this,"_actions",void 0),d(this,"target",void 0),d(this,"events",new Mn.Eventable),d(this,"_context",void 0),d(this,"_win",void 0),d(this,"_doc",void 0),d(this,"_scopeEvents",void 0),d(this,"_rectChecker",void 0),this._actions=t.actions,this.target=e,this._context=t.context||n,this._win=(0,m.getWindow)((0,w.trySelector)(e)?this._context:e),this._doc=this._win.document,this._scopeEvents=i,this.set(t)}var e,t;return e=r,(t=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(e,t){return T.default.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),T.default.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),T.default.func(t.onend)&&this.on("".concat(e,"end"),t.onend),T.default.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){(T.default.array(t)||T.default.object(t))&&this.off(e,t),(T.default.array(n)||T.default.object(n))&&this.on(e,n)}},{key:"setPerAction",value:function(e,t){var n=this._defaults;for(var i in t){var r=i,o=this.options[e],a=t[r];"listeners"===r&&this.updatePerActionListeners(e,o.listeners,a),T.default.array(a)?o[r]=f.from(a):T.default.plainObject(a)?(o[r]=(0,P.default)(o[r]||{},(0,Rt.default)(a)),T.default.object(n.perAction[r])&&"enabled"in n.perAction[r]&&(o[r].enabled=!1!==a.enabled)):T.default.bool(a)&&T.default.object(n.perAction[r])?o[r].enabled=a:o[r]=a}}},{key:"getRect",value:function(e){return e=e||(T.default.element(this.target)?this.target:null),T.default.string(this.target)&&(e=e||this._context.querySelector(this.target)),(0,w.getElementRect)(e)}},{key:"rectChecker",value:function(e){var n=this;return T.default.func(e)?(this._rectChecker=e,this.getRect=function(e){var t=(0,P.default)({},n._rectChecker(e));return"width"in t||(t.width=t.right-t.left,t.height=t.bottom-t.top),t},this):null===e?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if((0,w.trySelector)(t)||T.default.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||(0,w.nodeContains)(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!T.default.element(n)&&(T.default.string(e)?(0,w.matchesUpTo)(n,e,t):!!T.default.element(e)&&(0,w.nodeContains)(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!T.default.element(n))&&(T.default.string(e)?(0,w.matchesUpTo)(n,e,t):!!T.default.element(e)&&(0,w.nodeContains)(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,i){T.default.object(t)&&!T.default.array(t)&&(i=n,n=null);var r="on"===e?"add":"remove",o=(0,se.default)(t,n);for(var a in o){"wheel"===a&&(a=E.default.wheelEvent);for(var s=0;s<o[a].length;s++){var l=o[a][s];(0,Rn.default)(a,this._actions)?this.events[e](a,l):T.default.string(this.target)?this._scopeEvents["".concat(r,"Delegate")](this.target,this._context,a,l,i):this._scopeEvents[r](this.target,a,l,i)}}return this}},{key:"on",value:function(e,t,n){return this._onOff("on",e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff("off",e,t,n)}},{key:"set",value:function(e){var t=this._defaults;for(var n in T.default.object(e)||(e={}),this.options=(0,Rt.default)(t.base),this._actions.methodDict){var i=n,r=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,(0,P.default)((0,P.default)({},t.perAction),t.actions[i])),this[r](e[i])}for(var o in e)T.default.func(this[o])&&this[o](e[o]);return this}},{key:"unset",value:function(){if(T.default.string(this.target))for(var e in this._scopeEvents.delegatedEvents)for(var t=this._scopeEvents.delegatedEvents[e],n=t.length-1;n>=0;n--){var i=t[n],r=i.selector,o=i.context,a=i.listeners;r===this.target&&o===this._context&&t.splice(n,1);for(var s=a.length-1;s>=0;s--)this._scopeEvents.removeDelegate(this.target,this._context,e,a[s][0],a[s][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Nn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(),Un=(Fn.Interactable=Bn,{});function zn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Un,"__esModule",{value:!0}),Un.InteractableSet=void 0;var qn=function(){function t(e){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hn(this,"list",[]),Hn(this,"selectorMap",{}),Hn(this,"scope",void 0),this.scope=e,e.addListeners({"interactable:unset":function(e){var t=e.interactable,n=t.target,i=t._context,r=T.default.string(n)?a.selectorMap[n]:n[a.scope.id],o=f.findIndex(r,function(e){return e.context===i});r[o]&&(r[o].context=null,r[o].interactable=null),r.splice(o,1)}})}var e,n;return e=t,(n=[{key:"new",value:function(e,t){t=(0,P.default)(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document,this.scope.events),i={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),T.default.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(i)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(i)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(t,e){var n=e&&e.context||this.scope.document,i=T.default.string(t),r=i?this.selectorMap[t]:t[this.scope.id];if(!r)return null;var o=f.find(r,function(e){return e.context===n&&(i||e.interactable.inContext(t))});return o&&o.interactable}},{key:"forEachMatch",value:function(e,t){for(var n=0;n<this.list.length;n++){var i=this.list[n],r=void 0;if((T.default.string(i.target)?T.default.element(e)&&w.matchesSelector(e,i.target):e===i.target)&&i.inContext(e)&&(r=t(i)),void 0!==r)return r}}}])&&zn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Vn=(Un.InteractableSet=qn,{});function Wn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.default=void 0;var Kn=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gn(this,"currentTarget",void 0),Gn(this,"originalEvent",void 0),Gn(this,"type",void 0),this.originalEvent=e,(0,ce.default)(this,e)}var e,n;return e=t,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Wn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qn(e){if(!T.default.object(e))return{capture:!!e,passive:!1};var t=(0,P.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var Zn,Jn=(Vn.default={id:"events",install:function(e){var t,d=[],y={},u=[],p={add:h,remove:v,addDelegate:function(t,n,e,i,r){var o=Qn(r);if(!y[e]){y[e]=[];for(var a=0;a<u.length;a++){var s=u[a];h(s,e,_),h(s,e,b,!0)}}var l=y[e],c=f.find(l,function(e){return e.selector===t&&e.context===n});c||(c={selector:t,context:n,listeners:[]},l.push(c)),c.listeners.push([i,o])},removeDelegate:function(e,t,n,i,r){var o,a=Qn(r),s=y[n],l=!1;if(s)for(o=s.length-1;o>=0;o--){var c=s[o];if(c.selector===e&&c.context===t){for(var u=c.listeners,d=u.length-1;d>=0;d--){var p=Yn(u[d],2),h=p[0],f=p[1],m=f.capture,g=f.passive;if(h===i&&m===a.capture&&g===a.passive){u.splice(d,1),u.length||(s.splice(o,1),v(t,n,_),v(t,n,b,!0)),l=!0;break}}if(l)break}}},delegateListener:_,delegateUseCapture:b,delegatedEvents:y,documents:u,targets:d,supportsOptions:!1,supportsPassive:!1};function h(t,e,n,i){var r=Qn(i),o=f.find(d,function(e){return e.eventTarget===t});o||(o={eventTarget:t,events:{}},d.push(o)),o.events[e]||(o.events[e]=[]),t.addEventListener&&!f.contains(o.events[e],n)&&(t.addEventListener(e,n,p.supportsOptions?r:r.capture),o.events[e].push(n))}function v(t,e,n,i){var r=Qn(i),o=f.findIndex(d,function(e){return e.eventTarget===t}),a=d[o];if(a&&a.events)if("all"!==e){var s=!1,l=a.events[e];if(l){if("all"===n){for(var c=l.length-1;c>=0;c--)v(t,e,l[c],r);return}for(var u=0;u<l.length;u++)if(l[u]===n){t.removeEventListener(e,n,p.supportsOptions?r:r.capture),l.splice(u,1),0===l.length&&(delete a.events[e],s=!0);break}}s&&!Object.keys(a.events).length&&d.splice(o,1)}else for(e in a.events)a.events.hasOwnProperty(e)&&v(t,e,"all")}function _(e,t){for(var n=Qn(t),i=new Kn(e),r=y[e.type],o=Yn(S.getEventTargets(e),1)[0],a=o;T.default.element(a);){for(var s=0;s<r.length;s++){var l=r[s],c=l.selector,u=l.context;if(w.matchesSelector(a,c)&&w.nodeContains(u,o)&&w.nodeContains(u,a)){var d=l.listeners;i.currentTarget=a;for(var p=0;p<d.length;p++){var h=Yn(d[p],2),f=h[0],m=h[1],g=m.capture,v=m.passive;g===n.capture&&v===n.passive&&f(i)}}}a=w.parentNode(a)}}function b(e){return _(e,!0)}return null==(t=e.document)||t.createElement("div").addEventListener("test",null,{get capture(){return p.supportsOptions=!0},get passive(){return p.supportsPassive=!0}}),e.events=p,p}},{}),$n=(Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=void 0,{methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<$n.methodOrder.length;t++){var n;n=$n.methodOrder[t];var i=$n[n](e);if(i)return i}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,i=e.eventTarget,r=e.scope;if(!/down|start/i.test(n))return null;for(var o=0;o<r.interactions.list.length;o++){var a=r.interactions.list[o],s=i;if(a.simulation&&a.simulation.allowResume&&a.pointerType===t)for(;s;){if(s===a.element)return a;s=w.parentNode(s)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,i=e.pointerType,r=e.eventType,o=e.scope;if("mouse"!==i&&"pen"!==i)return null;for(var a=0;a<o.interactions.list.length;a++){var s=o.interactions.list[a];if(s.pointerType===i){if(s.simulation&&!ei(s,n))continue;if(s.interacting())return s;t||(t=s)}}if(t)return t;for(var l=0;l<o.interactions.list.length;l++){var c=o.interactions.list[l];if(!(c.pointerType!==i||/down/i.test(r)&&c.simulation))return c}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(ei(r,t))return r}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(1===r.pointers.length){var o=r.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(r.pointers.length>=2)continue;if(!r.interacting()&&t===r.pointerType)return r}return null}});function ei(e,t){return e.pointers.some(function(e){return e.id===t})}var ti,ni=(Jn.default=$n,{});function ii(e){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ii(e)}function ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ai(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function li(e,t){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},li(e,t)}function ci(e,t){if(t&&("object"===ii(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=void 0;var di=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function pi(b,w){return function(e){var t=w.interactions.list,n=S.getPointerType(e),i=ri(S.getEventTargets(e),2),r=i[0],o=i[1],a=[];if(/^touch/.test(e.type)){w.prevTouchTime=w.now();for(var s=0;s<e.changedTouches.length;s++){var l=e.changedTouches[s],c={pointer:l,pointerId:S.getPointerId(l),pointerType:n,eventType:e.type,eventTarget:r,curEventTarget:o,scope:w},u=hi(c);a.push([c.pointer,c.eventTarget,c.curEventTarget,u])}}else{var d=!1;if(!E.default.supportsPointerEvent&&/mouse/.test(e.type)){for(var p=0;p<t.length&&!d;p++)d="mouse"!==t[p].pointerType&&t[p].pointerIsDown;d=d||w.now()-w.prevTouchTime<500||0===e.timeStamp}if(!d){var h={pointer:e,pointerId:S.getPointerId(e),pointerType:n,eventType:e.type,curEventTarget:o,eventTarget:r,scope:w},f=hi(h);a.push([h.pointer,h.eventTarget,h.curEventTarget,f])}}for(var m=0;m<a.length;m++){var g=ri(a[m],4),v=g[0],y=g[1],_=g[2];g[3][b](v,e,y,_)}}}function hi(e){var t=e.pointerType,n=e.scope,i={interaction:Jn.default.search(e),searchDetails:e};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:t})}function fi(e,t){var n=e.doc,i=e.scope,r=e.options,o=i.interactions.docEvents,a=i.events,s=a[t];for(var l in i.browser.isIOS&&!r.events&&(r.events={passive:!1}),a.delegatedEvents)s(n,l,a.delegateListener),s(n,l,a.delegateUseCapture,!0);for(var c=r&&r.events,u=0;u<o.length;u++){var d=o[u];s(n,d.type,d.listener,c)}}var mi,gi,vi=(ni.default={id:"core/interactions",install:function(s){for(var e={},t=0;t<di.length;t++){var n=di[t];e[n]=pi(n,s)}var i,r=E.default.pEventTypes;function o(){for(var e=0;e<s.interactions.list.length;e++){var t=s.interactions.list[e];if(t.pointerIsDown&&"touch"===t.pointerType&&!t._interacting)for(var n=function(){var n=t.pointers[i];s.documents.some(function(e){var t=e.doc;return(0,w.nodeContains)(t,n.downTarget)})||t.removePointer(n.pointer,n.event)},i=0;i<t.pointers.length;i++)n()}}(i=g.default.PointerEvent?[{type:r.down,listener:o},{type:r.down,listener:e.pointerDown},{type:r.move,listener:e.pointerMove},{type:r.up,listener:e.pointerUp},{type:r.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:o},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var t=0;t<s.interactions.list.length;t++)s.interactions.list[t].documentBlur(e)}}),s.prevTouchTime=0,s.Interaction=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&li(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ui(i);if(r){var n=ui(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ci(this,e)});function a(){return ai(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"pointerMoveTolerance",get:function(){return s.interactions.pointerMoveTolerance},set:function(e){s.interactions.pointerMoveTolerance=e}},{key:"_now",value:function(){return s.now()}}])&&si(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l.default),s.interactions={list:[],new:function(e){e.scopeFire=function(e,t){return s.fire(e,t)};var t=new s.Interaction(e);return s.interactions.list.push(t),t},listeners:e,docEvents:i,pointerMoveTolerance:1},s.usePlugin(Tt.default)},listeners:{"scope:add-document":function(e){return fi(e,"add")},"scope:remove-document":function(e){return fi(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,i=t.interactions.list.length-1;i>=0;i--){var r=t.interactions.list[i];r.interactable===n&&(r.stop(),t.fire("interactions:destroy",{interaction:r}),r.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(i,1))}}},onDocSignal:fi,doOnInteractions:pi,methodNames:di},{});function yi(e){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(e)}function _i(){return _i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=bi(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},_i.apply(this,arguments)}function bi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function wi(e,t){return wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wi(e,t)}function Ei(e,t){if(t&&("object"===yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function Si(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ti(e,t,n){return t&&xi(e.prototype,t),n&&xi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(vi,"__esModule",{value:!0}),vi.Scope=void 0,vi.initScope=ki;var Pi=function(){function e(){var t=this;Si(this,e),C(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),C(this,"isInitialized",!1),C(this,"listenerMaps",[]),C(this,"browser",E.default),C(this,"defaults",(0,Rt.default)(Yt.defaults)),C(this,"Eventable",Mn.Eventable),C(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),C(this,"interactStatic",(0,jn.createInteractStatic)(this)),C(this,"InteractEvent",Xt.InteractEvent),C(this,"Interactable",void 0),C(this,"interactables",new Un.InteractableSet(this)),C(this,"_win",void 0),C(this,"document",void 0),C(this,"window",void 0),C(this,"documents",[]),C(this,"_plugins",{list:[],map:{}}),C(this,"onWindowUnload",function(e){return t.removeDocument(e.target)});var o=this;this.Interactable=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wi(e,t)}(n,e);var i,r,t=(i=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=I(i);if(r){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ei(this,e)});function n(){return Si(this,n),t.apply(this,arguments)}return Ti(n,[{key:"_defaults",get:function(){return o.defaults}},{key:"set",value:function(e){return _i(I(n.prototype),"set",this).call(this,e),o.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){_i(I(n.prototype),"unset",this).call(this);var e=o.interactables.list.indexOf(this);e<0||(_i(I(n.prototype),"unset",this).call(this),o.interactables.list.splice(e,1),o.fire("interactable:unset",{interactable:this}))}}]),n}(Fn.Interactable)}return Ti(e,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0;n<this.listenerMaps.length;n++){var i=this.listenerMaps[n].map[e];if(i&&!1===i(t,this,e))return!1}}},{key:"init",value:function(e){return this.isInitialized?this:ki(this,e)}},{key:"pluginIsInstalled",value:function(e){return this._plugins.map[e.id]||-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(!this.isInitialized)return this;if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,i=this.listenerMaps.length,r=e.before.reduce(function(e,t){return e[t]=!0,e[Ii(t)]=!0,e},{});n<i;n++){var o=this.listenerMaps[n].id;if(r[o]||r[Ii(o)])break}this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,t){if(-1!==this.getDocIndex(e))return!1;var n=m.getWindow(e);t=t?(0,P.default)({},t):{},this.documents.push({doc:e,options:t}),this.events.documents.push(e),e!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:n,scope:this,options:t})}},{key:"removeDocument",value:function(e){var t=this.getDocIndex(e),n=m.getWindow(e),i=this.documents[t].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(t,1),this.events.documents.splice(t,1),this.fire("scope:remove-document",{doc:e,window:n,scope:this,options:i})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){var t=this.getDocIndex(e);return-1===t?null:this.documents[t].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function ki(e,t){return e.isInitialized=!0,T.default.window(t)&&m.init(t),g.default.init(t),E.default.init(t),h.default.init(t),e.window=t,e.document=t.document,e.usePlugin(ni.default),e.usePlugin(Vn.default),e}function Ii(e){return e&&e.replace(/\/.*$/,"")}vi.Scope=Pi;var t={},Ci=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,new vi.Scope),Mi=Ci.interactStatic,Oi=(t.default=Mi,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0),Ai=(Ci.init(Oi),{}),Li=(Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=void 0,Ai.default=function(){},{}),Di=(Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0,Li.default=function(){},{});function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ji(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=void 0,Di.default=function(f){var m=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(e){var t=Ri(e,2),n=t[0],i=t[1];return n in f||i in f}),e=function(e,t){for(var n=f.range,i=f.limits,r=void 0===i?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:i,o=f.offset,a=void 0===o?{x:0,y:0}:o,s={range:n,grid:f,x:null,y:null},l=0;l<m.length;l++){var c=Ri(m[l],2),u=c[0],d=c[1],p=Math.round((e-a.x)/f[u]),h=Math.round((t-a.y)/f[d]);s[u]=Math.max(r.left,Math.min(r.right,p*f[u]+a.x)),s[d]=Math.max(r.top,Math.min(r.bottom,h*f[d]+a.y))}return s};return e.grid=f,e.coordFields=m,e};var Fi={},Ni=(Object.defineProperty(Fi,"__esModule",{value:!0}),Object.defineProperty(Fi,"edgeTarget",{enumerable:!0,get:function(){return Ai.default}}),Object.defineProperty(Fi,"elements",{enumerable:!0,get:function(){return Li.default}}),Object.defineProperty(Fi,"grid",{enumerable:!0,get:function(){return Di.default}}),{}),Bi=(Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.default=void 0,{id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,P.default)(t.snappers||{},Fi),t.createSnapGrid=t.snappers.grid}}),Ui,zi=(Ni.default=Bi,{});function Hi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hi(Object(n),!0).forEach(function(e){Vi(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=zi.aspectRatio=void 0;var Wi={start:function(e){var t=e.state,n=e.rect,i=e.edges,r=e.pageCoords,o=t.options.ratio,a=t.options,s=a.equalDelta,l=a.modifiers;"preserve"===o&&(o=n.width/n.height),t.startCoords=(0,P.default)({},r),t.startRect=(0,P.default)({},n),t.ratio=o,t.equalDelta=s;var c=t.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(t.xIsPrimaryAxis=!(!i.left&&!i.right),t.equalDelta){var u=(c.left?1:-1)*(c.top?1:-1);t.edgeSign={x:u,y:u}}else t.edgeSign={x:c.left?-1:1,y:c.top?-1:1};if((0,P.default)(e.edges,c),l&&l.length){var d=new jt.default(e.interaction);d.copyFrom(e.interaction.modification),d.prepareStates(l),t.subModification=d,d.startAll(qi({},e))}},set:function(e){var t=e.state,n=e.rect,i=e.coords,r=(0,P.default)({},i),o=t.equalDelta?Gi:Yi;if(o(t,t.xIsPrimaryAxis,i,n),!t.subModification)return null;var a=(0,P.default)({},n);(0,v.addEdges)(t.linkedEdges,a,{x:i.x-r.x,y:i.y-r.y});var s=t.subModification.setAll(qi(qi({},e),{},{rect:a,edges:t.linkedEdges,pageCoords:i,prevCoords:i,prevRect:a})),l=s.delta;return s.changed&&(o(t,Math.abs(l.x)>Math.abs(l.y),s.coords,s.rect),(0,P.default)(i,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Gi(e,t,n){var i=e.startCoords,r=e.edgeSign;t?n.y=i.y+(n.x-i.x)*r.y:n.x=i.x+(n.y-i.y)*r.x}function Yi(e,t,n,i){var r=e.startRect,o=e.startCoords,a=e.ratio,s=e.edgeSign;if(t){var l=i.width/a;n.y=o.y+(l-r.height)*s.y}else{var c=i.height*a;n.x=o.x+(c-r.width)*s.x}}zi.aspectRatio=Wi;var Xi=(0,s.makeModifier)(Wi,"aspectRatio"),Ki=(zi.default=Xi,{}),Qi=(Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.default=void 0,function(){});Qi._defaults={};var Zi,Ji=(Ki.default=Qi,{}),M=(Object.defineProperty(Ji,"__esModule",{value:!0}),Object.defineProperty(Ji,"default",{enumerable:!0,get:function(){return Ki.default}}),{});function $i(e,t,n){return T.default.func(e)?v.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):v.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,M.getRestrictionRect=$i,M.restrict=void 0;var er={start:function(e){var t=e.rect,n=e.startOffset,i=e.state,r=e.interaction,o=e.pageCoords,a=i.options,s=a.elementRect,l=(0,P.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(t&&s){var c=$i(a.restriction,r,o);if(c){var u=c.right-c.left-t.width,d=c.bottom-c.top-t.height;u<0&&(l.left+=u,l.right+=u),d<0&&(l.top+=d,l.bottom+=d)}l.left+=n.left-t.width*s.left,l.top+=n.top-t.height*s.top,l.right+=n.right-t.width*(1-s.right),l.bottom+=n.bottom-t.height*(1-s.bottom)}i.offset=l},set:function(e){var t=e.coords,n=e.interaction,i=e.state,r=i.options,o=i.offset,a=$i(r.restriction,n,t);if(a){var s=v.xywhToTlbr(a);t.x=Math.max(Math.min(s.right-o.right,t.x),s.left+o.left),t.y=Math.max(Math.min(s.bottom-o.bottom,t.y),s.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},tr=(M.restrict=er,(0,s.makeModifier)(er,"restrict")),O=(M.default=tr,{}),nr=(Object.defineProperty(O,"__esModule",{value:!0}),O.restrictEdges=O.default=void 0,{top:1/0,left:1/0,bottom:-1/0,right:-1/0}),ir={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function rr(e,t){for(var n=["top","left","bottom","right"],i=0;i<n.length;i++){var r=n[i];r in e||(e[r]=t[r])}return e}var or={noInner:nr,noOuter:ir,start:function(e){var t,n=e.interaction,i=e.startOffset,r=e.state,o=r.options;if(o){var a=(0,M.getRestrictionRect)(o.offset,n,n.coords.start.page);t=v.rectToXY(a)}t=t||{x:0,y:0},r.offset={top:t.y+i.top,left:t.x+i.left,bottom:t.y-i.bottom,right:t.x-i.right}},set:function(e){var t=e.coords,n=e.edges,i=e.interaction,r=e.state,o=r.offset,a=r.options;if(n){var s=(0,P.default)({},t),l=(0,M.getRestrictionRect)(a.inner,i,s)||{},c=(0,M.getRestrictionRect)(a.outer,i,s)||{};rr(l,nr),rr(c,ir),n.top?t.y=Math.min(Math.max(c.top+o.top,s.y),l.top+o.top):n.bottom&&(t.y=Math.max(Math.min(c.bottom+o.bottom,s.y),l.bottom+o.bottom)),n.left?t.x=Math.min(Math.max(c.left+o.left,s.x),l.left+o.left):n.right&&(t.x=Math.max(Math.min(c.right+o.right,s.x),l.right+o.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},ar=(O.restrictEdges=or,(0,s.makeModifier)(or,"restrictEdges")),sr=(O.default=ar,{}),lr=(Object.defineProperty(sr,"__esModule",{value:!0}),(sr.restrictRect=sr.default=void 0,P.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},M.restrict.defaults)),cr={start:M.restrict.start,set:M.restrict.set,defaults:lr},ur=(sr.restrictRect=cr,(0,s.makeModifier)(cr,"restrictRect")),dr=(sr.default=ur,{}),pr=(Object.defineProperty(dr,"__esModule",{value:!0}),dr.restrictSize=dr.default=void 0,{width:-1/0,height:-1/0}),hr={width:1/0,height:1/0},fr={start:function(e){return O.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,i=e.rect,r=e.edges,o=n.options;if(r){var a=v.tlbrToXywh((0,M.getRestrictionRect)(o.min,t,e.coords))||pr,s=v.tlbrToXywh((0,M.getRestrictionRect)(o.max,t,e.coords))||hr;n.options={endOnly:o.endOnly,inner:(0,P.default)({},O.restrictEdges.noInner),outer:(0,P.default)({},O.restrictEdges.noOuter)},r.top?(n.options.inner.top=i.bottom-a.height,n.options.outer.top=i.bottom-s.height):r.bottom&&(n.options.inner.bottom=i.top+a.height,n.options.outer.bottom=i.top+s.height),r.left?(n.options.inner.left=i.right-a.width,n.options.outer.left=i.right-s.width):r.right&&(n.options.inner.right=i.left+a.width,n.options.outer.right=i.left+s.width),O.restrictEdges.set(e),n.options=o}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},mr=(dr.restrictSize=fr,(0,s.makeModifier)(fr,"restrictSize")),gr=(dr.default=mr,{}),A=(Object.defineProperty(gr,"__esModule",{value:!0}),Object.defineProperty(gr,"default",{enumerable:!0,get:function(){return Ki.default}}),{}),vr=(Object.defineProperty(A,"__esModule",{value:!0}),{start:function(e){var n,t=e.interaction,i=e.interactable,r=e.element,o=e.rect,a=e.state,s=e.startOffset,l=a.options,c=l.offsetWithOrigin?function(e){var t=e.interaction.element;return(0,v.rectToXY)((0,v.resolveRectLike)(e.state.options.origin,null,null,[t]))||(0,ae.default)(e.interactable,t,e.interaction.prepared.name)}(e):{x:0,y:0};if("startCoords"===l.offset)n={x:t.coords.start.page.x,y:t.coords.start.page.y};else{var u=(0,v.resolveRectLike)(l.offset,i,r,[t]);(n=(0,v.rectToXY)(u)||{x:0,y:0}).x+=c.x,n.y+=c.y}var d=l.relativePoints;a.offsets=o&&d&&d.length?d.map(function(e,t){return{index:t,relativePoint:e,x:s.left-o.width*e.x+n.x,y:s.top-o.height*e.y+n.y}}):[{index:0,relativePoint:null,x:n.x,y:n.y}]},set:function(e){var t=e.interaction,n=e.coords,i=e.state,r=i.options,o=i.offsets,a=(0,ae.default)(t.interactable,t.element,t.prepared.name),s=(0,P.default)({},n),l=[];r.offsetWithOrigin||(s.x-=a.x,s.y-=a.y);for(var c=0;c<o.length;c++)for(var u=o[c],d=s.x-u.x,p=s.y-u.y,h=0,f=r.targets.length;h<f;h++){var m,g=r.targets[h];(m=T.default.func(g)?g(d,p,t._proxy,u,h):g)&&l.push({x:(T.default.number(m.x)?m.x:d)+u.x,y:(T.default.number(m.y)?m.y:p)+u.y,range:T.default.number(m.range)?m.range:r.range,source:g,index:h,offset:u})}for(var v={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},y=0;y<l.length;y++){var _=l[y],b=_.range,w=_.x-s.x,E=_.y-s.y,S=(0,k.default)(w,E),x=S<=b;b===1/0&&v.inRange&&v.range!==1/0&&(x=!1),v.target&&!(x?v.inRange&&b!==1/0?S/b<v.distance/v.range:b===1/0&&v.range!==1/0||S<v.distance:!v.inRange&&S<v.distance)||(v.target=_,v.distance=S,v.range=b,v.inRange=x,v.delta.x=w,v.delta.y=E)}return v.inRange&&(n.x=v.target.x,n.y=v.target.y),i.closest=v,v},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!(A.snap=A.default=void 0),origin:null,relativePoints:null,endOnly:!1,enabled:!1}}),yr=(A.snap=vr,(0,s.makeModifier)(vr,"snap")),L=(A.default=yr,{});function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(L,"__esModule",{value:!0}),L.snapSize=L.default=void 0;var br={start:function(e){var t=e.state,n=e.edges,i=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:i.offset||"self",origin:{x:0,y:0},range:i.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],A.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,n,i=e.interaction,r=e.state,o=e.coords,a=r.options,s=r.offsets,l={x:o.x-s[0].x,y:o.y-s[0].y};r.options=(0,P.default)({},a),r.options.targets=[];for(var c=0;c<(a.targets||[]).length;c++){var u=(a.targets||[])[c],d=void 0;if(d=T.default.func(u)?u(l.x,l.y,i):u){for(var p=0;p<r.targetFields.length;p++){var h=(t=r.targetFields[p],n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=h[0],m=h[1];if(f in d||m in d){d.x=d[f],d.y=d[m];break}}r.options.targets.push(d)}}var g=A.snap.set(e);return r.options=a,g},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},wr=(L.snapSize=br,(0,s.makeModifier)(br,"snapSize")),Er=(L.default=wr,{}),Sr=(Object.defineProperty(Er,"__esModule",{value:!0}),Er.snapEdges=Er.default=void 0,{start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],L.snapSize.start(e)):null},set:L.snapSize.set,defaults:(0,P.default)((0,Rt.default)(L.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})}),xr=(Er.snapEdges=Sr,(0,s.makeModifier)(Sr,"snapEdges")),Tr=(Er.default=xr,{}),Pr=(Object.defineProperty(Tr,"__esModule",{value:!0}),Object.defineProperty(Tr,"default",{enumerable:!0,get:function(){return Ki.default}}),{}),kr=(Object.defineProperty(Pr,"__esModule",{value:!0}),Object.defineProperty(Pr,"default",{enumerable:!0,get:function(){return Ki.default}}),{}),Ir=(Object.defineProperty(kr,"__esModule",{value:!0}),kr.default=void 0,{aspectRatio:zi.default,restrictEdges:O.default,restrict:M.default,restrictRect:sr.default,restrictSize:dr.default,snapEdges:Er.default,snap:A.default,snapSize:L.default,spring:Tr.default,avoid:Ji.default,transform:Pr.default,rubberband:gr.default}),Cr=(kr.default=Ir,{}),Mr=(Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.default=void 0,{id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(s.default),e.usePlugin(Ni.default),t.modifiers=kr.default,kr.default){var i=kr.default[n],r=i._defaults,o=i._methods;r._methods=o,e.defaults.perAction[n]=r}}}),Or,Ar=(Cr.default=Mr,{});function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Dr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rr(e,t){return Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rr(e,t)}function jr(e,t){if(t&&("object"===Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fr(e)}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.default=Ar.PointerEvent=void 0;var Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rr(e,t)}(u,e);var t,n,i,r,c=(i=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Nr(i);if(r){var n=Nr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jr(this,e)});function u(e,t,n,i,r,o){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a=c.call(this,r),S.pointerExtend(Fr(a),n),n!==t&&S.pointerExtend(Fr(a),t),a.timeStamp=o,a.originalEvent=n,a.type=e,a.pointerId=S.getPointerId(t),a.pointerType=S.getPointerType(t),a.target=i,a.currentTarget=null,"tap"===e){var s=r.getPointerIndex(t);a.dt=a.timeStamp-r.pointers[s].downTime;var l=a.timeStamp-r.tapTime;a.double=!!r.prevTap&&"doubletap"!==r.prevTap.type&&r.prevTap.target===a.target&&l<500}else"doubletap"===e&&(a.dt=t.timeStamp-r.tapTime,a.double=!0);return a}return t=u,(n=[{key:"_subtractOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX-=t,this.pageY-=n,this.clientX-=t,this.clientY-=n,this}},{key:"_addOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX+=t,this.pageY+=n,this.clientX+=t,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Dr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(ge.BaseEvent),Ur=(Ar.PointerEvent=Ar.default=Br,{}),zr=(Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.default=void 0,{id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=zr,e.defaults.actions.pointerEvents=zr.defaults,(0,P.default)(e.actions.phaselessTypes,zr.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&qr(e),D({interaction:n,pointer:i,event:r,eventTarget:o,type:"move"},t))},"interactions:down":function(e,t){!function(e,t){for(var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.pointerIndex,s=n.pointers[a].hold,l=w.getPath(o),c={interaction:n,pointer:i,event:r,eventTarget:o,type:"hold",targets:[],path:l,node:null},u=0;u<l.length;u++){var d=l[u];c.node=d,t.fire("pointerEvents:collect-targets",c)}if(c.targets.length){for(var p=1/0,h=0;h<c.targets.length;h++){var f=c.targets[h].eventable.options.holdDuration;f<p&&(p=f)}s.duration=p,s.timeout=setTimeout(function(){D({interaction:n,eventTarget:o,pointer:i,event:r,type:"hold"},t)},p)}}(e,t),D(e,t)},"interactions:up":function(e,t){qr(e),D(e,t),function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;n.pointerWasMoved||D({interaction:n,eventTarget:o,pointer:i,event:r,type:"tap"},t)}(e,t)},"interactions:cancel":function(e,t){qr(e),D(e,t)}},PointerEvent:Ar.PointerEvent,fire:D,collectEventTargets:Hr,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}});function D(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.type,s=e.targets,l=void 0===s?Hr(e,t):s,c=new Ar.PointerEvent(a,i,r,o,n,t.now());t.fire("pointerEvents:new",{pointerEvent:c});for(var u={interaction:n,pointer:i,event:r,eventTarget:o,targets:l,type:a,pointerEvent:c},d=0;d<l.length;d++){var p=l[d];for(var h in p.props||{})c[h]=p.props[h];var f=(0,ae.default)(p.eventable,p.node);if(c._subtractOrigin(f),c.eventable=p.eventable,c.currentTarget=p.node,p.eventable.fire(c),c._addOrigin(f),c.immediatePropagationStopped||c.propagationStopped&&d+1<l.length&&l[d+1].node!==c.currentTarget)break}if(t.fire("pointerEvents:fired",u),"tap"===a){var m=c.double?D({interaction:n,pointer:i,event:r,eventTarget:o,type:"doubletap"},t):c;n.prevTap=m,n.tapTime=m.timeStamp}return c}function Hr(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.type,s=n.getPointerIndex(i),l=n.pointers[s];if("tap"===a&&(n.pointerWasMoved||!l||l.downTarget!==o))return[];for(var c=w.getPath(o),u={interaction:n,pointer:i,event:r,eventTarget:o,type:a,path:c,targets:[],node:null},d=0;d<c.length;d++){var p=c[d];u.node=p,t.fire("pointerEvents:collect-targets",u)}return"hold"===a&&(u.targets=u.targets.filter(function(e){var t;return e.eventable.options.holdDuration===(null==(t=n.pointers[s])?void 0:t.hold.duration)})),u.targets}function qr(e){var t=e.interaction,n=e.pointerIndex,i=t.pointers[n].hold;i&&i.timeout&&(clearTimeout(i.timeout),i.timeout=null)}var Vr,Wr=(Ur.default=zr,{});function Gr(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.default=void 0;var Yr={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(Ur.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=Gr,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,i=e.pointerEvent,r=e.eventTarget,o=e.targets;if("hold"===i.type&&o.length){var a=o[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:n,eventTarget:r,type:"hold",pointer:i,event:i},t)},a))}}})},Xr,Kr=(Wr.default=Yr,{});function Qr(e){return(0,P.default)(this.events.options,e),this}Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.default=void 0;var Zr,Jr,$r=(Kr.default={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Qr;var i=t.prototype._backCompatOption;t.prototype._backCompatOption=function(e,t){var n=i.call(this,e,t);return n===this&&(this.events.options[e]=t),n}},listeners:{"pointerEvents:collect-targets":function(e,t){var i=e.targets,r=e.node,o=e.type,a=e.eventTarget;t.interactables.forEachMatch(r,function(e){var t=e.events,n=t.options;t.types[o]&&t.types[o].length&&e.testIgnoreAllow(n,r,a)&&i.push({node:r,eventable:t,props:{interactable:e}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,i=e.options;(0,P.default)(n.events.options,t.pointerEvents.defaults),(0,P.default)(n.events.options,i.pointerEvents||{})}}},{}),eo=(Object.defineProperty($r,"__esModule",{value:!0}),$r.default=void 0,{id:"pointer-events",install:function(e){e.usePlugin(Ur),e.usePlugin(Wr.default),e.usePlugin(Kr.default)}}),to,no=($r.default=eo,{});function io(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(s,l,c){for(var u=T.default.string(s.target)?f.from(s._context.querySelectorAll(s.target)):[s.target],d=c.window.Promise,p=d?[]:null,e=function(){var t=u[h],e=s.getRect(t);if(!e)return"break";var n=f.find(c.interactions.list,function(e){return e.interacting()&&e.interactable===s&&e.element===t&&e.prepared.name===l.name}),i=void 0;if(n)n.move(),p&&(i=n._reflowPromise||new d(function(e){n._reflowResolve=e}));else{var r=(0,v.tlbrToXywh)(e),o={page:{x:r.x,y:r.y},client:{x:r.x,y:r.y},timeStamp:c.now()},a=S.coordsToEvent(o);i=function(e,t,n,i,r){var o=e.interactions.new({pointerType:"reflow"}),a={interaction:o,event:r,pointer:r,eventTarget:n,phase:"reflow"};o.interactable=t,o.element=n,o.prevEvent=r,o.updatePointer(r,r,n,!0),S.setZeroCoords(o.coords.delta),(0,_.copyAction)(o.prepared,i),o._doPhase(a);var s=e.window.Promise,l=s?new s(function(e){o._reflowResolve=e}):void 0;return o._reflowPromise=l,o.start(i,t,n),o._interacting?(o.move(a),o.end(r)):(o.stop(),o._reflowResolve()),o.removePointer(r,r),l}(c,s,t,l,a)}p&&p.push(i)},h=0;h<u.length&&"break"!==e();h++);return p&&d.all(p).then(function(){return s})}(this,e,t)}}Object.defineProperty(no,"__esModule",{value:!0}),no.default=void 0,no.install=io;var ro,oo,R=(no.default={id:"reflow",install:io,listeners:{"interactions:stop":function(e,t){var n=e.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),f.remove(t.interactions.list,n))}}},{exports:{}});function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}Object.defineProperty(R.exports,"__esModule",{value:!0}),R.exports.default=void 0,t.default.use(Tt.default),t.default.use(r.default),t.default.use($r.default),t.default.use(En.default),t.default.use(Cr.default),t.default.use(St.default),t.default.use(Ye.default),t.default.use(e.default),t.default.use(no.default);var so=t.default;if(R.exports.default=so,"object"===ao(R)&&R)try{R.exports=t.default}catch(j){}t.default.default=t.default,Ye.default,e.default,St.default,Tt.default,At.default,En.default,t.default,Cr.default,r.default,$r.default,no.default;var R=R.exports,lo={exports:{}};function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}Object.defineProperty(lo.exports,"__esModule",{value:!0}),lo.exports.default=void 0;var uo=R.default;if(lo.exports.default=uo,"object"===co(lo)&&lo)try{lo.exports=R.default}catch(j){}return R.default.default=R.default,lo.exports}()},function(e,h,f){"use strict";!function(r){var i,t,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(h,"__esModule",{value:!0}),h.SignBaseOptionsManager=void 0,f(89)),a=f(170),s=f(197),l=f(184),c=n(f(198)),u=f(171),d=n(f(208)),n=(t=o.OptionsManager,e(p,t),p.prototype.initViewManager=function(){},p.prototype.fileReady=function(e){},p.prototype.startPanels=function(){t.prototype.startPanels.call(this),this.initTogglePreview(),this.previewManager=new c.default(this.toolbarPaginate)},p.prototype.setFileNamesOnView=function(){var t=[];this.files.files.forEach(function(e){t.push('<span class="file__name">'+e.name+"</span>")}),r("#documents").html(t.join(", "))},p.prototype.initTogglePreview=function(){var e=this;r(".tool__preview__toggle").on("click",function(){setTimeout(function(){a.Toolbar.refresh(),e.previewManager.adjustPages()},200),r(".tool__preview").toggleClass("closed")})},p.prototype.addEditorPages=function(e){for(var t=document.querySelector(".editor__content"),n=0;n<parseInt(e.pages);n++){var i=e.pdf_pages[n].split("x"),r=n+1,o=800*parseFloat(i[1])/parseFloat(i[0]),a=document.createElement("div"),s=document.createElement("img");s.id="page_"+e.id+"_"+r,s.width=800,s.height=o,a.classList.add("editor__page"),a.classList.add("file_"+e.id),a.dataset.file=e.id,a.dataset.page=r.toString(),a.dataset.width=i[0],a.dataset.height=i[1],a.append(s),t.append(a)}},p.prototype.renderEditorPages=function(o){var a=this;return r(".file_"+o.id).show(),new Promise(function(e,t){if(void 0!==o&&o.pages){for(var n=0;n<parseInt(o.pages);n++){var i=n+1,r="page_"+o.id+"_"+i;a.renderPreviewPage(o,i,r)}a.onRenderEditorPages(o),e()}else t()})},p.prototype.renderEditorPage=function(e,t,n){this.pdfRender.renderPage(this.processManager.taskId,e.server_filename.replace(".pdf",""),t,n,150)},p.prototype.onRenderEditorPages=function(e){},p.prototype.addPreviewPages=function(e){for(var t=0;t<parseInt(e.pages);t++){var n=e.pdf_pages[t].split("x"),i=t+1,n=94*parseFloat(n[1])/parseFloat(n[0]);r(".tool__preview__pages").append('<div class="preview__page file_'+e.id+'" data-file="'+e.id+'" data-page="'+i+'"><img id="preview_'+e.id+"_"+i+'" width="94" height="'+n+'"><div>'+i+"</div></div>")}r(".tool__preview__pages").append('<div class="preview__separator" data-file="'+e.id+'"></div>')},p.prototype.addPreviewActions=function(e){r(".preview__page.file_"+e.id+" img").on("click",function(e){r(".preview__page").removeClass("active");var e=r(e.currentTarget).parent(),t=(e.addClass("active"),e.attr("data-file")),n=e.attr("data-page");0==e.find(".preview__bullet").length?u.ScrollHelper.scrollToPage(t,n):u.ScrollHelper.scrollToFirstItem(t,n)})},p.prototype.renderPreviewPages=function(o){var a=this;return r(".file_"+o.id).show(),new Promise(function(e,t){if(void 0!==o&&o.pages){for(var n=0;n<parseInt(o.pages);n++){var i=n+1,r="preview_"+o.id+"_"+i;a.renderPreviewPage(o,i,r)}a.previewManager.pagesResize(),e()}else t()})},p.prototype.renderPreviewPage=function(e,t,n){this.pdfRender.renderPage(this.processManager.taskId,e.server_filename.replace(".pdf",""),t,n,150)},p.prototype.addPreviewFile=function(e){var t;e.pdf_pages&&(t=e.pdf_pages[0].split("x"),t=94*parseFloat(t[1])/parseFloat(t[0]),r(".tool__preview__files__list").append('<div class="preview__file file_'+e.id+'" data-file="'+e.id+'"><div class="close"></div><img id="preview_file_'+e.id+'" width="94" height="'+t+'"><div class="preview__filename">'+e.name+"</div></div>"))},p.prototype.selectPreviewTab=function(e){var t=r(".tool__preview__tabs");switch(t.find(".tool__preview__tabs__item").removeClass("active"),t.find("[data-rel='"+e+"']").addClass("active"),e){case"files":r(".tool__preview__files").removeClass("closed"),r(".tool__preview__pages").addClass("closed");break;case"pages":r(".tool__preview__files").addClass("closed"),r(".tool__preview__pages").removeClass("closed");break;default:throw"[Signature] Unknown Tool preview tab '"+e+"'"}},p.prototype.renderPreviewFile=function(n){var i=this;return r(".file_"+n.id).show(),new Promise(function(e,t){void 0===n?t():(t="preview_file_"+n.id,i.renderPreviewPage(n,1,t))})},p.prototype.changeServer=function(e){t.prototype.changeServer.call(this,e),this.pdfRender.workerServer=e},p);function p(e){e=t.call(this,e=void 0===e?{}:e)||this;return window.pdfinfo=!0,e.filesTemp=[],e.toolbarPaginate=new s.ToolbarPaginate({files:e.files}),e.pdfRender=new l.PdfrenderView({workerServer:e.workerServer,files:e.files}),d.default.disableZoom(),e}h.SignBaseOptionsManager=n}.call(this,f(1))},function(e,n,t){"use strict";!function(e){function t(){}Object.defineProperty(n,"__esModule",{value:!0}),t.disableZoom=function(){e(document).on("keydown",function(e){1!=e.ctrlKey||61!=e.which&&107!=e.which&&173!=e.which&&109!=e.which&&187!=e.which&&189!=e.which||e.preventDefault()}),e(window).bind("mousewheel DOMMouseScroll",function(e){1==e.ctrlKey&&e.preventDefault()})},n.default=t}.call(this,t(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.AuthState=void 0,n(85)),n=(r=n.AbstractAuthState,o(a,r),a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.onDomReady=function(){t.initAbstractAuth(),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){var e=t.ctx.calculateNextStateAfterAuth();t.ctx.changeState(e),e.render(t.domRoot)},t}t.AuthState=n},function(e,v,y){"use strict";!function(n){var i,t,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(v,"__esModule",{value:!0}),v.SignerElementDraw=void 0,r(y(240))),l=y(211),c=y(175),u=y(81),d=y(267),p=r(y(62)),h=r(y(268)),f=y(37),m=y(8),r=(t=l.SignerElementUploaderBase,e(g,t),g.prototype.showCanvas=function(){this.initCanvas()},g.prototype.initCanvas=function(){var t,n,e=this;this.initUploader(),null==this.drawPad?(this.initDrawPad(),this.toggleWait(!0),window.addEventListener("resize",function(){1!=e.disableListenResize&&(clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){window.requestAnimationFrame(function(){1==e.resizeCanvas()&&(e.redrawPad(),e.resizeTimeout=null)})},700))}),(t=this.containerElement).addEventListener("pointerdown",function(e){90!=window.orientation&&-90!=window.orientation||0!=t.classList.contains("active")||(t.classList.add("active"),e.preventDefault(),e.stopPropagation())},!0),this.canvasElementClose.addEventListener("click",function(){t.classList.remove("active"),e.redrawPad()}),this.canvasElementClean.addEventListener("click",function(){null!=e.drawPad&&e.drawPad.clear(),t.parentElement.classList.remove("signed")}),this.canvasQrElement.addEventListener("click",this.showQrDialog),(n=this.canvasElement).addEventListener("mousedown",function(e){n.parentElement.classList.add("signed")}),window.setTimeout(function(){e.toggleWait(!1)},500)):1==this.resizeCanvas()&&this.redrawPad()},g.prototype.toggleWait=function(e){var t=this.waitElement;t&&(t.style.display=e?"block":"none")},g.prototype.redrawPad=function(){!this.drawPad||this.drawDataTemp||(this.drawDataTemp=this.drawPad.toData(),this.drawPad.penColor=this.getColor(),this.drawDataTemp=this.setDataColor(this.getColor(),this.drawDataTemp),this.drawPad.fitDataCentered(this.canvasElement,this.drawDataTemp),this.drawDataTemp=null)},g.prototype.repaintPad=function(){!this.drawPad||this.drawDataTemp||(this.drawDataTemp=this.setDataColor(this.getColor(),this.drawPad.toData()),this.drawPad.clear(),this.drawPad.penColor=this.getColor(),this.drawPad.fromData(this.drawDataTemp),this.drawDataTemp=null)},g.prototype.resizeCanvas=function(){var e=this.canvasElement,t=(Math.max(window.devicePixelRatio||1,1),e.width),n=e.height,i=e.offsetWidth,r=e.offsetHeight;return 0==t||0==n?(e.removeAttribute("width"),e.removeAttribute("height"),!1):0!=r&&0!=n&&(i!=t||r!=n)&&(e.width=i,e.height=r,!0)},g.prototype.fitDataPoints=function(i,r){return 0!=r.next.w&&0!=r.prev.w&&i.forEach(function(e,n){e.points.forEach(function(e,t){i[n].points[t].x=e.x*r.next.w/r.prev.w,i[n].points[t].y=e.y*r.next.h/r.prev.h})}),i},g.prototype.formatData=function(e){return e&&e.forEach(function(e,t){e.points.forEach(function(e,t){e.time=parseInt(e.time),e.x=parseFloat(e.x),e.y=parseFloat(e.y)})}),e},g.prototype.uploadSvgIfNeeded=function(){return!(!this.drawPad||JSON.stringify(this.drawPad.toData())==JSON.stringify(this.drawData)||(this.drawData=this.drawPad.toData(),this.uploadSvg(),0))},g.prototype.uploadSvg=function(){this.initUploader();var e=d.SvgHelper.fromBase64(this.drawPad.toDataURL("image/svg+xml")).replace("undefined",this.color),e=d.SvgHelper.trim(e),e=(d.SvgHelper.toBase64(e),d.SvgHelper.toBlob(e));this.uploader.uploader.addFile(e,this.elementType+".svg")},g.prototype.getColor=function(){return this.color||this.signatureModel.color||c.DEFAULT_COLOR},g.prototype.setColor=function(e){this.color=e||this.signatureModel.color||c.DEFAULT_COLOR,this.repaintPad()},g.prototype.setDataColor=function(n,e){return e.forEach(function(e,t){e.color=n}),e},g.prototype.getPadData=function(){return this.drawPad&&this.drawPad.toData()||this.signatureModel[this.elementType+"DrawData"]},g.prototype.getEncodedBase64=function(){var e;return this.drawPad?(e=d.SvgHelper.fromBase64(this.drawPad.toDataURL("image/svg+xml")).replace("undefined",this.getColor()),e=d.SvgHelper.trim(e),d.SvgHelper.toBase64(e)):null},g.prototype.paintDrawElement=function(){this.signatureModel[this.elementType+"DrawData"]&&this.drawPad&&(this.resizeCanvas()?this.redrawPad():this.repaintPad())},g.prototype.isValid=function(){var e;return this.drawPad?!1===this.drawPad.isEmpty():null!==(e=this.signatureModel[this.elementType+"DrawData"])&&"object"==typeof e&&0<Object.keys(e).length},g.prototype.validate=function(){var e,t=this;return this.isValid()?(this.cleanErrors(),!0):((e=this.canvasElement).classList.contains("error")||(e.classList.add("error"),e.classList.remove("shake"),n(".dialog__body").animate({scrollTop:e.getBoundingClientRect().top,duration:200},function(){e.classList.add("shake"),t.canvasElement._tippy||t.canvasElement.setAttribute("title",m.Lang.t("signOption"+u.TextHelper.ucFirst(t.elementType)+"Needed")),f.Tooltip.show(t.canvasElement,2e3)})),!1)},g.prototype.cleanErrors=function(){var e=this.canvasElement;e.classList.remove("error"),e.classList.remove("shake"),f.Tooltip.disable(e),e.removeAttribute("data-title"),e.removeAttribute("title")},g.prototype.initDrawPad=function(){var e;this.drawPad||((e=this.canvasElement).width=n(e).parent().innerWidth(),e.height=n(e).parent().innerHeight(),this.drawPad=new s.default(e),this.drawPad.penColor=this.getColor(),this.signatureModel[this.elementType+"DrawData"]&&(this.drawFromModel(),n(".signature__draw").addClass("signed")))},g.prototype.drawFromModel=function(){var e,t;this.signatureModel[this.elementType+"DrawData"]?(this.disableListenResize=!0,e=this.canvasElement,t=this.formatData(this.dataFromModel),this.drawPad.penColor=this.getColor(),t=this.setDataColor(this.drawPad.penColor,t),this.drawPad.fitDataCentered(e,t),this.drawDataTemp=null,this.resizeCanvas(),this.redrawPad(),this.disableListenResize=!1):this.drawPad&&(this.drawPad.clear(),this.containerElement.parentElement.classList.remove("signed"))},g.prototype.reset=function(){this.drawPad&&this.drawFromModel()},Object.defineProperty(g.prototype,"canvasElementId",{get:function(){return"canvas"+u.TextHelper.ucFirst(this.elementType)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"canvasElementQrId",{get:function(){return"canvas"+u.TextHelper.ucFirst(this.elementType)+"Qr"},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"canvasElement",{get:function(){return document.getElementById(this.canvasElementId)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"canvasQrElement",{get:function(){return document.getElementById(this.canvasElementQrId)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"canvasElementClose",{get:function(){return document.getElementById(this.canvasElementId+"Close")},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"canvasElementClean",{get:function(){return document.getElementById(this.canvasElementId+"Clean")},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"containerElement",{get:function(){return document.getElementById(this.elementType+"Container")},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"dataFromModel",{get:function(){return this.signatureModel[this.elementType+"DrawData"]},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"waitElement",{get:function(){return this.canvasElement.parentElement.querySelector(".wait")},enumerable:!1,configurable:!0}),g);function g(e){var n=t.call(this,{signatureModel:e.signatureModel,elementType:e.elementType,elementMode:"draw",api:e.api})||this;return n.ignoreCanvasPreviewOnAdd=!0,n.showQrDialog=function(){var i,r=n.canvasElement;if(null!=(t=window.ilovepdf)&&t.taskId)i=window.ilovepdf.taskId;else{if(!window.userModel)throw new Error("Code executed in wrong environment. User is not logged or task id is not accessible.");i=window.userModel.id+"-"+(new Date).valueOf()}function e(){return o(n,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:return[4,fetch("/qr/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:i})})];case 1:return[4,e.sent().json()];case 2:return t=e.sent(),null!=(t=t.data)&&t.traces&&this.drawPad&&(n=t.traces,this.drawPad.fitDataCentered(r,n),r.parentElement.classList.add("signed"),this.redrawPad()),[2,!(null==t||!t.traces)]}})})}var t=new p.default;t.setContentBuilder(function(){return new h.default({text:window.location.origin+"/templates/phone-pad?id="+i,polling:e})}),t.show()},Object.assign(n,e),n}v.SignerElementDraw=r}.call(this,y(1))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},r=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementUploaderBase=void 0,n(76)),s=n(266),l=n(15),c=n(101),o=n(81),u=n(174),d=n(116),p=n(75),h=n(8),f=n(244);function m(e){this.ACCEPTED_MIME_TYPES=["image/png","image/jpeg","image/svg+xml","image/svg"],this.checkServerStatusOnStart=!1,Object.assign(this,e)}m.prototype.init=function(){this.checkElements(),this.initUploader(),this.listenServiceFail()},m.prototype.listenServiceFail=function(){var n=this;p.SignatureEventManager.addEventListener("signature:service_down",function(e){var t;n.fileService=null,n.serviceFail=!0,"service"==(null==(t=n.uploader)?void 0:t.target)&&n.uploader.setApiMode()})},m.prototype.checkElements=function(){document.getElementById(this.uploaderId),document.getElementById(this.uploaderContainerId),document.getElementById(this.uploaderAreaId),document.getElementById(this.uploaderCleanBtnId)},m.prototype.initUploader=function(){this.uploader||(this.files||(this.files=new r.FileStack),this.uploader=this.makeUploaderService(this.elementMode,this.elementType,this.uploaderId,this.uploaderContainerId,this.uploaderAreaId,this.files),this.initUploaderActions())},m.prototype.uploadStarts=function(e){var t=document.getElementById(this.uploaderContainerId);t&&null!=t&&t.classList.add("upload")},m.prototype.uploadEnds=function(e){var t=document.getElementById(this.uploaderContainerId);t&&null!=t&&t.classList.remove("upload")},m.prototype.makeUploaderService=function(e,t,n,i,r,o){var a="service";return this.serviceOnly?a="serviceOnly":!this.serviceFail&&null!=l.UserModel.get()||(a="api"),new s.SignaturePlupload({target:a,signatureMode:e,signatureType:t,id:n,container:i,optionsManager:this,haveDrop:this.haveDrop||!1,printCanvasOnAdd:!1,config:new c.Config({tool:"sign",subtool:"sign",config:{sign:{mimeTypes:[{title:"Image files",extensions:"png,svg,jpg,jpeg",mime:this.ACCEPTED_MIME_TYPES.join(",")}],multiSelection:!1}}}),files:o,workerServer:this.api.workerServer,tool:"sign",servers:[],dropElement:r,tokenApi:this.api.token,tokenService:null!=l.UserModel.get()&&1!=this.serviceFail?l.UserModel.get().token:null,token:(null!=l.UserModel.get()&&1!=this.serviceFail?l.UserModel.get():this.api).token,taskId:this.api.taskId})},m.prototype.uploadFromService=function(){var n=this,i=(this.initUploader(),""+this.elementType+o.TextHelper.ucFirst(this.elementMode)+"Service"),e=this.signatureModel[i];e&&(this.fileService=e,this.fileApi=null,this.uploader.uploadToApi(this.fileService).then(function(){n.signatureModel[""+n.elementType+o.TextHelper.ucFirst(n.elementMode)+"Api"]=n.fileApi,n.apiFail=!1},function(){delete n.signatureModel[i],n.signatureModel.saveConfig();var e=document.body.classList.contains("mode-single"),t=document.body.classList.contains("tool-signature");p.SignatureEventManager.dispatchEvent("signature:service_down",{triggerIdentityModal:e||t})}))},m.prototype.initUploaderActions=function(){var e=document.getElementById(this.uploaderCleanBtnId);null!=e&&e.removeEventListener("click",this._onClickBtnClean.bind(this)),null!=e&&e.addEventListener("click",this._onClickBtnClean.bind(this))},m.prototype._onClickBtnClean=function(){var e=document.getElementById(this.uploaderCleanBtnId);this.clearAllFiles(),this.fileApi=null,(this.fileService=null)!=(e=null==(e=null==e?void 0:e.parentElement)?void 0:e.classList)&&e.remove("signed")},m.prototype.clearAllFiles=function(){var e;null!=(e=this.files)&&e.removeAllFiles(!0)},m.prototype.changeServer=function(e){},m.prototype.checkLimits=function(e,t){return e},m.prototype.fileAdded=function(r,e,t){return i(this,void 0,void 0,function(){var t,n,i;return a(this,function(e){switch(e.label){case 0:this._removeErrorTooltips(),this.fileApi=null,this.fileService=null,"image"==this.elementMode&&(r.status=window.plupload.FAILED,r.error=window.plupload.GENERIC_ERROR),e.label=1;case 1:return(e.trys.push([1,7,,8]),t=r.getSource().getSource(),n=void 0,t instanceof File)?[4,f.FileTools.getMimeTypeFromSource(t)]:[3,3];case 2:return n=e.sent(),[3,5];case 3:return[4,f.FileTools.getMimeTypeFromBlob(t)];case 4:n=e.sent(),e.label=5;case 5:if(this.ACCEPTED_MIME_TYPES.includes(n))return[4,this.previewFile(r)];throw new Error("Invalid mime type");case 6:return[2,e.sent()];case 7:throw i=e.sent(),this.invalidFileAdded(r),i;case 8:return[2]}})})},m.prototype.invalidFileAdded=function(e){null!=e&&e.id&&this.uploader.files.removeFile(e.id,!0),window.Toastr.error(h.Lang.t("damagedFile"),h.Lang.t("uploadError"),{timeOut:15e3,closeButton:!0,positionClass:"toast-top-left"})},m.prototype.previewFile=function(o){return i(this,void 0,void 0,function(){var t,n,i,r;return a(this,function(e){switch(e.label){case 0:return(t=document.getElementById(this.uploaderPreviewId))?(t.style.backgroundImage="none",n=new d.ImageView,o.url?(u.ImageHelper.preload(o.url),n.renderUrl(o.url,t.id),t.parentElement.classList.add("signed"),[2]):(i=o.getSource().getSource(),[4,u.ImageHelper.getBase64(o,!0)])):[3,3];case 1:return r=e.sent(),this.fileBase64Temp=r,r=o.name.endsWith(".svg"),[4,n[r?"renderSvg":"renderImage"](i,this.uploaderPreviewId,!1)];case 2:return r=e.sent(),o.width=r.width,o.height=r.height,t.parentElement.classList.add("signed"),[2,r];case 3:return[2]}})})},m.prototype.fileUploaded=function(e,t){this.files.getFile(e)&&(this.fileApi=t.server_filename,this.fileService=t.service_filename,this.fileBase64Temp&&""!=this.fileBase64Temp&&(this.fileBase64=this.fileBase64Temp.slice(),this.fileBase64Temp=null),this.uploadEnds(this.uploaderId))},m.prototype.invalidUpload=function(e){this.fatalError(e)},m.prototype.setUploaderError=function(e){"api"==this.uploader.target?(this.fileApi=null,this.apiFail=!0):(this.fileService=null,this.serviceFail=!0)},m.prototype.fatalError=function(e){1!=e.cloudFile&&"api"!=e.target&&"serviceOnly"!=e.target||(this.apiFail=!0,this.setUploaderError(e))},m.prototype._removeErrorTooltips=function(){},m.prototype.checkUploadIsCompleted=function(){return 1==this.serviceOnly?!this.haveFilesToUpload||""!=this.getServiceFile():!this.haveFilesToUpload||""!=this.getApiFile()||""!=this.getServiceFile()},m.prototype.cleanUploadPreviewImage=function(){this._onClickBtnClean()},m.prototype.applyModel=function(){var e=this.signatureModel[""+this.elementType+o.TextHelper.ucFirst(this.elementMode)+"Service"],t=this.signatureModel[""+this.elementType+o.TextHelper.ucFirst(this.elementMode)+"Api"],n=(this.signatureModel[""+this.elementType+o.TextHelper.ucFirst(this.elementMode)+"Base64"],document.getElementById(this.uploaderPreviewId)),i=this.signatureModel.getPreviewFor(this.elementType,this.elementMode);this.fileService=e,this.fileApi=t,n&&i.src&&(n.style.backgroundImage='url("'+i.src+'")',n.parentElement.classList.add("signed"))},m.prototype.getServiceFile=function(){var e;return null!=(e=this.fileService)?e:""},m.prototype.getApiFile=function(){var e;return null!=(e=this.fileApi)?e:""},Object.defineProperty(m.prototype,"uploaderId",{get:function(){return"upload"+o.TextHelper.ucFirst(this.elementType)+o.TextHelper.ucFirst(this.elementMode)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"uploaderContainerId",{get:function(){return"upload"+o.TextHelper.ucFirst(this.elementType)+o.TextHelper.ucFirst(this.elementMode)+"Container"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"uploaderAreaId",{get:function(){return"upload"+o.TextHelper.ucFirst(this.elementType)+o.TextHelper.ucFirst(this.elementMode)+"Area"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"uploaderCleanBtnId",{get:function(){return"upload"+o.TextHelper.ucFirst(this.elementType)+o.TextHelper.ucFirst(this.elementMode)+"Clean"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"uploaderPreviewId",{get:function(){return"upload"+o.TextHelper.ucFirst(this.elementType)+o.TextHelper.ucFirst(this.elementMode)+"Preview"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"haveFilesToUpload",{get:function(){var e;return 0<parseInt(null==(e=this.files)?void 0:e.count().toString())},enumerable:!1,configurable:!0}),t.SignerElementUploaderBase=m},function(e,i,r){"use strict";!function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.SignerElementText=void 0;var e=r(175);function n(e){Object.assign(this,e),this.init(),this.initFont()}n.prototype.init=function(){this.setColor(this.getColor()),this.setFont(this.getFont())},n.prototype.setColor=function(e){this.color=e||this.signatureModel.color,t(".signature__font li label").css("color",e)},n.prototype.getColor=function(){return this.color||e.DEFAULT_COLOR},n.prototype.initFont=function(){var i=this;document.querySelectorAll('[name="'+this.elementType+'FontFamily"]').forEach(function(n){n.addEventListener("click",function(e){var t=n.value.replace(i.elementType+"_","");i.setFont(t)})})},n.prototype.getFont=function(){var t=this,e=document.querySelectorAll('[name="'+this.elementType+'FontFamily"]'),n=this.font||this.signatureModel.fontFamily;return e.forEach(function(e){1==e.checked&&(n=e.value.replace(t.elementType+"_",""))}),n},n.prototype.setFont=function(e){this.font=e||this.getFont(),document.querySelectorAll('[value$="_'+e+'"]').forEach(function(e){e.checked=!0})},n.prototype.validate=function(){return this.cleanErrors(),!0},n.prototype.cleanErrors=function(){},n.prototype.applyModel=function(){t('[name="'+this.elementType+'FontFamily"][value="'+this.elementType+"_"+this.signatureModel.fontFamily+'"]').trigger("click"),t(".signature__color__item").removeClass("active"),t('[data-color="'+this.signatureModel.color+'"]').addClass("active")},n.prototype.reset=function(){this.applyModel()},i.SignerElementText=n}.call(this,r(1))},,,,,,,,,function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SelectUsersState=void 0,n(17)),l=a(n(166)),c=n(176),a=(r=s.StateBase,o(u,r),u.prototype.initSlider=function(){var e,t;this.usersSelect?this._onNumUsersChanged():(e=document.getElementById("SelectUsers"),this.usersSelect=new l.default,this.usersSelect.onInput(this._onNumUsersChanged),(t=null!=(t=null==(t=this.ctx)?void 0:t.userCurrentSubscription.users)?t:void 0)?this.usersSelect.init(e,{initialQty:t,initialQtyIsValid:!1}):this.usersSelect.init(e,{}))},Object.defineProperty(u.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector("[next-from-users]");if(e)return e;throw"Action button not found"},enumerable:!1,configurable:!0}),u.prototype.initActions=function(){this.actionBtn.addEventListener("click",this._onActionBtnClicked)},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="SelectUsersState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.actionBtn.disabled=!0,t.initSlider(),t.initActions(),t.clearLoadingScreen()},t._onNumUsersChanged=function(){var e=t.usersSelect.isValid();t.actionBtn.disabled=!e},t._onActionBtnClicked=function(e){t._goNextState()},t._goNextState=function(){var e=new c.SummaryState;t.ctx.summaryParams={numUsers:t.usersSelect.getQuantity(),numSignatures:void 0,paymentInterval:void 0},t.ctx.changeState(e),e.render(t.domRoot)},t}t.SelectUsersState=a},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCompletedState=void 0,n(7)),n=n(17),n=(r=n.StateBase,o(s,r),Object.defineProperty(s.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector("[next-from-payment-completed]");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"animatedGif",{get:function(){var e=this.domStateRoot.querySelector(".dialog__icon img");if(e)return e;throw"Check gif not found"},enumerable:!1,configurable:!0}),s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="PaymentCompletedState",e.LAYOUT_TEMPLATE_NAME="subscription-update",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.ctx.setEndState(),e.clearLoadingScreen();e.animatedGif;e.actionBtn.addEventListener("click",function(){return e.dispatchEvent(new a.IloveEvent("end"))})},e}t.PaymentCompletedState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryFailedState=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),Object.defineProperty(l.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action .btn");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="SummaryFailedState",e.LAYOUT_TEMPLATE_NAME="subscription-update",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.INITIAL_SCREEN),e.actionBtn.addEventListener("click",e._onDoneButtonClick),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new s.IloveEvent("end"))},e}t.SummaryFailedState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSignaturesState=void 0,a(n(166))),a=n(17),l=n(176),n=(r=a.StateBase,o(c,r),Object.defineProperty(c.prototype,"numToBuy",{get:function(){var e;return void 0===this.ctx.neededSignatures?0:(null!=(e=null==(e=this.ctx)?void 0:e.userCurrentSubscription.signatures)?e:0)+(this.ctx.neededSignatures-this.ctx.user.signatures_left)},enumerable:!1,configurable:!0}),c.prototype.initSlider=function(){var e,t,n=this;this.signaturesSelect||(e=this.domRoot.querySelector("#SelectSignatures"),this.signaturesSelect=new s.default,this.signaturesSelect.onInput(this._onNumSignaturesChanged),t=null!=(t=null==(t=this.ctx)?void 0:t.userCurrentSubscription.signatures)?t:void 0,void 0===this.ctx.neededSignatures?t?this.signaturesSelect.init(e,{initialQty:t,initialQtyIsValid:!1}):this.signaturesSelect.init(e,{}):this.signaturesSelect.init(e,{initialQty:function(e){return e>=n.numToBuy},minQty:this.numToBuy}))},Object.defineProperty(c.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector("[next-from-signatures]");if(e)return e;throw"Action button not found"},enumerable:!1,configurable:!0}),c);function c(){var n=null!==r&&r.apply(this,arguments)||this;return n.name="SelectSignaturesState",n.LAYOUT_TEMPLATE_NAME="subscription-update",n.INITIAL_SCREEN="default",n.onDomReady=function(){n.changeScreen(n.INITIAL_SCREEN),n.actionBtn.disabled=!0,n.initSlider(),n.actionBtn.addEventListener("click",n._onActionBtnClicked),n.clearLoadingScreen()},n._onNumSignaturesChanged=function(){var e,t=n.signaturesSelect.getQuantity();void 0===n.ctx.neededSignatures?!(e=null!=(e=null==(e=n.ctx)?void 0:e.userCurrentSubscription.signatures)?e:void 0)&&0!==e||(n.actionBtn.disabled=t===e):n.actionBtn.disabled=!(t>=n.numToBuy)},n._onActionBtnClicked=function(e){var t=new l.SummaryState;n.ctx.summaryParams={numSignatures:n.signaturesSelect.getQuantity(),numUsers:void 0,paymentInterval:void 0},n.ctx.changeState(t),t.render(n.domRoot)},n}t.SelectSignaturesState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.TeamManagedState=void 0,n(17)),c=n(15),u=n(226),d=n(227),p=n(48),n=(r=l.StateBase,o(h,r),Object.defineProperty(h.prototype,"actionSendEmailBtn",{get:function(){return this.domRoot.querySelector("[send-email-to-admin]")},enumerable:!1,configurable:!0}),h.prototype.sendRequest=function(e){var t=new Headers,e=(t.append("Content-Type","application/json"),{creditType:e}),t=new Request("user/ask-admin-more-credits",{method:"POST",headers:t,mode:"cors",body:JSON.stringify(e)});return fetch(t)},h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="TeamManagedState",t.LAYOUT_TEMPLATE_NAME="teams",t.INITIAL_SCREEN="default",t.onDomReady=function(){var e;t.changeScreen(t.INITIAL_SCREEN),t.api=new p.Api({taskId:null,tool:null,workerServer:null,token:null==(e=c.UserModel.get())?void 0:e.token}),t.actionSendEmailBtn.addEventListener("click",t._onSendEmailBtnClicked),t.clearLoadingScreen()},t._onSendEmailBtnClicked=function(){return a(t,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:this.actionSendEmailBtn.disabled=!0,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,this.sendRequest("subscription")];case 2:return[4,e.sent().json()];case 3:if(!0!==e.sent().success)throw new Error("Error when sending email to team owner");return t=new u.EmailTeamAdminOk,this.ctx.changeState(t),t.render(this.domRoot),[3,5];case 4:return e.sent(),t=new d.EmailTeamAdminFailed,this.ctx.changeState(t),t.render(this.domRoot),[3,5];case 5:return[2]}})})},t}t.TeamManagedState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTeamAdminOk=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),Object.defineProperty(l.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action .btn");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="EmailTeamAdminOk",e.LAYOUT_TEMPLATE_NAME="teams",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.INITIAL_SCREEN),e.actionBtn.addEventListener("click",e._onDoneButtonClick),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new s.IloveEvent("end"))},e}t.EmailTeamAdminOk=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTeamAdminFailed=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),Object.defineProperty(l.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action .btn");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="EmailTeamAdminFailed",e.LAYOUT_TEMPLATE_NAME="teams",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.INITIAL_SCREEN),e.actionBtn.addEventListener("click",e._onDoneButtonClick),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new s.IloveEvent("end"))},e}t.EmailTeamAdminFailed=n},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},r=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.MobilePhoneInput=void 0,o(n(250))),s=n(81);function l(e){this.telInput=e,this.init()}l.prototype.init=function(){return i(this,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return this.iti=a.default(this.telInput,{separateDialCode:!0,initialCountry:window.country||"",utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.1.0/js/utils.js"}),[4,this.iti.promise];case 1:return e.sent(),this.telInput.addEventListener("input",function(e){t.sanitizeInput()}),[2]}})})},l.prototype.setNumber=function(e,t){void 0===t&&(t=!1),this.iti.setNumber(e),this.sanitizeInput(),t&&(e=new Event("input"),this.telInput.dispatchEvent(e))},l.prototype.sanitizeInput=function(){var e=this.telInput,t=e.value,n=t.replace(/[^0-9]/g,"");n!=t&&(e.value=n)},l.prototype.onChange=function(t){this.telInput.addEventListener("input",function(e){t(e)}),this.telInput.addEventListener("countrychange",function(e){t(e)})},Object.defineProperty(l.prototype,"mobileValue",{get:function(){return s.TextHelper.stripTags(this.countryPrefix+this.telInput.value)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"countryPrefix",{get:function(){return this.iti.selectedCountryData.dialCode},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isMobileValid",{get:function(){var e;return null==window.intlTelInputUtils||null==window.intlTelInputUtils||[(e=window.intlTelInputUtils.numberType).MOBILE,e.FIXED_LINE_OR_MOBILE,e.PERSONAL_NUMBER,e.UAN,e.VOIP].includes(this.iti.getNumberType())},enumerable:!1,configurable:!0}),t.MobilePhoneInput=l},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignerModel=void 0,n(193)),s=n(183),n=(r=a.ReceiverModel,o(l,r),l);function l(e){var t=r.call(this,e=void 0===e?{}:e)||this;return t.type="signer",t.uuid=e.uuid||s.Frame.uuid(),t.initials=e.initials||"",t.imageSignature=e.imageSignature||"",t.imageInitials=e.imageInitials||"",t.colorClass=e.colorClass||"fileB",t}t.SignerModel=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SelectPackageCertsState=void 0,n(17)),l=a(n(166)),c=n(172),a=(r=s.StateBase,o(u,r),Object.defineProperty(u.prototype,"numToBuy",{get:function(){return void 0===this.ctx.neededNumberOfPkgItems?0:this.ctx.neededNumberOfPkgItems-this.ctx.user.certificates_left},enumerable:!1,configurable:!0}),u.prototype.initCertsSelector=function(){var e,t=this;this.certsSelect?this._onSliderInputChanged():(e=document.getElementById("SelectCerts"),this.certsSelect=new l.default,this.certsSelect.onInput(this._onSliderInputChanged),void 0===this.ctx.neededNumberOfPkgItems?this.certsSelect.init(e,{}):this.certsSelect.init(e,{minQty:this.numToBuy,initialQty:function(e){return e>=t.numToBuy}}))},u.prototype.initNextAction=function(){this.actionNextBtn.addEventListener("click",this._goNextState)},Object.defineProperty(u.prototype,"actionNextBtn",{get:function(){return this.domRoot.querySelector("[next-from-certs]")},enumerable:!1,configurable:!0}),u.prototype.cleanUpState=function(){this.domRoot.querySelector("[next-from-certs]").removeEventListener("click",this._goNextState)},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="SelectPackageCertsState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initNextAction(),t.initCertsSelector(),t.clearLoadingScreen()},t._onSliderInputChanged=function(){void 0!==t.ctx.neededNumberOfPkgItems&&(t.certsSelect.getQuantity()>=t.numToBuy?t.actionNextBtn.disabled=!1:t.actionNextBtn.disabled=!0)},t._goNextState=function(){t.ctx.summaryParams={packageName:"certificates",packageQty:t.certsSelect.getQuantity()};var e=new c.SummaryState;t.ctx.changeState(e),e.render(t.domRoot)},t}t.SelectPackageCertsState=a},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCompletedState=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),l.prototype.initNextAction=function(){var e=this;this.domRoot.querySelector("[next-from-payment-completed]").addEventListener("click",function(){e._goNextState()})},l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="PaymentCompletedState",e.LAYOUT_TEMPLATE_NAME="packages",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.ctx.setEndState(),e.changeScreen(e.INITIAL_SCREEN),e.clearLoadingScreen(),e.initNextAction()},e._goNextState=function(){e.dispatchEvent(new s.IloveEvent("end"))},e}t.PaymentCompletedState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SelectPackageSignaturesState=void 0,n(17)),l=n(172),c=a(n(166)),a=(r=s.StateBase,o(u,r),u.prototype.initSignaturesSelector=function(){var e,t=this;this.signaturesSelect?this._onSliderQtyChanged():(e=document.getElementById("SelectSignatures"),this.signaturesSelect=new c.default,this.signaturesSelect.onInput(this._onSliderQtyChanged),void 0===this.ctx.neededNumberOfPkgItems?this.signaturesSelect.init(e,{}):this.signaturesSelect.init(e,{initialQty:function(e){return e>=t.numToBuy},minQty:this.numToBuy}))},Object.defineProperty(u.prototype,"numToBuy",{get:function(){return void 0===this.ctx.neededNumberOfPkgItems?0:this.ctx.neededNumberOfPkgItems-this.ctx.user.signatures_left},enumerable:!1,configurable:!0}),u.prototype.updateCheckoutBtnAvailability=function(){var e=this.signaturesSelect.getQuantity();this.nextStateBtn.disabled=!(e>=this.numToBuy)},u.prototype.initNextAction=function(){this.domRoot;this.nextStateBtn.addEventListener("click",this._goNextState)},Object.defineProperty(u.prototype,"nextStateBtn",{get:function(){var e=this.domRoot.querySelector("[next-from-signatures]");if(e)return e;throw"Btn not found"},enumerable:!1,configurable:!0}),u.prototype.cleanUpState=function(){this.domRoot;this.nextStateBtn.removeEventListener("click",this._goNextState)},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="SelectPackageSignaturesState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initSignaturesSelector(),t.initNextAction(),t.clearLoadingScreen()},t._onSliderQtyChanged=function(){void 0!==t.ctx.neededNumberOfPkgItems&&t.updateCheckoutBtnAvailability()},t._goNextState=function(){t.cleanUpState(),t.ctx.summaryParams={packageName:"signatures_package",packageQty:t.signaturesSelect.getQuantity()};var e=new l.SummaryState;t.ctx.changeState(e),e.render(t.domRoot)},t}t.SelectPackageSignaturesState=a},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SelectPackageSmsState=void 0,n(17)),l=a(n(166)),c=n(172),a=(r=s.StateBase,o(u,r),u.prototype.initSmsSelector=function(){var e,t=this;this.smsSelect?this._onSliderQtyChanged():(e=document.getElementById("SelectSMS"),this.smsSelect=new l.default,this.smsSelect.onInput(this._onSliderQtyChanged),void 0===this.ctx.neededNumberOfPkgItems?this.smsSelect.init(e,{}):this.smsSelect.init(e,{initialQty:function(e){return e>=t.numToBuy},minQty:this.numToBuy}))},Object.defineProperty(u.prototype,"numToBuy",{get:function(){return void 0===this.ctx.neededNumberOfPkgItems?0:this.ctx.neededNumberOfPkgItems-this.ctx.user.sms_left},enumerable:!1,configurable:!0}),u.prototype.updateCheckoutBtnAvailability=function(){var e=this.smsSelect.getQuantity();this.proceedToCheckoutBtn.disabled=!(e>=this.numToBuy)},u.prototype.initNextAction=function(){this.proceedToCheckoutBtn.addEventListener("click",this._goNextState)},Object.defineProperty(u.prototype,"proceedToCheckoutBtn",{get:function(){var e=this.domRoot.querySelector("[next-from-sms]");if(e)return e;throw"Button not found"},enumerable:!1,configurable:!0}),u.prototype.cleanUpState=function(){this.domRoot.querySelector("[next-from-sms]").removeEventListener("click",this._goNextState)},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="SelectPackageSmsState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initSmsSelector(),t.initNextAction(),t.clearLoadingScreen()},t._onSliderQtyChanged=function(){void 0!==t.ctx.neededNumberOfPkgItems&&t.updateCheckoutBtnAvailability()},t._goNextState=function(){t.ctx.summaryParams={packageName:"sms",packageQty:t.smsSelect.getQuantity()},t.cleanUpState();var e=new c.SummaryState;t.ctx.changeState(e),e.render(t.domRoot)},t}t.SelectPackageSmsState=a},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.TeamManagedState=void 0,n(17)),c=n(15),u=n(235),d=n(236),p=n(48),n=(r=l.StateBase,o(h,r),h.prototype.getInitalScreen=function(){return this.ctx.creditType||this.INITIAL_SCREEN},Object.defineProperty(h.prototype,"actionSendEmailBtn",{get:function(){return this.domRoot.querySelector('[data-screen="'+this.getInitalScreen()+'"]').querySelector("[send-email-to-admin]")},enumerable:!1,configurable:!0}),h.prototype.sendRequest=function(e){var t=new Headers,e=(t.append("Content-Type","application/json"),{creditType:e}),t=new Request("user/ask-admin-more-credits",{method:"POST",headers:t,mode:"cors",body:JSON.stringify(e)});return fetch(t)},h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="TeamManagedState",t.LAYOUT_TEMPLATE_NAME="teams",t.INITIAL_SCREEN="default",t.onDomReady=function(){var e;t.changeScreen(t.getInitalScreen()),t.api=new p.Api({taskId:null,tool:null,workerServer:null,token:null==(e=c.UserModel.get())?void 0:e.token}),t.actionSendEmailBtn.addEventListener("click",t._onSendEmailBtnClicked),t.clearLoadingScreen()},t._onSendEmailBtnClicked=function(){return a(t,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:this.actionSendEmailBtn.disabled=!0,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,this.sendRequest(this.ctx.creditType||"subscription")];case 2:return[4,e.sent().json()];case 3:if(!0!==e.sent().success)throw new Error("Error when sending email to team owner");return t=new u.EmailTeamAdminOk,this.ctx.changeState(t),t.render(this.domRoot),[3,5];case 4:return e.sent(),t=new d.EmailTeamAdminFailed,this.ctx.changeState(t),t.render(this.domRoot),[3,5];case 5:return[2]}})})},t}t.TeamManagedState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTeamAdminOk=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),Object.defineProperty(l.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action .btn");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="EmailTeamAdminOk",e.LAYOUT_TEMPLATE_NAME="teams",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.INITIAL_SCREEN),e.actionBtn.addEventListener("click",e._onDoneButtonClick),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new s.IloveEvent("end"))},e}t.EmailTeamAdminOk=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTeamAdminFailed=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),Object.defineProperty(l.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action .btn");if(e)return e;throw"'Done' button not found"},enumerable:!1,configurable:!0}),l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="EmailTeamAdminFailed",e.LAYOUT_TEMPLATE_NAME="teams",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.INITIAL_SCREEN),e.actionBtn.addEventListener("click",e._onDoneButtonClick),e.clearLoadingScreen()},e._onDoneButtonClick=function(){e.dispatchEvent(new s.IloveEvent("end"))},e}t.EmailTeamAdminFailed=n},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(t,"__esModule",{value:!0}),t.DialogCollection=void 0,i(n(62))),o=n(238),a=n(239);function s(){}s.auth=function(e){return new r.default({dialogName:"auth"}).setContentBuilder(function(){return new a.SingletonContext(o.AuthState,{tool:e})})},t.DialogCollection=s},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.AuthState=void 0,n(7)),n=n(85),n=(r=n.AbstractAuthState,o(s,r),s.prototype.changeScreen=function(e){r.prototype.changeScreen.call(this,e),this._updateTitle()},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="AuthState",e.LAYOUT_TEMPLATE_NAME="singleton/auth",e.onDomReady=function(){e.initAbstractAuth(),e.ctx.tool&&(e.extraLoginParams={tool:e.ctx.tool}),e.changeScreen(e.INITIAL_SCREEN),e.clearLoadingScreen()},e._updateTitle=function(){e.domStateRoot.querySelector(".dialog__title").innerHTML=e.currentScreen.querySelector(".form__title").innerHTML},e._onLoginSuccess=function(){e.executeAfterLoginOrRegisterSuccess()},e._onRegisterSuccess=function(){e.executeAfterLoginOrRegisterSuccess()},e.executeAfterLoginOrRegisterSuccess=function(){e.dispatchEvent(new a.IloveEvent("end"))},e}t.AuthState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.SingletonContext=void 0,n(46)),n=(r=n.ContextBase,o(a,r),a.prototype.getInitialState=function(){return this.getState()},a);function a(e,t){var n=r.call(this,t)||this;n.contentName="SingletonContext",n.tool=t.tool,n.changeState(new e),n.getState();return n}t.SingletonContext=n},function(e,t,n){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=(Object.defineProperty(t,"__esModule",{value:!0}),n(241)),u=n(187),r=n(242);function o(e,t){var n=this;void 0===t&&(t={}),this.canvas=e,this.options=t,this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){e.preventDefault(),1===e.targetTouches.length&&(e=e.changedTouches[0],n._strokeBegin(e))},this._handleTouchMove=function(e){e.preventDefault();e=e.targetTouches[0];n._strokeMoveUpdate(e)},this._handleTouchEnd=function(e){e.target===n.canvas&&(e.preventDefault(),e=e.changedTouches[0],n._strokeEnd(e))},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=r.throttle(o.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=o.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._ctx=e.getContext("2d"),this.clear(),this.on()}o.prototype.clear=function(){var e=this._ctx,t=this.canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},o.prototype.fromDataURL=function(e,t,n){var i=this,r=(void 0===t&&(t={}),new Image),o=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/o,s=t.height||this.canvas.height/o;this._reset(),r.onload=function(){i._ctx.drawImage(r,0,0,a,s),n&&n()},r.onerror=function(e){n&&n(e)},r.src=e,this._isEmpty=!1},o.prototype.toDataURL=function(e,t){return"image/svg+xml"!==(e=void 0===e?"image/png":e)?this.canvas.toDataURL(e,t):this._toSVG()},o.prototype.on=function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())},o.prototype.off=function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)},o.prototype.isEmpty=function(){return this._isEmpty},o.prototype.fromData=function(e){var n=this;this.clear(),this._fromData(e,function(e){var t=e.color,e=e.curve;return n._drawCurve({color:t,curve:e})},function(e){var t=e.color,e=e.point;return n._drawDot({color:t,point:e})}),this._data=e},o.prototype.toData=function(){return this._data},o.prototype.fitDataCentered=function(e,t){var n=null,i=null,r=null,o=null,n=(t.forEach(function(e){e.points.forEach(function(e){n=Math.min(n||e.x,e.x),i=Math.min(i||e.y,e.y),r=Math.max(r,e.x),o=Math.max(o,e.y)})}),n-12||0),i=i-12||0,r=r+12||0,o=o+12||0,a=(this.clear(),Math.min(e.width/(r-n),e.height/(o-i))),s=e.width/2-(r-n)/2,l=e.height/2-(o-i)/2,e=t.map(function(e){var t=e.points.map(function(e){return c(c({},e),{x:(e.x-n+s)*a,y:(e.y-i+l)*a})});return c(c({},e),{points:t})});this.fromData(e)},o.prototype.fitData=function(e,t){var n=null,i=null,r=null,o=null,n=(t.forEach(function(e){e.points.forEach(function(e){n=Math.min(n||e.x,e.x),i=Math.min(i||e.y,e.y),r=Math.max(r,e.x),o=Math.max(o,e.y)})}),n-4||0),i=i-4||0,r=r+4||0,o=o+4||0,a=(this.clear(),Math.min(e.width/(r-n),e.height/(o-i))),e=t.map(function(e){var t=e.points.map(function(e){return c(c({},e),{x:(e.x-n)*a,y:(e.y-i)*a})});return c(c({},e),{points:t})});this.fromData(e)},o.prototype._strokeBegin=function(e){var t={color:this.penColor,points:[]};this._data.push(t),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},o.prototype._strokeUpdate=function(e){var t=e.clientX,e=e.clientY,t=this._createPoint(t,e),e=this._data[this._data.length-1],n=e.points,i=0<n.length&&n[n.length-1],r=!!i&&t.distanceTo(i)<=this.minDistance,e=e.color;i&&r||(r=this._addPoint(t),i?r&&this._drawCurve({color:e,curve:r}):this._drawDot({color:e,point:t}),n.push({time:t.time,x:t.x,y:t.y}))},o.prototype._strokeEnd=function(e){this._strokeUpdate(e),"function"==typeof this.onEnd&&this.onEnd(e)},o.prototype._handlePointerEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)},o.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},o.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)},o.prototype._reset=function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},o.prototype._createPoint=function(e,t){var n=this.canvas.getBoundingClientRect(),e=new u.Point(e-n.left,t-n.top,(new Date).getTime());return e.x<0&&(e.x=0),e.x>n.width&&(e.x=n.width),e.y<0&&(e.y=0),e.y>n.height&&(e.y=n.height),e},o.prototype._addPoint=function(e){var t=this._lastPoints;return t.push(e),2<t.length?(3===t.length&&t.unshift(t[0]),e=this._calculateCurveWidths(t[1],t[2]),e=i.Bezier.fromPoints(t,e),t.shift(),e):null},o.prototype._calculateCurveWidths=function(e,t){var t=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,e=this._strokeWidth(t),n={end:e,start:this._lastWidth};return this._lastVelocity=t,this._lastWidth=e,n},o.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},o.prototype._drawCurveSegment=function(e,t,n){var i=this._ctx;i.moveTo(e,t),i.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},o.prototype._drawCurve=function(e){var t=e.color,n=e.curve,e=this._ctx,i=n.endWidth-n.startWidth,r=2*Math.floor(n.length());e.beginPath(),e.fillStyle=t;for(var o=0;o<r;o+=1){var a=o/r,s=a*a,l=s*a,c=1-a,u=c*c,d=u*c,p=d*n.startPoint.x,d=(p=(p=(p+=3*u*a*n.control1.x)+3*c*s*n.control2.x)+l*n.endPoint.x,d*n.startPoint.y),u=(d=(d=(d+=3*u*a*n.control1.y)+3*c*s*n.control2.y)+l*n.endPoint.y,n.startWidth+l*i);this._drawCurveSegment(p,d,u)}e.closePath(),e.fill()},o.prototype._drawDot=function(e){var t=e.color,e=e.point,n=this._ctx,i="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawCurveSegment(e.x,e.y,i),n.closePath(),n.fillStyle=t,n.fill()},o.prototype._fromData=function(e,t,n){for(var i=0,r=e;i<r.length;i++){var o=r[i],a=o.color,s=o.points;if(1<s.length)for(var l=0;l<s.length;l+=1){var c=s[l],c=new u.Point(c.x,c.y,c.time),c=(this.penColor=a,0===l&&this._reset(),this._addPoint(c));c&&t({color:a,curve:c})}else this._reset(),n({color:a,point:s[0]})}},o.prototype._toSVG=function(){var r=this,e=this._data,t=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/t,t=this.canvas.height/t,o=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=(o.setAttribute("width",this.canvas.width.toString()),o.setAttribute("height",this.canvas.height.toString()),this._fromData(e,function(e){var t,n=e.color,e=e.curve,i=document.createElement("path");isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y)||(t="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3),i.setAttribute("d",t),i.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),o.appendChild(i))},function(e){var t=e.color,e=e.point,n=document.createElement("circle"),i="function"==typeof r.dotSize?r.dotSize():r.dotSize;n.setAttribute("r",i.toString()),n.setAttribute("cx",e.x.toString()),n.setAttribute("cy",e.y.toString()),n.setAttribute("fill",t),o.appendChild(n)}),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+n+" "+t+'" width="'+n+'" height="'+t+'">'),n=o.innerHTML;if(void 0===n){var i=document.createElement("dummy"),a=o.childNodes;i.innerHTML="";for(var s=0;s<a.length;s+=1)i.appendChild(a[s].cloneNode(!0));n=i.innerHTML}return"data:image/svg+xml;base64,"+btoa(e+n+"</svg>")},t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bezier=void 0;var c=n(187);function r(e,t,n,i,r,o){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=i,this.startWidth=r,this.endWidth=o}r.fromPoints=function(e,t){var n=this.calculateControlPoints(e[0],e[1],e[2]).c2,i=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new r(e[1],n,i,e[2],t.start,t.end)},r.calculateControlPoints=function(e,t,n){var i=e.x-t.x,r=e.y-t.y,o=t.x-n.x,a=t.y-n.y,s=(e.x+t.x)/2,e=(e.y+t.y)/2,l=(t.x+n.x)/2,n=(t.y+n.y)/2,i=Math.sqrt(i*i+r*r),r=Math.sqrt(o*o+a*a),o=r/(i+r),a=l+(s-l)*o,i=n+(e-n)*o,r=t.x-a,o=t.y-i;return{c1:new c.Point(s+r,e+o),c2:new c.Point(l+r,n+o)}},r.prototype.length=function(){for(var e,t,n=0,i=0;i<=10;i+=1){var r,o,a=i/10,s=this.point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);0<i&&(r=s-e,o=a-t,n+=Math.sqrt(r*r+o*o)),e=s,t=a}return n},r.prototype.point=function(e,t,n,i,r){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*i*(1-e)*e*e+r*e*e*e},t.Bezier=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0,t.throttle=function(r,o){function a(){u=Date.now(),d=null,s=r.apply(l,c),d||(l=null,c=[])}void 0===o&&(o=250);var s,l,c,u=0,d=null;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Date.now(),i=o-(n-u);return l=this,c=e,i<=0||o<i?(d&&(clearTimeout(d),d=null),u=n,s=r.apply(l,c),d||(l=null,c=[])):d=d||window.setTimeout(a,i),s}}},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePlupload=void 0,n(115)),u=n(15),d=n(18),p=n(76),h=n(41),f=l(n(16)),m=n(13),l=(r=c.PluploadUpload,o(g,r),g.prototype.getUrl=function(){return"api"==this.target?r.prototype.getUrl.call(this):this.getServiceUrl()},g.prototype.getServiceUrl=function(){return h.Settings.get("service")+"/signature-images/upload"},g.prototype.getUploadParams=function(){return"api"==this.target?{task:this.taskId,v:this.appVersion}:{}},g.prototype.setApiMode=function(){this.target="api",this.token=this.tokenApi,this.uploader&&(this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start())},g.prototype.configPlupload=function(){r.prototype.configPlupload.call(this),this.uploader&&this.uploader.setOption("max_file_size","6MB")},g.prototype.setServiceMode=function(){var e=u.UserModel.get();if(!e||!e.token)return!1;this.tokenService=e.token,this.target="service",this.token=this.tokenService,this.uploader||this.configPlupload(),this.uploader&&(this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start())},g.prototype.setServiceOnlyMode=function(){var e=u.UserModel.get();if(!e||!e.token)return!1;this.target="serviceOnly",this.token=e.token,this.uploader&&(this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start())},g.prototype.fileUploaded=function(e,t){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fileUploaded(e,t):t.service_filename?this.uploadToApi(t.service_filename,e):(f.configureScope(function(e){e.setExtra("error",t)}),f.captureMessage("[sign] no server_filename on response",m.Severity.Error),this.fatalError("no server_filename present"))},g.prototype.uploadToApi=function(t,n){var i=this;null==(n=void 0===n?null:n)&&(n=d.Tools.randomId(),this.files.addFile(new p.File({id:n,name:t,filename:t}))),this.optionsManager.api.uploadCloudFile(this.taskId,t).then(function(e){e.service_filename=t,i.optionsManager.fileUploaded(n,e)},function(){})},g.prototype.error=function(e){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.invalidUpload(e):(this.setApiMode(),this.reUploadAllFiles()),r.prototype.error.call(this,e)},g.prototype.fatalError=function(e){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fatalError(e):(this.setApiMode(),this.reUploadAllFiles())},g);function g(e){e=r.call(this,e)||this;return e.target=e.target||"api",e.chunkSize=!1,e}t.ServicePlupload=l},function(e,t,n){"use strict";function o(){}Object.defineProperty(t,"__esModule",{value:!0}),t.FileTools=void 0,o.getMimetype=function(e){switch(e){case"3C3F786D":case"3C737667":return"image/svg+xml";case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";case"38425053":return"application/psd";default:return"Unknown filetype"}},o.getMimeTypeFromBlob=function(r){return new Promise(function(n,t){var e=new FileReader,i=(e.onloadend=function(e){var t;e.target.readyState===FileReader.DONE&&(e=new Uint8Array(e.target.result),t=[],e.forEach(function(e){t.push(e.toString(16))}),e=t.join("").toUpperCase(),n(o.getMimetype(e)))},e.onerror=function(e){t(e)},r.slice(0,4));e.readAsArrayBuffer(i)})},o.getMimeTypeFromSource=function(e){return new Promise(function(n,i){var r=new FileReader;r.onload=function(e){var t=new Uint8Array(r.result),t=new Blob([t]);o.getMimeTypeFromBlob(t).then(function(e){n(e)},function(e){i(e)})},r.onerror=function(e){i(e)},r.readAsArrayBuffer(e)})},o.dataURLtoFile=function(e,t){try{for(var n=e.split(","),i=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,a=new Uint8Array(o);o--;)a[o]=r.charCodeAt(o);return new File([a],t,{type:i})}catch(e){return null}},t.FileTools=o},,,function(e,n,t){"use strict";!function(e){function t(){this.show=!0,this.init(),this.listenEventUuidDisable()}Object.defineProperty(n,"__esModule",{value:!0}),n.UuidManager=void 0,t.prototype.init=function(){var t=this,n=(e("#uuidCheckbox").on("change",function(){t.setFromCheckbox()}),this.setFromCheckbox(),e(".signature__option--uuid"));n.on("click",function(e){e.preventDefault(),n.hasClass("disabled")?t.enableUuid():t.disableUuid()})},t.prototype.setFromCheckbox=function(){e("#uuidCheckbox").is(":checked")?this.enableUuid():this.disableUuid()},t.prototype.enableUuid=function(){this.show=!0,e("body").removeClass("uuid--disabled"),e("body").addClass("uuid--enabled"),e("#uuidCheckbox").attr("checked","checked"),e(".signature__option--uuid").removeClass("disabled"),this.sendEventUuidChanged("enabled")},t.prototype.disableUuid=function(){this.show=!1,e("body").addClass("uuid--disabled"),e("body").removeClass("uuid--enabled"),e("#uuidCheckbox").removeAttr("checked"),e(".signature__option--uuid").addClass("disabled"),this.sendEventUuidChanged("disabled")},t.prototype.disableEdit=function(){e(".signature__option--uuid").hide()},t.prototype.setStatus=function(e){1==(e=void 0===e?!0:e)?this.enableUuid():this.disableUuid()},t.prototype.apply=function(){e(".signature__firm__code").val(this.uuid)},t.prototype.setUuid=function(e){this.uuid=e,this.apply()},t.prototype.getStatus=function(){return this.show},t.prototype.getUuid=function(){return this.uuid},t.prototype.sendEventUuidChanged=function(e){e=new CustomEvent("uuidChanged",{detail:{uuid:e}});window.dispatchEvent(e)},t.prototype.listenEventUuidDisable=function(){var t=this;window.addEventListener("uuidDisable",function(e){t.disableUuid()})},n.UuidManager=t}.call(this,t(1))},,,function(e,t,n){e.exports=n(260)},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ElementsStack=a.ELEMENT_STACK_SELECTED=a.ELEMENT_STACK_ELEMENT=void 0;var s=t(75),t=(a.ELEMENT_STACK_ELEMENT="elements",a.ELEMENT_STACK_SELECTED="selected",n.prototype.add=function(e,t){this[t=void 0===t?a.ELEMENT_STACK_ELEMENT:t].push(e)},n.prototype.clear=function(e){this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e]=[]},n.prototype.get=function(t,e){return this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e].find(function(e){return e.id==t})||null},n.prototype.all=function(e){return this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e]},n.prototype.getIndex=function(t,e){e=this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e].findIndex(function(e){return e.id==t})||null;return-1==e?null:e},n.prototype.first=function(e){return this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e][0]},n.prototype.last=function(e){return this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e][this[e].length-1]},n.prototype.count=function(e){return this[e=void 0===e?a.ELEMENT_STACK_ELEMENT:e].length},n.prototype.update=function(n,i){var r=null;return this.elements.forEach(function(e,t){if(e.id==n)return Object.assign(e,i),r=e}),r},n.prototype.remove=function(n,i,r){void 0===i&&(i=a.ELEMENT_STACK_ELEMENT),void 0===r&&(r=!0);var o=this;this[i].forEach(function(e,t){e&&e.id==n&&(-1<t&&o[i].splice(t,1),0==r)&&s.SignatureEventManager.dispatchEvent("signature:elements_manager:removed",{elementId:n,type:e.type})})},Object.defineProperty(n.prototype,"activeElements",{get:function(){return this.elements.filter(function(e){return!e.removed})},enumerable:!1,configurable:!0}),n);function n(){this.elements=[],this.selected=[]}a.ElementsStack=t},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.DelayedFunctionExecutor=void 0,o.prototype.executeFunction=function(i){return r(this,void 0,void 0,function(){var t,n=this;return a(this,function(e){switch(e.label){case 0:return this.totalExecutionTime>this.maxExecutionTime?[4,new Promise(function(e){return setTimeout(e,n.timeoutBetweenFunctions)})]:[3,2];case 1:e.sent(),this.totalExecutionTime=0,e.label=2;case 2:return t=Date.now(),i(),this.totalExecutionTime+=Date.now()-t,[2]}})})},o.prototype.executeFunctionUntilResolved=function(o){return r(this,void 0,void 0,function(){var t,n,i,r=this;return a(this,function(e){switch(e.label){case 0:n=Date.now(),i=0,e.label=1;case 1:if(i>this.maxExecutionTime)throw new Error("Maximum execution time exceeded");return[4,o()];case 2:return(t=e.sent())?[3,5]:[4,new Promise(function(e){return setTimeout(e,r.timeoutBetweenFunctions)})];case 3:e.sent(),i=Date.now()-n,e.label=4;case 4:return[3,1];case 5:return[2,t]}})})},o);function o(e,t){this.maxExecutionTime=e,this.timeoutBetweenFunctions=t,this.totalExecutionTime=0}t.DelayedFunctionExecutor=i},,,function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.Url=void 0,i.validate=function(e){return new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$","g").test(e)},i.correct=function(e){var t="http://";return e=e.substr(0,t.length)!==t&&"https://"!==e.substr(0,"https://".length)?t+e:e},i.getParam=function(e,t){null==(t=void 0===t?null:t)&&(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},t.Url=i},,,,,function(e,t,n){var i;i=function(o){"use strict";for(var a=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqipëri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (Österreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (Беларусь)","by","375"],["Belgium (België)","be","32"],["Belize","bz","501"],["Benin (Bénin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","367","368","387","403","416","418","431","437","438","450","474","506","514","519","548","579","581","584","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (République centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Côte d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česká republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (República Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Føroyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane française)","gf","594"],["French Polynesia (Polynésie française)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guinée)","gn","224"],["Guinea-Bissau (Guiné Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarország)","hu","36"],["Iceland (Ísland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (日本)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (México)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (‫المغرب‬‎)","ma","212",0],["Mozambique (Moçambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibië)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Calédonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["North Macedonia (Северна Македонија)","mk","389"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panamá)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Perú)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["Réunion (La Réunion)","re","262",0],["Romania (România)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie française))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe (São Tomé e Príncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (Sénégal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (España)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (Türkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Città del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (‫الصحراء الغربية‬‎)","eh","212",1,["5288","5289"]],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["Åland Islands","ax","358",1,["18"]]],e=0;e<a.length;e++){var t=a[e];a[e]={name:t[0],iso2:t[1],dialCode:t[2],priority:t[3]||0,areaCodes:t[4]||null}}function s(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&t.push.apply(t,Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.forEach(function(e){var t,n;t=i,n=r[e=e],(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n})}return i}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n===o)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}function c(e,t){for(var n=Object.keys(e),i=0;i<n.length;i++)t(n[i],e[n[i]])}function u(t){c(window.intlTelInputGlobals.instances,function(e){window.intlTelInputGlobals.instances[e][t]()})}function r(e,t,n){var i=document.createElement("script");i.onload=function(){u("handleUtils"),t&&t()},i.onerror=function(){u("rejectUtilsScriptPromise"),n&&n()},i.className="iti-load-utils",i.async=!0,i.src=e,document.body.appendChild(i)}var n={getInstance:function(e){e=e.getAttribute("data-intl-tel-input-id");return window.intlTelInputGlobals.instances[e]},instances:{},documentReady:function(){return"complete"===document.readyState}},d=("object"==typeof window&&(window.intlTelInputGlobals=n),0),p={allowDropdown:!0,autoInsertDialCode:!1,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,showFlags:!0,utilsScript:""},h=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],f=function(){function r(e,t){var n=this;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.id=d++,this.telInput=e,this.activeItem=null,this.highlightedItem=null;var i=t||{};this.options={},c(p,function(e,t){n.options[e]=i.hasOwnProperty(e)?i[e]:t}),this.hadInitialPlaceholder=Boolean(e.getAttribute("placeholder"))}var e,t,n;return e=r,(t=[{key:"_init",value:function(){var e,n=this,t=(this.options.nationalMode&&(this.options.autoInsertDialCode=!1),this.options.separateDialCode&&(this.options.autoInsertDialCode=!1),this.options.allowDropdown&&!this.options.separateDialCode);!this.options.showFlags&&t&&(this.options.showFlags=!0),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(document.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=document.body)),"undefined"!=typeof Promise?(t=new Promise(function(e,t){n.resolveAutoCountryPromise=e,n.rejectAutoCountryPromise=t}),e=new Promise(function(e,t){n.resolveUtilsScriptPromise=e,n.rejectUtilsScriptPromise=t}),this.promise=Promise.all([t,e])):(this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){}),this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(e,t,n){t.length>this.countryCodeMaxLen&&(this.countryCodeMaxLen=t.length),this.countryCodes.hasOwnProperty(t)||(this.countryCodes[t]=[]);for(var i=0;i<this.countryCodes[t].length;i++)if(this.countryCodes[t][i]===e)return;n=n!==o?n:this.countryCodes[t].length;this.countryCodes[t][n]=e}},{key:"_processAllCountries",value:function(){var t,n;this.options.onlyCountries.length?(t=this.options.onlyCountries.map(function(e){return e.toLowerCase()}),this.countries=a.filter(function(e){return-1<t.indexOf(e.iso2)})):this.options.excludeCountries.length?(n=this.options.excludeCountries.map(function(e){return e.toLowerCase()}),this.countries=a.filter(function(e){return-1===n.indexOf(e.iso2)})):this.countries=a}},{key:"_translateCountriesByLocale",value:function(){for(var e=0;e<this.countries.length;e++){var t=this.countries[e].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(t)&&(this.countries[e].name=this.options.localizedCountries[t])}}},{key:"_countryNameSort",value:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}},{key:"_processCountryCodes",value:function(){this.countryCodeMaxLen=0,this.dialCodes={},this.countryCodes={};for(var e=0;e<this.countries.length;e++){var t=this.countries[e];this.dialCodes[t.dialCode]||(this.dialCodes[t.dialCode]=!0),this._addCountryCode(t.iso2,t.dialCode,t.priority)}for(var n=0;n<this.countries.length;n++){var i=this.countries[n];if(i.areaCodes)for(var r=this.countryCodes[i.dialCode][0],o=0;o<i.areaCodes.length;o++){for(var a=i.areaCodes[o],s=1;s<a.length;s++){var l=i.dialCode+a.substr(0,s);this._addCountryCode(r,l),this._addCountryCode(i.iso2,l)}this._addCountryCode(i.iso2,i.dialCode+a)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),t=this._getCountryData(t,!1,!0);t&&this.preferredCountries.push(t)}}},{key:"_createEl",value:function(e,t,n){var i=document.createElement(e);return t&&c(t,function(e,t){i.setAttribute(e,t)}),n&&n.appendChild(i),i}},{key:"_generateMarkup",value:function(){this.telInput.hasAttribute("autocomplete")||this.telInput.form&&this.telInput.form.hasAttribute("autocomplete")||this.telInput.setAttribute("autocomplete","off");var e=this.options,t=e.allowDropdown,n=e.separateDialCode,i=e.showFlags,r=e.customContainer,o=e.hiddenInput,e=e.dropdownContainer,a="iti",r=(t&&(a+=" iti--allow-dropdown"),n&&(a+=" iti--separate-dial-code"),i&&(a+=" iti--show-flags"),r&&(a+=" ".concat(r)),this._createEl("div",{class:a})),a=(this.telInput.parentNode.insertBefore(r,this.telInput),t||i||n);a&&(this.flagsContainer=this._createEl("div",{class:"iti__flag-container"},r)),r.appendChild(this.telInput),a&&(this.selectedFlag=this._createEl("div",s({class:"iti__selected-flag"},t&&{role:"combobox","aria-haspopup":"listbox","aria-controls":"iti-".concat(this.id,"__country-listbox"),"aria-owns":"iti-".concat(this.id,"__country-listbox"),"aria-expanded":"false","aria-label":"Telephone country code"}),this.flagsContainer)),i&&(this.selectedFlagInner=this._createEl("div",{class:"iti__flag"},this.selectedFlag)),this.selectedFlag&&this.telInput.disabled&&this.selectedFlag.setAttribute("aria-disabled","true"),n&&(this.selectedDialCode=this._createEl("div",{class:"iti__selected-dial-code"},this.selectedFlag)),t&&(this.telInput.disabled||this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"iti__country-list iti__hide",id:"iti-".concat(this.id,"__country-listbox"),role:"listbox","aria-label":"List of countries"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred",!0),this._createEl("li",{class:"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),(e?(this.dropdown=this._createEl("div",{class:"iti iti--container"}),this.dropdown):this.flagsContainer).appendChild(this.countryList)),o&&(a=o,(i=this.telInput.getAttribute("name"))&&-1!==(n=i.lastIndexOf("["))&&(a="".concat(i.substr(0,n),"[").concat(a,"]")),this.hiddenInput=this._createEl("input",{type:"hidden",name:a}),r.appendChild(this.hiddenInput))}},{key:"_appendListItems",value:function(e,t,n){for(var i="",r=0;r<e.length;r++){var o=e[r],a=n?"-preferred":"";i+="<li class='iti__country ".concat(t,"' tabIndex='-1' id='iti-").concat(this.id,"__item-").concat(o.iso2).concat(a,"' role='option' data-dial-code='").concat(o.dialCode,"' data-country-code='").concat(o.iso2,"' aria-selected='false'>"),this.options.showFlags&&(i+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(o.iso2,"'></div></div>")),i=(i+="<span class='iti__country-name'>".concat(o.name,"</span>"))+"<span class='iti__dial-code'>+".concat(o.dialCode,"</span>")+"</li>"}this.countryList.insertAdjacentHTML("beforeend",i)}},{key:"_setInitialState",value:function(){var e=this.telInput.getAttribute("value"),t=this.telInput.value,e=e&&"+"===e.charAt(0)&&(!t||"+"!==t.charAt(0))?e:t,t=this._getDialCode(e),n=this._isRegionlessNanp(e),i=this.options,r=i.initialCountry,i=i.autoInsertDialCode;t&&!n?this._updateFlagFromNumber(e):"auto"!==r&&(r?this._setFlag(r.toLowerCase()):t&&n?this._setFlag("us"):(this.defaultCountry=(this.preferredCountries.length?this.preferredCountries:this.countries)[0].iso2,e||this._setFlag(this.defaultCountry)),!e)&&i&&(this.telInput.value="+".concat(this.selectedCountryData.dialCode)),e&&this._updateValFromNumber(e)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoInsertDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var e=this;this._handleHiddenInputSubmit=function(){e.hiddenInput.value=e.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var e=this.telInput;e&&"LABEL"!==e.tagName;)e=e.parentNode;return e}},{key:"_initDropdownListeners",value:function(){var t=this,e=(this._handleLabelClick=function(e){t.countryList.classList.contains("iti__hide")?t.telInput.focus():e.preventDefault()},this._getClosestLabel());e&&e.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!t.countryList.classList.contains("iti__hide")||t.telInput.disabled||t.telInput.readOnly||t._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(e){t.countryList.classList.contains("iti__hide")&&-1!==["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(e.key)&&(e.preventDefault(),e.stopPropagation(),t._showDropdown()),"Tab"===e.key&&t._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var e=this;this.options.utilsScript&&!window.intlTelInputUtils?window.intlTelInputGlobals.documentReady()?window.intlTelInputGlobals.loadUtils(this.options.utilsScript):window.addEventListener("load",function(){window.intlTelInputGlobals.loadUtils(e.options.utilsScript)}):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){window.intlTelInputGlobals.autoCountry?this.handleAutoCountry():window.intlTelInputGlobals.startedLoadingAutoCountry||(window.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(e){window.intlTelInputGlobals.autoCountry=e.toLowerCase(),setTimeout(function(){return u("handleAutoCountry")})},function(){return u("rejectAutoCountryPromise")}))}},{key:"_initKeyListeners",value:function(){var e=this;this._handleKeyupEvent=function(){e._updateFlagFromNumber(e.telInput.value)&&e._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(e._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(e){var t=this.telInput.getAttribute("maxlength");return t&&e.length>t?e.substr(0,t):e}},{key:"_initBlurListeners",value:function(){var e=this;this._handleSubmitOrBlurEvent=function(){e._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){var e;"+"!==this.telInput.value.charAt(0)||(e=this._getNumeric(this.telInput.value))&&this.selectedCountryData.dialCode!==e||(this.telInput.value="")}},{key:"_getNumeric",value:function(e){return e.replace(/\D/g,"")}},{key:"_trigger",value:function(e){var t=document.createEvent("Event");t.initEvent(e,!0,!0),this.telInput.dispatchEvent(t)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(e,t,n){n&&!e.classList.contains(t)?e.classList.add(t):!n&&e.classList.contains(t)&&e.classList.remove(t)}},{key:"_setDropdownPosition",value:function(){var e,t,n,i,r,o=this;this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),this.isMobile||(e=this.telInput.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop,t=e.top+i,r=this.countryList.offsetHeight,n=t+this.telInput.offsetHeight+r<i+window.innerHeight,i=i<t-r,this._toggleClass(this.countryList,"iti__country-list--dropup",!n&&i),this.options.dropdownContainer&&(r=!n&&i?0:this.telInput.offsetHeight,this.dropdown.style.top="".concat(t+r,"px"),this.dropdown.style.left="".concat(e.left+document.body.scrollLeft,"px"),this._handleWindowScroll=function(){return o._closeDropdown()},window.addEventListener("scroll",this._handleWindowScroll)))}},{key:"_getClosestListItem",value:function(e){for(var t=e;t&&t!==this.countryList&&!t.classList.contains("iti__country");)t=t.parentNode;return t===this.countryList?null:t}},{key:"_bindDropdownListeners",value:function(){var t=this,e=(this._handleMouseoverCountryList=function(e){e=t._getClosestListItem(e.target);e&&t._highlightListItem(e,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(e){e=t._getClosestListItem(e.target);e&&t._selectListItem(e)},this.countryList.addEventListener("click",this._handleClickCountryList),!0),n=(this._handleClickOffToClose=function(){e||t._closeDropdown(),e=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose),""),i=null;this._handleKeydownOnDropdown=function(e){e.preventDefault(),"ArrowUp"===e.key||"Up"===e.key||"ArrowDown"===e.key||"Down"===e.key?t._handleUpDownKey(e.key):"Enter"===e.key?t._handleEnterKey():"Escape"===e.key?t._closeDropdown():/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(e.key)&&(i&&clearTimeout(i),n+=e.key.toLowerCase(),t._searchForCountry(n),i=setTimeout(function(){n=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(e){var t="ArrowUp"===e||"Up"===e?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;t&&(t.classList.contains("iti__divider")&&(t="ArrowUp"===e||"Up"===e?t.previousElementSibling:t.nextElementSibling),this._highlightListItem(t,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var n=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(this.countries[t].iso2));this._highlightListItem(n,!1),this._scrollTo(n,!0);break}}},{key:"_startsWith",value:function(e,t){return e.substr(0,t.length).toLowerCase()===t}},{key:"_updateValFromNumber",value:function(e){var t,n,i;this.options.formatOnDisplay&&window.intlTelInputUtils&&this.selectedCountryData&&(t=this.options.nationalMode||"+"!==e.charAt(0)&&!this.options.separateDialCode,n=(i=intlTelInputUtils.numberFormat).NATIONAL,i=i.INTERNATIONAL,e=intlTelInputUtils.formatNumber(e,this.selectedCountryData.iso2,t?n:i)),e=this._beforeSetNumber(e),this.telInput.value=e}},{key:"_updateFlagFromNumber",value:function(e){var t=this.selectedCountryData.dialCode,n=(e&&this.options.nationalMode&&"1"===t&&"+"!==e.charAt(0)&&("1"!==e.charAt(0)&&(e="1".concat(e)),e="+".concat(e)),this.options.separateDialCode&&t&&"+"!==e.charAt(0)&&(e="+".concat(t).concat(e)),this._getDialCode(e,!0)),i=this._getNumeric(e),r=null;if(n){var o=this.countryCodes[this._getNumeric(n)],n=-1!==o.indexOf(this.selectedCountryData.iso2)&&i.length<=n.length-1;if(!("1"===t&&this._isRegionlessNanp(i))&&!n)for(var a=0;a<o.length;a++)if(o[a]){r=o[a];break}}else"+"===e.charAt(0)&&i.length?r="":e&&"+"!==e||(r=this.defaultCountry);return null!==r&&this._setFlag(r)}},{key:"_isRegionlessNanp",value:function(e){var e=this._getNumeric(e);return"1"===e.charAt(0)&&(e=e.substr(1,3),-1!==h.indexOf(e))}},{key:"_highlightListItem",value:function(e,t){var n=this.highlightedItem;n&&n.classList.remove("iti__highlight"),this.highlightedItem=e,this.highlightedItem.classList.add("iti__highlight"),this.selectedFlag.setAttribute("aria-activedescendant",e.getAttribute("id")),t&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(e,t,n){for(var i=t?a:this.countries,r=0;r<i.length;r++)if(i[r].iso2===e)return i[r];if(n)return null;throw new Error("No country data for '".concat(e,"'"))}},{key:"_setFlag",value:function(e){var t,n=this.selectedCountryData.iso2?this.selectedCountryData:{};return this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.options.showFlags&&this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(e)),this.selectedFlag&&(t=e?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown",this.selectedFlag.setAttribute("title",t)),this.options.separateDialCode&&(t=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"",this.selectedDialCode.innerHTML=t,t=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth(),this.telInput.style.paddingLeft="".concat(t+6,"px")),this._updatePlaceholder(),this.options.allowDropdown&&((t=this.activeItem)&&(t.classList.remove("iti__active"),t.setAttribute("aria-selected","false")),e)&&((t=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(e,"-preferred"))||this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(e))).setAttribute("aria-selected","true"),t.classList.add("iti__active"),this.activeItem=t),n.iso2!==e}},{key:"_getHiddenSelectedFlagWidth",value:function(){var e=this.telInput.parentNode.cloneNode(),t=(e.style.visibility="hidden",document.body.appendChild(e),this.flagsContainer.cloneNode()),n=(e.appendChild(t),this.selectedFlag.cloneNode(!0)),t=(t.appendChild(n),n.offsetWidth);return e.parentNode.removeChild(e),t}},{key:"_updatePlaceholder",value:function(){var e="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder;window.intlTelInputUtils&&e&&(e=intlTelInputUtils.numberType[this.options.placeholderNumberType],e=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,e):"",e=this._beforeSetNumber(e),"function"==typeof this.options.customPlaceholder&&(e=this.options.customPlaceholder(e,this.selectedCountryData)),this.telInput.setAttribute("placeholder",e))}},{key:"_selectListItem",value:function(e){var t=this._setFlag(e.getAttribute("data-country-code")),e=(this._closeDropdown(),this._updateDialCode(e.getAttribute("data-dial-code")),this.telInput.focus(),this.telInput.value.length);this.telInput.setSelectionRange(e,e),t&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","false"),this.selectedFlag.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode)&&this.dropdown.parentNode.removeChild(this.dropdown),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(e,t){var n=this.countryList,i=window.pageYOffset||document.documentElement.scrollTop,r=n.offsetHeight,o=n.getBoundingClientRect().top+i,a=o+r,s=e.offsetHeight,e=e.getBoundingClientRect().top+i,i=e+s,l=e-o+n.scrollTop,c=r/2-s/2;e<o?(t&&(l-=c),n.scrollTop=l):a<i&&(t&&(l+=c),n.scrollTop=l-(r-s))}},{key:"_updateDialCode",value:function(e){var t,n=this.telInput.value,e="+".concat(e);"+"===n.charAt(0)?(t=(t=this._getDialCode(n))?n.replace(t,e):e,this.telInput.value=t):this.options.autoInsertDialCode&&(this.telInput.value=t=n?e+n:e)}},{key:"_getDialCode",value:function(e,t){var n="";if("+"===e.charAt(0))for(var i="",r=0;r<e.length;r++){var o=e.charAt(r);if(!isNaN(parseInt(o,10))){if(i+=o,t)this.countryCodes[i]&&(n=e.substr(0,r+1));else if(this.dialCodes[i]){n=e.substr(0,r+1);break}if(i.length===this.countryCodeMaxLen)break}}return n}},{key:"_getFullNumber",value:function(){var e=this.telInput.value.trim(),t=this.selectedCountryData.dialCode,n=this._getNumeric(e),n=this.options.separateDialCode&&"+"!==e.charAt(0)&&t&&n?"+".concat(t):"";return n+e}},{key:"_beforeSetNumber",value:function(e){var t;return this.options.separateDialCode&&this._getDialCode(e)&&(t=" "===e[(t="+".concat(this.selectedCountryData.dialCode)).length]||"-"===e[t.length]?t.length+1:t.length,e=e.substr(t)),this._cap(e)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=window.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){window.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var e=this.telInput.form,t=(this.options.allowDropdown&&(this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown),t=this._getClosestLabel())&&t.removeEventListener("click",this._handleLabelClick),this.hiddenInput&&e&&e.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoInsertDialCode&&(e&&e.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id"),this.telInput.parentNode);t.parentNode.insertBefore(this.telInput,t),t.parentNode.removeChild(t),delete window.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(e){var t;return window.intlTelInputUtils?(t=this.selectedCountryData.iso2,intlTelInputUtils.formatNumber(this._getFullNumber(),t,e)):""}},{key:"getNumberType",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){var e;return window.intlTelInputUtils?(e=this.selectedCountryData.iso2,intlTelInputUtils.getValidationError(this._getFullNumber(),e)):-99}},{key:"isValidNumber",value:function(){var e=this._getFullNumber().trim(),t=this.options.nationalMode?this.selectedCountryData.iso2:"";return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(e,t):null}},{key:"setCountry",value:function(e){e=e.toLowerCase();this.selectedCountryData.iso2!==e&&(this._setFlag(e),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}},{key:"setNumber",value:function(e){var t=this._updateFlagFromNumber(e);this._updateValFromNumber(e),t&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(e){this.options.placeholderNumberType=e,this._updatePlaceholder()}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}();return n.getCountryData=function(){return a},n.loadUtils=function(n){if(!window.intlTelInputUtils&&!window.intlTelInputGlobals.startedLoadingUtilsScript){if(window.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise(function(e,t){return r(n,e,t)});r(n)}return null},n.defaults=p,n.version="18.1.0",function(e,t){t=new f(e,t);return t._init(),e.setAttribute("data-intl-tel-input-id",t.id),window.intlTelInputGlobals.instances[t.id]=t}},e.exports?e.exports=i():window.intlTelInput=i()},function(e,b,w){"use strict";!function(i){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},r=(Object.defineProperty(b,"__esModule",{value:!0}),b.SignerIdentityManager=void 0,w(175)),n=w(37),e=w(262),a=w(15),s=w(265),l=w(270),c=w(271),u=w(8),d=w(190),p=w(272),h=w(174),f=w(7),m=w(273),g=w(75),v="signatureIdentityModal",y="confirmSignature";function _(e){var t;this.availableElementTabs=["signature","initials","stamp"],this.serviceFail=!1,this.serviceOnly=!1,this.canModalBeOpened=!1,this.constainsInvalidSetting=!1,this.signer=e.signer,this.api=e.api,this.signatureModel=null!=(t=e.signatureModel)?t:null,this.currentElement=null!=(t=e.currentElement)?t:"signature",this.init()}_.prototype.init=function(){this.listenEventUuidChanged(),this.initUser(),this.initModalSignerIdentityConfig(),this.listenEventServiceError(),this.listenEventInvalidSetting()},_.prototype.initModalSignerIdentityConfig=function(){this.initModalOpener(),this.initConfirmActions(),this.initCancelActions(),this.initColorActions()},_.prototype.initColorActions=function(){var i=this;document.querySelectorAll(".signature__color__item").forEach(function(n){n.addEventListener("click",function(e){var t=n.getAttribute("data-color");i.setColor(t)})})},_.prototype.setColor=function(t){document.querySelectorAll(".signature__color__item").forEach(function(e){e.getAttribute("data-color")==t?e.classList.add("active"):e.classList.remove("active")}),this.signerElementSignature.setColor(t),this.signerElementInitials.setColor(t)},_.prototype.initUser=function(){var e,t=this;1==a.UserModel.isUser()?(e=a.UserModel.get(),this.api.pingService().then(function(){t.patchInitials(),t.preloadImages(e),t.initElements(),t.loadFromService(),t.sendEventPingFinished()},function(){t.sendEventServiceDown(!1),t.sendEventPingFinished()}),"all"!=this.signer.allowCostumize&&"text"!=this.signer.allowCostumize&&this.forceSettings()):this.initUserAuth()},_.prototype.initModalOpener=function(){var t=this,e=document.getElementById("openSignatureConfig");null!=e&&e.addEventListener("click",function(e){t.serviceOnly&&t.serviceFail||(t.applySignatureModelToElements(),t.showModal("signature"))})},_.prototype.toggleWaitEl=function(e){this.waitEl.style.display=e?"block":"none"},_.prototype.initConfirmActions=function(){var e=this,t=document.getElementById(y);t&&t.addEventListener("click",function(){t.setAttribute("disabled","disabled"),1==e.validate()?(e.cleanErrors(),e.toggleWaitEl(!0),e.uploadAllImages().then(function(){e.apply(!0),e.saveSignatureSettingsToService().then(function(){e.constainsInvalidSetting=!1,e.drawPreview(),i("#"+v+" .wait").hide(),e.hideModal(),i("#"+y).removeAttr("disabled"),e.sendEventSignatureConfirmed(),e.sendEventSignatureChanged()},function(){e.sendEventServiceDown(!1),e.constainsInvalidSetting=!1,e.toggleWaitEl(!1),e.hideModal(),i("#"+y).removeAttr("disabled"),e.drawPreview(),e.sendEventSignatureConfirmed(),e.sendEventSignatureChanged()})},function(){e.toggleWaitEl(!1),i("#"+y).removeAttr("disabled"),n.Tooltip.setContent("#"+y,u.Lang.t("Upload error")+" - "+u.Lang.t("Retry")),n.Tooltip.show("#"+y)})):i("#"+y).removeAttr("disabled")})},_.prototype.initCancelActions=function(){var e=this;document.getElementById("cancelSignature").addEventListener("click",function(){e.sendEventSignatureCancel(),e.resetElements(),e.hideModal()})},_.prototype.initUserAuth=function(){a.UserModel.isLoggedIn()||(this.authElement=new e.AuthElement({elementAuth:i(".signature-avatar"),elementAvatar:i(".signature-avatar img")}),this.listenEventUserAuth())},_.prototype.forceSettings=function(){this.showModal(),this.forceApply()},_.prototype.forceApply=function(){i("#cancelSignature").hide()},_.prototype.hideModal=function(){this.toggleWaitEl(!1),i(this.domRootEl).modal("hide")},_.prototype.setElementStatus=function(e,t){this.getElement(e).setStatus(t)},_.prototype.setAllowedMode=function(e,t){void 0===e&&(e=null),(t=void 0===t?null:t)&&"signature"!=t||this.signerElementSignature.setOnlyMode(e),t&&"initials"!=t||this.signerElementSignature.setOnlyMode(e),this.apply(!0)},_.prototype.isCurrentRequired=function(e){e=this.getElement(e);return!!e&&1==e.required},_.prototype.setRequired=function(e,t){this.getElement(e).setRequired(t)},_.prototype.showModal=function(e){if(void 0===e&&(e="signature"),!this.isModalOpened&&this.canModalBeOpened)return i(this.domRootEl).modal("show"),this.eventModel=new m.EventModel,i(".tippy-box").hide(),i("#signatureIdentityModal .error").removeClass("error"),i("#signatureIdentityModal .shake").removeClass("shake"),i("#cancelSignature").show(),this.initElements(),this.applyAllowCostumize(),this.initElementTabs(),this.currentElement=e,this.getTab(this.currentElement).click(),this.preSelectTabMode(this.currentElement),this.showElementTab(this.currentElement),window.setTimeout(function(){i("#signName").focus()},500),this.eventModel},_.prototype.preSelectTabMode=function(e){this.getElement(e).activateElementModeSubtab()},_.prototype.getUsedElementsFromSignature=function(e){var t=[];return e.files.forEach(function(e){e.server_filename.replace(".pdf","");e.elements.forEach(function(e){t.push(e.type)})}),t.filter(function(e,t,n){return n.indexOf(e)===t})},_.prototype.disableNotNeededElements=function(e){e=this.getUsedElementsFromSignature(e);e.includes("stamp")?(this.signerElementStamp.enable(),this.signerElementStamp.setRequired(!0)):this.signerElementStamp.disable(),e.includes("initials")?(this.signerElementInitials.enable(),this.signerElementInitials.setRequired(!0)):this.signerElementInitials.disable()},_.prototype.initElements=function(){var e,t={signatureModel:this.signatureModel,api:this.api},n=a.UserModel.isLoggedIn(),i=a.UserModel.get(),r=null==(r=null==i?void 0:i.signature)?void 0:r.signatureMode,i=null==(i=null==i?void 0:i.signature)?void 0:i.initialsMode;this.signerElementBasicData||(this.signerElementBasicData=new p.SignerElementBasicData({signatureModel:this.signatureModel})),this.signerElementSignature||(n&&r?(e=o(o({},t),{elementMode:r}),this.signerElementSignature=new s.SignerElementSignature(e)):this.signerElementSignature=new s.SignerElementSignature(t)),this.signerElementInitials||(n&&i?(e=o(o({},t),{elementMode:i}),this.signerElementInitials=new l.SignerElementInitials(e)):this.signerElementInitials=new l.SignerElementInitials(t)),this.signerElementStamp||(this.signerElementStamp=new c.SignerElementStamp(t)),this.serviceFail&&(this.signerElementStamp.serviceError(),this.signerElementInitials.serviceError(),this.signerElementSignature.serviceError())},_.prototype.initElementTabs=function(){var t=this;1!=this.elementTabsStarted&&(this.elementTabsStarted=!0,this.availableElementTabs.forEach(function(e){t.getTab(e).addEventListener("click",function(){t.showElementTab(e)})}))},_.prototype.showElementTab=function(e){e=this.getElement(e);e.showElement()},_.prototype.listenEventUuidChanged=function(){var t=this;window.addEventListener("uuidChanged",function(e){t.signatureModel&&(t.signatureModel.uuidVisble="enabled"==e.detail.uuid)})},_.prototype.listenEventInvalidSetting=function(){var t=this;g.SignatureEventManager.addEventListener("signature:settings:invalid_info",function(e){t.constainsInvalidSetting=!0,t.cleanPreviewImages(e.detail.signatureType,e.detail.signatureMode),t.serviceOnly||t.showModal()})},_.prototype.listenEventServiceError=function(){var t=this;g.SignatureEventManager.addEventListener("signature:service_down",function(e){t.serviceError(),t.applySignatureModelToElements(),t.cleanPreviewImages(),e.detail.triggerIdentityModal&&!t.serviceOnly&&(t.clearUploaders(),t.forceSettings())},!0)},_.prototype.clearUploaders=function(){var e;null!=(e=null==(e=this.signerElementSignature)?void 0:e.drawElement)&&e.clearAllFiles(),null!=(e=null==(e=this.signerElementInitials)?void 0:e.drawElement)&&e.clearAllFiles(),null!=(e=null==(e=this.signerElementSignature)?void 0:e.fileElement)&&e.clearAllFiles(),null!=(e=null==(e=this.signerElementInitials)?void 0:e.fileElement)&&e.clearAllFiles(),null!=(e=null==(e=this.signerElementStamp)?void 0:e.fileElement)&&e.clearAllFiles()},_.prototype.cleanPreviewImages=function(e,t){var n={signature:this.signerElementSignature,initials:this.signerElementInitials,stamp:this.signerElementStamp},i={draw:function(e){return null==(e=null==e?void 0:e.drawElement)?void 0:e.cleanUploadPreviewImage()},image:function(e){return null==(e=null==e?void 0:e.fileElement)?void 0:e.cleanUploadPreviewImage()}},e=e?[n[e]]:Object.values(n),r=t?[i[t]]:Object.values(i);e.forEach(function(t){return r.forEach(function(e){return e(t)})})},_.prototype.sendEventServiceDown=function(e){g.SignatureEventManager.dispatchEvent("signature:service_down",{triggerIdentityModal:e=void 0===e?!1:e})},_.prototype.sendEventPingFinished=function(){g.SignatureEventManager.dispatchEvent("signature:signer_identity_modal:ping_finished",{signatureModel:this.signatureModel})},_.prototype.disablePreview=function(){this.previewDisabled=!0,document.querySelectorAll(".preview__active").forEach(function(e){e.classList.remove("preview__active")})},_.prototype.enablePreview=function(){this.previewDisabled=!1,""!=this.signatureModel.signature&&""!=this.signatureModel.initials&&this.drawPreview()},_.prototype.listenEventUserAuth=function(){var i=this;window.addEventListener("userAuth",function(e){i.patchInitials();var t,n=a.UserModel.get();null!=(t=n.signature)&&t.signature&&(i.initElements(),n.signature.initialsMode=i.signerElementInitials.elementMode,n.signature.signatureMode=i.signerElementSignature.elementMode,i.signerElementBasicData.modelChanged(),0==i.serviceFail&&(i.loadFromService(),null!=(t=null==(t=null==(t=i.signerElementInitials)?void 0:t.fileElement)?void 0:t.uploader)&&t.setServiceMode(),null!=(t=null==(t=null==(t=i.signerElementInitials)?void 0:t.drawElement)?void 0:t.uploader)&&t.setServiceMode(),null!=(t=null==(t=null==(t=i.signerElementSignature)?void 0:t.fileElement)?void 0:t.uploader)&&t.setServiceMode(),null!=(t=null==(t=null==(t=i.signerElementSignature)?void 0:t.drawElement)?void 0:t.uploader)&&t.setServiceMode(),null!=(t=null==(t=null==(t=i.signerElementStamp)?void 0:t.fileElement)?void 0:t.uploader))&&t.setServiceMode(),null!=(t=null==(t=i.signerElementInitials)?void 0:t.drawElement)&&t.paintDrawElement(),null!=(t=null==(t=i.signerElementSignature)?void 0:t.drawElement)&&t.paintDrawElement(),i.getTab(i.currentElement).click(),window.setTimeout(function(){window.dispatchEvent(new Event("resize"))}),0==i.serviceFail)&&i.preloadImages(n)})},_.prototype.preloadImages=function(e){var t=this,n=null==(n=null==(n=e.signature)?void 0:n.draw)?void 0:n.signature,i=null==(i=null==(i=e.signature)?void 0:i.image)?void 0:i.signature,r=null==(r=null==(r=e.signature)?void 0:r.draw)?void 0:r.initials,o=null==(o=null==(o=e.signature)?void 0:o.image)?void 0:o.initials,e=null==(e=null==(e=e.signature)?void 0:e.image)?void 0:e.stamp;n&&""!=n&&h.ImageHelper.urlToBase64(n).then(function(e){t.signatureModel.signatureDrawBase64=e,h.ImageHelper.preload(e)},function(){t.signatureModel.signatureDrawData?(a.UserModel.get().signature.draw.signature=null,t.signatureModel.signatureMode="font",t.signatureModel.signatureImageService=null):t.serviceError()}),r&&""!=r&&h.ImageHelper.urlToBase64(r).then(function(e){t.signatureModel.initialsDrawBase64=e,h.ImageHelper.preload(e)},function(){t.signatureModel.initialsDrawData?(a.UserModel.get().signature.draw.initials=null,t.signatureModel.initialsMode="font",t.signatureModel.initialsImageService=null):t.serviceError()}),i&&""!=i&&h.ImageHelper.urlToBase64(i).then(function(e){t.signatureModel.signatureImageBase64=e,h.ImageHelper.preload(e)},function(){t.serviceError()}),o&&""!=o&&h.ImageHelper.urlToBase64(o).then(function(e){t.signatureModel.initialsImageBase64=e,h.ImageHelper.preload(e)},function(){t.serviceError()}),e&&""!=e&&h.ImageHelper.urlToBase64(e).then(function(e){t.signatureModel.stampImageBase64=e,h.ImageHelper.preload(e)},function(){t.serviceError()})},_.prototype.serviceError=function(){var e;this.serviceFail=!0,null!=(e=this.signerElementSignature)&&e.serviceError(),null!=(e=this.signerElementInitials)&&e.serviceError(),null!=(e=this.signerElementStamp)&&e.serviceError()},_.prototype.loadFromStorage=function(){this.signatureModel?this.signatureModel.setData(d.Storage.get("sign.signature")):this.signatureModel=new r.SignatureModel(d.Storage.get("sign.signature")),this.drawPreview(),this.sendEventSignatureChanged()},_.prototype.loadFromService=function(e){void 0===e&&(e=!1);var t=a.UserModel.get(),n={signatureMode:r.DEFAULT_SIGNATURE_MODE,initialsMode:r.DEFAULT_SIGNATURE_MODE,font:{fontFamily:r.DEFAULT_FONT,color:r.DEFAULT_COLOR},signature:t.name,initials:t.name.charAt(0)};(n=t.signature?t.signature:n).mode&&(n.signatureMode=n.mode,n.initialsMode=n.mode,delete n.mode),this.signatureModel?this.signatureModel.setData(n):(this.signatureModel=new r.SignatureModel(n),this.signatureModel.setApi(this.api)),this.signer.name=t.name,this.signer.email=t.email,1==e&&(n.signatureMode=this.signerElementSignature.elementMode,n.initialsMode=this.signerElementInitials.elementMode),this.signatureMode=n.signatureMode,this.initialsMode=n.initialsMode,1==(e=e||this.applyAllowCostumize())&&(n.mode=this.signerElementSignature.elementMode,n.signatureMode=this.signerElementSignature.elementMode,n.initialsMode=this.signerElementInitials.elementMode),this.signatureModel.setData(n),this.setColor(this.signatureModel.color),this.applySignatureModelToElements(),this.drawPreview(),this.sendEventSignatureChanged(),0!=i(".tool").length&&((this.signatureModel.signatureImageService||this.signatureModel.signatureDrawService)&&this.uploadSignatureFromService(),(this.signatureModel.initialsImageService||this.signatureModel.initialsDrawService)&&this.uploadInitialsFromService(),this.signatureModel.stampImageService)&&this.uploadStampFromService()},_.prototype.uploadSignatureFromService=function(){var e;null!=(e=this.signerElementSignature)&&e.uploadImageFromService()},_.prototype.uploadInitialsFromService=function(){var e;null!=(e=this.signerElementInitials)&&e.uploadImageFromService()},_.prototype.uploadStampFromService=function(){var e;null!=(e=this.signerElementStamp)&&e.uploadImageFromService()},_.prototype.apply=function(e){var t,n;void 0===e&&(e=!1),this.signatureModel||(n={},(t=a.UserModel.get())&&t.signature&&(n=t.signature),this.signatureModel=new r.SignatureModel(n),this.signatureModel.setApi(this.api)),1==e&&this.signatureModel.setData(this.getData()),this.signer.name=this.signatureModel.signature,this.signer.initials=this.signatureModel.initials,i("#"+v+" .error").removeClass("error"),i("#"+v+" .shake").removeClass("shake"),this.saveToStorage(),this.sendEventSignatureChanged()},_.prototype.getSignature=function(){return this.signatureModel},_.prototype.getAllUploaders=function(){var e;return t(null==(e=this.signerElementSignature)?void 0:e.getAllUploaders(),null==(e=this.signerElementInitials)?void 0:e.getAllUploaders(),null==(e=this.signerElementStamp)?void 0:e.getAllUploaders())},_.prototype.getTab=function(e){return document.getElementById(e+"-tab")},_.prototype.applySignatureModelToElements=function(){this.initElements(),this.signerElementBasicData.applyModel(),this.signerElementBasicData.applyTextPreview(),this.signerElementInitials.applyModel(),this.signerElementSignature.applyModel(),this.signerElementStamp.applyModel(),this.applyPreviewColor()},_.prototype.applyAllowCostumize=function(){if(this.signatureModel&&this.signer&&this.signer.allowCostumize){switch(this.signer.allowCostumize){case"all":break;case"text":this.signatureModel.signatureMode=this.signatureMode="font",this.signatureModel.initialsMode=this.initialsMode="font",this.signerElementSignature.setOnlyMode("font"),this.signerElementInitials.setOnlyMode("font");break;case"image":this.signatureModel.signatureMode=this.signatureMode="image",this.signatureModel.initialsMode=this.initialsMode="image",this.signerElementSignature.setOnlyMode("image"),this.signerElementInitials.setOnlyMode("image");break;case"sign":this.signatureModel.signatureMode=this.signatureMode="draw",this.signatureModel.initialsMode=this.initialsMode="draw",this.signerElementSignature.setOnlyMode("draw"),this.signerElementInitials.setOnlyMode("draw")}if("all"!=this.signer.allowCostumize)return this.apply(!1),!0}return!1},_.prototype.getData=function(){var e=this.getNameAndInitials();return this.signerElementSignature&&(e=this.deepMerge(e,this.signerElementSignature.getData())),this.signerElementInitials&&(e=this.deepMerge(e,this.signerElementInitials.getData())),e=this.signerElementStamp?this.deepMerge(e,this.signerElementStamp.getData()):e},_.prototype.deepMerge=function(e,i){function r(e){return e&&"object"==typeof e}var o,a=this;return r(e)&&r(i)?(o=Object.assign({},e),Object.keys(i).forEach(function(e){var t=o[e],n=i[e];Array.isArray(t)&&Array.isArray(n)?o[e]=t.concat(n):r(t)&&r(n)?o[e]=a.deepMerge(t,n):o[e]=n}),o):i},_.prototype.saveToStorage=function(){d.Storage.set("sign.signature",this.getSignature())},_.prototype.sendEventSignatureChanged=function(){g.SignatureEventManager.dispatchEvent("signature:signer_identity_modal:signature_changed",{signatureModel:this.signatureModel})},_.prototype.applyPreviewColor=function(){this.signerElementSignature&&(this.signerElementSignature.setColor(this.signatureModel.color),this.signerElementInitials)&&this.signerElementInitials.setColor(this.signatureModel.color)},_.prototype.saveSignatureSettingsToService=function(){var n=this;return new Promise(function(e,t){!a.UserModel.isUser()||n.serviceFail?e():n.signatureModel.saveConfig().then(function(){e()},function(e){t(e)})})},_.prototype.getElement=function(e){switch(this.initElements(),e){case"signature":return this.signerElementSignature;case"initials":return this.signerElementInitials;case"stamp":return this.signerElementStamp}return null},_.prototype.validate=function(e){return e?!(e=this.getElement(e))||e.validate():!(!this.signerElementBasicData.validate()||(this.signerElementSignature.validate()?this.signerElementInitials.validate()?this.signerElementStamp.validate()?(this.signerElementSignature.saveCurrentMode(),this.signerElementInitials.saveCurrentMode(),0):(this.getTab("stamp").click(),1):(this.getTab("initials").click(),1):(this.getTab("signature").click(),1)))},_.prototype.uploadAllImages=function(){return this.signerElementSignature.uploadSvgIfNeeded(),this.signerElementInitials.uploadSvgIfNeeded(),this.signerElementStamp.uploadImageIfNeeded(),this.signerElementSignature.uploadImageIfNeeded(),this.signerElementInitials.uploadImageIfNeeded(),this.waitForAllUploadsCompleted()},_.prototype._removeErrorTooltips=function(){n.Tooltip.disable("#"+y),n.Tooltip.disable("#uploadSignature"),n.Tooltip.disable("#uploadInitials")},_.prototype.waitForAllUploadsCompleted=function(){var n=this,i=null;return new Promise(function(e,t){i=window.setInterval(function(){1==n.checkUploadIsCompleted()?(window.clearInterval(i),e()):1==n.checkApiFailed()&&t()},500)})},_.prototype.checkApiFailed=function(){return this.signerElementSignature.apiFailed()&&this.signerElementInitials.apiFailed()&&this.signerElementStamp.apiFailed()},_.prototype.checkUploadIsCompleted=function(){return this.signerElementSignature.checkUploadIsCompleted()&&this.signerElementInitials.checkUploadIsCompleted()&&this.signerElementStamp.checkUploadIsCompleted()},_.prototype.getNameAndInitials=function(){var e=i("#signName").val().toString(),t=i("#signInitials").val().toString();return""==e&&(e=this.signer.name,i("#signName").val(e)),""==t&&(t=this.signer.name.split(" ").map(function(e){return e[0]}).join(""),i("#signInitials").val(t)),{signature:e,initials:t}},Object.defineProperty(_.prototype,"previewSignatureAddEl",{get:function(){return document.getElementById("addElementSignature")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"previewInitialsAddEl",{get:function(){return document.getElementById("addElementInitials")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"previewStampAddEl",{get:function(){return document.getElementById("addElementStamp")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isModalOpened",{get:function(){return this.domRootEl.classList.contains("show")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"domRootEl",{get:function(){return document.getElementById(v)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"waitEl",{get:function(){return this.domRootEl.querySelector(".wait")},enumerable:!1,configurable:!0}),_.prototype.drawPreview=function(){var e,t,n;this.signatureModel&&!this.previewDisabled&&(e=this.previewSignatureAddEl,t=this.previewInitialsAddEl,n=this.previewStampAddEl,this.apply(!1),e&&(e.classList.add("preview__active"),this.drawSignaturePreview()),t&&(t.classList.add("preview__active"),this.drawInitialsPreview()),n)&&(n.classList.add("preview__active"),this.drawStampPreview())},_.prototype.drawSignaturePreview=function(){for(var e=this.signatureModel.getSignaturePreview(),t=this.previewSignatureAddEl.querySelector(".signature__preview--signature");t.firstChild;)t.removeChild(t.firstChild);t.append(e.cloneNode(!0))},_.prototype.drawInitialsPreview=function(){for(var e=this.signatureModel.getInitialsPreview(),t=this.previewInitialsAddEl.querySelector(".signature__preview--initials");t.firstChild;)t.removeChild(t.firstChild);t.append(e)},_.prototype.drawStampPreview=function(){var e=this.signatureModel.getStampPreview();if(e.src&&""!=e.src){for(var t=this.previewStampAddEl.querySelector(".signature__preview--stamp");t.firstChild;)t.removeChild(t.firstChild);t.append(e)}else this.previewStampAddEl.classList.remove("preview__active")},_.prototype.sendEventSignatureCancel=function(){var e=new CustomEvent("signatureCancel",{detail:{signatureModel:this.signatureModel}});window.dispatchEvent(e),this.eventModel.dispatchEvent(new f.IloveEvent("cancel")),this.eventModel.dispatchEvent(new f.IloveEvent("close")),this.eventModel=null},_.prototype.sendEventSignatureConfirmed=function(){g.SignatureEventManager.dispatchEvent("signature:signer_identity_modal:confirm",{signatureModel:this.signatureModel}),this.eventModel.dispatchEvent(new f.IloveEvent("confirm")),this.eventModel.dispatchEvent(new f.IloveEvent("close")),this.eventModel=null},_.prototype.setServiceOnly=function(){this.serviceOnly=!0,this.initElements(),this.signerElementSignature.setServiceOnly(),this.signerElementInitials.setServiceOnly(),this.signerElementStamp.setServiceOnly()},_.prototype.cleanErrors=function(){this.signerElementInitials.cleanErrors(),this.signerElementSignature.cleanErrors()},_.prototype.resetElements=function(){this.signerElementBasicData.reset(),this.signerElementSignature.reset(),this.signerElementInitials.reset(),this.signerElementStamp.reset()},_.prototype.patchInitials=function(){var e=a.UserModel.get(),t=null==(t=null==(t=e.signature)?void 0:t.draw)?void 0:t.initials,n=null==(n=null==(n=e.signature)?void 0:n.image)?void 0:n.initials;t&&""!=t&&(e.signature.draw.initials=e.signature.draw.initials.replace("signature.svg","initials.svg"),e.signature.draw.initials=e.signature.draw.initials.replace("/initials/","/signature/")),n&&""!=n&&(e.signature.image.initials=e.signature.image.initials.replace("signature.svg","initials.svg"),e.signature.image.initials=e.signature.image.initials.replace("/initials/","/signature/"))},b.SignerIdentityManager=_}.call(this,w(1))},function(e,r,o){"use strict";!function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.AuthElement=void 0;var t=o(15),n=o(196);function i(e){Object.assign(this,e),this.init()}i.prototype.init=function(){this.listenEventUserAuth(),this.initLoginElements(),this.setUserElement()},i.prototype.initLoginElements=function(){this.elementAuth&&null===t.UserModel.get()&&(e(".loginAuth").on("click",function(){e(".modal:visible").removeAttr("tabindex"),n.SignatureDialogs.auth("signature").show()}),this.elementAuth.on("click",function(){!1===t.UserModel.isUser()&&(e(".modal:visible").removeAttr("tabindex"),n.SignatureDialogs.auth("signature").show())}))},i.prototype.listenEventUserAuth=function(){var t=this;window.addEventListener("userAuth",function(e){t.setUserElement()})},i.prototype.setUserElement=function(){null!=t.UserModel.get()&&(e("#loginText").hide(),e(".loginAuth").remove(),this.elementAvatar)&&this.elementAvatar.attr("src",t.UserModel.get().avatar)},r.AuthElement=i}.call(this,o(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(46)),l=a(n(264)),a=(r=s.ContextBase,o(c,r),c.prototype.getInitialState=function(){if("CannotSave"!==this.requestedAction)throw"Requested Action '"+this.requestedAction+"' is not handled";return new l.default},c);function c(e){var t=r.call(this,e)||this;return t.contentName="SignatureTemplates",t.requestedAction=e.requestedAction,t}t.default=a},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),n(17)),n=(r=n.StateBase,o(a,r),a.prototype.onDomReady=function(){this.changeScreen(this.INITIAL_SCREEN),this.clearLoadingScreen()},a);function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="CannotSaveState",e.LAYOUT_TEMPLATE_NAME="signature-templates/cannot-save",e.INITIAL_SCREEN="default",e}t.default=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementSignature=void 0,n(210)),s=n(212),l=n(188),n=n(189),n=(r=n.SignerElementBase,o(c,r),c.prototype.init=function(){r.prototype.init.call(this),this.drawElement=new a.SignerElementDraw({signatureModel:this.signatureModel,elementType:this.elementType,api:this.api}),this.textElement=new s.SignerElementText({signatureModel:this.signatureModel,elementType:this.elementType}),this.fileElement=new l.SignerElementFile({signatureModel:this.signatureModel,elementType:this.elementType,api:this.api})},c.prototype.initActiveSubtab=function(e){e=(e=void 0===e?null:e)||this.currentActiveMode;"draw"==e&&this.drawElement.showCanvas(),"font"==e&&this.textElement.init(),"image"==e&&this.fileElement.init()},c.prototype.setColor=function(e){this.drawElement.setColor(e),this.textElement.setColor(e)},c.prototype.getAllUploaders=function(){return[this.drawElement.uploader,this.fileElement.uploader].filter(function(e){return void 0!==e})},c.prototype.uploadSvgIfNeeded=function(){return this.drawElement&&this.drawElement.uploadSvgIfNeeded()},c.prototype.uploadImageIfNeeded=function(){return!!this.fileElement.haveFilesToUpload&&(this.fileElement.uploader.reUploadAllFiles(),!0)},c.prototype.getDrawData=function(){},c.prototype.getData=function(){var e={signatureMode:this.elementModeCurrent,draw:{signatureBase64:null!=(e=null==(e=this.drawElement)?void 0:e.getEncodedBase64())?e:null,signatureData:null!=(e=null==(e=this.drawElement)?void 0:e.getPadData())?e:null,signature:null!=(e=null==(e=this.drawElement)?void 0:e.getServiceFile())?e:null,signatureApi:null!=(e=null==(e=this.drawElement)?void 0:e.getApiFile())?e:null,color:null!=(e=null==(e=this.drawElement)?void 0:e.getColor())?e:null},font:void 0,image:{signature:null!=(e=null==(e=this.fileElement)?void 0:e.getServiceFile())?e:null,signatureApi:null!=(e=null==(e=this.fileElement)?void 0:e.getApiFile())?e:null,signatureBase64:null!=(e=null==(e=this.fileElement)?void 0:e.fileBase64)?e:null}};return this.textElement&&(e.font={color:this.textElement.getColor(),fontFamily:this.textElement.getFont()}),e},c.prototype.validate=function(){if(this.disabled)return!0;var e=this.isTabModeEnabled("font");switch(this.elementModeCurrent){case"draw":return!this.drawElement.isValid()&&e?(this.activateSubtab("font"),this.elementModeCurrent="font",this.validate()):!this.isTabModeEnabled(this.elementModeCurrent)||this.drawElement.validate();case"image":return!this.fileElement.isValid()&&e?(this.activateSubtab("font"),this.elementModeCurrent="font",this.validate()):!this.isTabModeEnabled(this.elementModeCurrent)||this.fileElement.validate();case"font":return this.textElement.validate()}},c.prototype.uploadImageFromService=function(){this.drawElement.uploadFromService(),this.fileElement.uploadFromService()},c.prototype.checkUploadIsCompleted=function(){return this.drawElement.checkUploadIsCompleted()&&this.fileElement.checkUploadIsCompleted()},c.prototype.apiFailed=function(){return 1==this.drawElement.apiFail&&1==this.fileElement.apiFail},c.prototype.serviceError=function(){this.drawElement.serviceFail=!0,this.fileElement.serviceFail=!0,this.getAllUploaders().forEach(function(e){null!=e&&e.setApiMode()})},c.prototype.setServiceOnly=function(){this.fileElement.serviceOnly=!0,this.drawElement.serviceOnly=!0},c.prototype.cleanErrors=function(){this.drawElement.cleanErrors(),this.fileElement.cleanErrors(),this.textElement.cleanErrors()},c.prototype.applyModel=function(){this.elementMode=this.signatureModel[this.elementType+"Mode"]||"font",this.textElement.applyModel(),this.drawElement.applyModel(),this.fileElement.applyModel()},c.prototype.reset=function(){this.elementModeCurrent=this.elementMode,this.drawElement.reset(),this.textElement.reset(),this.fileElement.reset()},c.prototype.saveCurrentMode=function(){this.elementMode=this.elementModeCurrent},c);function c(e){var t,e=r.call(this,e)||this;return e.elementType="signature",e.elementMode=null!=(t=e.elementMode)?t:"font",e.elementModeCurrent=null!=(t=e.elementModeCurrent)?t:"font",e.init(),e}t.SignerElementSignature=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignaturePlupload=void 0,n(243)),u=n(41),d=n(15),p=l(n(16)),h=n(13),f=n(18),m=n(76),l=(r=c.ServicePlupload,o(g,r),g.prototype.getUrl=function(){return"api"==this.target?r.prototype.getUrl.call(this):this.getServiceUrl()},g.prototype.getServiceUrl=function(){return u.Settings.get("service")+"/signature-images/upload"},g.prototype.getUploadParams=function(){return"api"==this.target?{task:this.taskId,v:this.appVersion}:{mode:this.signatureMode,type:this.signatureType}},g.prototype.setApiMode=function(){this.target="api",this.token=this.tokenApi,this.uploader&&(this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start())},g.prototype.setServiceMode=function(){var e=d.UserModel.get();if(!e||!e.token)return!1;this.tokenService=e.token,this.target="service",this.token=this.tokenService,this.uploader&&(this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start())},g.prototype.setServiceOnlyMode=function(){var e=d.UserModel.get();if(!e||!e.token)return!1;this.target="serviceOnly",this.token=e.token,this.uploader&&(this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start())},g.prototype.fileUploaded=function(e,t){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fileUploaded(e,t):t.service_filename?this.uploadToApi(t.service_filename,e):(p.configureScope(function(e){e.setExtra("error",t)}),p.captureMessage("[sign] no service_filename on response",h.Severity.Error),this.fatalError("no server_filename present"))},g.prototype.checkLimits=function(e,t){if(1<e.length)for(var n=0;n<e.length;n++){var i=e[n];0<n&&this.files.removeFile(i.id,!0)}return[e[0]]},g.prototype.changeDNSServer=function(e){return"service"==this.target?(this.setApiMode(),!0):r.prototype.changeDNSServer.call(this,e)},g.prototype.uploadToApi=function(i,r){var o=this;return void 0===r&&(r=null),new Promise(function(t,n){null==r&&(r=f.Tools.randomId(),o.files.addFile(new m.File({id:r,name:i,filename:i,url:i}))),o.optionsManager.api.uploadCloudFile(o.taskId,i).then(function(e){e.service_filename=i,o.optionsManager.fileUploaded(r,e),t(e)},function(e){n()})})},g.prototype.error=function(e){e.id=this.id,e.retry=this.retryCount,e.dnsFallback=this.dnsFallback,e.target=this.target,"api"==this.target||"serviceOnly"==this.target?this.optionsManager.invalidUpload(e):(this.setApiMode(),this.reUploadAllFiles()),r.prototype.error.call(this,e)},g);function g(e){e=r.call(this,e)||this;return e.target=e.target||"api",e.chunkSize=!1,e.RETRY_NUM=0,e.retryCount=0,e}t.SignaturePlupload=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SvgHelper=void 0;var i="data:image/svg+xml;base64,";function r(){}r.toBase64=function(e){return"string"!=typeof e&&(e=(new XMLSerializer).serializeToString(e)),i+btoa(e)},r.toBlob=function(e){for(var t=e.length,n=new Uint8Array(t);t--;)n[t]=e.charCodeAt(t);return new Blob([n])},r.fromBase64=function(e){return atob(e.replace(i,""))},r.trim=function(e){var t=!1,n=("string"==typeof e&&(e=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement,t=!0),document.body.appendChild(e)),i=e.getBBox();return e.setAttribute("viewBox",i.x-10+" "+(i.y-10)+" "+(i.width+20)+" "+(i.height+20)),e.setAttribute("width",i.width+20+"px"),e.setAttribute("height",i.height+20+"px"),document.body.removeChild(n),e=1==t?(new XMLSerializer).serializeToString(e):e},t.SvgHelper=r},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(46)),l=a(n(269)),a=(r=s.ContextBase,o(c,r),c.prototype.getInitialState=function(){return new l.default(this.params)},c);function c(e){var t=r.call(this,e)||this;return t.contentName="QrPad",t.params=e,t}t.default=a},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),n(7)),n=n(17),n=(r=n.StateBase,o(s,r),s.prototype.onDomReady=function(){this.displayQr(),this.clearLoadingScreen()},s.prototype.displayQr=function(){var e=this,t=document.createElement("script");t.type="text/javascript",t.src="/js/qrcode.min.js",t.addEventListener("load",function(){e.createQr(),e.beginPolling()}),document.head.append(t)},s);function s(e){var t=r.call(this)||this;return t.createQr=function(){var e=document.getElementById("qrcode");new window.QRCode(e,{text:t.params.text,width:250,height:250,colorDark:"#383E45",colorLight:"#ffffff",correctLevel:window.QRCode.CorrectLevel.M}),e.dataset.title=e.title,e.setAttribute("data-title",e.title),e.removeAttribute("title")},t.beginPolling=function(){var e=t.params.polling||function(){return Promise.resolve(!0)};setTimeout(function(){e().then(function(e){e?t.dispatchEvent(new a.IloveEvent("end")):t.beginPolling()})},2e3)},t.name="QrState",t.LAYOUT_TEMPLATE_NAME="qr-pad",t.params=e,t}t.default=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementInitials=void 0,n(210)),s=n(212),l=n(188),n=n(189),n=(r=n.SignerElementBase,o(c,r),c.prototype.init=function(){r.prototype.init.call(this),this.drawElement=new a.SignerElementDraw({signatureModel:this.signatureModel,elementType:this.elementType,api:this.api}),this.textElement=new s.SignerElementText({signatureModel:this.signatureModel,elementType:this.elementType}),this.fileElement=new l.SignerElementFile({signatureModel:this.signatureModel,elementType:this.elementType,api:this.api})},c.prototype.initActiveSubtab=function(e){e=(e=void 0===e?null:e)||this.currentActiveMode;"draw"==e&&this.drawElement.showCanvas(),"font"==e&&this.textElement.init(),"image"==e&&this.fileElement.init()},c.prototype.setColor=function(e){this.drawElement.setColor(e),this.textElement.setColor(e)},c.prototype.getAllUploaders=function(){return[this.drawElement.uploader,this.fileElement.uploader].filter(function(e){return void 0!==e})},c.prototype.uploadSvgIfNeeded=function(){return this.drawElement&&this.drawElement.uploadSvgIfNeeded()},c.prototype.uploadImageIfNeeded=function(){return!!this.fileElement.haveFilesToUpload&&(this.fileElement.uploader.reUploadAllFiles(),!0)},c.prototype.getDrawData=function(){},c.prototype.getData=function(){var e={initialsMode:this.elementModeCurrent,draw:{initialsBase64:null!=(e=null==(e=this.drawElement)?void 0:e.getEncodedBase64())?e:null,initialsData:null!=(e=null==(e=this.drawElement)?void 0:e.getPadData())?e:null,initials:null!=(e=null==(e=this.drawElement)?void 0:e.getServiceFile())?e:null,initialsApi:null!=(e=null==(e=this.drawElement)?void 0:e.getApiFile())?e:null,color:null!=(e=null==(e=this.drawElement)?void 0:e.getColor())?e:null},font:void 0,image:{initials:null!=(e=this.fileElement.getServiceFile())?e:null,initialsApi:null!=(e=this.fileElement.getApiFile())?e:null,initialsBase64:null!=(e=this.fileElement.fileBase64)?e:null},disabled:!!this.disabled};return this.textElement&&(e.font={color:this.textElement.getColor(),fontFamily:this.textElement.getFont()}),e},c.prototype.validate=function(){if(this.disabled)return!0;var e=this.isTabModeEnabled("font");switch(this.elementModeCurrent){case"draw":return!this.drawElement.isValid()&&e?(this.activateSubtab("font"),this.elementModeCurrent="font",this.validate()):!this.isTabModeEnabled(this.elementModeCurrent)||this.drawElement.validate();case"image":return!this.fileElement.isValid()&&e?(this.activateSubtab("font"),this.elementModeCurrent="font",this.validate()):!this.isTabModeEnabled(this.elementModeCurrent)||this.fileElement.validate();case"font":return this.textElement.validate()}},c.prototype.uploadImageFromService=function(){this.drawElement.uploadFromService(),this.fileElement.uploadFromService()},c.prototype.checkUploadIsCompleted=function(){return this.drawElement.checkUploadIsCompleted()&&this.fileElement.checkUploadIsCompleted()},c.prototype.apiFailed=function(){return 1==this.drawElement.apiFail&&1==this.fileElement.apiFail},c.prototype.serviceError=function(){this.drawElement.serviceFail=!0,this.fileElement.serviceFail=!0,this.getAllUploaders().forEach(function(e){null!=e&&e.setApiMode()})},c.prototype.setServiceOnly=function(){this.fileElement.serviceOnly=!0,this.drawElement.serviceOnly=!0},c.prototype.cleanErrors=function(){this.drawElement.cleanErrors(),this.fileElement.cleanErrors(),this.textElement.cleanErrors()},c.prototype.applyModel=function(){this.elementMode=this.signatureModel[this.elementType+"Mode"]||"font",this.textElement.applyModel(),this.drawElement.applyModel(),this.fileElement.applyModel()},c.prototype.reset=function(){this.elementModeCurrent=this.elementMode,this.drawElement.reset(),this.textElement.reset(),this.fileElement.reset()},c.prototype.saveCurrentMode=function(){this.elementMode=this.elementModeCurrent},c);function c(e){var t,e=r.call(this,e)||this;return e.elementType="initials",e.elementMode=null!=(t=e.elementMode)?t:"font",e.elementModeCurrent=null!=(t=e.elementModeCurrent)?t:"font",e.init(),e}t.SignerElementInitials=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementStamp=void 0,n(188)),n=n(189),n=(r=n.SignerElementBase,o(s,r),s.prototype.init=function(){r.prototype.init.call(this),this.fileElement=new a.SignerElementFile({signatureModel:this.signatureModel,elementType:this.elementType,api:this.api}),this.elementMode="image",this.elementModeCurrent="image"},s.prototype.initActiveSubtab=function(e){void 0===e&&(e=null),this.fileElement.init()},s.prototype.getAllUploaders=function(){return[this.fileElement.uploader].filter(function(e){return void 0!==e})},s.prototype.uploadSvgIfNeeded=function(){return!1},s.prototype.uploadImageIfNeeded=function(){return!!this.fileElement.haveFilesToUpload&&(this.fileElement.uploader.reUploadAllFiles(),!0)},s.prototype.getData=function(){var e={image:{stampApi:null!=(e=null==(e=this.fileElement)?void 0:e.getApiFile())?e:null,stamp:null!=(e=null==(e=this.fileElement)?void 0:e.getServiceFile())?e:null,stampBase64:null!=(e=null==(e=this.fileElement)?void 0:e.fileBase64)?e:null}};return e.image.stampApi||e.image.stamp||(e.image.stampBase64=null),e},s.prototype.validate=function(){return!this.checkIsRequired()&&!this.fileElement.haveFilesToUpload||!!this.fileElement.validate()&&(this.fileElement.cleanErrors(),!0)},s.prototype.uploadImageFromService=function(){this.fileElement.uploadFromService()},s.prototype.checkUploadIsCompleted=function(){return this.fileElement.checkUploadIsCompleted()},s.prototype.apiFailed=function(){return 1==this.fileElement.apiFail},s.prototype.serviceError=function(){this.fileElement.serviceFail=!0,this.getAllUploaders().forEach(function(e){null!=e&&e.setApiMode()})},s.prototype.setServiceOnly=function(){this.fileElement.serviceOnly=!0},s.prototype.applyModel=function(){this.fileElement.applyModel()},s.prototype.reset=function(){this.applyModel()},s);function s(e){e=r.call(this,e)||this;return e.elementType="stamp",e.elementMode="image",e.elementModeCurrent="image",e.init(),e}t.SignerElementStamp=n},function(e,t,n){"use strict";!function(n){function e(e){this.inputNameId="signName",this.inputInitialsId="signInitials",Object.assign(this,e),this.initActions()}Object.defineProperty(t,"__esModule",{value:!0}),t.SignerElementBasicData=void 0,Object.defineProperty(e.prototype,"nameEl",{get:function(){return document.getElementById(this.inputNameId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialsEl",{get:function(){return document.getElementById(this.inputInitialsId)},enumerable:!1,configurable:!0}),e.prototype.initActions=function(){var e=this;this.nameEl.addEventListener("keyup",function(){e.applyTextPreview()}),this.initialsEl.addEventListener("keyup",function(){e.initialsCustom=!0,e.applyTextPreview()}),this.applyTextPreview()},e.prototype.modelChanged=function(){this.nameEl.value=this.signatureModel.signature,this.initialsEl.value=this.signatureModel.initials,this.applyTextPreview()},e.prototype.applyTextPreview=function(){var t,e,n,i=this.nameEl.value;""!=i&&((""==(t=this.initialsEl.value)&&""!==i||""!==i&&!0!==this.initialsCustom)&&(t=this.getInitialsFromName(i),this.initialsEl.value=t),e=document.querySelectorAll("#signatureFont .signature__font__signature"),n=document.querySelectorAll("#initialsFont .signature__font__signature"),e.forEach(function(e){e.innerHTML=i}),n.forEach(function(e){e.innerHTML=t}))},e.prototype.getInitialsFromName=function(e){return e.split(" ").map(function(e){return e[0]}).join("").toUpperCase()},e.prototype.validate=function(){var e=this.nameEl,t=this.initialsEl;if(""==e.value.toString().trim())return e.classList.add("error"),e.classList.remove("shake"),n(".dialog__body").animate({scrollTop:e.getBoundingClientRect().top,duration:200},function(){e.classList.add("shake")}),!1;if(""==t.value.toString().trim()||!0!==this.initialsCustom){if(""==e.toString().trim())return t.classList.add("error"),t.classList.remove("shake"),n(".dialog__body").animate({scrollTop:t.getBoundingClientRect().top,duration:200},function(){t.classList.add("shake")}),!1;this.initialsCustom=!1,t.value=this.getInitialsFromName(e.value.toString())}return e.classList.remove("error","shake"),t.classList.remove("error","shake"),!0},e.prototype.applyModel=function(){var e=this.nameEl,t=this.initialsEl;e.value=this.signatureModel.signature,t.value=this.signatureModel.initials,e.dispatchEvent(new Event("change")),t.dispatchEvent(new Event("change"))},e.prototype.reset=function(){this.applyModel(),this.applyTextPreview()},t.SignerElementBasicData=e}.call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventModel=void 0;var i=n(25);function r(){this.eventEmitter=new i.ILoveEventEmitter}r.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},r.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},t.EventModel=r},,function(e,t,n){var i;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var t="transitionend";function e(e){var t=this,n=!1;return r(this).one(a.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||a.triggerTransitionEnd(t)},e),this}var a={TRANSITION_END:"bsTransitionEnd",getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");return(t=t&&"#"!==t?t:(e=e.getAttribute("href"))&&"#"!==e?e.trim():"")&&document.querySelector(t)?t:null},getTransitionDurationFromElement:function(e){var t,n,i;return e&&(t=r(e).css("transition-duration"),e=r(e).css("transition-delay"),n=parseFloat(t),i=parseFloat(e),n||i)?(t=t.split(",")[0],e=e.split(",")[0],1e3*(parseFloat(t)+parseFloat(e))):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){r(e).trigger(t)},supportsTransitionEnd:function(){return Boolean(t)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],o=t[i],o=o&&a.isElement(o)?"element":{}.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new Error(e.toUpperCase()+': Option "'+i+'" provided type "'+o+'" but expected type "'+r+'".')}},findShadowRoot:function(e){var t;return document.documentElement.attachShadow?"function"==typeof e.getRootNode?(t=e.getRootNode())instanceof ShadowRoot?t:null:e instanceof ShadowRoot?e:e.parentNode?a.findShadowRoot(e.parentNode):null:null}};return r.fn.emulateTransitionEnd=e,r.event.special[a.TRANSITION_END]={bindType:t,delegateType:t,handle:function(e){if(r(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}},a},"object"===r(t)&&void 0!==e?e.exports=i(n(1)):(n=[n(1)],void 0!==(t="function"==typeof(i=i)?i.apply(t,n):i)&&(e.exports=t))},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementHelperInstance=void 0;var i=n(285),r=n(286),o=n(287),a=n(288),s=n(289),l=n(290),c=n(291);function u(){}u.createElement=function(e){var t=null;switch(e.replace("Element","").replace("-element","")){case"signature":t=new s.ElementSignature;break;case"initials":t=new r.ElementInitials;break;case"name":t=new a.ElementName;break;case"date":t=new i.ElementDate;break;case"text":t=new c.ElementText;break;case"input":t=new o.ElementInput;break;case"stamp":t=new l.ElementStamp}if(null==t)throw Error("Element type not exists: "+e);return t},u.createElementFrom=function(e){var t=u.createElement(e.type);return t.copyProperties(e),t},t.ElementHelperInstance=u},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.ElementDate=void 0,n(165)),s=n(75),n=(r=a.ElementBase,o(l,r),l.prototype.instantiateNewSelf=function(){return new l},l.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("dateElementTemplate",e,t);return this.addLinkedItems(e)},l.prototype.applySingature=function(e){void 0===e&&(e={});var t=new Date,n="<span>"+this.content.replace("d",("0"+t.getDate()).slice(-2)).replace("m",("0"+(t.getMonth()+1)).slice(-2)).replace("Y",t.getFullYear().toString())+"</span>";document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__content__applied').forEach(function(e){e.innerHTML=n}),r.prototype.applySingature.call(this,e)},l.prototype.initRequestActions=function(e){var n=this;r.prototype.initRequestActions.call(this,e);["click","touchstart"].forEach(function(t){document.querySelectorAll("#"+e+" .sign__element__edit").forEach(function(e){e.addEventListener(t,function(e){n.sendEventOpenDateFormatModal()})})})},l.prototype.initSelfsignedActions=function(e){var n=this;["click","touchstart"].forEach(function(t){document.querySelectorAll("#"+e+" .sign__element__edit").forEach(function(e){e.addEventListener(t,function(e){n.sendEventOpenDateFormatModal()})})}),document.querySelectorAll("#"+e+" .sign__element__content__applied").forEach(function(e){e.addEventListener("dblclick",function(e){n.sendEventOpenDateFormatModal()})})},l.prototype.getData=function(e,t){e=r.prototype.getData.call(this,e=void 0===e?null:e,t=void 0===t?null:t);return 0!=e.length&&(e[0].content=this.content),e},l.prototype.sendEventOpenDateFormatModal=function(){s.SignatureEventManager.dispatchEvent("signature:select_date_format_modal:open_modal",{elementId:this.id,format:this.content})},l.prototype.listenEventDateFormatChanged=function(){var t=this;s.SignatureEventManager.addEventListener("signature:select_date_format_modal:confirm",function(e){t.content=e.detail.format,t.applySingature()})},l);function l(){var e=r.call(this)||this;return e.type="date-element",e.autoApply=!0,window.ilovepdfConfig.dateFormat||(window.ilovepdfConfig.dateFormat="Y/m/d"),e.content=window.ilovepdfConfig.dateFormat,e.listenEventDateFormatChanged(),e}t.ElementDate=n},function(e,i,t){"use strict";var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.ElementInitials=i.MAX_ELEMENT_INITALS_HEIGHT=i.MIN_ELEMENT_INITIALS_HEIGHT=i.INITIALS_HEIGHT=void 0,t(165)),u=l(t(16)),d=t(13),l=(i.INITIALS_HEIGHT=36,i.MIN_ELEMENT_INITIALS_HEIGHT=25,i.MAX_ELEMENT_INITALS_HEIGHT=150,n=c.ElementBase,o(p,n),p.prototype.instantiateNewSelf=function(){return new p},p.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("initialsElementTemplate",e,t);return e.classList.add("tooltip"),this.addLinkedItems(e)},p.prototype.applySingature=function(e){var t;void 0===e&&(e={}),this.signatureModel&&(t=this.signatureModel.getInitialsPreview(),document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__content__applied').forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.append(t.cloneNode(!0))}),this.setElementMinimumSizeForText(),n.prototype.applySingature.call(this,e))},p.prototype.applyResize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1,u.configureScope(function(e){e.setExtra("window.width",window.innerWidth),e.setExtra("window.height",window.innerHeight)}),u.captureMessage("Sign element - Ratio NaN error",d.Severity.Info)),this.ratio=this.ratio*t,this.width=this.width*t,this.height=this.height*t;var n=i.INITIALS_HEIGHT/c.ELEMENT_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,25),this.applySize(e,t)},p.prototype.zoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom=this.zoom*t,this.width=this.width*t,this.height=this.height*t;var n=i.INITIALS_HEIGHT/c.ELEMENT_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,25),this.applyZoomSize(e,t)},p.prototype.setWidthFromHeight=function(){this.width=this.height*c.ELEMENT_BASE_WIDTH/i.INITIALS_HEIGHT},p.prototype.getMinSize=function(e){return{width:i.MIN_ELEMENT_INITIALS_HEIGHT*c.ELEMENT_BASE_WIDTH/i.INITIALS_HEIGHT*e,height:i.MIN_ELEMENT_INITIALS_HEIGHT*e}},p.prototype.getMaxSize=function(e){return{width:i.MAX_ELEMENT_INITALS_HEIGHT*c.ELEMENT_BASE_WIDTH/i.INITIALS_HEIGHT*e,height:i.MAX_ELEMENT_INITALS_HEIGHT*e}},p);function p(){var e=n.call(this)||this;return e.type="initials-element",e.height=i.INITIALS_HEIGHT,e}i.ElementInitials=l},function(e,l,c){"use strict";!function(i){var r,n,e=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),t=(Object.defineProperty(l,"__esModule",{value:!0}),l.ElementInput=void 0,c(165)),o=c(37),a=c(81),t=(n=t.ElementBase,e(s,n),s.prototype.instantiateNewSelf=function(){return new s},s.prototype.initSignActions=function(e){var t,n=this,e=document.getElementById(e);e&&((t=e.querySelector(".sign__element__label"))&&(t.innerHTML=this.label),e.classList.add("tooltip"),e.setAttribute("data-title",this.description),o.Tooltip.init(i(e)),e.addEventListener("click",function(){n.editContent().then(function(){n.applySingature()},function(){})}))},s.prototype.initRequestActions=function(e){var t=this,e=(n.prototype.initRequestActions.call(this,e),document.getElementById(e));e&&null!=(e=e.querySelector(".sign__element__edit"))&&e.addEventListener("click",function(){t.inputEditModal.showModal(t)})},s.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("inputElementTemplate",e,t);return this.label&&(e.querySelector(".sign__element__label").innerHTML=this.label),this.addLinkedItems(e)},s.prototype.setLabel=function(t){this.label=t,document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__label').forEach(function(e){e.innerHTML=t})},s.prototype.setDescription=function(e){this.description=a.TextHelper.stripTags(e)},s.prototype.editContent=function(){var n=this;return this.showInputModal(),new Promise(function(t,e){n.signerInputModal||t(),n.signerInputModal.waitForModalFinish().then(function(e){n.content=e,t()}).catch(function(){e()})})},s.prototype.showInputModal=function(){var e;null!=(e=this.signerInputModal)&&e.showModal(this.label,this.description,this.content)},s.prototype.applySingature=function(e){n.prototype.applySingature.call(this,e=void 0===e?{}:e),i('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.content)},s.prototype.getData=function(e,t){e=n.prototype.getData.call(this,e=void 0===e?null:e,t=void 0===t?null:t);return 0!=e.length&&(e[0].info=JSON.stringify({label:this.label,description:this.description}),this.content)&&(e[0].content=this.content),e},s.prototype.copyProperties=function(e){n.prototype.copyProperties.call(this,e),this.label=e.label,this.content=e.content,this.inputEditModal=e.inputEditModal,this.description=e.description},s.prototype.applyZoomApplied=function(e,t){!0!==isNaN(t)&&0!=t||(t=1);var n=this.getElementTotalHeightByRatio(t)+"px";e.forEach(function(e){e.style.width="auto",e.style.height=n})},s.prototype.applyZoomAppliedContentName=function(e,t){!0!==isNaN(t)&&0!=t||(t=1);var n=this.height+"px",i=this.fontSize+"px",r=this.height+"px";e.forEach(function(e){e=e.querySelector(" .sign__element__name");e&&(e.style.height=n,e.style.width="auto",e.style.fontSize=i,e.style.lineHeight=r)})},s.prototype.applySizeAppliedContent=function(e,t){void 0===t&&(t=1);t={height:this.height+"px",width:this.width+"px","font-size":this.fontSize+"px","line-height":this.height+"px"};e.find(" .sign__element__content__applied").css(t),e.find(" .sign__element__content__name").css(t),e.find(" .sign__element__name").css({height:this.height+"px",width:"auto","font-size":this.fontSize+"px","line-height":this.height+"px"})},s);function s(){var e=n.call(this)||this;return e.type="input-element",e.autoApply=!1,e}l.ElementInput=t}.call(this,c(1))},function(e,a,s){"use strict";!function(t){var i,n,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(a,"__esModule",{value:!0}),a.ElementName=void 0,s(165)),r=(n=r.ElementBase,e(o,n),o.prototype.instantiateNewSelf=function(){return new o},o.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("nameElementTemplate",e,t);return e.classList.add("tooltip"),this.addLinkedItems(e)},o.prototype.applySingature=function(e){void 0===e&&(e={}),this.signatureModel&&(t('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.signatureModel.getNamePreview()),n.prototype.applySingature.call(this,e))},o);function o(){var e=n.call(this)||this;return e.type="name-element",e.autoApply=!0,e}a.ElementName=r}.call(this,s(1))},function(e,o,n){"use strict";!function(s){var i,l,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(o,"__esModule",{value:!0}),o.ElementSignature=o.MAX_ELEMENT_SIGNATURE_HEIGHT=o.MIN_ELEMENT_SIGNATURE_HEIGHT=o.SIGNATURE_UUID_HEIGHT=o.SIGNATURE_HEIGHT=void 0,n(165)),e=(o.SIGNATURE_HEIGHT=54,o.SIGNATURE_UUID_HEIGHT=36,o.MIN_ELEMENT_SIGNATURE_HEIGHT=15,o.MAX_ELEMENT_SIGNATURE_HEIGHT=200,l=r.ElementBase,e(t,l),t.prototype.instantiateNewSelf=function(){return new t},t.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("signatureElementTemplate",e,t);return e.classList.add("tooltip"),this.addLinkedItems(e)},t.prototype.applyResize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1);var n=this.getFrameHeight(),n=(this.ratio=this.ratio*t,this.width=this.width*t,this.height=(this.height+n)*t-n,this.fontSize=this.fontSize*t,o.SIGNATURE_HEIGHT/r.ELEMENT_BASE_FONT_SIZE),n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,25),this.applySize(e,t)},t.prototype.zoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom=this.zoom*t,this.width=this.width*t,this.height=this.height*t;var n=o.SIGNATURE_HEIGHT/r.ELEMENT_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,25),this.applyZoomSize(e,t)},t.prototype.getFrameHeight=function(){var e,t=s('[data-id="'+this.id+'"] .sign__element__id');return 0==t.is(":visible")||0==(e=t[0].getBoundingClientRect().height)?0:e+parseFloat(t.css("margin-top"))+1},t.prototype.getElementTotalHeight=function(){return this.height+this.getFrameHeight()},t.prototype.getElementTotalHeightByRatio=function(e){return 1!=isNaN(e)&&0!=e||(e=1),this.height+this.getFrameHeight()*e},t.prototype.applySingature=function(e){var t,n,i,r;void 0===e&&(e={}),this.signatureModel&&(t=this.signatureModel.getSignaturePreview(),n=this.signatureModel.getFrame(),i=document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__content__applied'),r=document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__id'),i.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.append(t.cloneNode(!0))}),r.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.append(n.cloneNode(!0))}),this.setElementMinimumSizeForText(),l.prototype.applySingature.call(this,e))},t.prototype.applyZoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1),l.prototype.applyZoomSize.call(this,e,t);var n=s(null==e?'[data-id="'+this.id+'"] .signature__firm__by':"#"+e+" .signature__firm__by"),i=parseFloat(n.css("font-size")),r=parseFloat(n.css("height")),o=parseFloat(n.css("width")),n=(n.css({fontSize:i*t+"px",lineHeight:r*t+"px",height:r*t+"px",width:o*t+"px"}),s(null==e?'[data-id="'+this.id+'"] .signature__firm__by svg':"#"+e+" .signature__firm__by svg")),i=(n.css({width:n.width()*t+"px",height:n.height()*t+"px"}),s(null==e?'[data-id="'+this.id+'"] .sign__element__id':"#"+e+" .sign__element__id")),r=parseFloat(i.css("margin-top")),o=parseFloat(i.css("font-size")),n=parseFloat(i.css("line-height")),a=parseFloat(i.css("height")),i=(parseFloat(i.css("width")),i.css({marginTop:r*t+"px",fontSize:o*t+"px",lineHeight:n*t+"px",height:a*t+"px",flex:"0 0 "+a*t+"px"}),s(null==e?'[data-id="'+this.id+'"] .signature__firm__code':"#"+e+" .signature__firm__code")),r=parseFloat(i.css("font-size")),o=parseFloat(i.css("height")),n=parseFloat(i.css("width"));i.css({fontSize:r*t+"px",lineHeight:o*t+"px",height:o*t+"px",width:n*t+"px"})},t.prototype.listenEventUuidChanged=function(){var t=this;window.addEventListener("uuidChanged",function(e){0!=t.allHtmlChilds.length&&("request"==t.mode&&t.setWidthFromHeight(),t.applySize())})},t.prototype.setWidthFromHeight=function(){var e=!document.body.classList.contains("uuid--disabled"),t=this.height,n=o.SIGNATURE_HEIGHT;e&&(t+=o.SIGNATURE_UUID_HEIGHT+7,n+=o.SIGNATURE_UUID_HEIGHT+7),this.width=t*r.ELEMENT_BASE_WIDTH/n},t.prototype.getMinSize=function(e){var t=!document.body.classList.contains("uuid--disabled"),n=o.MIN_ELEMENT_SIGNATURE_HEIGHT,i=o.SIGNATURE_HEIGHT;return t&&(n+=o.SIGNATURE_UUID_HEIGHT+7,i+=o.SIGNATURE_UUID_HEIGHT+7),{width:n*r.ELEMENT_BASE_WIDTH/i*e,height:n*e}},t.prototype.getMaxSize=function(e){var t=!document.body.classList.contains("uuid--disabled"),n=o.MAX_ELEMENT_SIGNATURE_HEIGHT,i=o.SIGNATURE_HEIGHT;return t&&(n+=o.SIGNATURE_UUID_HEIGHT+7,i+=o.SIGNATURE_UUID_HEIGHT+7),{width:n*r.ELEMENT_BASE_WIDTH/i*e,height:n*e}},t);function t(){var e=l.call(this)||this;return e.type="signature-element",e.height=o.SIGNATURE_HEIGHT,e.listenEventUuidChanged(),e}o.ElementSignature=e}.call(this,n(1))},function(e,i,t){"use strict";var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.ElementStamp=i.STAMP_BASE_FONT_SIZE=i.MAX_ELEMENT_STAMP_HEIGHT=i.MIN_ELEMENT_STAMP_HEIGHT=i.STAMP_WIDTH=i.STAMP_HEIGHT=void 0,t(165)),u=l(t(16)),d=t(13),l=(i.STAMP_HEIGHT=140,i.STAMP_WIDTH=140,i.MIN_ELEMENT_STAMP_HEIGHT=80,i.MAX_ELEMENT_STAMP_HEIGHT=300,i.STAMP_BASE_FONT_SIZE=14,n=c.ElementBase,o(p,n),p.prototype.instantiateNewSelf=function(){return new p},p.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("stampElementTemplate",e,t);return e.classList.add("tooltip"),this.addLinkedItems(e)},p.prototype.applySingature=function(e){var t;void 0===e&&(e={}),this.signatureModel&&(t=this.signatureModel.getStampPreview(),document.querySelectorAll('[data-id="'+this.id+'"] .sign__element__content__applied').forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.append(t.cloneNode(!0))}),n.prototype.applySingature.call(this,e))},p.prototype.applyResize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1,u.configureScope(function(e){e.setExtra("window.width",window.innerWidth),e.setExtra("window.height",window.innerHeight)}),u.captureMessage("Sign element - Ratio NaN error",d.Severity.Info)),this.ratio=this.ratio*t,this.width=this.width*t,this.height=this.height*t;var n=i.STAMP_HEIGHT/i.STAMP_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,25),this.applySize(e,t)},p.prototype.zoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom=this.zoom*t,this.width=this.width*t,this.height=this.height*t;var n=i.STAMP_HEIGHT/i.STAMP_BASE_FONT_SIZE,n=Math.max(Math.floor(this.height/n),6);this.fontSize=Math.min(n,25),this.applyZoomSize(e,t)},p.prototype.setWidthFromHeight=function(){this.width=this.height*i.STAMP_WIDTH/i.STAMP_HEIGHT},p.prototype.getMinSize=function(e){return{width:i.MIN_ELEMENT_STAMP_HEIGHT*i.STAMP_WIDTH/i.STAMP_HEIGHT*e,height:i.MIN_ELEMENT_STAMP_HEIGHT*e}},p.prototype.getMaxSize=function(e){return{width:i.MAX_ELEMENT_STAMP_HEIGHT*i.STAMP_WIDTH/i.STAMP_HEIGHT*e,height:i.MAX_ELEMENT_STAMP_HEIGHT*e}},p);function p(){var e=n.call(this)||this;return e.type="stamp-element",e.height=i.STAMP_HEIGHT,e.width=i.STAMP_WIDTH,e}i.ElementStamp=l},function(e,l,c){"use strict";!function(t){var i,a,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(l,"__esModule",{value:!0}),l.ElementText=void 0,c(165)),s=n(c(192)),n=(a=r.ElementBase,e(o,a),o.prototype.instantiateNewSelf=function(){return new o},o.prototype.initSignActions=function(e){a.prototype.initSignActions.call(this,e),t("#"+e+" .sign__element__label").html()},o.prototype.initSelfsignedActions=function(e){function t(){r.setAttribute("contenteditable","true"),r.focus(),r.classList.add("edit"),o.style.display="none"}var n=this,i=(a.prototype.initSelfsignedActions.call(this,e),document.getElementById(e)),r=i.querySelector(".sign__element__content__applied"),o=i.querySelector(".sign__element__edit");document.querySelectorAll("#"+e+" .sign__element__edit, #"+e+" .sign__element__content__applied").forEach(function(e){e.addEventListener("click",t),e.addEventListener("touchstart",t)}),r.addEventListener("blur",function(){n.content=r.textContent,i.style.width="auto",o.style.display="block",n.applySingature(),r.removeAttribute("contenteditable"),r.classList.remove("edit"),n.elementsSelector.restart()}),r.addEventListener("paste",function(e){var t,n,i,r=(null==(t=e.clipboardData)?void 0:t.items)||[];for(i in r)if(0===(null==(n=r[i].type)?void 0:n.indexOf("image")))return void e.preventDefault()}),r.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()}),r.addEventListener("input",function(e){s.default.restrictHtmlElByteSize(r,n.MAX_CONTENT_CHARACTERS),i.style.width="auto",n.elementsSelector.redraw()})},o.prototype.initRequestActions=function(e){t("#"+e+" .sign__element__name").hide(),t("#"+e+" .sign__element__content").css("display","flex"),this.initSelfsignedActions(e)},o.prototype.makeElement=function(e,t){e=this.loadBasicElementFromTemplate("textElementTemplate",e,t);return this.content&&(e.querySelector(".sign__element__label").innerHTML=this.content,e.querySelector(".sign__element__content__applied").innerHTML=this.content),this.addLinkedItems(e)},o.prototype.applySingature=function(e){var t=this;void 0===e&&(e={}),this.content&&this.allHtmlChilds.forEach(function(e){e.querySelectorAll(".sign__element__label,.sign__element__content__applied").forEach(function(e){e.innerHTML=t.content})}),a.prototype.applySingature.call(this,e),null!=(e=this.elementsSelector)&&e.redraw()},o.prototype.getData=function(e,t){return this.content&&""!=this.content?(0!=(e=a.prototype.getData.call(this,e=void 0===e?null:e,t=void 0===t?null:t)).length&&(e[0].content=this.content,e[0].y+=(this.height-e[0].font_size)/3),e):[]},o.prototype.copyProperties=function(e){a.prototype.copyProperties.call(this,e),this.content=e.content},o);function o(){var e=a.call(this)||this;return e.MAX_CONTENT_CHARACTERS=120,e.type="text-element",e.autoApply=!0,e.autoReviewApply=!0,e}l.ElementText=n}.call(this,c(1))},,,,,,,function(e,t,n){"use strict";!function(s){Object.defineProperty(t,"__esModule",{value:!0});var l=n(190);function c(){}c.showTip=function(e,t,n,i){c.show(e,e,t,n=void 0===n?"top":n,i=void 0===i?null:i)},c.showTipForce=function(e,t,n,i){c.show(e,null,t,n=void 0===n?"top":n,i=void 0===i?null:i)},c.showStep=function(e,t,n,i){var r="dragStep"==e?"shake":null;c.show(e,e+"Done",t,n=void 0===n?"top":n,i=void 0===i?null:i,r)},c.showStepForce=function(e,t,n,i){c.show(e,null,t,n=void 0===n?"top":n,i=void 0===i?null:i)},c.show=function(e,t,n,i,r,o){if(void 0===i&&(i="top"),void 0===r&&(r=null),void 0===o&&(o=null),window.tippy){var a=window.getComputedStyle(s(n)[0]);if("none"!==a.display){if(null!=t){if("true"==l.Storage.get("tutorial."+t))return void l.Storage.touch("tutorial."+t);e==t&&l.Storage.set("tutorial."+e,"true")}if(null==r){if(0==s("#"+e).length)return;r=s("#"+e).html()}a=c.makeLayer(n,i);window._tutorialData={base:n,el:a,placement:i},c.initTippy(a,r,i),c.showTippy(a,o)}}},c.followElement=function(){window.addEventListener("scroll",c.updatePosition,!0),window.addEventListener("resize",c.updatePosition)},c.unfollowElement=function(){window.removeEventListener("scroll",c.updatePosition,!0),window.removeEventListener("resize",c.updatePosition)},c.updatePosition=function(){0==c.checkElementBaseVisible(window._tutorialData.base[0],10,10)?window._tutorialData.el[0]._tippy.destroy():(window._tutorialData.el.css(c.getElementStyle(window._tutorialData.base,window._tutorialData.placement)),window._tutorialData.el[0]._tippy.popperInstance.update())},c.setViewed=function(e){l.Storage.set("tutorial."+e,"true")},c.makeLayer=function(e,t){void 0===t&&(t="top");var n=s("<div/>");return n.css(c.getElementStyle(e,t)),s("body").append(n),n},c.initTippy=function(e,t,n,i){void 0===t&&(t="tutorial"),void 0===n&&(n="top"),void 0===i&&(i=null),window.tippy(s(e)[0],c.getTippyOptions(e,t,n,i))},c.showTippy=function(e,t){void 0===t&&(t=null);var n=s(e)[0]._tippy;n.show(),null!=t&&window.setTimeout(function(){n.popper.children[0].classList.add("shake")},1e3),c.followElement()},c.getElementStyle=function(e,t){var n=s(e)[0].getBoundingClientRect(),e={position:"absolute","z-index":99999,width:"1px",height:"1px"},i=null;switch(t){case"bottom":case"top":i={top:n.y+"px",left:n.x+n.width/2+"px",height:n.height+"px"};break;case"right":case"left":i={top:n.y+n.height/2+"px",left:n.x+"px",width:n.width+"px"}}return Object.assign(e,i),e},c.getTippyOptions=function(t,e,n,i){return void 0===i&&(i=null),{theme:"guide",animation:"scale",offset:[0,20],delay:[0,0],content:e=void 0===e?"tutorial":e,arrow:!0,allowHTML:!0,placement:n=void 0===n?"top":n,onHide:function(e){c.unfollowElement(),s(t).remove()}}},c.checkElementBaseVisible=function(e,n,i){null==(n=void 0===n?null:n)&&(n=100),null==(i=void 0===i?null:i)&&(i=100);for(var r=e.getBoundingClientRect(),t=[];null!=e.parentElement;)"visible"!==window.getComputedStyle(e).overflow&&"absolute"!==window.getComputedStyle(e).position&&t.push(e.parentElement.getBoundingClientRect()),e=e.parentElement;return t.every(function(e){var t=Math.min(r.right,e.right)-Math.max(r.left,e.left),e=Math.min(r.bottom,e.bottom)-Math.max(r.top,e.top),t=t/r.width*100,e=e/r.height*100;return n<.01+t&&i<.01+e})},t.default=c}.call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmsPurchaseManager=void 0;var i=n(15),r=n(196);function o(){this.usersWithSmsValidation=0}o.setReceivers=function(e){e=e.reduce(function(e,t){return t.isSmsValidationEnabled()?e+1:e},0);this.instance.usersWithSmsValidation=e},Object.defineProperty(o,"info",{get:function(){var e=this.numUsersWithSmsValidation,t=this.ownedSmsValidations;return{numUsersWithSmsValidation:e,ownedSmsValidations:t,needed:this.needed,doesUserHaveEnoughSmsValidations:this.doesUserHaveEnoughSmsValidations(),ownsAtLeastOneValidation:0<t}},enumerable:!1,configurable:!0}),o.clear=function(){this.instance.usersWithSmsValidation=0},o.doesUserHaveEnoughSmsValidations=function(){return o.ownedSmsValidations>=this.instance.numUsersWithSmsValidation},Object.defineProperty(o,"needed",{get:function(){return this.instance.numUsersWithSmsValidation},enumerable:!1,configurable:!0}),Object.defineProperty(o,"numUsersWithSmsValidation",{get:function(){return this.instance.numUsersWithSmsValidation},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"numUsersWithSmsValidation",{get:function(){return this.usersWithSmsValidation},enumerable:!1,configurable:!0}),Object.defineProperty(o,"ownedSmsValidations",{get:function(){if(!i.UserModel.isLoggedIn())throw"Impossible to know if user owns sms validations unless user is logged in";var e=i.UserModel.get();if(!("sms_left"in e))throw"User is missing attribute 'sms_left'";if("number"!=typeof e.sms_left)throw"User.sms_left is not a number";return e.sms_left},enumerable:!1,configurable:!0}),Object.defineProperty(o,"instance",{get:function(){return o._instance=o._instance?o._instance:new o},enumerable:!1,configurable:!0}),o.showSuitableDialogToObtainSms=function(e){e=r.SignatureDialogs.getSuitableDialogToObtainSmsPackage(e);return e.show(),e},t.SmsPurchaseManager=o},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignConfigManager=void 0,i(n(316))),o=n(318),a=n(75),s=n(319);function l(e,t){void 0===t&&(t=!1),this.api=e,this.brandLogoServiceOnly=t,this.init()}l.prototype.init=function(){this.listenEventReceiversChanged(),this.initOrder(),this.initEnableExpire(),this.initExpire(),this.initMultiple(),this.initCustomCerts(),this.initCerts(),this.initLanguage(),this.initReminders(),this.initCustomMessage(),this.initUuid(),this.initNotify(),this.initBrand(),this.initSvc()},l.prototype.listenEventReceiversChanged=function(){var t=this;a.SignatureEventManager.addEventListener("signature:receiver_item:remove",function(e){t.afterMultipleAction()},!0),a.SignatureEventManager.addEventListener("signature:receiver_item:add",function(e){t.afterMultipleAction()},!0)},l.prototype.initOrder=function(){var e=this;this.orderCheckbox.addEventListener("change",function(){a.SignatureEventManager.dispatchEvent("signature:settings:order",e.getEventChangedToSend("order"))})},l.prototype.initEnableExpire=function(){var e=this;this.expirateCheckbox.addEventListener("change",function(){e.expireCheckboxAction()}),this.expireCheckboxAction()},l.prototype.expireCheckboxAction=function(){var e=this.expirateCheckbox.checked;this.expireSet.style.display=e?"inline-block":"none",this.dayExpire.style.display=e?"":"none",this.expireDaysDefault.style.display=e?"none":"",this.dayExpireDefault.style.display=e?"none":"",e&&this.expireInput.focus()},l.prototype.initExpire=function(){var i=this,r=window.navigator.userLanguage||window.navigator.language;try{var e=new Intl.DateTimeFormat(r).format(new Date(this.dayExpireDefault.innerHTML));this.dayExpireDefault.innerHTML=e,this.dayExpire.innerHTML=e}catch(e){}this.expireInput.addEventListener("change",function(){var e=i.expireInput.value.toString(),e=(""==(e=e.replace(/\D/g,""))&&(e=i.expireInput.getAttribute("data-default")),parseInt(e)>parseInt(i.expireInput.getAttribute("max"))&&(e=i.expireInput.getAttribute("max")),i.expireInput.value=parseInt(e).toString(),parseInt(e)),t=new Date,e=(t.setDate(t.getDate()+e),t.getDate().toString().padStart(2,"0")),n=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear()+"-"+n+"-"+e;try{n=new Intl.DateTimeFormat(r).format(t)}catch(e){}i.dayExpire.innerHTML=n})},l.prototype.initMultiple=function(){var e=this;this.multipleCheckbox.addEventListener("change",function(){e.multipleAction()}),this.afterMultipleAction()},l.prototype.multipleAction=function(){var e=this,t=null==(t=null==(t=null==(t=null==(t=window.ilovepdf)?void 0:t.optionsManager)?void 0:t.elementsManager)?void 0:t.elementsStack)?void 0:t.activeElements,n=window.ilovepdf.optionsManager.receiversManager.hasActiveReceiverItemsNonSigners;t&&1<=t.length||n?s.ConfirmBatchModal.confirm(this.multipleCheckbox.checked).then(function(){e.afterMultipleAction()},function(){e.multipleCheckbox.checked=!e.multipleCheckbox.checked}):this.afterMultipleAction()},l.prototype.afterMultipleAction=function(){var e=null==(e=null==(e=null==(e=null==(e=window.ilovepdf)?void 0:e.optionsManager)?void 0:e.receiversManager)?void 0:e.receiverItems)?void 0:e.filter(function(e){return!e.isRemoved()});this.toggleOrderCheckboxAction(!(this.multipleCheckbox.checked||e&&e.length<=1)),a.SignatureEventManager.dispatchEvent("signature:settings:multiple",this.getEventChangedToSend("multiple"))},l.prototype.toggleOrderCheckboxAction=function(e){var t=this.orderCheckbox.closest(".receiver__setting").querySelector(".receiver__setting__content");e?(this.orderCheckbox.removeAttribute("disabled"),t.classList.remove("disabled")):(this.orderCheckbox.setAttribute("disabled","disabled"),t.classList.add("disabled"))},l.prototype.initCerts=function(){var e=this;this.certifiedCheckbox.addEventListener("change",function(){e.certsAction()}),this.certsAction()},l.prototype.certsAction=function(){},l.prototype.initCustomCerts=function(){this.customCertManager=new o.CustomCertsManager},l.prototype.initLanguage=function(){var e=this;this.languageSelectOption.style.display="none",this.languageSelected.style.display="none",this.languageAction(),this.languageCheckbox.addEventListener("change",function(){e.languageAction()}),this.selectLanguage.addEventListener("change",function(){e.languageSelected.innerHTML=e.selectLanguageSelectedOption.innerHTML})},l.prototype.languageAction=function(){var e=this.languageCheckbox.checked;this.languageSelectOption.style.display=e?"":"none",this.languageSelected.style.display=e?"":"none",this.languageDefault.style.display=e?"none":""},l.prototype.initCustomMessage=function(){var e=this;this.messageCheckbox.addEventListener("change",function(){e.customMessageAction()}),this.customMessageAction()},l.prototype.customMessageAction=function(){document.querySelector(".receiver__messages").style.display=this.messageCheckbox.checked?"":"none"},l.prototype.initReminders=function(){var e=this;this.reminderCheckbox.addEventListener("change",function(){e.reminderAction()}),this.reminderAction()},l.prototype.reminderAction=function(){var e=this.reminderCheckbox.checked;this.reminderSet.style.display=e?"":"none",this.reminderDays.style.display=e?"none":""},l.prototype.initUuid=function(){},l.prototype.initNotify=function(){},l.prototype.setFromTemplate=function(e){var t=this.orderCheckbox.checked,t=(("1"==e.lock_order&&0==t||"0"==e.lock_order&&1==t)&&this.orderCheckbox.click(),this.certifiedCheckbox.checked),t=(("1"==e.certified&&0==t||"0"==e.certified&&1==t)&&this.certifiedCheckbox.click(),e.expiration_days&&0==this.expirateCheckbox.checked&&(document.querySelector("#expireDaysDefault .value").innerHTML=e.expiration_days,this.expireInput.value=e.expiration_days,this.expirateCheckbox.click()),e.language&&(0==this.languageCheckbox.checked&&this.languageCheckbox.click(),this.selectLanguage.value=e.language,this.selectLanguage.dispatchEvent(new Event("change"))),this.uuidCheckbox.checked),t=(("true"==e.uuid_visible&&0==t||"false"==e.uuid_visible&&1==t)&&this.uuidCheckbox.click(),this.multipleCheckbox.checked),t=(("batch"==e.mode&&0==t||"batch"!=e.mode&&1==t)&&this.multipleCheckbox.click(),this.customSubject.value=e.subject_signer||"",this.customMessage.value=e.message_signer||"",this.messageCheckbox.checked),t=((e.message_signer&&0==t||!e.message_signer&&1==t)&&this.messageCheckbox.click(),this.reminderCheckbox.checked),t=("true"==e.signer_reminders&&(0==t&&this.reminderCheckbox.click(),e.signer_reminder_days_cycle)&&(this.reminderInput.value=e.signer_reminder_days_cycle.toString(),this.reminderInput.dispatchEvent(new Event("change"))),this.svcCheckbox.checked);("1"==e.verify_enabled&&0==t||"0"==e.verify_enabled&&1==t)&&this.svcCheckbox.click()},l.prototype.initBrand=function(){var e=this;this.brandLogoManager=new r.default(this.api,this.brandLogoServiceOnly),this.brandAction(),this.brandCheckbox.addEventListener("change",function(){e.brandAction()})},l.prototype.brandAction=function(){var e=this.brandCheckbox.checked;this.brandOptions.style.display=e?"":"none"},l.prototype.initSvc=function(){},l.prototype.setBrandNameError=function(){this.brandName.classList.add("error")},l.prototype.removeBrandNameError=function(){this.brandName.classList.remove("error")},l.prototype.getEventChangedToSend=function(e){return{setting_changed:e,order:this.orderCheckbox.checked,multiple:this.multipleCheckbox.checked,expiration_date:this.expirateCheckbox.checked,expiration_date_value:this.expirationDaysValue,email_notifications:this.notifyCheckbox.checked,email_reminders:this.reminderCheckbox.checked,email_reminders_days:this.remindersDaysValue,digital_signature:this.certifiedCheckbox.checked,language:this.languageCheckbox.checked,language_set:this.selectedLanguageValue,custom_email:this.messageCheckbox.checked,custom_email_subject:this.customEmailSubjectValue,custom_email_body:this.customEmailBodyValue,uuid:this.uuidCheckbox.checked,verification_code:this.svcCheckbox.checked,branding:this.brandCheckbox.checked,brand_name:this.brandNameValue,brand_logo:this.brandLogoValue}},Object.defineProperty(l.prototype,"brandNameValue",{get:function(){return this.brandCheckbox.checked?this.brandName.value.toString():null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"brandLogoValue",{get:function(){return this.brandCheckbox.checked?this.brandLogo.value.toString():null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"customEmailBodyValue",{get:function(){return this.messageCheckbox.checked?this.customMessage.value.toString():null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"customEmailSubjectValue",{get:function(){return this.messageCheckbox.checked?this.customSubject.value.toString():null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remindersDaysValue",{get:function(){return this.reminderCheckbox.checked?parseInt(this.reminderInput.value.toString()):null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"selectedLanguageValue",{get:function(){return this.languageCheckbox.checked?this.selectLanguage.value.toString():window.lang},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"expirationDaysValue",{get:function(){return this.expirateCheckbox.checked?parseInt(this.expireInput.value.toString()):parseInt(this.expireDaysDefault.innerText)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"notifyCheckbox",{get:function(){return document.getElementById("notifyCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"expirateCheckbox",{get:function(){return document.getElementById("expirateCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"expireInput",{get:function(){return document.getElementById("expire")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"expireSet",{get:function(){return document.getElementById("expireSet")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dayExpire",{get:function(){return document.getElementById("dayExpire")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"expireDaysDefault",{get:function(){return document.getElementById("expireDaysDefault")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dayExpireDefault",{get:function(){return document.getElementById("dayExpireDefault")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"brandCheckbox",{get:function(){return document.getElementById("brandCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"brandOptions",{get:function(){return document.getElementById("brandOptions")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"brandName",{get:function(){return document.getElementById("brandName")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"brandLogo",{get:function(){return document.getElementById("fileApiBrand")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"uploadBrandArea",{get:function(){return document.getElementById("uploadBrandArea")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"svcCheckbox",{get:function(){return document.getElementById("svcCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"messageCheckbox",{get:function(){return document.getElementById("messageCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"customSubject",{get:function(){return document.getElementById("customSubject")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"customMessage",{get:function(){return document.getElementById("customMessage")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"certifiedCheckbox",{get:function(){return document.getElementById("certifiedCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageCheckbox",{get:function(){return document.getElementById("languageCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageSelected",{get:function(){return document.getElementById("languageSelected")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"selectLanguage",{get:function(){return document.getElementById("selectLanguage")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"selectLanguageSelectedOption",{get:function(){var e=this.selectLanguage;return e.options[e.selectedIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageSelectOption",{get:function(){return document.getElementById("languageSelectOption")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageDefault",{get:function(){return document.getElementById("languageDefault")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"uuidCheckbox",{get:function(){return document.getElementById("uuidCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"multipleCheckbox",{get:function(){return document.getElementById("multipleCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"orderCheckbox",{get:function(){return document.getElementById("orderCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"reminderCheckbox",{get:function(){return document.getElementById("reminderCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"reminderInput",{get:function(){return document.getElementById("reminderInput")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"reminderSet",{get:function(){return document.getElementById("reminderSet")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"reminderDays",{get:function(){return document.getElementById("reminderDays")},enumerable:!1,configurable:!0}),t.SignConfigManager=l},function(e,n,i){"use strict";!function(a){Object.defineProperty(n,"__esModule",{value:!0});var r=i(317),e=i(76),o=i(15),s=i(174),l=i(101),c=i(116);function t(e,t){void 0===t&&(t=!1),this.api=e,this.serviceOnly=t,this.init(),this.listenEventUserAuth()}t.prototype.init=function(){var e,t=this,n=this;1==o.UserModel.isUser()&&(e=o.UserModel.get(),this.service_filename=e.signConfig.brandLogo),this.initBrandUploader(),this.service_filename&&this.api.pingService().then(function(){t.setServiceBrandLogo(),1!=t.serviceOnly&&n.uploadBrandFromService()},function(){t.uploadBlankImage()}),a("#uploadBrandClean").on("click",function(){a("#brandLogo").val(""),a("#fileApiBrand").val(""),a("#uploadBrandArea, #uploadBrandContainer").removeClass("uploaded"),a("#uploadBrandPreview").css("background-image","none")})},t.prototype.listenEventUserAuth=function(){},t.prototype.serviceError=function(){},t.prototype.uploadBrandFromService=function(){this.initBrandUploader(),this.uploadStarts(),this.uploader.uploadToApi(this.service_filename)},t.prototype.uploadBlankImage=function(){this.initBrandUploader(),this.uploader.setApiMode();var e=this.dataURLtoFile(this.onePixelImg(),"blank.png");this.uploader.uploader.start(),this.uploader.uploader.addFile(e),window.brandu=this.uploader},t.prototype.onePixelImg=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=1,e.height=1,t.fillStyle="rgba("+[255,255,255,0].join()+")",t.fillRect(0,0,1,1),e.toDataURL("image/png","")},t.prototype.dataURLtoFile=function(e,t){try{for(var n=e.split(","),i=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,a=new Uint8Array(o);o--;)a[o]=r.charCodeAt(o);return new File([a],t,{type:i})}catch(e){return null}},t.prototype.initBrandUploader=function(){this.files||(this.files=new e.FileStack),this.uploader||(this.uploader=this.makeUploaderService("uploadBrand","uploadBrandContainer","uploadBrandContainer",this.files))},t.prototype.makeUploaderService=function(e,t,n,i){return new r.BrandPlupload({target:null!=o.UserModel.get()&&1!=this.serviceFail?1==this.serviceOnly?"serviceOnly":"service":"api",id:e,container:t,optionsManager:this,config:new l.Config({tool:"sign",subtool:"sign",config:{sign:{mimeTypes:[{title:"Image files",extensions:"png,svg,jpg,jpeg",mime:"image/png,image/jpeg,image/svg+xml,image/svg"}],multiSelection:!1}}}),files:i,workerServer:this.api.workerServer,tool:"sign",servers:[],haveDrop:!0,dropElement:n,tokenApi:this.api.token,tokenService:null!=o.UserModel.get()&&1!=this.serviceFail?o.UserModel.get().token:null,token:(null!=o.UserModel.get()&&1!=this.serviceFail?o.UserModel.get():this.api).token,taskId:this.api.taskId})},t.prototype.changeServer=function(e){},t.prototype.checkLimits=function(e,t){return e},t.prototype.fileAdded=function(e,t,n){return this.uploadStarts(),this.setBrandLogo(e)},t.prototype.setServiceBrandLogo=function(){var e=new c.ImageView,t="uploadBrandPreview";e.renderUrl(this.service_filename,t).then(function(){document.getElementById(t).parentElement.classList.add("uploaded")},function(){})},t.prototype.setBrandLogo=function(o){return void 0===o&&(o=null),new Promise(function(t,n){var e=o.getSource().getSource(),i="uploadBrandPreview";a("#uploadBrandArea").css("background-image","none"),s.ImageHelper.getBase64(o,!0).then(function(e){s.ImageHelper.preload(e)});var r=o.name.endsWith(".svg")?"renderSvg":"renderImage";(new c.ImageView)[r](e,i,!1).then(function(e){return o.width=e.width,o.height=e.height,document.getElementById(i).parentElement.classList.add("uploaded"),t(e)},function(e){n(e)})})},t.prototype.fileUploaded=function(e,t){this.uploadEnds(),null!=this.files.updateFile(e,t)&&(t.service_filename&&(this.service_filename=t.service_filename,a("#brandLogo").val(t.service_filename),this.server_filename=t.service_filename),t.server_filename)&&(this.server_filename=t.server_filename,a("#fileApiBrand").val(t.server_filename))},t.prototype.invalidUpload=function(e){},t.prototype.fatalError=function(e){},t.prototype.uploadStarts=function(){a("#uploadBrandContainer").addClass("uploading")},t.prototype.uploadEnds=function(){a("#uploadBrandContainer").removeClass("uploading")},n.default=t}.call(this,i(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.BrandPlupload=void 0,n(244)),s=n(41),l=n(8),n=n(243),n=(r=n.ServicePlupload,o(c,r),c.prototype.fileAdded=function(t,n){var i=this;t.status=window.plupload.FAILED,t.error=window.plupload.GENERIC_ERROR,this.isImageValid(t.getSource().getSource(),function(e){e?(i.reUploadAllFiles(),r.prototype.fileAdded.call(i,t,n)):i.invalidFileAdded(t)})},c.prototype.invalidFileAdded=function(e){null!=e&&e.id&&this.files.removeFile(e.id,!0),window.Toastr.error(l.Lang.t("damagedFile"),l.Lang.t("uploadError"),{timeOut:15e3,closeButton:!0,positionClass:"toast-top-left"})},c.prototype.getServiceUrl=function(){return s.Settings.get("service")+"/brand/upload"},c.prototype.checkLimits=function(e,t){if(1<e.length)for(var n=0;n<e.length;n++){var i=e[n];0<n&&this.files.removeFile(i.id,!0)}return[e[0]]},c.prototype.isImageValid=function(e,t){var n=this,i=new Image;i.onload=function(){URL.revokeObjectURL(i.src),a.FileTools.getMimeTypeFromSource(e).then(function(e){return t(n.ACCEPTED_MIME_TYPES.includes(e))})},i.onerror=function(){URL.revokeObjectURL(i.src),t(!1)},i.src=URL.createObjectURL(e)},c);function c(){var e=null!==r&&r.apply(this,arguments)||this;return e.ACCEPTED_MIME_TYPES=["image/png","image/jpeg","image/svg+xml","image/svg"],e}t.BrandPlupload=n},function(e,t,n){"use strict";!function(n){function e(e){this.elementSelector=(e=void 0===e?null:e)||".askCustomCert",this.initSelect(),this.init()}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCertsManager=void 0,e.prototype.init=function(){var t=this,e=(null!=this.elementSelector&&(n(this.elementSelector).off("click"),n(this.elementSelector).on("click",function(e){e.preventDefault(),t.showModal()})),n("#sendCustomCertBtn"));e.off("click"),e.on("click",function(){t.hideModal()}),n("#cancelCustomCertBtn").on("click",function(){t.hideModal()})},e.prototype.initSelect=function(){var e=this,t=n("#selectCertName");t.off("change"),t.on("change",function(){"custominc"==t.val()&&e.showModal(),t.val(t.find("option:first").val())})},e.prototype.toggleEnableCerts=function(e){e?(this.certificateSelectCheckbox.classList.remove("disabled"),this.certificateSelectOption.parentNode.querySelector(".receiver__setting__content").classList.remove("disabled"),this.certificateSelectOption.removeAttribute("disabled")):(this.certificateSelectCheckbox.classList.add("disabled"),this.certificateSelectOption.setAttribute("disabled","disabled"),this.certificateSelectOption.parentNode.querySelector(".receiver__setting__content").classList.add("disabled"))},e.prototype.showModal=function(){var e=this;n("#customCertsModal").modal("show"),window.setTimeout(function(){e.emailCustomCert.focus()},500)},e.prototype.hideModal=function(){n("#customCertsModal").modal("hide")},Object.defineProperty(e.prototype,"certificateSelectCheckbox",{get:function(){return document.getElementById("certificateSelectCheckbox")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"certificateSelectOption",{get:function(){return document.getElementById("certificateSelectOption")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emailCustomCert",{get:function(){return document.getElementById("certificateSelectOption")},enumerable:!1,configurable:!0}),t.CustomCertsManager=e}.call(this,n(1))},function(e,t,n){"use strict";!function(i){function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmBatchModal=void 0,n.confirm=function(e){return n.openModal(e),new Promise(function(e,t){i("#confirmBatch").on("click",function(){n.closeModal(),e()}),i("#cancelBatch").on("click",function(){n.closeModal(),t()})})},n.openModal=function(t){var e=document.getElementById("confirmBatchModal"),n=e.querySelectorAll(".normal-to-multiple"),e=e.querySelectorAll(".multiple-to-normal");n.forEach(function(e){e.style.display=t?"":"none"}),e.forEach(function(e){e.style.display=t?"none":""}),i("#confirmBatchModal").modal("show")},n.closeModal=function(){i("#confirmBatchModal").modal("hide"),i("#confirmBatch").off("click"),i("#cancelBatch").off("click")},t.ConfirmBatchModal=n}.call(this,n(1))},,,function(e,t,n){var i;function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(o,a){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);(t="function"==typeof Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})):t).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n})}return i}o=o&&o.hasOwnProperty("default")?o.default:o,a=a&&a.hasOwnProperty("default")?a.default:a;var l="modal",c="bs.modal",u="."+c,e=o.fn[l],d={backdrop:!0,keyboard:!0,focus:!0,show:!0},p={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},h={HIDE:"hide"+u,HIDDEN:"hidden"+u,SHOW:"show"+u,SHOWN:"shown"+u,FOCUSIN:"focusin"+u,RESIZE:"resize"+u,CLICK_DISMISS:"click.dismiss"+u,KEYDOWN_DISMISS:"keydown.dismiss"+u,MOUSEUP_DISMISS:"mouseup.dismiss"+u,MOUSEDOWN_DISMISS:"mousedown.dismiss"+u,CLICK_DATA_API:"click"+u+".data-api"},f="modal-scrollbar-measure",m="modal-backdrop",g="modal-open",v="fade",y="show",_=".modal-dialog",t='[data-toggle="modal"]',b='[data-dismiss="modal"]',w=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",E=".sticky-top",S=function(){function r(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(_),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var e,t,n=r.prototype;return n.toggle=function(e){return this._isShown?this.hide():this.show(e)},n.show=function(e){var t,n=this;this._isShown||this._isTransitioning||(o(this._element).hasClass(v)&&(this._isTransitioning=!0),t=o.Event(h.SHOW,{relatedTarget:e}),o(this._element).trigger(t),this._isShown)||t.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),o(this._element).on(h.CLICK_DISMISS,b,function(e){return n.hide(e)}),o(this._dialog).on(h.MOUSEDOWN_DISMISS,function(){o(n._element).one(h.MOUSEUP_DISMISS,function(e){o(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))},n.hide=function(e){var t=this;e&&e.preventDefault(),this._isShown&&!this._isTransitioning&&(e=o.Event(h.HIDE),o(this._element).trigger(e),this._isShown)&&!e.isDefaultPrevented()&&(this._isShown=!1,(e=o(this._element).hasClass(v))&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),o(document).off(h.FOCUSIN),o(this._element).removeClass(y),o(this._element).off(h.CLICK_DISMISS),o(this._dialog).off(h.MOUSEDOWN_DISMISS),e?(e=a.getTransitionDurationFromElement(this._element),o(this._element).one(a.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(e)):this._hideModal())},n.dispose=function(){[window,this._element,this._dialog].forEach(function(e){return o(e).off(u)}),o(document).off(h.FOCUSIN),o.removeData(this._element,c),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},n.handleUpdate=function(){this._adjustDialog()},n._getConfig=function(e){return e=s({},d,e),a.typeCheckConfig(l,e,p),e},n._showElement=function(e){function t(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,o(n._element).trigger(r)}var n=this,i=o(this._element).hasClass(v),r=(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="flex",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.scrollTop=0,i&&a.reflow(this._element),o(this._element).addClass(y),this._config.focus&&this._enforceFocus(),o.Event(h.SHOWN,{relatedTarget:e}));i?(e=a.getTransitionDurationFromElement(this._dialog),o(this._dialog).one(a.TRANSITION_END,t).emulateTransitionEnd(e)):t()},n._enforceFocus=function(){var t=this;o(document).off(h.FOCUSIN).on(h.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===o(t._element).has(e.target).length&&t._element.focus()})},n._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?o(this._element).on(h.KEYDOWN_DISMISS,function(e){27===e.which&&(e.preventDefault(),t.hide())}):this._isShown||o(this._element).off(h.KEYDOWN_DISMISS)},n._setResizeEvent=function(){var t=this;this._isShown?o(window).on(h.RESIZE,function(e){return t.handleUpdate(e)}):o(window).off(h.RESIZE)},n._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){o(document.body).removeClass(g),e._resetAdjustments(),e._resetScrollbar(),o(e._element).trigger(h.HIDDEN)})},n._removeBackdrop=function(){this._backdrop&&(o(this._backdrop).remove(),this._backdrop=null)},n._showBackdrop=function(e){var t,n=this,i=o(this._element).hasClass(v)?v:"";this._isShown&&this._config.backdrop?(this._backdrop=document.createElement("div"),this._backdrop.className=m,i&&this._backdrop.classList.add(i),o(this._backdrop).appendTo(document.body),o(this._element).on(h.CLICK_DISMISS,function(e){n._ignoreBackdropClick?n._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),i&&a.reflow(this._backdrop),o(this._backdrop).addClass(y),e&&(i?(i=a.getTransitionDurationFromElement(this._backdrop),o(this._backdrop).one(a.TRANSITION_END,e).emulateTransitionEnd(i)):e())):!this._isShown&&this._backdrop?(o(this._backdrop).removeClass(y),i=function(){n._removeBackdrop(),e&&e()},o(this._element).hasClass(v)?(t=a.getTransitionDurationFromElement(this._backdrop),o(this._backdrop).one(a.TRANSITION_END,i).emulateTransitionEnd(t)):i()):e&&e()},n._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},n._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},n._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},n._setScrollbar=function(){var e,t,r=this;this._isBodyOverflowing&&(e=[].slice.call(document.querySelectorAll(w)),t=[].slice.call(document.querySelectorAll(E)),o(e).each(function(e,t){var n=t.style.paddingRight,i=o(t).css("padding-right");o(t).data("padding-right",n).css("padding-right",parseFloat(i)+r._scrollbarWidth+"px")}),o(t).each(function(e,t){var n=t.style.marginRight,i=o(t).css("margin-right");o(t).data("margin-right",n).css("margin-right",parseFloat(i)-r._scrollbarWidth+"px")}),e=document.body.style.paddingRight,t=o(document.body).css("padding-right"),o(document.body).data("padding-right",e).css("padding-right",parseFloat(t)+this._scrollbarWidth+"px")),o(document.body).addClass(g)},n._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(w)),e=(o(e).each(function(e,t){var n=o(t).data("padding-right");o(t).removeData("padding-right"),t.style.paddingRight=n||""}),[].slice.call(document.querySelectorAll(""+E))),e=(o(e).each(function(e,t){var n=o(t).data("margin-right");void 0!==n&&o(t).css("margin-right",n).removeData("margin-right")}),o(document.body).data("padding-right"));o(document.body).removeData("padding-right"),document.body.style.paddingRight=e||""},n._getScrollbarWidth=function(){var e=document.createElement("div"),t=(e.className=f,document.body.appendChild(e),e.getBoundingClientRect().width-e.clientWidth);return document.body.removeChild(e),t},r._jQueryInterface=function(n,i){return this.each(function(){var e=o(this).data(c),t=s({},d,o(this).data(),"object"===x(n)&&n?n:{});if(e||(e=new r(this,t),o(this).data(c,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n](i)}else t.show&&e.show(i)})},n=r,t=[{key:"VERSION",get:function(){return"4.2.1"}},{key:"Default",get:function(){return d}}],(e=null)&&i(n.prototype,e),t&&i(n,t),r}();return o(document).on(h.CLICK_DATA_API,t,function(e){var t,n=this,i=a.getSelectorFromElement(this),i=(i&&(t=document.querySelector(i)),o(t).data(c)?"toggle":s({},o(t).data(),o(this).data())),r=("A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault(),o(t).one(h.SHOW,function(e){e.isDefaultPrevented()||r.one(h.HIDDEN,function(){o(n).is(":visible")&&n.focus()})}));S._jQueryInterface.call(o(t),i,this)}),o.fn[l]=S._jQueryInterface,o.fn[l].Constructor=S,o.fn[l].noConflict=function(){return o.fn[l]=e,S._jQueryInterface},S},"object"===x(t)&&void 0!==e?e.exports=i(n(1),n(275)):(n=[n(1),n(275)],void 0!==(t="function"==typeof(i=i)?i.apply(t,n):i)&&(e.exports=t))},,,,function(e,t,n){"use strict";!function(o){function e(){}Object.defineProperty(t,"__esModule",{value:!0}),t.UploaderStatus=void 0,e.set=function(e){var t=this;this.uploadInterval&&(clearInterval(this.uploadInterval),this.uploadInterval=null),this.uploadInterval=setInterval(function(){var n=0,i=0,r=0;o.each(e.files,function(e,t){100==t.percent&&i++,r++,n+=t.percent}),o(".uploading__bar--small .uploading__bar__completed").css("width",n/r+"%"),0<r&&(o(".uploading__bar--small").show(),o(".uploading__status__percent").show()),i==r&&(window.setTimeout(function(){o(".uploading__bar--small").hide()},1e3),clearInterval(t.uploadInterval))},100)},e.uploadInterval=null,t.UploaderStatus=e}.call(this,n(1))},,,,,,,,,,,,,,,,,,function(e,f,m){"use strict";!function(r){var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(f,"__esModule",{value:!0}),f.DEFAULT_SIGNER=f.RECEIVER_COLORS=void 0,m(193)),t=m(499),o=m(37),i=m(190),a=m(15),s=e(m(298)),l=m(8),c=m(315),u=m(501),d=m(299),p=m(75);function h(e){var t=this;this._onCancelReceivers=function(){0==t.receivers.length&&(t.receiverItems=[],t.sendEventReceiversCancel()),t.hideModal()},this._onConfirmReceivers=function(){!0===t.validate()&&(t.save(),t.saveToStorage(),r("#cancelReceiver").show(),r("#signersPanel").show(),r("#groupsPanel").show(),r("#elementsPanel").show(),t.printSignersSidebar(),t.updateSignersNameTooltips(),t.hideModal(),t.sendEventReceiversChanged(),t.sendEventReceiversConfirmed(),s.default.setViewed("receiverStepDone"),window.setTimeout(function(){0<r(".editor__page").length&&s.default.showStep("dragStep",r("#sidebar"),"left")},1e3))},this.receivers=[],this.receiverItems=[],this.sortableElement="receiverList",this.batchMode=!1,this.api=e,this.init(),this.initModalReciversActions(),this.initRequestConfig(),this.listenEventReceiversAdded(),this.listenEventReceiversItemRemoved(),this.listenEventReceiversItemChanged(),this.listenEventRemindersChange(),this.listenEventExpirationDateChange()}h.prototype.saveToStorage=function(){i.Storage.set("sign.receivers",this.receivers)},h.prototype.nextColor=function(){},h.prototype.loadFromStorage=function(){var t=this;i.Storage.get("sign.receivers").forEach(function(e){t.receivers.push(new n.ReceiverModel(e))}),this.printSignersSidebar(),this.sendEventReceiversChanged()},h.prototype.loadFromTemplate=function(e){var t=this;this.fromTemplate=!0,this.batchMode="batch"==e.mode,e.signers.forEach(function(e){e.colorClass="file"+e.letter_color,e.allowCostumize=e.force_signature_type,e.password=e.access_code,t.receivers.push(new n.ReceiverModel(e))}),this.printSignersSidebar(),this.sendEventReceiversChanged(),this.configManager.setFromTemplate(e)},h.prototype.loadFromUser=function(){var e,t=null;t=1==a.UserModel.isUser()?(e=a.UserModel.get(),new n.ReceiverModel({email:e.email,name:e.name,type:"signer"})):new n.ReceiverModel({email:"",name:"",type:"signer"}),this.receivers.push(t),this.sendEventReceiversChanged()},h.prototype.init=function(){var t=this;this.checkConfirmReceiverBtn(),r("#addReceiver").on("click",function(){t.addReceiverItem()}),r(document).on("keydown",".receiver__type select",function(e){if((9==e.keyCode||9===e.which)&&!e.shiftKey&&e.target==r(".receiver__type select").last()[0])return t.addReceiverItem(),!1})},h.prototype.initWindowClickListener=function(){},h.prototype.initModalReciversActions=function(){var e=this;r("#cancelReceiver").on("click",this._onCancelReceivers),r("#editReceivers").on("click",function(){e.showModal()}),r("#confirmReceiver").on("click",this._onConfirmReceivers)},h.prototype.applySortableConfig=function(){this.configManager.orderCheckbox.checked&&0==this.configManager.multipleCheckbox.checked?this.enableSortable():this.disableSortable()},h.prototype.initRequestConfig=function(){var t=this,e=this;this.configManager=new c.SignConfigManager(this.api),p.SignatureEventManager.addEventListener("signature:settings:order",function(e){t.applySortableConfig()}),p.SignatureEventManager.addEventListener("signature:settings:multiple",function(e){e.detail.multiple?(t.removeSortable(),t.removeNotSigners(),t.setReceiverTypeDisabled(),t.disableSortable(),o.Tooltip.setContent(r("#orderOption label"),l.Lang.t("orderOnBatchInfo")),t.batchMode=!0):(e.detail.order?t.enableSortable():t.disableSortable(),o.Tooltip.disable(r("#orderOption label")),t.setReceiverTypeEnabled(),t.batchMode=!1)}),r("#certifiedCheckbox").on("change",function(){r("#multipleCheckbox").is(":checked")?e.sendEventSetSilentCertsForSigners(e.receivers.length):e.sendEventSetSilentCertsForSigners(1),window.setTimeout(function(){(t.configManager.certifiedCheckbox.checked?r('[data-action="certified"]'):r('[data-action="digital"]')).trigger("click")},500)}),this.applySortableConfig()},h.prototype.removeNotSigners=function(){this.receiverItems.forEach(function(e){1!=e.removed&&"signer"!==e.receiver.type&&e.remove()})},h.prototype.setReceiverTypeDisabled=function(){r(".receiver-list__item .receiver__type select").attr("disabled","disabled")},h.prototype.setReceiverTypeEnabled=function(){r(".receiver-list__item .receiver__type select").removeAttr("disabled")},h.prototype.printSignersSidebar=function(){var e;r(".signature__signers .draggable").each(function(e,t){}),r(".signature__signers").html(""),1==this.batchMode?(e='<li class="signature__signers__item fileA tooltip tooltip--top draggable draggable__content" title="'+l.Lang.t("signerLayout")+'" tabindex="0" data-title="'+l.Lang.t("signerLayout")+'" data-id="'+f.DEFAULT_SIGNER.id+'"><span id="signMultipleIcon"></span></li>',r(".signature__signers").append(e)):this.receivers.forEach(function(e,t){var n,i;"signer"==e.type&&(n=(i=e.name.split(" "))[0].charAt(0).toUpperCase(),i[1]&&(n+=i[1].charAt(0).toUpperCase()),i='<li class="signature__signers__item '+e.colorClass+' tooltip tooltip--top draggable draggable__content " title="'+e.name.trunc(25)+'" tabindex="0" data-title="'+e.name+'" data-id="'+e.id+'">'+n+"</li>",r(".signature__signers").append(i))}),o.Tooltip.init(".signature__signers__item")},h.prototype.updateSignersNameTooltips=function(){this.receivers.forEach(function(t,e){"signer"==t.type&&document.querySelectorAll('[data-signer="'+t.id+'"]').forEach(function(e){o.Tooltip.setContent(e,t.name)})})},h.prototype.sendEventReceiversCancel=function(){var e=new CustomEvent("receiversCancel");window.dispatchEvent(e)},h.prototype.sendEventReceiversChanged=function(){var e=new CustomEvent("receiversChanged",{detail:{receivers:1==this.batchMode?[f.DEFAULT_SIGNER]:this.receivers,batchMode:this.batchMode,batchCount:this.receivers.length}});window.dispatchEvent(e)},h.prototype.sendEventReceiversConfirmed=function(){var e=new CustomEvent("receiversConfirmed",{detail:{certsWanted:r("#certifiedCheckbox").is("checked")}});window.dispatchEvent(e)},h.prototype.sendEventSetSilentCertsForSigners=function(e){e=new CustomEvent("setSilentCertsForSigners",{detail:{signers:e}});window.dispatchEvent(e)},h.prototype.listenEventModeChanged=function(){},h.prototype.listenEventReceiversItemRemoved=function(){var t=this;p.SignatureEventManager.addEventListener("signature:receiver_item:remove",function(e){t.cleanRemoved(),t.setNumbers(),t.checkConfirmReceiverBtn(),t.enableAdd()},!0)},h.prototype.listenEventReceiversAdded=function(){var t=this;p.SignatureEventManager.addEventListener("signature:receiver:add",function(e){t.receivers=e.detail.receivers,t.sendEventReceiversChanged(),t.checkConfirmReceiverBtn()})},h.prototype.listenEventReceiversItemChanged=function(){var t=this;p.SignatureEventManager.addEventListener("signature:receiver_item:change",function(e){t.checkConfirmReceiverBtn()})},h.prototype.listenEventRemindersChange=function(){var e,t=this;null!=(e=document.getElementById("reminderInput"))&&e.addEventListener("input",function(e){t.preventNumberInputChangeMinMax(e.currentTarget)})},h.prototype.listenEventExpirationDateChange=function(){var e,t=this;null!=(e=document.getElementById("expire"))&&e.addEventListener("input",function(e){t.preventNumberInputChangeMinMax(e.currentTarget)})},h.prototype.showModal=function(){this.initReceivers(),r("#receiversModal").modal("show"),r(".dialog__body").scrollTop(0),window.setTimeout(function(){s.default.showStep("receiverStep",r(".receiver-list__item").first(),"top")},1e3)},h.prototype.hideModal=function(){r("#receiversModal").modal("hide")},h.prototype.initReceivers=function(){var t=this;r(".receiver-list").html(""),0==this.receivers.length?this.addReceiverItem():(this.receiverItems=[],this.receivers.forEach(function(e){t.addReceiverItem(e)}))},h.prototype.enableSortable=function(){var t,e;this.configManager.multipleCheckbox.checked||(r("#"+(t=this).sortableElement).addClass("sortable"),null!=this.sortableList?this.sortableList.option({disabled:!1,draggable:!0}):(e=document.getElementById(this.sortableElement),this.sortableList=new window.Sortable(e,{draggable:".receiver-list__item",filter:"input, .receiver__action, .receiver__delete, .receiver__elements",preventOnFilter:!1,animation:200,onUpdate:function(e){t.setNumbers(),r("#"+t.sortableElement).addClass("sortable")},onStart:function(e){},onEnd:function(){}}),window.sortableList=this.sortableList))},h.prototype.disableSortable=function(){r("#"+this.sortableElement).removeClass("sortable"),this.sortableList},h.prototype.removeSortable=function(){r("#"+this.sortableElement).removeClass("sortable"),null!=this.sortableList&&(this.sortableList.option("disabled",!0),this.sortableList.option("draggeble",!1)),this.sortableList=null},h.prototype.setNumbers=function(){r(".receiver-list .receiver-list__item").each(function(e,t){e+=1;r(t).find(".receiver__count").html(e.toString())})},h.prototype.setReceiversOrder=function(t){this.receivers.forEach(function(e){e.num&&(e.num=t[e.num])})},h.prototype.orderReceivers=function(){this.receivers.sort(function(e,t){return e.num-t.num})},h.prototype.addReceiverItem=function(e){void 0===e&&(e=null),50!=this.receiverItems.length&&((e=new t.ReceiverItem(e,this.batchMode,{api:this.api})).signaturesManager=this.signaturesManager,this.receiverItems.push(e),e.sendEventReceiversItemAdded(),this.checkConfirmReceiverBtn(),50!=this.receiverItems.length)||this.disabledAdd()},h.prototype.disabledAdd=function(){r("#addReceiver").attr("disabled","disabled")},h.prototype.enableAdd=function(){r("#addReceiver").removeAttr("disabled")},h.prototype.cleanRemoved=function(){var n=this;this.receiverItems.forEach(function(e,t){!0===e.isRemoved()&&n.receiverItems.splice(t,1)})},h.prototype.save=function(){var t=[];return this.receiverItems.forEach(function(e){!0!==e.isRemoved()&&(!0===e.isEmpty()?e.remove():(e.applyNumber(),t.push(e.getReceiver())))}),this.cleanRemoved(),this.receiverItems.forEach(function(e){}),this.receivers=t,this.orderReceivers(),this.receivers},h.prototype.removeUnused=function(){this.receiverItems.forEach(function(e){!0===e.isEmpty()&&e.remove()})},h.prototype.count=function(t){void 0===t&&(t=null);var n=0;return this.receiverItems.forEach(function(e){!0===e.isRemoved()||null!=t&&e.receiver.type!=t||n++}),n},h.prototype.validate=function(){d.SmsPurchaseManager.clear();var n,e,t=!0,i=0;return this.receiverItems.forEach(function(e){!0!==e.isRemoved()&&1!=e.isEmpty()&&(0==e.validate()?t=!1:i++)}),0!=i&&(n=!1,r(".receiver__type select").each(function(e,t){"signer"==r(t).val()&&(n=!0)}),!0!==n?(o.Tooltip.init(r("#confirmReceiver")),o.Tooltip.setContent(r("#confirmReceiver"),l.Lang.t("signerRequired")),o.Tooltip.show(r("#confirmReceiver")),!1):1==r("#brandCheckbox").is(":checked")&&(this.configManager.removeBrandNameError(),null==this.getBrandData())?(u.ScrollHelper.scrollToElement(r("#brandCheckbox")),o.Tooltip.init(r("#confirmReceiver")),o.Tooltip.setContent(r("#confirmReceiver"),l.Lang.t("brandRequired")),o.Tooltip.show(r("#confirmReceiver")),this.configManager.setBrandNameError(),this.configManager.uploadBrandArea.scrollIntoView(),!1):(e=this.receiverItems.map(function(e){return e.receiver}),d.SmsPurchaseManager.setReceivers(e),t))},h.prototype.getDataFromReceivers=function(){var t=[];return this.receivers.forEach(function(e){t.push(e.getData())}),t},h.prototype.getLanguage=function(){return r("#languageCheckbox").is(":checked")?r("#selectLanguage").val().toString():window.lang},h.prototype.getExpirationDays=function(){return r("#expirateCheckbox").is(":checked")?parseInt(r("#expire").val().toString()):parseInt(r("#expireDaysDefault").text())},h.prototype.getReminders=function(){return!!r("#reminderCheckbox").is(":checked")},h.prototype.getRemindersCycle=function(){return parseInt(r("#reminderInput").val().toString())},h.prototype.getNotify=function(){return!!r("#notifyCheckbox").is(":checked")},h.prototype.getData=function(){var e,t={language:this.getLanguage(),batch_mode:this.batchMode,expiration_days:this.getExpirationDays(),lock_order:1==r("#orderCheckbox").is(":checked")?1:0,signers:this.getDataFromReceivers(),signer_reminders:this.getReminders(),signed_notifications:this.getNotify(),verify_enabled:1==r("#svcCheckbox").is(":checked")?1:0};return 1==t.signer_reminders&&(t.signer_reminder_days_cycle=this.getRemindersCycle()),1==r("#messageCheckbox").is(":checked")&&(""!=(e=r("#customSubject").val().toString())&&(t.subject=e.substring(0,254)),t.message=r("#customMessage").val().toString()),1==r("#brandCheckbox").is(":checked")&&null!=(e=this.getBrandData())&&(t.brand_name=e.name,t.brand_logo=e.logo),1==r("#certificateSelectCheckbox").is(":checked")&&null!=(e=this.getCertificateIdentity())&&(t.identity=e),t},h.prototype.getBrandData=function(){var e=r("#brandName").val().toString(),t=r("#fileApiBrand").val().toString();return""==t||""==e?null:{name:e,logo:t}},h.prototype.getCertificateIdentity=function(){var e=r("#selectCertName").val().toString();return e||null},h.prototype.checkConfirmReceiverBtn=function(){var t=!1;0==this.receiverItems.length&&(t=!0),this.receiverItems.forEach(function(e){1!=e.removed&&1==e.isIncomplete()&&(t=!0)}),1==t?r("#confirmReceiver").attr("disabled","disabled"):r("#confirmReceiver").removeAttr("disabled")},h.prototype.preventNumberInputChangeMinMax=function(e,t,n){var i,r=parseInt(e.value);null==t&&"string"==typeof(i=e.getAttribute("min"))&&i.length&&(t=parseInt(i)),null==n&&"string"==typeof(i=e.getAttribute("max"))&&i.length&&(n=parseInt(i)),(t&&r<t||isNaN(r))&&(e.value=t.toString()),n&&n<r&&(e.value=n.toString())},Object.defineProperty(h.prototype,"activeReceiverItems",{get:function(){return this.receiverItems.filter(function(e){return!e.removed})},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"hasActiveReceiverItemsNonSigners",{get:function(){return this.activeReceiverItems.some(function(e){return"signer"!==e.receiver.type})},enumerable:!1,configurable:!0}),f.default=h,f.RECEIVER_COLORS=["fileA","fileB","fileC","fileD","fileE","fileF","fileG","fileH","fileI","fileJ"],f.DEFAULT_SIGNER={id:"defaultSigner",name:l.Lang.t("Signer"),email:"default@email",type:"signer",colorClass:"fileA",files:[],force_signature_type:null}}.call(this,m(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15);function r(){}r.set=function(){var e;1!=i.UserModel.isPremium()&&(e=r.get(),Cookies.set("newSignCount",(e+1).toString(),{expires:7}))},r.get=function(){Cookies.remove("signCount");var e=parseInt(Cookies.get("newSignCount"));return e=isNaN(e)?0:e},r.allowed=function(){return 1==i.UserModel.isPremium()||r.get()<3},r.remainingUses=function(){return 3-r.get()},t.default=r},,,,,,,,,,,,,,function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.IlovepdfTool=void 0,n(181)),s=n(498),l=n(526),n=(r=a.IlovepdfTool,o(c,r),c.prototype.getOptionsManager=function(){return new s.SignOptionsManager(this.getToolOptions())},c.prototype.initProcessManager=function(){this.processManager=new l.SignProcess({taskId:this.taskId,tool:this.tool,site:this.site,subtool:this.subtool,options:{},startServer:this.startServer,workerServer:this.workerServer,files:this.files,userToken:this.userToken,token:this.token,userId:this.userId,downloadUrl:this.downloadUrl})},c);function c(){return null!==r&&r.apply(this,arguments)||this}t.IlovepdfTool=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),function(e){i(497),i(168),i(106),i(322),i(558);var t=i(179),n=i(359);i(102),i(105),e.Sortable=t.a,window.site="ilovepdf",window.userModel=window.ilovepdfConfig.user,window.ilovepdf=new n.IlovepdfTool(window.ilovepdfConfig)}.call(this,i(32))},function(e,t,n){},function(e,z,H){"use strict";!function(o){var i,a,e=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(z,"__esModule",{value:!0}),z.SignOptionsManager=void 0,H(207)),l=H(229),c=t(H(344)),u=t(H(502)),d=H(503),p=H(190),h=H(76),f=H(171),m=H(37),g=H(15),v=H(8),y=H(199),_=H(170),b=t(H(516)),w=H(517),E=H(58),S=H(255),x=H(18),T=t(H(298)),P=H(247),k=H(518),I=H(326),C=H(194),M=H(175),O=H(519),A=H(196),L=H(299),j=H(79),F=H(520),N=t(H(62)),B=t(H(523)),U=H(261),D=H(75),t=(a=r.SignBaseOptionsManager,e(R,a),R.prototype.cleanStorage=function(){p.Storage.cleanSign()},R.prototype.beforeUnload=function(){window.addEventListener("beforeunload",function(e){null!=p.Storage.get("sign.files")&&null!=p.Storage.get("sign.elements")&&(e.returnValue="You are not done with this page. If you leave this page now, you may loose your last changes.")})},R.prototype.initTemplateActions=function(){var n=this,e=(this.templateManager=new O.TemplateManager,S.Url.getParam("template"));null!=e?(this.templateName=o('#templateSelect option[value="'+e+'"]').text(),this.templateId=e,this.setCurrentTemplate(),this.makeFromTemplate(e)):o("#templateSelect").on("change",function(e){var t=o("#templateSelect").val();"null"!=t&&(n.templateName=o("#templateSelect option:selected").text(),n.templateId=o("#templateSelect option:selected").val(),n.setCurrentTemplate(),n.makeFromTemplate(t))})},R.prototype.onUploaderMovedAndShow=function(){},R.prototype.showUploaderTooltip=function(){},R.prototype.fatalError=function(e){a.prototype.fatalError.call(this,e),o(".modal").hide(),o(".modal-backdrop").hide()},R.prototype.checkProcessBtn=function(){a.prototype.checkProcessBtn.call(this),0==this.files.checkFilesUploaded()?(this.disableProcessBtn(v.Lang.t("uploading")),this.templateManager.disableTemplates(v.Lang.t("uploading"))):0==this.elementsManager.validateSignatureIsPresent()?(this.disableProcessBtn(v.Lang.t("signersRequired")),this.templateManager.disableTemplates(v.Lang.t("signersRequired"))):0==this.elementsManager.validateAllInputsLabeled()?(this.disableProcessBtn(v.Lang.t("labelRequired")),this.templateManager.disableTemplates(v.Lang.t("labelRequired"))):(this.enableProcessBtn(),this.templateManager.enableTemplates(),this.checkProcessPulse())},R.prototype.checkLocalStorage=function(){null!=p.Storage.get("sign.task")&&null!=p.Storage.get("sign.elements")&&1==confirm("work in progress detected, do you want to load it?")?this.makeFromStorage():p.Storage.cleanSign()},R.prototype.makeFromStorage=function(){var e=p.Storage.get("sign.task");this.processManager.taskId=p.Storage.get("sign.task"),this.processManager.api.taskId=p.Storage.get("sign.task"),window.ilovepdfConfig.taskId=this.processManager.taskId=this.processManager.api.taskId=e,this.fromStorage=!0,this.loadFilesFromStorage(),this.makeWorkarea().then(function(){_.Toolbar.refresh()})},R.prototype.makeFromTemplate=function(e){var t=this;this.toggleWait(!0),this.processManager.api.templateGet(e).then(function(e){t.template=JSON.parse(e.template.elements);e=e.task;t.changeTaskId(e),t.fromTemplate=!0,t.loadFilesFromTemplate(),t.toggleWait(!1),t.makeWorkarea().then(function(){_.Toolbar.refresh()})},function(){t.toggleWait(!1)})},R.prototype.changeTaskId=function(e){this.processManager.taskId=e,this.processManager.api.taskId=e,window.ilovepdfConfig.taskId=this.processManager.taskId=this.processManager.api.taskId=e,this.sendEventTaskIdChanged(e)},R.prototype.makeWorkarea=function(){var t=this;if(1==this.workareaStarted)return a.prototype.makeWorkarea.call(this);this.files.files.forEach(function(e){t.filesAddedFirst.push(e.id)});var e=a.prototype.makeWorkarea.call(this);return this.signaturesManager.init(),o(".sign__template__select").hide(),e},R.prototype.loadFilesFromStorage=function(){this.filesTemp=p.Storage.get("sign.files",[]),this.renderTempFiles()},R.prototype.loadFilesFromTemplate=function(){var n=this;this.filesTemp=[],this.template.files.forEach(function(e){var t={id:x.Tools.randomId(),server_filename:e.server_filename,filename:e.filename,name:e.filename,size:100,pages:null};e.id=t.id,n.filesTemp.push(t)}),this.renderTempFiles()},R.prototype.renderTempFiles=function(){var i=this,r=this;this.filesTemp.forEach(function(n,e){r.processManager.api.getFilePreviewInfo(i.processManager.taskId,n.server_filename).then(function(e){var t=new h.File({id:n.id,server_filename:n.server_filename,name:n.name,size:n.size,pages:parseInt(e.pdf_page_number),percent:100,loaded:100});r.files.addFile(t),r.files.updateFile(t.id,e),i.firstFileLoaded||(i.triggerFirstFileReady(),i.firstFileLoaded=!0),r.renderPdfFromUpload(t.id)},function(e){})})},R.prototype.startPanels=function(){var e,t,n=this;1!=this.panelsStarted&&(a.prototype.startPanels.call(this),(e=this).modeSelector=new u.default,this.listenEventModeChanged(),this.receiversManager=new c.default(this.processManager.api),this.receiversManager.signaturesManager=this.signaturesManager,this.listenEventReceiversChanged(),this.listenEventReceiversCancel(),this.trustManager=new B.default({signaturesManager:this.signaturesManager,receiversManager:this.receiversManager,uuidManager:this.uuidManager}),this.signerIdentityManager=new U.SignerIdentityManager({signer:new l.SignerModel,api:this.processManager.api}),this.elementsManager.signerIdentityManager=this.signerIdentityManager,this.listenEventSignatureChanged(),1==this.files.files.length&&this.templateModal.setNameFromFile(this.files.files[0].name),this.listenEventSaveTemplate(),1==this.fromStorage?(this.modeSelector.loadFromStorage(),this.receiversManager.loadFromStorage(),this.signerIdentityManager.loadFromStorage(),y.ElementHelper.waitForFileRendered().then(function(){e.elementsManager.loadFromStorage()})):1==this.fromTemplate?(this.receiversManager.loadFromTemplate(this.template),this.modeSelector.loadFromTemplate(this.template),y.ElementHelper.waitForFileRendered().then(function(){e.elementsManager.loadFromTemplate(n.template)})):(t=j.Dialog.getVisibleDialogs().filter(function(e){return"Limits"===e.getDialogName()}).map(function(n){return new Promise(function(e,t){n.addEventListener("hidden",function(){e()})})}),Promise.all(t).then(function(){return n.modeSelector.init()})),this.signerIdentityManager.apply(),this.previewManager.setElements(this.elementsManager.elementsStack),this.previewManager.setSelector(this.elementsManager.elementsSelector))},R.prototype.fileAdded=function(n,e,t){void 0===t&&(t=!1);var i=this;return this.checkProcessBtn(),this.setFileNamesOnView(),1==this.files.files.length&&this.templateModal&&this.templateModal.setNameFromFile(this.files.files[0].name),I.UploaderStatus.set(this.files),0==o(".tool__preview__pages .loading").length&&(o(".tool__preview__pages").append('<div class="loading"></div>'),o(".editor__content").append('<div class="loading"></div>'),null!=(t=document.querySelector(".option__panel__disabled")))&&t.classList.add("show"),new Promise(function(e,t){"chained"==n.origin&&i.fileFromChainedAction(n),i.makeWorkarea().then(function(){_.Toolbar.refresh()}),e()})},R.prototype.assertNoFileUploadErrors=function(e){return 1==e.password?(this.fileAddError(e.id,!0,v.Lang.t("ProtectedFile")),this.toggleWait(!1),!1):!!e.pdf_pages||(this.fileAddError(e.id,!0,"DamagedFile"),this.toggleWait(!1),!1)},R.prototype.invalidUpload=function(e,t){void 0===t&&(t=null);try{var n=JSON.parse(e.response);if(n.error&&n.error.param&&n.error.param.form&&"is unsupported"==n.error.param.form)return this.files.removeFile(e.file.id),void window.Toastr.error(v.Lang.t("Upload error")+"<br>"+e.file.name,v.Lang.t("InvalidPdfForm"),{timeOut:6e3,positionClass:"toast-top-left"})}catch(e){}a.prototype.invalidUpload.call(this,e,t)},R.prototype.fileUploaded=function(e,t){t.pdf_page_number,t.pages=t.pdf_page_number;var n=this.files.getFile(e);1==n.reUploaded?this.files.updateFile(e,t):(a.prototype.fileUploaded.call(this,e,t),o(".tool__preview__pages .loading").first().remove(),o(".editor__content .loading").first().remove(),this.assertNoFileUploadErrors(n)&&(p.Storage.set("sign.task",this.processManager.taskId),t={id:e,server_filename:t.server_filename,name:n.name,pages:parseInt(t.pages),size:n.size},this.filesTemp.push(t),p.Storage.set("sign.files",this.filesTemp),this.firstFileLoaded||(this.triggerFirstFileReady(),this.firstFileLoaded=!0),this.renderPdfFromUpload(e),this.signaturesManager.setUploadedFilesCount(this.files.files.length),this.checkProcessBtn(),null!=(n=document.querySelector(".option__panel__disabled"))&&n.remove(),this.initPollToKeepAliveFiles()))},R.prototype.renderPdfFromUpload=function(e){this.elementsManager.renderingFile(!0);e=this.files.getFile(e),o(".tool__sidebar__inactive").fadeOut(),o(".tool__sidebar").css("overflow-y","auto"),this.setToolPreview(),this.setFilecount(),this.addEditorPages(e),this.renderEditorPages(e),this.addPreviewPages(e),this.renderPreviewPages(e),this.addPreviewActions(e),this.addPreviewFile(e),this.renderPreviewFile(e),this.addPreviewFileActions(e),e=!this.isAFileAddedAtBeginning(e.id);this.toolbarPaginate.refreshToolbar(e),this.elementsManager.renderingFile(!1)},R.prototype.setToolPreview=function(){1<this.files.files.length?(this.selectPreviewTab("files"),o(".tool__preview").addClass("multiple"),m.Tooltip.init(o(".tool__preview .tooltip")),setTimeout(function(){_.Toolbar.refresh()},500)):(o(".tool__preview").removeClass("multiple"),_.Toolbar.refresh(),this.selectPreviewTab("pages"))},R.prototype.listenEventModeChanged=function(){var t=this;window.addEventListener("modeChanged",function(e){"single"==e.detail.mode?(t.signerIdentityManager.canModalBeOpened=!0,t.uuidManager.disableUuid(),1==g.UserModel.isUser()?(g.UserModel.get().signature&&!t.signerIdentityManager.serviceFail&&!t.signerIdentityManager.constainsInvalidSetting||(t.signerIdentityManager.showModal(),t.signerIdentityManager.forceApply()),window.setTimeout(function(){T.default.showStep("dragStep",o("#sidebar"),"left")},1e3)):(t.signerIdentityManager.showModal(),t.signerIdentityManager.forceApply()),t.signerIdentityManager.enablePreview(),o("#processTaskTextBtn").html(v.Lang.t("processSingleBtn")),o("#processText").html(v.Lang.t("processingSingle"))):!0!==t.fromStorage&&(o("#processTaskTextBtn").html(v.Lang.t("processMultipleBtn")),o("#processText").html(v.Lang.t("processingMultiple")),t.signerIdentityManager.disablePreview(),t.receiversManager.showModal())})},R.prototype.listenEventReceiversChanged=function(){var t=this;window.addEventListener("receiversChanged",function(e){t.receivers=e.detail.receivers})},R.prototype.listenEventReceiversCancel=function(){var t=this;window.addEventListener("receiversCancel",function(e){t.modeSelector.mode=null,t.receiversManager.batchMode=!1,t.modeSelector.showModal()})},R.prototype.listenEventSaveTemplate=function(){var t=this;D.SignatureEventManager.addEventListener("signature:templates:save",function(e){t.templateName=e.detail.templateName,t.saveOrUpdateTemplate()})},R.prototype.saveOrUpdateTemplate=function(){var e,t=this,n=this.getData(),i=this,r=(n.template_name=this.templateName,this.toggleWait(!0),E.FormDataHelper.jsonToFormData(n)),o=this.files.getUploadedFiles(),a=0;for(e in o)r.append("files["+a+"][server_filename]",o[e].server_filename),r.append("files["+a+"][filename]",o[e].filename),a++;r.append("task",this.processManager.taskId),this.templateId?this.processManager.api.templateUpdate(this.templateId,r).then(function(e){t.templateId=e.template,t.toggleWait(!1),i.setCurrentTemplate(),window.Toastr.success(v.Lang.t("templateSaved"))},function(e){t.toggleWait(!1)}):(r.append("tool",this.tool),this.processManager.api.templateSave(r).then(function(e){t.templateId=e.template,t.toggleWait(!1),i.setCurrentTemplate(),window.Toastr.success(v.Lang.t("templateSaved"))},function(e){}))},R.prototype.setCurrentTemplate=function(){this.templateModal.setCurrentTemplate(this.templateName)},R.prototype.listenEventSignatureChanged=function(){D.SignatureEventManager.addEventListener("signature:signer_identity_modal:signature_changed",function(e){0==g.UserModel.isUser()&&""!=e.detail.signatureModel.signature&&window.setTimeout(function(){T.default.showStep("dragStep",o("#sidebar"),"left")},1e3)})},R.prototype.saveReceivers=function(){this.receivers=this.receiversManager.save()},R.prototype.onRenderEditorPages=function(e){this.isAFileAddedAtBeginning(e.id)||f.ScrollHelper.scrollToPage(e.id,1)},R.prototype.isAFileAddedAtBeginning=function(e){return this.filesAddedFirst.includes(e)},R.prototype.addPreviewFile=function(e){a.prototype.addPreviewFile.call(this,e);var t=this;o(".preview__page").removeClass("active"),o("#preview_file_"+e.id).on("click",function(){f.ScrollHelper.scrollToPage(e.id,1),o('.preview__page[data-file="'+e.id+'"][data-page="1"]').addClass("active")}),o('.preview__file[data-file="'+e.id+'"] .close').on("click",function(){k.ConfirmFileRemove.confirm(e.id,e.name).then(function(){t.removeFile(e.id)},function(){})}),o('.preview__page[data-file="'+e.id+'"][data-page="1"]').addClass("active")},R.prototype.removeFile=function(e){this.elementsManager.elementsSelector.fileRemoved(e),o('[data-file="'+e+'"]').remove(),this.elementsManager.fileRemoved(e),a.prototype.removeFile.call(this,e),this.setToolPreview(),this.checkProcessBtn()},R.prototype.fileRemoved=function(e){a.prototype.fileRemoved.call(this,e);e=this.files.countNotIgnored();this.signaturesManager.setUploadedFilesCount(e),this.toolbarPaginate.refreshToolbar(!1),this.checkProcessBtn()},R.prototype.selectPreviewTab=function(e){var t=o(".tool__preview__tabs");switch(t.find(".tool__preview__tabs__item").removeClass("active"),t.find("[data-rel='"+e+"']").addClass("active"),e){case"files":o(".tool__preview__files").removeClass("closed"),o(".tool__preview__pages").addClass("closed");break;case"pages":o(".tool__preview__files").addClass("closed"),o(".tool__preview__pages").removeClass("closed");break;default:throw"[Signature] Unknown Tool preview tab '"+e+"'"}},R.prototype.addPreviewFileActions=function(e){var t=this;o(".tool__preview__tabs__item").on("click",function(e){e=o(e.currentTarget).attr("data-rel");t.selectPreviewTab(e)}),new window.Sortable(o(".tool__preview__files__list")[0],{animation:200,onUpdate:function(e){t.filesReordered(e.oldIndex,e.newIndex)},onStart:function(e){},onEnd:function(e){}})},R.prototype.filesReordered=function(e,t){var n,i=o(".preview__file").eq(t).attr("data-file"),r=o('.tool__preview__pages [data-file="'+i+'"]'),i=o('.editor__content [data-file="'+i+'"]');0==t?(r.prependTo(".tool__preview__pages"),i.prependTo(".editor__content")):(n=o(".preview__file").eq(t-1).attr("data-file"),r.insertAfter(o('.tool__preview__pages [data-file="'+n+'"]').last()),i.insertAfter(o('.editor__content [data-file="'+n+'"]').last())),this.files.move(e,t)},R.prototype.getData=function(){var e=null,t=(g.UserModel.isUser()?e=g.UserModel.get():(e={name:null,email:null},"single"==this.modeSelector.mode&&(e.name=this.signerIdentityManager.signatureModel.signature)),"single"==this.modeSelector.mode&&(this.receiversManager.receivers[0].name=e.name,this.receiversManager.receivers[0].email=e.email),this.receiversManager.getData()),n=[],i=(this.files.files.forEach(function(e){n.push({server_filename:e.server_filename,filename:e.name})}),this.modeSelector.mode),r=(1==t.batch_mode&&(i="batch"),null),o=1==t.batch_mode?(r=this.elementsManager.getData(null,t.batch_mode),t.signers):this.elementsManager.getData(t.signers),o={name:e.name,email:e.email,language:t.language,lock_order:t.lock_order,signers:o,expiration_days:t.expiration_days,mode:i,timezone:x.Tools.getBrowserTimezone(),certified:this.signaturesManager.requestIsDigital?1:0,uuid_visible:this.uuidManager.getStatus(),signer_reminders:t.signer_reminders,verify_enabled:t.verify_enabled};return t.signer_reminder_days_cycle&&(o.signer_reminder_days_cycle=t.signer_reminder_days_cycle),1==t.batch_mode&&(o.batch_elements=r[0].files),t.identity&&(o.identity=t.identity),t.message&&(o.message_signer=o.message_validator=o.message_viewer=t.message),t.subject&&(o.subject_signer=o.subject_validator=o.subject_viewer=t.subject),1==g.UserModel.isUser()&&(o.custom_string=e.loginkey,o.custom_int=e.id),t.brand_logo&&t.brand_name&&(o.brand_logo=t.brand_logo,o.brand_name=t.brand_name),o},R.prototype.toggleWait=function(e){document.querySelector("#workArea .wait").style.display=e?"block":"none"},R.prototype.getPanelActiveOptions=function(){this.processManager.signer=this.signerIdentityManager.getSignature()},R.prototype.beforeProcess=function(){return n(this,void 0,void 0,function(){var t,n,i,r=this;return s(this,function(e){switch(e.label){case 0:return[4,this.reuploadBeforeProcessIfNeeded()];case 1:if(e.sent(),0==this.elementsManager.validate())return this.checkProcessBtn(),[2,Promise.reject(v.Lang.t("signersRequired"))];if(t=["multiple","batch"].includes(this.modeSelector.mode),i=this.signaturesManager.requestType,g.UserModel.isPremium(),g.UserModel.get(),t){if(0==g.UserModel.isUser())return(n=A.SignatureDialogs.auth("sign")).addEventListener("closed",function(){!1!==g.UserModel.isUser()&&document.getElementById("processTask").click()}),n.show(),[2,Promise.reject("User need to be registered")];if(g.UserModel.get(),g.UserModel.isPremium(),"electronic"===i&&!this.signaturesManager.doesUserCanDoElectronicRequests())return(n=A.SignatureDialogs.becomePremium()).addEventListener("closed",function(){r.signaturesManager.doesUserCanDoElectronicRequests()&&document.getElementById("processTask").click()}),n.show(),[2,Promise.reject("Non-premium user run out of electronic signatures. Needs to become premium")]}if("digital"===i){if(0==g.UserModel.isUser())return A.SignatureDialogs.auth("sign").show(),[2,Promise.reject("User need to be registered")];if(!this.signaturesManager.doesUserHaveEnoughSignatures())return this.signaturesManager.electronicActionBtn.trigger("click"),this.signaturesManager.showSuitableDialogToObtainSignatures().addEventListener("closed",function(e){r.signaturesManager.doesUserHaveEnoughSignatures()&&(r.signaturesManager.digitalActionBtn.trigger("click"),document.getElementById("processTask").click())}),[2,Promise.reject("User need to buy signatures")]}return t&&!L.SmsPurchaseManager.info.doesUserHaveEnoughSmsValidations?((n=L.SmsPurchaseManager.showSuitableDialogToObtainSms(L.SmsPurchaseManager.info.needed)).addEventListener("closed",function(){L.SmsPurchaseManager.info.doesUserHaveEnoughSmsValidations&&document.getElementById("processTask").click()}),[2,Promise.reject("User needs to buy SMS validations")]):!1===this.files.checkFilesUploaded()?[2,new Promise(function(e,t){t("Wait for files uploaded")})]:(p.Storage.cleanSign(),clearInterval(this.keepalive_interval),this.keepalive_interval=void 0,t?[4,this.checkEmailIsConfirmed()]:[3,3]);case 2:e.sent(),e.label=3;case 3:return this.options=this.getData(),"single"!=this.modeSelector.mode||g.UserModel.isLoggedIn()?this.processManager.changeProcessToOriginal():(i=this.signerIdentityManager.signatureModel.getData(),this.options.sign_data=i,1<this.files.count()?this.options.download_filename="signed.zip":this.options.download_filename=this.files.files[0].name,this.processManager.changeProcessToSelfsignedNologin()),[2,a.prototype.beforeProcess.call(this)]}})})},R.prototype.reuploadBeforeProcessIfNeeded=function(){return n(this,void 0,void 0,function(){var n=this;return s(this,function(e){return[2,new Promise(function(e,t){if((new Date).getTime()-n.startedAt<36e5)return e();n.processManager.api.touchTask(n.processManager.taskId).catch(function(e){clearInterval(n.keepalive_interval),n.keepalive_interval=void 0,n.reuploadAllFiles()}).finally(function(){return e()})})]})})},R.prototype.listenEventCheckProcessButton=function(){var t=this;D.SignatureEventManager.addEventListener("signature:check_process_button",function(e){t.checkProcessBtn()},!0)},R.prototype.helpModal=function(){o(document).on("keypress",function(e){return!(!e.target.hasAttribute("contenteditable")&&!e.target.type)||0<o('[contenteditable="true"]').length||void("h"==e.key&&o("#shortcutsModal").modal("toggle"))})},R.prototype.fileFromChainedAction=function(t){var n;"chained"===t.origin&&(n=this).processManager.api.query("get","pdfrender/"+this.processManager.taskId+"/"+t.server_filename.substring(0,t.server_filename.length-4)).then(function(e){n.fileUploaded(t.id,e)})},R.prototype.initPollToKeepAliveFiles=function(){var t=this;this.keepalive_interval||(this.keepalive_interval=setInterval(function(){t.processManager.api.touchTask(t.processManager.taskId).then(function(e){}).catch(function(e){clearInterval(t.keepalive_interval),t.keepalive_interval=void 0,t.reuploadAllFiles()})},3e5))},R.prototype.reuploadAllFiles=function(){[window.ilovepdf.uploadManager.plupload].concat(this.signerIdentityManager.getAllUploaders()).forEach(function(e){e&&e.reUploadAllFiles()})},R.prototype.sendEventTaskIdChanged=function(e){e=new CustomEvent("taskIdChanged",{detail:{taskId:e}});window.dispatchEvent(e)},R.prototype.timeout=function(){},R);function R(e){var t=a.call(this,e=void 0===e?{}:e)||this;return t.filesAddedFirst=[],t.confirmEmail=function(){return new Promise(function(e,t){var n,i;!g.UserModel.get()||1==g.UserModel.get().active?e(!0):(n=new N.default,i=new F.EmailConfirmContext,n.setContentBuilder(function(){return i}),n.show(),n.addEventListener("closed",function(){1==i.confirmed?e(!0):t(!1)}))})},t.checkEmailIsConfirmed=function(){return n(t,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.confirmEmail()];case 1:return[2,e.sent()]}})})},t.removeFilesOnLimitReatched=!0,t.elementsManager=new d.ElementsManager({files:t.files}),t.listenEventCheckProcessButton(),t.signaturesManager=new b.default,t.uuidManager=new P.UuidManager,t.templateModal=new w.TemplateModal,o("#orderByName").remove(),t.initTemplateActions(),t.helpModal(),C.CanvasHelper.forcePrerenderFonts(M.FONT_FAMILY_EXPLORER,M.FONT_STYLES),t.cleanStorage(),t.beforeUnload(),t.startedAt=(new Date).getTime(),t}z.SignOptionsManager=t}.call(this,H(1))},function(e,p,h){"use strict";!function(a){var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(p,"__esModule",{value:!0}),p.RECEIBER_ITEM_PART=p.ReceiverItem=void 0,h(193)),o=h(37),s=h(18),l=h(81),c=h(63),u=h(15),t=e(h(500)),n=h(75),d=h(228);function i(e,t,n){var i=this;void 0===e&&(e=null),void 0===t&&(t=!1),void 0===n&&(n={}),this._onInputName=function(e){void 0===e&&(e=!0);var t=a(i.inputName);i.removeError(t),e&&i.sendEventReceiversItemChanged()},this._onInputEmail=function(e){void 0===e&&(e=!0);var t=a(i.inputEmail);t.val(t.val().toString().replace(" ","")),i.removeError(t),i.removeError(a(".receiver__email input")),e&&i.sendEventReceiversItemChanged()},this.disableSmsValidation=function(){""===a("#"+i.id+" .receiver__element__sms input").val()?(a("#"+i.id+" .receiver__action__sms").removeClass("active"),a("#"+i.id+" .receiver__element__sms").remove()):a("#"+i.id+" .receiver__element__sms input").focus()},this.enableSmsValidation=function(){0<a("#"+i.id+" .receiver__element__sms").length||(a("#"+i.id+" .receiver__action__sms").addClass("active"),i.initPhoneField())},this._onEmailChanged=function(){var e=i.inputEmail,t=(e.value=e.value.toLowerCase(),l.TextHelper.stripTags(e.value.toString()).replace(" ",""));0==s.Tools.isEmail(t)?e.classList.add("error"):(i.removeError(a(e)),i.receiver.email=t)},this._onNameChanged=function(){var e=a(i.inputName);""==e.val()?e.addClass("error"):(i.removeError(e),i.receiver.name=l.TextHelper.stripTags(e.val().toString()))},this.receiver=e?new r.ReceiverModel(e):new r.ReceiverModel,this.id=p.RECEIBER_ITEM_PART+this.receiver.id,Object.assign(this,n),this.create(t),this.init()}i.prototype.create=function(e){var t=this,n=(void 0===e&&(e=!1),a(a("#receiverItemTemplate").html())),i=n.find(".receiver__name input"),r=n.find(".receiver__email input");n.attr("id",this.id),i.val(this.receiver.name),r.val(this.receiver.email),i.on("keyup change",function(){t._onInputName()}),r.on("keyup change",function(){t._onInputEmail()}),n.find(".receiver__type select").val(this.receiver.type),"validator"===this.receiver.type?(n.find(".receiver__type__validator__info").show(),n.find(".receiver__type__viewer__info").hide()):"viewer"===this.receiver.type?(n.find(".receiver__type__validator__info").hide(),n.find(".receiver__type__viewer__info").show()):(n.find(".receiver__type__validator__info").hide(),n.find(".receiver__type__viewer__info").hide()),n.find(".receiver__count").html(this.receiver.num.toString()).addClass(this.receiver.colorClass),n.find(".receiver__count").html((a(".receiver-list .receiver-list__item").length+1).toString()),a(".receiver-list").append(n),""!=this.receiver.password&&null!=this.receiver.password&&(this.initPasswordField(),a("#"+this.id+" .receiver__element__password input").val(this.receiver.password),a("#"+this.id+" .receiver__action__password").addClass("active")),""!=this.receiver.phone&&null!=this.receiver.phone&&(this.initPhoneField(),this.mobilePhoneInput.setNumber("+"+this.receiver.phone),a("#"+this.id+" .receiver__action__sms").addClass("active")),this.receiver.allowCostumize&&"all"!=this.receiver.allowCostumize&&(this.initAllowCustomizeField(),a("#"+this.id+" .receiver__element__allow_costumize select").val(this.receiver.allowCostumize),a("#"+this.id+" .receiver__action__allow_costumize").addClass("active")),1==e&&n.find(".receiver__type select").attr("disabled","disabled"),o.Tooltip.init(a("#"+this.id+" .tooltip")),i.focus(),this.inputName=i[0],this.inputEmail=r[0]},i.prototype.init=function(){var t=this,n=this,e=(a("#"+this.id+" .receiver__action__password").on("click",function(e){1==a("#"+n.id+" .receiver__action__password").hasClass("active")?""===a("#"+n.id+" .receiver__element__password input").val()?(a("#"+n.id+" .receiver__action__password").removeClass("active"),a("#"+n.id+" .receiver__element__password").remove()):a("#"+n.id+" .receiver__element__password input").focus():0<a("#"+n.id+" .receiver__element__password").length||(a("#"+n.id+" .receiver__action__password").addClass("active"),n.initPasswordField()),t.sendEventReceiversItemChanged()}),a("#"+this.id+" .receiver__action__sms").on("click",function(e){"disableSmsValidation"==(t.smsValidationIsEnabled()?"disableSmsValidation":"enableSmsValidation")?t.disableSmsValidation():t.enableSmsValidation(),t.sendEventReceiversItemChanged()}),a("#"+this.id+" .receiver__action__allow_costumize").on("click",function(e){if(1==a("#"+n.id+" .receiver__action__allow_costumize").hasClass("active"))return"all"===a("#"+n.id+" .receiver__element__allow_costumize select").val()?(a("#"+t.id+" .receiver__action__allow_costumize").removeClass("active"),void a("#"+n.id+" .receiver__element__allow_costumize").remove()):void a("#"+n.id+" .receiver__element__allow_costumize select").focus();0<a("#"+n.id+" .receiver__element__allow_costumize").length||(a("#"+n.id+" .receiver__action__allow_costumize").addClass("active"),n.initAllowCustomizeField())}),a("#"+this.id+" .receiver__name input")),i="input";1==c.isEdgeBrowser()&&(i="keyup"),e.on(i,this._onNameChanged);a("#"+this.id+" .receiver__email input").on(i,this._onEmailChanged);var r=a("#"+this.id+" .receiver__type select");r.on("change",function(){n.receiver.type=r.val().toString(),"signer"!==n.receiver.type?(a("#"+n.id+" .receiver__action__sms").hide(),a("#"+n.id+" .receiver__action__allow_costumize").hide(),a("#"+n.id+" .receiver__element__sms").hide(),a("#"+n.id+" .receiver__element__allow_costumize").hide()):(a("#"+n.id+" .receiver__action__sms").show(),a("#"+n.id+" .receiver__action__allow_costumize").show(),a("#"+n.id+" .receiver__element__sms").show(),a("#"+n.id+" .receiver__element__allow_costumize").show()),"validator"===n.receiver.type?(a("#"+n.id+" .receiver__type__validator__info").show(),a("#"+n.id+" .receiver__type__viewer__info").hide()):"viewer"===n.receiver.type?(a("#"+n.id+" .receiver__type__validator__info").hide(),a("#"+n.id+" .receiver__type__viewer__info").show()):(a("#"+n.id+" .receiver__type__validator__info").hide(),a("#"+n.id+" .receiver__type__viewer__info").hide())}),a("#"+this.id+" .receiver__delete").on("click",function(){n.remove()}),this.initSuggestions()},i.prototype.initSuggestions=function(){var i=this;this.nameAutocomplete=new t.default(this.inputName),this.emailAutocomplete=new t.default(this.inputEmail),[{fieldName:"name",autocompleteInstance:this.nameAutocomplete},{fieldName:"email",autocompleteInstance:this.emailAutocomplete}].forEach(function(e){var n=e.autocompleteInstance,t=encodeURIComponent(e.fieldName);n.addEventListener("input",function(e){u.UserModel.isLoggedIn()&&(e=encodeURIComponent(e.detail.value),e=encodeURI("v1/signature-contacts/suggestions?"+t+"="+e),i.api.query("GET",e,null,!1,!0,"service").then(function(e){var e=e.suggestions,t=[];e.forEach(function(e){t.push({data:e,title:e.name,subtitle:e.email})}),n.addEntries(t).show()}))}),n.addEventListener("matchSelected",function(e){var t;u.UserModel.isLoggedIn()&&(t=e.detail.selectedMatch.data,i.lastSuggestionSelected=e.detail.selectedMatch.data,i.inputName.value=t.name,i.inputEmail.value=t.email,i._onEmailChanged(),i._onNameChanged(),i._onInputEmail(!1),i._onInputName(!1),e=a("#"+i.id+" .receiver__element__sms input")[0],t=null!=(t=i.lastSuggestionSelected.phone)?t:"",e&&i.mobilePhoneInput&&i.mobilePhoneInput.setNumber(t),i.sendEventReceiversItemChanged(),n.hide(),e=[],i.lastSuggestionSelected.phone||e.push("phone"),i.validate(e))})})},i.prototype.checkCertsEnabled=function(){1==a("#certifiedCheckbox").is(":checked")?(a(".receiver__action__sms").hide(),a(".receiver__element__sms").hide()):(a(".receiver__action__sms").show(),a(".receiver__element__sms").show())},i.prototype.initPasswordField=function(){var e=this,t=this,n=a(a("#receiverPasswordTemplate").html());a("#"+t.id+" .receiver__elements").append(n),o.Tooltip.init(a("#"+t.id+" .receiver__element__password .tooltip")),a("#"+t.id+" .receiver__element__password input").focus(),a("#"+t.id+" .receiver__element__password .showPassword").on("click",function(){var e=a("#"+t.id+" .receiver__element__password input");"password"===e.attr("type")?e.attr("type","text"):e.attr("type","password")}),a("#"+t.id+" .receiver__element__password input").on("change",function(){t.receiver.password=a("#"+t.id+" .receiver__element__password input").val().toString()}),a("#"+t.id+" .receiver__element__password .receiver__element__delete").on("click",function(){e.receiver.password=null,a("#"+t.id+" .receiver__element__password").remove(),a("#"+t.id+" .receiver__action__password").removeClass("active"),t.sendEventReceiversItemChanged()}),a("#"+t.id+" .receiver__element__password input").on("keyup change",function(e){e=a(e.currentTarget);t.removeError(e),t.sendEventReceiversItemChanged()})},i.prototype.initPhoneField=function(){var e=this,t=a(a("#receiverSmsTemplate").html()),t=(a("#"+this.id+" .receiver__elements").append(t),document.querySelector("#"+this.id+" .receiver__element__sms")),n=t.querySelector("input"),i=(this.mobilePhoneInput=new d.MobilePhoneInput(n),this);this.mobilePhoneInput.onChange(function(){e.setPhone()}),this.mobilePhoneInput.telInput.focus(),this.mobilePhoneInput.onChange(function(e){e=a(e.currentTarget);i.removeError(e),i.sendEventReceiversItemChanged()}),o.Tooltip.init(a("#"+i.id+" .receiver__element__sms .tooltip")),t.querySelector(".receiver__element__delete").addEventListener("click",function(){e.receiver.phone="",document.querySelector("#"+i.id+" .receiver__element__sms").remove(),document.querySelector("#"+i.id+" .receiver__action__sms").classList.remove("active"),e.sendEventReceiversItemChanged()}),this.lastSuggestionSelected&&(n=a("#"+this.id+" .receiver__email input").val(),this.lastSuggestionSelected.email===n)&&(this.mobilePhoneInput.setNumber(this.lastSuggestionSelected.phone),i.sendEventReceiversItemChanged())},i.prototype.initAllowCustomizeField=function(){var e=this,t=this,n=a(a("#receiverCostumizeTemplate").html());a("#"+t.id+" .receiver__elements").append(n),o.Tooltip.init(a("#"+t.id+" .receiver__element__allow_costumize .tooltip")),a("#"+t.id+" .receiver__element__allow_costumize select").focus(),a("#"+t.id+" .receiver__element__allow_costumize select").on("change",function(){t.receiver.allowCostumize=a("#"+t.id+" .receiver__element__allow_costumize select").val().toString()}),a("#"+t.id+" .receiver__element__allow_costumize .receiver__element__delete").on("click",function(){e.receiver.allowCostumize=null,a("#"+t.id+" .receiver__element__allow_costumize").remove(),a("#"+t.id+" .receiver__action__allow_costumize").removeClass("active")})},i.prototype.setPhone=function(){this.receiver.phone=this.mobilePhoneInput.mobileValue},i.prototype.remove=function(){1!=a(".receiver-list .receiver-list__item").length&&(this.removed=!0,this.receiver=null,a("#"+this.id).remove(),this.sendEventReceiversItemRemoved())},i.prototype.isRemoved=function(){return!0===this.removed},i.prototype.isEmpty=function(){try{return""==a("#"+this.id+" .receiver__name input").val().toString()&&""==a("#"+this.id+" .receiver__email input").val().toString()}catch(e){return!0}},i.prototype.smsValidationIsEnabled=function(){return a("#"+this.id+" .receiver__action__sms").hasClass("active")},i.prototype.passwordIsEnabled=function(){return a("#"+this.id+" .receiver__action__password").hasClass("active")},i.prototype.isIncomplete=function(){var e=a("#"+this.id+" .receiver__name input"),t=a("#"+this.id+" .receiver__email input"),n=a("#"+this.id+" .receiver__element__sms input"),i=a("#"+this.id+" .receiver__element__password input"),n=this.smsValidationIsEnabled()&&""===n.val().toString(),i=this.passwordIsEnabled()&&""===i.val().toString();try{return""==e.val().toString()||""==t.val().toString()||n||i}catch(e){return!0}},i.prototype.applyNumber=function(){this.receiver.num=parseInt(a("#"+this.id+" .receiver__count").html())},i.prototype.getReceiver=function(){return this.receiver},i.prototype.sendEventReceiversItemRemoved=function(){var e={elementId:this.id};n.SignatureEventManager.dispatchEvent("signature:receiver_item:remove",e)},i.prototype.sendEventReceiversItemAdded=function(){var e={elementId:this.id};n.SignatureEventManager.dispatchEvent("signature:receiver_item:add",e)},i.prototype.sendEventReceiversItemChanged=function(){var e={elementId:this.id};n.SignatureEventManager.dispatchEvent("signature:receiver_item:change",e)},i.prototype.validate=function(e){void 0===e&&(e=[]);for(var t=["Name","Email","Password","Phone"],n=0;n<t.length;n++){var i=t[n],r=this["validate"+i],i=!function(t){return e.find(function(e){return e.toLowerCase()===t.toLowerCase()})}(i.toLocaleLowerCase());if(i)if(!r.call(this))return!1}return!0},i.prototype.removeError=function(e){e.removeClass("error").removeClass("shake")},i.prototype.setError=function(e){e.addClass("error").removeClass("shake"),a(".dialog__body").animate({scrollTop:e[0].getBoundingClientRect().top-150,duration:200},function(){e.addClass("shake")})},i.prototype.validateName=function(){return""!=a("#"+this.id+" .receiver__name input").val()||(this.setError(a("#"+this.id+" .receiver__name input")),!1)},i.prototype.validateEmail=function(){var n,i=this,r=this,o=a("#"+this.id+" .receiver__email input").val();return""==o||0==s.Tools.isEmail(o)?(this.setError(a("#"+this.id+" .receiver__email input")),!1):(n=!1,a(".receiver__email input").each(function(e,t){a(t).val()==o&&a(t).closest(".receiver-list__item").attr("id")!=i.id&&(a("#"+i.id+" .receiver__email input").addClass("error"),r.setError(a("#"+i.id+" .receiver__email input")),a(t).addClass("error"),n=!0)}),!n)},i.prototype.validatePassword=function(){var e=a("#"+this.id+" .receiver__element__password input"),t=!this.passwordIsEnabled()||0<e.val().toString().length;return t||(this.setError(e),e.addClass("error")),t},i.prototype.validatePhone=function(){var e,t;return!this.mobilePhoneInput||(e=this.mobilePhoneInput.telInput,t=!0,(t=this.smsValidationIsEnabled()?this.mobilePhoneInput.isMobileValid:t)||(this.setError(a(e)),e.classList.add("error")),t)},p.ReceiverItem=i,p.RECEIBER_ITEM_PART="ri_"}.call(this,h(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(25),a=(i.prototype.execute=function(e){return void 0===e&&(e=0),this.promises++,this.actionCancelled=!1,new Promise(this.executeAction.bind(this,e,this.promises))},i.prototype.executeAction=function(e,t,n){var i=this;setTimeout(function(){i.actionCancelled||t===i.promises&&(i.promises=0,n())},e)},i);function i(){var e=this;this.promises=0,this.actionCancelled=!1,this.stopAction=function(){e.actionCancelled=!0}}s.prototype.addEntries=function(e){this.clearEntries(),this.adjustAutocompleteWidth();for(var t=0;t<e.length&&t<this.MAX_ENTRIES;t++){var n=e[t];this.addEntry(n.data,n.title,n.subtitle)}return this},s.prototype.addEntry=function(e,t,n){var i=this,r=(void 0===n&&(n=null),this.initWindowAmidMouseupHandler(),document.createElement("div")),o=document.createElement("div"),a=document.createElement("div");a.classList.add("autocomplete__entry__fields"),a.appendChild(o),r.appendChild(a),r.classList.add("autocomplete__entry"),o.classList.add("autocomplete__entry__title"),o.innerText=t,n&&((o=document.createElement("div")).classList.add("autocomplete__entry__subtitle"),o.innerText=n,a.appendChild(o)),this.entries.push({data:e,title:t,subtitle:n,dom:r}),r.addEventListener("mouseenter",function(e){i.setActiveEntry(e.currentTarget)}),r.addEventListener("mousemove",function(e){i.setActiveEntry(e.currentTarget)}),r.addEventListener("click",function(t){var e=i.entries.find(function(e){return e.dom===t.currentTarget});i.sendMatchSelected(e)}),r.addEventListener("mousedown",function(e){s._amidClick=!0}),r.addEventListener("touchend",function(t){var e=i.entries.find(function(e){return e.dom===t.currentTarget});i.sendMatchSelected(e)}),this.autocomplete.appendChild(r),window.tippy&&window.tippy(r,{allowHTML:!0,content:"<div>"+t+"</div><div>"+n+"</div>",placement:"right"})},s.prototype.sendMatchSelected=function(e){this.setActiveEntry(e.dom),this.dispatchEvent(new r.IloveEvent("matchSelected",{selectedMatch:e})),this.reset()},s.prototype.getEntryAt=function(e){return this.entries[e]},s.prototype.clearEntries=function(){this.entries=[],this.autocomplete.innerHTML="",this.activeEntryIdx=-1},s.prototype.initEventListeners=function(){var t=this,e=(this.autocomplete,this.input);e.addEventListener("input",this._onInput),e.addEventListener("keydown",this._onInputKeydown),e.addEventListener("keyup",this._onInputKeyup),e.addEventListener("focusout",function(e){t.isAmidClick()||(t.throttle.stopAction(),setTimeout(t.hide,50))})},s.prototype.setActiveEntry=function(t){this.clearActiveEntry();var e=null;"number"==typeof t?(t<0&&(t=this.entries.length-Math.abs(t)),t%=this.entries.length,e=this.entries[t].dom,this.activeEntryIdx=t):(this.activeEntryIdx=this.entries.findIndex(function(e){return e.dom===t}),e=t),e.classList.add("autocomplete__entry__active")},s.prototype.clearActiveEntry=function(){var e=this.autocomplete.querySelector(".autocomplete__entry__active");e&&e.classList.remove("autocomplete__entry__active")},s.prototype.adjustAutocompleteWidth=function(){var e=this.input.getBoundingClientRect().width;this.autocomplete.style.width=e+"px"},s.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("autocomplete"),e.classList.add("hidden"),e},s.prototype.attachToInput=function(e,t){var n,i;this.autocompleteWrapper||(n=t.parentElement,(i=document.createElement("div")).classList.add("autocomplete__container"),this.autocompleteWrapper=i,n.removeChild(t),i.appendChild(t),n.appendChild(i),i.appendChild(e))},s.prototype.reset=function(){this.hide(),this.clearEntries()},s.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},s.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},s._amidClick=void 0;n=s;function s(e,t){var i=this;void 0===t&&(t={}),this.MAX_ENTRIES=6,this.isAutocompleteHidden=!0,this.entries=[],this.activeEntryIdx=-1,this.shown=!1,this.show=function(){return i.shown||(i.autocomplete.classList.remove("hidden"),i.shown=!0),i},this.hide=function(){return i.shown&&(i.activeEntryIdx=-1,i.autocomplete.classList.add("hidden"),i.shown=!1),i},this.isAmidClick=function(){return s._amidClick},this.initWindowAmidMouseupHandler=function(){void 0===s._amidClick&&(s._amidClick=!1,window.addEventListener("mouseup",function(){s._amidClick=!1}))},this._onInput=function(t){0===i.input.value.length?i.reset():i.throttle.execute(500).then(function(){var e;0===i.input.value.length?i.reset():"Enter"!==t.code&&(e=i.input.value,i.dispatchEvent(new r.IloveEvent("input",{value:e})))})},this._onInputKeyup=function(e){i.shown&&"Enter"===e.code&&0<=i.activeEntryIdx&&i.sendMatchSelected(i.getEntryAt(i.activeEntryIdx))},this._onInputKeydown=function(e){if(!0!==e.isComposing)switch(e.code){case"Escape":e.preventDefault(),i.shown&&i.hide();break;case"ArrowUp":e.preventDefault(),0<i.entries.length&&i.setActiveEntry(i.activeEntryIdx-1);break;case"ArrowDown":e.preventDefault(),0<i.entries.length&&i.setActiveEntry(i.activeEntryIdx+1);break;case"Space":var t=e.ctrlKey||e.metaKey,n=0<i.entries.length;"Space"===e.code&&t&&n&&i.show()}},this.eventEmitter=new o.ILoveEventEmitter,this.input=e,this.props=t,this.autocomplete=this.createElement(),this.attachToInput(this.autocomplete,this.input),this.throttle=new a,this.initEventListeners(),this.adjustAutocompleteWidth()}t.default=n},function(e,n,t){"use strict";!function(t){function e(){}Object.defineProperty(n,"__esModule",{value:!0}),n.ScrollHelper=void 0,e.scrollToElement=function(e){e=t(e).parent().position().top+t(e).position().top;t("#workArea").animate({scrollTop:e-parseInt((t(".tool__workarea").height()/3).toString())},500)},n.ScrollHelper=e}.call(this,t(1))},function(e,s,l){"use strict";!function(t){Object.defineProperty(s,"__esModule",{value:!0});var n=l(193),i=l(15),r=l(190),e=l(37),o=l(75);function a(){this.mode=null}a.prototype.showModal=function(){null==this.mode&&(e.Tooltip.hide(t("#pickfiles")),t("#selectModeModal").modal("show"))},a.prototype.hideModal=function(){t("#selectModeModal").modal("hide")},a.prototype.init=function(){this.initModalModeSelectorActions(),this.showModal(),this.listenEventSignatureCancel()},a.prototype.initModalModeSelectorActions=function(){var e=this;t("#singleMode").on("click",function(){e.mode="single",t("#editReceivers").hide(),t("#signaturePanel").show(),t("#groupsPanel").show(),t("#elementsPanel").show(),e.sendEventModeChanged(),e.sendEventReceiversAdded(),e.saveToStorage(),e.hideModal()}),t("#multipleMode").on("click",function(){e.setMultipleMode()})},a.prototype.setMultipleMode=function(){this.mode="multiple",this.saveToStorage(),this.sendEventModeChanged(),this.hideModal()},a.prototype.saveToStorage=function(){r.Storage.set("sign.mode",this.mode)},a.prototype.loadFromStorage=function(){this.mode=r.Storage.get("sign.mode"),("single"==this.mode?(t("#editReceivers").hide(),t("#signaturePanel")):(t("#signaturePanel").hide(),t("#editReceivers").show(),t("#signersPanel"))).show(),t("#groupsPanel").show(),t("#elementsPanel").show(),this.sendEventModeChanged()},a.prototype.loadFromTemplate=function(e){this.mode="multiple",t("#signaturePanel").hide(),t("#editReceivers").show(),t("#signersPanel").show(),t("#groupsPanel").show(),t("#elementsPanel").show(),this.sendEventModeChanged()},a.prototype.sendEventModeChanged=function(){t("body").removeClass("mode-single").removeClass("mode-multiple"),t("body").addClass("mode-"+this.mode),"multiple"==this.mode?t("#saveTemplates").show():t("#saveTemplates").hide();var e=new CustomEvent("modeChanged",{detail:{mode:this.mode}});window.dispatchEvent(e)},a.prototype.sendEventReceiversAdded=function(){var e=null,e=i.UserModel.isUser()?i.UserModel.get():{email:null,name:null,type:"signer"},e=new n.ReceiverModel({email:e.email,name:e.name,type:"signer"}),t={receivers:[e]};r.Storage.set("sign.receivers",[e]),o.SignatureEventManager.dispatchEvent("signature:receiver:add",t)},a.prototype.listenEventSignatureCancel=function(){var t=this;window.addEventListener("signatureCancel",function(e){e=e.detail.signatureModel;"multiple"==t.mode&&""==e.signature&&t.setMultipleMode()})},a.prototype.sendEventUuidDisable=function(){var e=new CustomEvent("uuidDisable");window.dispatchEvent(e)},s.default=a}.call(this,l(1))},function(e,M,O){"use strict";!function(h){var e=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}o((l=l.apply(e,a||[])).next())})},f=this&&this.__generator||function(i,r){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=r.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(M,"__esModule",{value:!0}),M.ElementsManager=void 0,O(251)),o=t(O(206)),m=O(199),i=O(504),r=O(505),a=O(506),s=O(508),l=O(509),c=O(190),u=O(510),d=O(165),p=O(171),g=O(511),v=O(512),y=O(513),_=t(O(298)),b=O(344),w=O(514),E=O(75),S=O(515),x=O(284),T=O(252),P=O(18),k=O(37),I=O(173);function C(e){void 0===e&&(e={}),Object.assign(this,e),this.init()}C.prototype.init=function(){this.initSidebarDragActions(),this.initSidebarActions(),this.initSignerClick(),this.initKeyActions(),this.listenEventReceiversChanged(),this.listenEventElementRemoved(),this.listenEventRemoveGroup(),this.listenEventModeChanged(),this.listenEventSignatureChanged(),this.listenEventEditCloneGroupChanged(),this.listenEventElementDetachGroup(),this.listenEventUuidChanged(),this.listenEventInputEditModal(),this.elementsStack=new n.ElementsStack,this.elementCounter=new s.ElementCounter(this.elementsStack),this.signerSelector=new u.SelectSigner,this.signersSelector=new i.SelectSigners,this.removeGroupModal=new r.RemoveGroupModal(this.elementsStack,this.files),this.elementsSelector=new a.ElementsSelector(this.elementsStack,this.files),this.cloneModal=new l.CloneGroupModal(this.elementsStack,this.files),this.inputEditModal=new w.InputEditModal,this.selectDateFormatModal=new S.SelectDateFormatModal,this.copyPasteActions(),this.doubleClickActions()},C.prototype.initSidebarActions=function(){var n=this;document.querySelectorAll(".sign__draggable__actions__edit").forEach(function(t){t.addEventListener("click",function(){var e=t.closest(".sign__draggable__content").getAttribute("data-type").replace("Element","");n.signerIdentityManager.showModal(e)})})},C.prototype.initSidebarDragActions=function(){var t=this,r=this,e=(window.interact=o.default,o.default(".draggable")),n=0,i=!1;e.draggable({inertia:!0,onmove:function(e){var t,n,i,r=e.target;r.classList.contains("clonElement")&&(n=r.getAttribute("data-x"),t=r.getAttribute("data-y"),n=parseFloat(n)||0,t=parseFloat(t)||0,i=e.dx,e=e.dy,n=n+i,i=t+e,r.style.transform="translate("+n+"px, "+i+"px)",r.style.zIndex="99",r.setAttribute("data-x",n),r.setAttribute("data-y",i))},onend:function(e){var t,n,i=e.target;i.classList.contains("clonElement")&&(i.classList.contains("can-drop")?(t=i.getAttribute("data-type"),i.remove(),e={x:e.pageX,y:e.pageY},h(i).hasClass("signature__signers__item")?(n=h(i).attr("data-id"),r.addSigner(n,e)):(r.elementsSelector.clearSelected(),r.addElement(t,e))):i.remove())},modifiers:[o.default.modifiers.restrict({restriction:"parent",endOnly:!0})]}).on("move",function(e){var t,n=e.interaction;e.target.classList.contains("clonElement")&&"false"!=e.currentTarget.getAttribute("clonable")||n.pointerIsDown&&!n.interacting()&&"false"!=e.currentTarget.getAttribute("clonable")&&(t=h(e.currentTarget).find(".draggable__content")[0],(t=(t=h(e.currentTarget).hasClass("draggable__content")?e.currentTarget:t).cloneNode(!0)).classList.add("clonElement"),t.setAttribute("clonable","false"),t.style.position="absolute",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",h(t).find(".sign__draggable__count").remove(),t.classList.contains("sign__draggable__content--btn")||h(t).find(".sign__draggable__text").remove(),document.body.appendChild(t),n.start({name:"drag"},e.interactable,t))}).on("dblclick",function(e){clearTimeout(n),i=!0,e.target.closest(".sign__draggable__preview")?(e=h(e.currentTarget).find(".draggable__content").attr("data-type").replace("Element",""),t.signerIdentityManager.showModal(e)):i=!1},!0).on("click",function(t){!function(e){if(e.currentTarget.classList.contains("signature__area"))return 1;if(e.target.closest(".sign__draggable__actions"))return 1;if(e.target.classList.contains("signature__signers__item"))return 1;return}(t)&&(n=setTimeout(function(){var e;i||(e=h(t.currentTarget).find(".draggable__content").attr("data-type"),r.addElement(e)),i=!1},200))}),o.default(".editor__page").dropzone({accept:".draggable__content",overlap:.75,ondropactivate:function(e){e.relatedTarget.classList.add("dragging")},ondropdeactivate:function(e){e.relatedTarget.classList.remove("dragging","cannot-drop")},ondragenter:function(e){e=e.relatedTarget;e.classList.remove("cannot-drop"),e.classList.add("can-drop")},ondragleave:function(e){e=e.relatedTarget;e.classList.remove("can-drop"),e.classList.add("cannot-drop")}})},C.prototype.initSignerClick=function(){this.selectElements=new y.SelectElements;var t=this;h(".signature__sigdblclickners").on("click",".signature__signers__item",function(e){e=h(e.target).attr("data-id");t.addSigner(e)})},C.prototype.addSigner=function(n,e,t){var a,s,l,c=this;void 0===e&&(e=null),void 0===t&&(t=!1),0!=h(".editor__page").length&&(a=this,null==e&&(e=m.ElementHelper.positionFromCenter()),s=m.ElementHelper.insertPointFromPosition(e,t),l={x:Math.floor(s.x),y:Math.floor(s.y)},l=this.updatePositionIfCollision(l),this.selectElements.selectElements().then(function(e){a.elementsSelector.reset();var i=null,r=(m.ElementHelper.pageRect(s.file,s.page),[]),o={file:s.file,page:s.page,x:l.x,y:l.y},t=g.PositionInsert.adjustBlockPosition(o,d.ELEMENT_BASE_WIDTH+20,(d.ELEMENT_BASE_HEIGHT+20)*e.length+(d.ELEMENT_BASE_HEIGHT+20));l.x+=t.x,l.y+=t.y,o.x=l.x,o.y=l.y,a.receiverModels.forEach(function(e){e.id==n&&(i=e)}),e.forEach(function(e){var t=x.ElementHelperInstance.createElement(e),n=("single"==a.mode&&(t.signatureModel=i,t.mode="selfsigned",h("body").addClass("selfsigned")),t.setElementsSelector(c.elementsSelector),t.setSigner(i),t.insert(o),"input-element"==t.type&&(t.inputEditModal=c.inputEditModal),document.getElementById(t.childs[0]).getBoundingClientRect());o.y=t.position.y+n.height+10,r.push(t),a.elementsStack.add(t),a.elementCounter.updateCount(e),a.elementsSelector.refresh(),a.elementsSelector.addSelection(t.childs[0])}),c.showModalForElementInputsIfNecessary(r),a.sendEventCheckProcessButton()},function(){}))},C.prototype.addElement=function(l,e,t){var n,c=this,u=(void 0===e&&(e=null),void 0===t&&(t=!1),this),i=l.replace("Element","");if(u.signerIdentityManager&&u.signerIdentityManager.availableElementTabs.includes(i)&&"single"===this.mode&&(u.signerIdentityManager.setRequired(i,!0),!u.signerIdentityManager.validate(i)))return(n=u.signerIdentityManager.showModal(i)).addEventListener("confirm",function(){u.addElement(l,e,t),u.signerIdentityManager.setRequired(i,!1)}),void n.addEventListener("cancel",function(){u.signerIdentityManager.setRequired(i,!1)});null==e&&(e=m.ElementHelper.positionFromCenter(),this.resetDirectionCopy());var d=m.ElementHelper.insertPointFromPosition(e,t),p={x:Math.floor(d.x),y:Math.floor(d.y)},p=this.updatePositionIfCollision(p);this.signersSelector.selectSigners().then(function(e){c.elementsSelector.reset(),_.default.setViewed("dragStepDone");var o=[],a=0,s=m.ElementHelper.pageRect(d.file,d.page);e.forEach(function(e,t){var n=x.ElementHelperInstance.createElement(l),i=("single"==u.mode&&(n.signatureModel=u.signatureModel,n.mode="selfsigned",h("body").addClass("selfsigned")),{file:d.file,page:d.page,x:p.x,y:p.y}),e=(n.setElementsSelector(c.elementsSelector),n.setSigner(e),n.insert(i),document.getElementById(n.childs[0]).getBoundingClientRect()),r=(a=0==a?e.width:a+e.width+20,s.width<a&&(i.y=i.y+20+e.height,i.x=o[0].position.x,p.y+=20+e.height,p.x=o[0].position.x,n.position.x=p.x,n.position.y=p.y,h("#"+n.childs[0]).css({left:n.position.x+"px",top:n.position.y+"px"}),a=e.width),g.PositionInsert.adjustBlockPosition(i,e.width+20,e.height+20));o.forEach(function(e,t){e.position.x+=r.x,e.position.y+=r.y,h("#"+e.childs[0]).css({left:e.position.x+"px",top:e.position.y+"px"})}),n.position.x+=r.x,n.position.y+=r.y,h("#"+n.childs[0]).css({left:n.position.x+"px",top:n.position.y+"px"}),"input-element"==n.type&&(n.inputEditModal=c.inputEditModal),p.x=n.position.x+e.width+20,p.y=n.position.y,o.push(n),u.elementsStack.add(n),u.elementCounter.updateCount(l),u.elementsSelector.refresh(),u.elementsSelector.addSelection(n.childs[0])}),u.elementsSelector.refresh(),u.sendEventCheckProcessButton(),c.showModalForElementInputsIfNecessary(o)},function(){}),this.elementsSelector.refresh()},C.prototype.showModalForElementInputsIfNecessary=function(e){e=e.filter(function(e){return"input-element"==e.type});0<e.length&&this.inputEditModal.showModalForElementInputs(e)},C.prototype.updatePositionIfCollision=function(t){var n=this;return this.elementsStack.all().forEach(function(e){1!=e.removed&&e.position.x==t.x&&e.position.y==t.y&&(e={x:t.x+20*n.copyDirection.x,y:t.y+20*n.copyDirection.y},t=n.updatePositionIfCollision(e))}),t},C.prototype.copyElement=function(e,t,n){var i=(n=void 0===n?{}:n).triggerEvents,i=void 0===i||i,r=n.triggerCheckLinked,r=void 0===r||r,o=n.addSelector,o=void 0===o||o,a=n.updateCounter,a=void 0===a||a,n=n.refreshSelector,n=void 0===n||n,s=x.ElementHelperInstance.createElementFrom(e),l=(s.copyProperties(e),m.ElementHelper.insertPointFromPosition(e.position,!0)),t=(l.x+=t.x,l.y+=t.y,t.page&&(l.page=t.page),t.file&&(l.file=t.file),(t.page||t.file)&&(t=e.getSizeInView(),e=g.PositionInsert.adjustBlockPosition(l,t.width,t.height),l.x+=e.x,l.y+=e.y),{triggerCheckLinked:r,triggerEvents:i});s.insert(l,t);this.elementsStack.add(s),a&&this.elementCounter.updateCount(s.type),n&&this.elementsSelector.refresh(),1==o&&this.elementsSelector.addSelection(s.childs[0])},C.prototype.copyElementToPages=function(u,d,p){return e(this,void 0,void 0,function(){var i,r,o,a,t,l,n,c=this;return f(this,function(e){switch(e.label){case 0:i=m.ElementHelper.insertPointFromPosition(u.position,!0),r=document.querySelector('[data-id="'+u.id+'"]'),o=new T.DelayedFunctionExecutor(500,100),a=u.getSizeInView(),t=function(t){var s,n;return f(this,function(e){switch(e.label){case 0:return(s=p[t],u.existsInPage(d,s))?[2,"continue"]:(n=function(e,t,n,i){var r=P.Tools.randomId(),o=e.cloneNode(!0),a=x.ElementHelperInstance.createElementFrom(n),n=(a.copyProperties(n),a.position=n.position,o.id=r,o.setAttribute("data-id",a.id),g.PositionInsert.adjustBlockPosition(t,i.width,i.height)),t=(a.position.x+=n.x,a.position.y+=n.y,m.ElementHelper.appendHtmlElementToPage(o,d,s,a.signer),document.getElementById(r));a.applyBasicStylesToElement(t),a.applyEventsToChildElement(t),a.initDraggable(r),a.appendChildToFilePages(d,s,r),a.repositionElementIfOutOfBoundaries(r),"request"==a.mode?(a.initRequestActions(r),k.Tooltip.setContent(e,a.signer.name)):"selfsigned"==a.mode&&a.initSelfsignedActions(r),a.checkLinked(),c.elementsStack.add(a)},[4,o.executeFunction(n.bind(l,r,i,u,a))]);case 1:return e.sent(),[2]}})},l=this,n=0,e.label=1;case 1:return n<p.length?[5,t(n)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},C.prototype.receiversChanged=function(e){var n=this;this.receiverModels=e,this.signerModels=[],e.forEach(function(e,t){"signer"==e.type&&n.signerModels.push(e)})},C.prototype.checkDeletedSigners=function(){var e=this;this.elementsStack.all().forEach(function(t){var n=!1;e.signerModels.forEach(function(e){e.id==t.signer.id&&(n=!0)}),0==n&&t.remove()}),this.cleanRemovedElements()},C.prototype.listenEventReceiversChanged=function(){var t=this;window.addEventListener("receiversChanged",function(e){t.receiversChanged(e.detail.receivers),t.checkDeletedSigners(),t.sendEventCheckProcessButton()})},C.prototype.listenEventInputEditModal=function(){var r=this;E.SignatureEventManager.addEventListener("signature:input_edit_modal:confirm",function(e){var t=e.detail.inputElements.map(function(e){return e.id}),n=e.detail.label,i=e.detail.description;r.elementsStack.elements.forEach(function(e){t.includes(e.id)&&"input-element"==e.type&&((e=e).setLabel(n),e.setDescription(i),e.sendEventElementChanged())}),r.sendEventCheckProcessButton()}),E.SignatureEventManager.addEventListener("signature:input_edit_modal:cancel",function(e){var t;e.detail.editOnlyMode||(t=e.detail.inputElements.map(function(e){return e.id}),r.elementsStack.elements.forEach(function(e){t.includes(e.id)&&"input-element"==e.type&&e.remove()}),r.elementsSelector.reset(),r.sendEventCheckProcessButton())})},C.prototype.listenEventElementRemoved=function(){var t=this;E.SignatureEventManager.addEventListener("signature:elements_manager:removed",function(e){t.elementsStack.get(e.detail.elementId)&&t.elementCounter.updateCount(e.detail.type,-1),t.cleanRemovedElements(),t.saveToStorage()},!0)},C.prototype.goNearestElement=function(t,n){var i=this;window.setTimeout(function(){if(0==i.elementsStack.count())return null;var e=m.ElementHelper.getNearestElementClass("sign__element",t,n);p.ScrollHelper.scrollToElement(e),i.elementsSelector.refresh(),i.elementsSelector.addSelection(e.id)},1e3)},C.prototype.cleanRemovedElements=function(){var n=this;this.elementsStack.all().forEach(function(e,t){!0===e.removed&&(!0!==e.removedSilent?(e.removed=!0,e.removedSilent=!1):n.elementsStack.remove(e.id))}),this.elementsSelector.reset()},C.prototype.listenEventRemoveGroup=function(){var r=this;E.SignatureEventManager.addEventListener("signature:remove_group_modal:confirm",function(n){var i=n.detail.mode;r.elementsSelector.hideGroupActions(),n.detail.elementIds.forEach(function(e){var t,e=r.elementsStack.get(e);1==e.childs.length?(r.elementsSelector.removeSelectable(e.childs[0]),e.remove()):"all"==i?(e.childs.forEach(function(e){r.elementsSelector.removeSelectable(e)}),e.remove()):"current"==i&&(t=e.getChildFromPage(n.detail.fileId,n.detail.currentPage),r.elementsSelector.removeSelectable(t.id),e.remove(t.id))}),r.elementsSelector.checkLinkedElements()},!0)},C.prototype.listenEventEditCloneGroupChanged=function(){var t=this;E.SignatureEventManager.addEventListener("signature:elements_selector:edit_clone_group_confirm",function(e){t.toggleWaitEl(!0),t.performCloneOrCopyGroupEvent(e.detail).then(function(){t.sendEventPreviewManagerRefreshBullets(e.detail.fileId),E.SignatureEventManager.dispatchEvent("signature:element_counter:recompute",{}),t.toggleWaitEl(!1)})})},C.prototype.sendEventPreviewManagerRefreshBullets=function(e,t){E.SignatureEventManager.dispatchEvent("signature:preview_manager:refresh_bullets",{fileId:e,page:t})},C.prototype.performCloneOrCopyGroupEvent=function(d){return e(this,void 0,void 0,function(){var r,t,o,a,s,l,c,n,i,u=this;return f(this,function(e){switch(e.label){case 0:return t=d.elementIds,r=t.map(function(e){return u.elementsStack.get(e)}),t=d.cloneMode,o=d.fileId,a=d.currentPage,s=d.cloneOption,l=d.pagesToClone,c=!1,"last"!=s?[3,2]:[4,this.copyElementsToPages(r,l,o)];case 1:return e.sent(),r.forEach(function(n){var i=new Set;n.childs.forEach(function(e){var t=n.getPageViewOf(e).page;l.includes(t)||i.add(e)}),i.forEach(function(e){n.remove(e)}),n.checkLinked()}),c=!0,[3,9];case 2:if("clone"!=t)return[3,7];n=function(t){var n,i;return f(this,function(e){switch(e.label){case 0:return n=r[t],i=new Set,n.childs.forEach(function(e){var t=n.getPageViewOf(e).page;"current"==s?t!=a&&i.add(e):l.includes(t)||(i.add(e),t==a&&(c=!0))}),[4,n.cloneBatch(o,l)];case 1:return e.sent(),i.forEach(function(e){u.elementsSelector.removeSelectable(e),n.remove(e)}),[2]}})},i=0,e.label=3;case 3:return i<r.length?[5,n(i)]:[3,6];case 4:e.sent(),e.label=5;case 5:return i++,[3,3];case 6:return[3,9];case 7:return[4,this.copyElementsToPages(r,l,o)];case 8:e.sent(),r.forEach(function(e){var t;l.includes(a)||(t=e.getChildFromPage(o,a),c=!0,e.remove(t.id))}),e.label=9;case 9:return c?this.elementsSelector.reset():this.elementsSelector.refresh(),this.elementsSelector.checkLinkedElements(),r.forEach(function(e){e.applySize()}),[2]}})})},C.prototype.copyElementsToPages=function(i,r,o){return e(this,void 0,void 0,function(){var t,n;return f(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<i.length?(n=i[t],[4,this.copyElementToPages(n,o,r)]):[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},C.prototype.listenEventModeChanged=function(){var t=this;window.addEventListener("modeChanged",function(e){t.mode=e.detail.mode,"single"==t.mode&&h("#addElementInput").hide()})},C.prototype.listenEventSignatureChanged=function(){var t=this;E.SignatureEventManager.addEventListener("signature:signer_identity_modal:signature_changed",function(e){t.signatureModel=e.detail.signatureModel,t.elementsStack.all().forEach(function(e){e.signatureModel=t.signatureModel,"single"==t.mode&&(e.copyInitialPosition(),e.applySingature())}),window.setTimeout(function(){t.elementsSelector.restart()},200)})},C.prototype.listenEventElementDetachGroup=function(){var i=this;E.SignatureEventManager.addEventListener("signature:elements_selector:ask_detach_group",function(n){var e=n.detail.elementIds.map(function(e){return i.elementsStack.get(e)});v.UnlinkManager.confirm().then(function(){i.elementsSelector.reset(),e.forEach(function(e){var t=e.getChildFromPage(n.detail.fileId,n.detail.currentPage),e=e.detach(t.id);i.elementsStack.add(e),i.elementCounter.updateCount(e.type),i.elementsSelector.refresh(),i.elementsSelector.addSelection(e.childs[0])})},function(){})})},C.prototype.toggleWaitEl=function(e){document.querySelector(".tool__workarea>.wait").style.display=e?"block":"none"},C.prototype.loadFromStorage=function(){},C.prototype.loadFromTemplate=function(i){var r=this,e=this;"batch"!=i.mode?i.signers.forEach(function(n){e.receiverModels.forEach(function(e){n.id==e.id&&(n.model=e)}),n.files.forEach(function(t){var e;i.files.forEach(function(e){t.server_filename==e.server_filename&&(t.id=e.id)}),null!=(e=t.elements)&&e.forEach(function(e){r.insertElementFromTemplate(e,t.id,n.model)})})}):(i.batch_elements.forEach(function(t){var e;i.files.forEach(function(e){t.server_filename==e.server_filename&&(t.id=e.id)}),null!=(e=t.elements)&&e.forEach(function(e){r.insertElementFromTemplate(e,t.id,r.receiverModels[0])})}),E.SignatureEventManager.dispatchEvent("signature:element_counter:recompute",{})),E.SignatureEventManager.dispatchEvent("signature:element_counter:recompute",{})},C.prototype.insertElementFromTemplate=function(i,r,e){var t,n=x.ElementHelperInstance.createElement(i.type),o=i.pages.split(",").map(function(e){var t,n,i,e=e.split("-");return 2===e.length?(t=parseInt(e[0]),n=parseInt(e[1]),i=t,Array(n-i+1).fill(0).map(function(e,t){return i+t})):e}).flat(),a=(i=m.ElementHelper.normalizeElement(i,r,parseInt(o[0])),m.ElementHelper.getRatio(r,parseInt(o[0]))),s=["signature","initials","stamp"],l=i.position.split(" "),c=[],u=(o.forEach(function(e){var t,n,e={file:r,page:parseInt(e),x:parseFloat(l[0]),y:parseFloat(l[1].replace("-",""))},e=m.ElementHelper.normalizeInsertPoint(e);s.includes(i.type)||(t=d.ELEMENT_BASE_ADJUST_X,n=(i.size-i.font_size)/4-1,n=Math.floor(n*n/2),e.x-=t,e.y-=n),c.push(e)}),"string"==typeof i.size&&(i.size=parseFloat(i.size)),{content:i.content,size:Math.floor(i.size/a),file:r,page:o[0],frame_size:i.frame_size,reference:i.reference});for(t in"input"==i.type?(a=JSON.parse(i.info),u.label=a.label,u.description=a.description):"text"==i.type?(u.content=i.content,u.fontSize=i.font_size):"date"==i.type&&(window.ilovepdfConfig.dateFormat=i.content),u)n[t]=u[t];n.setElementsSelector(this.elementsSelector),n.setSize(u),n.setWidthFromHeight(),n.signatureModel=this.signatureModel,n.signer=e,"input-element"==n.type&&(n.inputEditModal=this.inputEditModal),c.forEach(function(e){n.insert(e)}),n.setZoom(),this.elementsStack.add(n)},C.prototype.saveToStorage=function(){var n=[];this.elementsStack.all().forEach(function(e,t){!0!==e.removed&&n.push(e)}),0==n.length?c.Storage.remove("sign.elements"):c.Storage.set("sign.elements",n.length)},C.prototype.getData=function(e,t){var o=this;return(e=1==(t=void 0===t?!1:t)?[b.DEFAULT_SIGNER]:e).forEach(function(i,e){var r=[];o.files.files.forEach(function(t){var n={server_filename:t.server_filename,elements:[]};o.elementsStack.all().forEach(function(e){1==e.checkHasSignerDataInFile(t.id,i.id)&&(n.elements=n.elements.concat(e.getData(t.id,i.id)))}),r.push(n)}),i.files=r}),e},C.prototype.copy=function(){var t=this;this.copyElements=[],this.elementsStack.all(n.ELEMENT_STACK_SELECTED).forEach(function(e){t.copyElements.push(e.id)}),this.copyPosition=this.elementsSelector.getSelectionInsertPoint(),this.copyNextPosition=this.elementsSelector.getSelectionInsertPoint(),this.resetDirectionCopy()},C.prototype.resetDirectionCopy=function(){this.copyDirection={x:1,y:1}},C.prototype.cut=function(){this.elementsStack.all(n.ELEMENT_STACK_SELECTED).forEach(function(e){e.remove(e.currentSelected,!0)}),this.elementsSelector.clearSelected(),this.elementsSelector.hideGroupActions()},C.prototype.delete=function(){this.elementsStack.all(n.ELEMENT_STACK_SELECTED).forEach(function(e){e.remove(e.currentSelected)}),this.elementsSelector.clearSelected(),this.elementsSelector.hideGroupActions()},C.prototype.removeElementChilds=function(e,t){},C.prototype.paste=function(){var t,n=this,e=m.ElementHelper.getCurrentFile(),i=m.ElementHelper.getCurrentPage(),r=null==(r=this.copyElements)?void 0:r[0],o=this.elementsStack.get(r);e&&i&&r&&o&&(I.EditorPage.allPagesSameSize(e),this.copyDirection)&&this.copyNextPosition&&(this.copyNextPosition.x+=20*this.copyDirection.x,this.copyNextPosition.y+=20*this.copyDirection.y,null!=(i=this.elementsSelector.getSelectorSize()))&&(r=g.PositionInsert.adjustBlockPosition(this.copyNextPosition,i.width+20*this.copyDirection.x,i.height+20*this.copyDirection.y),t={x:this.copyNextPosition.x+r.x-this.copyPosition.x,y:this.copyNextPosition.y+r.y-this.copyPosition.y},0!==Math.sign(r.x)&&(this.copyDirection.x=Math.sign(r.x)),0!==Math.sign(r.y)&&(this.copyDirection.y=Math.sign(r.y)),this.copyNextPosition.x=this.copyPosition.x+t.x,this.copyNextPosition.y=this.copyPosition.y+t.y,this.elementsSelector.reset(),this.copyElements.forEach(function(e){e=n.elementsStack.get(e);n.copyElement(e,t)}))},C.prototype.copyPasteActions=function(){var t=this;h(document).on({copy:function(e){e.target.hasAttribute("contenteditable")||e.target.type||0<h('[contenteditable="true"]').length||h(".modal").is(":visible")||t.copy()},paste:function(e){h(".modal").is(":visible")||e.target.hasAttribute("contenteditable")||e.target.type||0<h('[contenteditable="true"]').length||t.paste()},cut:function(e){e.target.hasAttribute("contenteditable")||e.target.type||0<h('[contenteditable="true"]').length||h(".modal").is(":visible")||(t.copy(),t.cut())},keydown:function(e){e.target.hasAttribute("contenteditable")||e.target.type||0<h('[contenteditable="true"]').length||h(".modal").is(":visible")||46!=e.keyCode&&8!=e.keyCode||t.elementsSelector.sendEventAskRemoveGroup()}})},C.prototype.doubleClickActions=function(){var n=this,i=this;h(document).on("dblclick",".sign__element",function(e){var t=i.elementsStack.get(h(e.currentTarget).attr("data-id"));if(null!=t){if(1==h("body").hasClass("selfsigned")){if("signature-element"==t.type)return void n.signerIdentityManager.showModal("signature");if("initials-element"==t.type)return void n.signerIdentityManager.showModal("initials");if("stamp-element"==t.type)return void n.signerIdentityManager.showModal("stamp");if("name-element"==t.type)return void n.signerIdentityManager.showModal()}n.signerSelector.selectSigners(t.signer).then(function(e){t.updateSigner(e)},function(){})}})},C.prototype.fileRemoved=function(e){this.elementsStack.all().forEach(function(t){t.filesPages[e]&&(t.childs.forEach(function(e){0==h(e).length&&t.remove(e)}),0==t.childs.length)&&(t.removed=!0)}),this.cleanRemovedElements(),this.elementsSelector.refresh(),this.sendEventCheckProcessButton()},C.prototype.sendEventElementsChanged=function(){E.SignatureEventManager.dispatchEvent("signature:elements_manager:elements_changed",{})},C.prototype.sendEventCheckProcessButton=function(){E.SignatureEventManager.dispatchEvent("signature:check_process_button",{})},C.prototype.validate=function(){return this.validateSignatureIsPresent()&&this.validateAllInputsLabeled()},C.prototype.validateSignatureIsPresent=function(){var e;if(null===document.querySelector(".editor__content .sign__element"))return!1;for(var t=this,n=0,i=null!=(e=this.signerModels)?e:[];n<i.length;n++){var r=function(n){if(!t.elementsStack.activeElements.some(function(e){var t;return(null==(t=e.signer)?void 0:t.id)===n.id&&"signature-element"===e.type}))return{value:!1}}(i[n]);if("object"==typeof r)return r.value}return!0},C.prototype.validateAllInputsLabeled=function(){if(null!==document.querySelector(".editor__content .sign__element--input"))for(var e=0,t=this.elementsStack.activeElements;e<t.length;e++){var n=t[e];if("input-element"===n.type&&(!n.label||""===n.label))return!1}return!0},C.prototype.initKeyActions=function(){h(document).on("keypress",function(e){if(!(e.target.hasAttribute("contenteditable")||e.target.type||0<h('[contenteditable="true"]').length||1==h(".modal").is(":visible")))switch(e.key){case"s":h("#addElementSignature").trigger("click");break;case"i":h("#addElementInitials").trigger("click");break;case"n":h("#addElementName").trigger("click");break;case"t":h("#addElementText").trigger("click");break;case"d":h("#addElementDate").trigger("click")}})},C.prototype.listenEventUuidChanged=function(){var t=this;window.addEventListener("uuidChanged",function(e){window.setTimeout(function(){t.elementsSelector.restart()},200)})},C.prototype.renderingFile=function(e){this.elementsSelector.renderingFile(e)},M.ElementsManager=C}.call(this,O(1))},function(e,t,n){"use strict";!function(r){function e(){this.signers=[],this.currentSelected=[],this.init()}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSigners=void 0,e.prototype.init=function(){this.listenEventReceiversChanged()},e.prototype.setSignersFromReceivers=function(e){this.signers=[];var n=this;e.forEach(function(e,t){"signer"==e.type&&n.signers.push(e)})},e.prototype.selectSigners=function(n){void 0===n&&(n=[]);var i=this;return new Promise(function(e,t){1==i.signers.length?(i.currentSelected=i.signers,e(i.currentSelected)):(i.initSigners(n),i.showModal(),document.getElementById("confirmSelectSigners").onclick=function(){i.hideModal(),i.save(),document.getElementById("confirmSelectSigners").onclick=null,document.getElementById("cancelSelectSigners").onclick=null,e(i.currentSelected)},document.getElementById("cancelSelectSigners").onclick=function(){i.hideModal(),document.getElementById("confirmSelectSigners").onclick=null,document.getElementById("cancelSelectSigners").onclick=null,t("cancelled")})})},e.prototype.initSigners=function(i){void 0===i&&(i=[]),r("#selectSignersModal .sign__signer__list").html(""),this.signers.forEach(function(t,e){var n;"signer"==t.type&&(i.find(function(e){return e.id===t.id}),n='<li class="sign__signer__item">\n                        <div class="checkbox">\n                            <input type="checkbox" name="signers-'+t.id+'" id="signers-'+t.id+'"\n                                   value="'+t.id+'"\n                                   class="input" checked>\n                            <label for="signers-'+t.id+'">\n                                <div class="sign__signer__bullet '+t.colorClass+'">\n                                </div>\n                                <div class="sign__signer__name">\n                                    '+t.name+"\n                                </div>\n                            </label>\n                        </div>\n                    </li>",r("#selectSignersModal .sign__signer__list").append(n))})},e.prototype.save=function(){var n=[];return this.signers.forEach(function(e,t){r("#signers-"+e.id).is(":checked")&&n.push(e)}),this.currentSelected=n,this.currentSelected},e.prototype.showModal=function(){r("#selectSignersModal").modal("show"),r(".dialog__body").scrollTop(0)},e.prototype.hideModal=function(){r("#selectSignersModal").modal("hide")},e.prototype.listenEventReceiversChanged=function(){var t=this;window.addEventListener("receiversChanged",function(e){t.setSignersFromReceivers(e.detail.receivers)})},t.SelectSigners=e}.call(this,n(1))},function(e,i,r){"use strict";!function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.RemoveGroupModal=void 0;var t=r(75);function n(e,t){this.files=t,this.elementsStack=e,this.initActions()}n.prototype.initActions=function(){var e=this;this.confirmBtn.addEventListener("click",function(){e.hideModal(),e.sendEventRemoveGroup()}),this.cancelBtn.addEventListener("click",function(){e.hideModal()}),this.listenEventAskRemoveGroup()},n.prototype.listenEventAskRemoveGroup=function(){var n=this;t.SignatureEventManager.addEventListener("signature:elements_selector:ask_remove_group",function(e){n.currentFile=n.files.getFile(e.detail.fileId),n.currentPage=e.detail.currentPage,n.elements=e.detail.elementIds.map(function(e){return n.elementsStack.get(e)});var t=0;n.elements.forEach(function(e){t=Math.max(t,e.childs.length)}),1<t?n.showModal():n.sendEventRemoveGroup()},!0)},n.prototype.sendEventRemoveGroup=function(){t.SignatureEventManager.dispatchEvent("signature:remove_group_modal:confirm",this.getData())},n.prototype.getData=function(){return{elementIds:this.elements.map(function(e){return e.id}),mode:this.checkedRemoveBlock.value.toString(),currentPage:this.currentPage,fileId:this.currentFile.id}},n.prototype.showModal=function(){e("#removeGroupModal").modal("show"),e(".dialog__body").scrollTop(0)},n.prototype.hideModal=function(){e("#removeGroupModal").modal("hide")},Object.defineProperty(n.prototype,"root",{get:function(){return document.getElementById("removeGroupModal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"checkedRemoveBlock",{get:function(){return this.root.querySelector('[name="removeBlock"]:checked')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"confirmBtn",{get:function(){return this.root.querySelector("#confirmRemoveBlocks")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cancelBtn",{get:function(){return this.root.querySelector("#cancelRemoveBlocks")},enumerable:!1,configurable:!0}),i.RemoveGroupModal=n}.call(this,r(1))},function(e,m,g){"use strict";!function(u){var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(m,"__esModule",{value:!0}),m.ElementsSelector=void 0,e(g(507))),i=e(g(206)),d=g(251),p=g(199),t=g(171),r=g(18),o=e(g(298)),a=g(75),s=g(173),l="sign__element",c="sign__element__link",h="groupActions";function f(e,t){this.elementsStack=e,this.filesStack=t,this.allowClone=!1,this.init()}f.prototype.init=function(){this.listenEventSelectionChanged(),this.initDragSelect(),this.initTopActionButtons(),this.initSelectElementActions()},f.prototype.initDragSelect=function(){var t=this;this.dragSelect=new n.default({selectables:document.getElementsByClassName(l),area:this.editorElement,callback:this.sendEventSelectionChanged,onDragStartBegin:function(e){(e.target.id==h||e.target&&e.target.classList.contains(l)||e.target.parentElement.classList.contains(l)||e.target.parentElement.parentElement.classList.contains(l)||e.target.parentElement.parentElement.parentElement.classList.contains(l)||u(e.target).hasClass("linked")||e.target.id==h||u(e.target).hasClass("sign__action")||0<u(e.target).closest(".sign__action").length||u(e.target).hasClass("gizmo"))&&t.dragSelect.break()}})},f.prototype.initSelectElementActions=function(){var t=this;u(document).on("click touchstart","."+l,function(e){u(e.target).is("."+c)||0<u(e.target).closest("."+c).length||e.currentTarget.classList&&e.currentTarget.classList.contains(l)&&(t.dragSelect.addSelection(e.currentTarget),t.showGroupActions(t.dragSelect.getSelection()))})},f.prototype.initTopActionButtons=function(){var t=this;["click","touchstart"].forEach(function(e){t.actionCloneElement.addEventListener(e,function(){t.fileIsRendering||"none"===t.actionCloneElement.style.display||t.sendEventEditCloneGroup()}),t.actionRemoveElement.addEventListener(e,function(){t.sendEventAskRemoveGroup()}),t.actionDetachElement.addEventListener(e,function(){t.sendEventDetachGroup()}),t.linkUpElement.addEventListener(e,function(){t.goLinked("up")}),t.linkDownElement.addEventListener(e,function(){t.goLinked("down")})})},f.prototype.addSelection=function(e){this.dragSelect.addSelection(document.getElementById(e)),this.showGroupActions(this.dragSelect.getSelection())},f.prototype.removeSelectable=function(e){this.dragSelect.removeSelectables(document.getElementById(e),!0)},f.prototype.sendEventAskRemoveGroup=function(){a.SignatureEventManager.dispatchEvent("signature:elements_selector:ask_remove_group",this.defaultEventSelectorData)},f.prototype.sendEventEditCloneGroup=function(){a.SignatureEventManager.dispatchEvent("signature:elements_selector:edit_clone_group",this.defaultEventSelectorData)},f.prototype.sendEventDetachGroup=function(){a.SignatureEventManager.dispatchEvent("signature:elements_selector:ask_detach_group",this.defaultEventSelectorData)},f.prototype.sendEventSelectionChanged=function(e){e=new CustomEvent("selectionChanged",{detail:{elements:e}});window.dispatchEvent(e)},f.prototype.reset=function(){this.dragSelect.setSelection([]),this.showGroupActions(this.dragSelect.getSelection())},f.prototype.refresh=function(){this.dragSelect.addSelectables(document.getElementsByClassName(l))},f.prototype.fileRemoved=function(e){var t=u("#"+h);t.parent().attr("data-file")==e&&(this.clearSelected(),t.insertBefore(u(".editor__content")),t.hide())},f.prototype.listenEventSelectionChanged=function(){var t=this;window.addEventListener("selectionChanged",function(e){e=t.onlySelectedOnSamePage(e.detail.elements);t.showGroupActions(e)})},f.prototype.hideGroupActions=function(){this.groupSelector.style.display="none"},f.prototype.onlySelectedOnSamePage=function(e){var n,i,r;return!this.dragSelect||e.length<=1?e:(n=this,i=u(e[0]).parent().attr("data-page"),r=[],e.forEach(function(e,t){u(e).parent().attr("data-page")!=i?n.dragSelect.removeSelection(e):r.push(e)}),r)},f.prototype.showGroupActions=function(e){var t=this,n=this.groupSelector;0==e.length?(this.hideGroupActions(),this.clearSelected(),this.active=!1):(1==e.length?n.classList.add("single"):n.classList.remove("single"),this.active=!0,e.find(function(e){return document.body.contains(e)}),n.style.display="block",u("#"+h).insertBefore(u(e[0])),u(".editor__page").css("z-index",""),this.editorPageHtmlElement.style.zIndex="1",this.clearSelected(),this.setSelected(e),this.checkLinkedElements(),this.redrawSelection(e),this.initDraggable(),this.checkCloneMode(),null===this.actionCloneElement.offsetParent&&window.setTimeout(function(){o.default.showTip("cloneTip",u(t.actionCloneElement),"top")},500))},f.prototype.clearSelected=function(){this.elementsStack.all(d.ELEMENT_STACK_SELECTED).forEach(function(e){e.currentSelected=null}),this.elementsStack.clear(d.ELEMENT_STACK_SELECTED)},f.prototype.checkCloneMode=function(){var e=this.filesStack.getFile(this.selectedFile);e&&(1<parseInt(e.pages)?this.showCloneOption():this.hideCloneOption())},f.prototype.setSelected=function(e){var n=this;e.forEach(function(e){var t=e.id,e=u(e).attr("data-id"),e=n.elementsStack.get(e);null!=e&&(e.currentSelected=t,n.elementsStack.add(e,d.ELEMENT_STACK_SELECTED))})},f.prototype.redrawSelection=function(e){var t,n,i,r,o;0!=e.length&&(t=this.groupActionSelector,n=u(e[0]).position().top,i=n+u(e[0]).innerHeight(),r=u(e[0]).position().left,o=r+u(e[0]).innerWidth(),e.forEach(function(e){var t=u(e).position();n=Math.min(t.top,n),r=Math.min(t.left,r),i=Math.max(t.top+u(e).innerHeight()+2,i),o=Math.max(t.left+u(e).innerWidth()+2,o)}),t.style.position="absolute",t.style.top=n+"px",t.style.left=r+"px",t.style.width=o-r+"px",t.style.height=i-n+"px",this.position={x:parseInt(t.style.left),y:parseInt(t.style.top)},this.size={width:parseInt(t.style.width),height:parseInt(t.style.height)},this.checkCloneMode())},f.prototype.initDraggable=function(){var t=this,e=u("#"+h);this.position={x:parseInt(e.css("left")),y:parseInt(e.css("top"))},1==this.draggableStarted?i.default("#"+h).resizable(t.getResizableParams()):(this.draggableStarted=!0,r.Tools.randomId(),i.default("#"+h).draggable({ignoreFrom:".sign__group__actions",modifiers:[i.default.modifiers.restrictRect({restriction:"parent"})],listeners:{start:function(e){},move:function(n){t.position.x+=n.dx,t.position.y+=n.dy,t.position=p.ElementHelper.sanitizePosition(t.position),n.currentTarget.style.top=t.position.y+"px",n.currentTarget.style.left=t.position.x+"px",t.elementsStack.all(d.ELEMENT_STACK_SELECTED).forEach(function(e){e.position.x+=n.dx,e.position.y+=n.dy,e.position=p.ElementHelper.sanitizePosition(e.position);var t=document.getElementById(e.currentSelected);t.style.top=e.position.y+"px",t.style.left=e.position.x+"px",t.style.opacity="0.5"})},end:function(e){t.onDragEnd(e)}}}).resizable(t.getResizableParams()).on("resizemove",this.onResizeMove.bind(this)).on("resizeend",function(e){t.onResizeEnd(e)}))},f.prototype.onResizeMove=function(o){var a,s,l=this,e=o.target,t=e.getBoundingClientRect(),n=t.width,t=t.height,i=(this.getDataRatio(),this.restrictedSize),r=this.size.width+o.deltaRect.width,c=this.size.height+o.deltaRect.height;r>i.max.width&&0<o.deltaRect.width||r<i.min.width&&o.deltaRect.width<0||c>i.max.height&&0<i.min.height||c<i.min.height&&i.min.height<0||(this.size.height+=o.deltaRect.height,a=this.size.height/t,this.size.width=this.size.width*a,s=this.size.width/n,this.position.x+=o.deltaRect.left,this.position.y+=o.deltaRect.top,e.style.width=this.size.width+"px",e.style.height=this.size.height+"px",e.style.top=this.position.y+"px",e.style.left=this.position.x+"px",this.elementsStack.all(d.ELEMENT_STACK_SELECTED).forEach(function(e){var t=e.position.x-l.position.x,n=e.position.y-l.position.y,i=l.position.x+l.size.width-e.position.x-2,r=l.position.y+l.size.height-e.position.y-2;u("#"+e.currentSelected+" .signature__firm");o.deltaRect.left<0||0<o.deltaRect.left?e.position.x-=i*s-i:e.position.x+=t*s-t,o.deltaRect.top<0||0<o.deltaRect.top?e.position.y-=r*a-r:e.position.y+=n*a-n,e.position=p.ElementHelper.sanitizePosition(e.position),e.applyPosition(e.currentSelected),e.heightBeforeTrim=e.height*a,e.applyResize(e.currentSelected,a)}))},f.prototype.getResizableParams=function(){return{edges:{left:".gizmo--left",right:".gizmo--right",bottom:".gizmo--bottom",top:".gizmo--top"},preserveAspectRatio:!0,modifiers:[i.default.modifiers.aspectRatio({ratio:"preserve",modifiers:[i.default.modifiers.restrictEdges({outer:"parent"}),i.default.modifiers.restrictSize(this.getRestrictSize())]})],inertia:!0}},f.prototype.getRestrictSize=function(){var i,r,o,a,e,t,n=this.getSelectorSize();if(null!=n)return i=n.height,n=n.width,e=this.selectedElements,o=r=5e3,a=this.getDataRatio(),e.forEach(function(e){var t,n=e.allHtmlChilds;0!=n.length&&(n=n[0].getBoundingClientRect().height,t=e.getMinSize(a),e=e.getMaxSize(a),o=Math.min((n-t.height)*i/n,o),r=Math.min((e.height-n)*i/n,r))}),e=i+r,t=i-o,this.restrictedSize={min:{width:n*t/i,height:t},max:{width:n*e/i,height:e}}},f.prototype.getSelectionInsertPoint=function(){var e=u("#"+h);return{x:parseInt(e.css("left")),y:parseInt(e.css("top")),file:e.parent().attr("data-file"),page:parseInt(e.parent().attr("data-page"))}},f.prototype.getSelectorSize=function(){var e=this.groupSelector;return e?e.getBoundingClientRect():null},f.prototype.onDragEnd=function(e){this.elementsStack.all(d.ELEMENT_STACK_SELECTED).forEach(function(e){e.position=p.ElementHelper.sanitizePosition(e.position),e.copyInitialPosition(),u('[data-id="'+e.id+'"]').css({opacity:"",top:e.position.y,left:e.position.x})})},f.prototype.checkLinkedElements=function(){var e=this,t=!1;0==this.getLinkedElements("up").length?this.linkUpElement.style.display="none":(this.linkUpElement.style.display="block",t=!0),0==this.getLinkedElements("down").length?this.linkDownElement.style.display="none":(this.linkDownElement.style.display="block",t=!0),1==t?(this.actionDetachElement.style.display="flex",window.setTimeout(function(){o.default.showTip("unlinkTip",u(e.actionDetachElement),"top")},500)):this.actionDetachElement.style.display="none"},f.prototype.getLinkedElements=function(n){var i=this,r=[];return this.dragSelect.getSelection().forEach(function(e){var t=i.elementsStack.get(u(e).attr("data-id"),d.ELEMENT_STACK_SELECTED);t.childs&&1<t.childs.length&&(e=t.childs.indexOf(e.id),"down"==n&&e!=t.childs.length-1&&r.push(document.getElementById(t.childs[e+1])),"up"==n)&&0!=e&&r.push(document.getElementById(t.childs[e-1]))}),r},f.prototype.goLinked=function(e){var e=this.getLinkedElements(e);0<e.length&&(e=p.ElementHelper.getNearestElement(document.getElementById(h),e),this.reset(),this.addSelection(e.id),t.ScrollHelper.scrollToElement(e))},f.prototype.onResizeEnd=function(e){var n=document.body.classList.contains("selfsigned"),t=(this.elementsStack.all(d.ELEMENT_STACK_SELECTED).forEach(function(t){t.childs.forEach(function(e){t.applySize(e)}),1==n&&(t.copyInitialPosition(),t.trim(null,!1))}),this.dragSelect.getSelection());this.clearSelected(),this.setSelected(t),this.checkLinkedElements(),this.redrawSelection(t),this.initDraggable()},f.prototype.redraw=function(){this.redrawSelection(this.dragSelect.getSelection())},f.prototype.restart=function(){var e=this.dragSelect.getSelection();this.clearSelected(),this.setSelected(e),this.checkLinkedElements(),this.redrawSelection(e),this.initDraggable()},f.prototype.showCloneOption=function(){this.actionCloneElement.style.display="flex"},f.prototype.hideCloneOption=function(){this.actionCloneElement.style.display="none"},f.prototype.getDataRatio=function(){return s.EditorPage.parsePageInfoFromHtmlEl(this.currentPageSelector).viewFactor},f.prototype.amISelected=function(e){return!!this.elementsStack.get(e,"selected")},f.prototype.amISelectedAlone=function(e){return 1==this.selectedElements.length&&this.amISelected(e)},f.prototype.moveSelectorFromElementMove=function(e){var t=this.groupSelector;this.position.x+=e.dx,this.position.y+=e.dy,t&&(t.style.top=this.position.y+"px",t.style.left=this.position.x+"px")},f.prototype.renderingFile=function(e){!0===e?this.hideCloneOption():this.showCloneOption(),this.fileIsRendering=e},Object.defineProperty(f.prototype,"defaultEventSelectorData",{get:function(){return{elementIds:this.selectedElements.map(function(e){return e.id}),fileId:this.selectedFile,currentPage:this.selectedPage,containsOneLinkedElement:this.selectedElements.some(function(e){return 1<e.childs.length})}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"groupActionSelector",{get:function(){return document.getElementById(h)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"currentPageSelector",{get:function(){return this.groupActionSelector.closest(".editor__page")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"selectedElements",{get:function(){return this.elementsStack.selected},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"groupSelector",{get:function(){return document.getElementById(h)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"editorPageHtmlElement",{get:function(){return this.groupSelector.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"selectedFile",{get:function(){return this.editorPageHtmlElement.dataset.file},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"selectedPage",{get:function(){return parseInt(this.editorPageHtmlElement.dataset.page)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"actionRemoveElement",{get:function(){return document.querySelector(".sign__action.sign__action--remove")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"actionCloneElement",{get:function(){return document.querySelector(".sign__action.sign__action--repeat")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"actionDetachElement",{get:function(){return document.querySelector(".sign__action.sign__action--detach")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"linkUpElement",{get:function(){return document.querySelector(".linked--up")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"linkDownElement",{get:function(){return document.querySelector(".linked--down")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"editorElement",{get:function(){return document.getElementById("editor")},enumerable:!1,configurable:!0}),m.ElementsSelector=f}.call(this,g(1))},function(e,t,n){e.exports=function(){"use strict";function l(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol")l=function(e){return typeof e};else l=function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return l(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function e(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}function U(e,t,n){if(t in e)Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true});else e[t]=n;return e}function r(e){return t(e)||n(e)||o(e)||s()}function t(e){if(Array.isArray(e))return a(e)}function n(e){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function o(e,t){if(!e)return;if(typeof e==="string")return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}function a(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c;return function(){function N(e){var t=this;var n=e.area,i=n===void 0?document:n,r=e.autoScrollSpeed,o=r===void 0?1:r,a=e.callback,s=a===void 0?function(){}:a,l=e.customStyles,c=l===void 0?false:l,u=e.hoverClass,d=u===void 0?"ds-hover":u,p=e.multiSelectKeys,h=p===void 0?["ctrlKey","shiftKey","metaKey"]:p,f=e.multiSelectMode,m=f===void 0?false:f,g=e.onDragMove,v=g===void 0?function(){}:g,y=e.onDragStart,_=y===void 0?function(){}:y,b=e.onDragStartBegin,w=b===void 0?function(){}:b,E=e.onElementSelect,S=E===void 0?function(){}:E,x=e.onElementUnselect,T=x===void 0?function(){}:x,P=e.selectableClass,k=P===void 0?"ds-selectable":P,I=e.selectables,C=I===void 0?[]:I,M=e.selectedClass,O=M===void 0?"ds-selected":M,A=e.selector,L=A===void 0?undefined:A,D=e.selectorClass,j=D===void 0?"ds-selector":D,R=e.zoom,F=R===void 0?1:R;B(this,N);U(this,"_multiSelectKeyPressed",false);U(this,"_initialCursorPos",{x:0,y:0});U(this,"_newCursorPos",{x:0,y:0});U(this,"_previousCursorPos",{x:0,y:0});U(this,"_initialScroll",{x:0,y:0});U(this,"_selected",[]);U(this,"_prevSelected",[]);U(this,"_lastTouch",void 0);U(this,"_autoScrollInterval",null);U(this,"_onClick",function(e){return t.handleClick(e)});U(this,"_startUp",function(e){return t.startUp(e)});U(this,"_handleMove",function(e){return t.handleMove(e)});U(this,"_end",function(e){return t.reset(e,true)});this.selectedClass=O;this.hoverClass=d;this.selectorClass=j;this.selectableClass=k;this.selectables=[];this._initialSelectables=this._toArray(C);this.multiSelectKeys=h;this.multiSelectMode=m;this.autoScrollSpeed=o===0?0:o;this.selectCallback=S;this.unselectCallback=T;this.onDragStartBegin=w;this.moveStartCallback=_;this.moveCallback=v;this.callback=s;this.area=this._handleArea(i);this.customStyles=c;this.zoom=F;this.selector=L||this._createSelector();this.selector.classList.add(this.selectorClass);this.start()}e(N,[{key:"_handleArea",value:function e(t){if(t===document)return t;var n=getComputedStyle(t);t.computedBorder=parseInt(n.borderWidth);var i=n.position;var r=i==="absolute"||i==="relative"||i==="fixed";if(!r)t.style.position="relative";return t}},{key:"_handleSelectables",value:function e(t,n,i){for(var r=0;r<t.length;r++){var o=t[r];var a=this.selectables.indexOf(o);if(a<0&&!n)this._addSelectable(o,i);else if(a>-1&&n)this._removeSelectable(o,a,i)}}},{key:"_addSelectable",value:function e(t,n){t.classList.add(this.selectableClass);t.addEventListener("click",this._onClick);this.selectables.push(t);if(n&&this._selected.indexOf(t)<0){t.classList.add(this.selectedClass);this._selected.push(t)}}},{key:"_removeSelectable",value:function e(t,n,i){t.classList.remove(this.hoverClass);t.classList.remove(this.selectableClass);t.removeEventListener("click",this._onClick);this.selectables.splice(n,1);if(i&&this._selected.indexOf(t)>-1){t.classList.remove(this.selectedClass);this._selected.splice(this._selected.indexOf(t),1)}}},{key:"handleClick",value:function e(t){if(this.mouseInteraction)return;if(this._isRightClick(t))return;var n=t.target;if(this._isMultiSelectKeyPressed(t))this._prevSelected=this._selected.slice();else this._prevSelected=[];this.checkIfInsideSelection(true);if(this.selectables.indexOf(n)>-1)this.toggle(n);this._end(t)}},{key:"_createSelector",value:function e(){var t=document.createElement("div");t.style.position="absolute";if(!this.customStyles){t.style.background="rgba(0, 0, 255, 0.1)";t.style.border="1px solid rgba(0, 0, 255, 0.45)";t.style.display="none";t.style.pointerEvents="none"}var n=this.area===document?document.body:this.area;n.appendChild(t);return t}},{key:"start",value:function e(){this._handleSelectables(this._initialSelectables);this.area.addEventListener("mousedown",this._startUp);this.area.addEventListener("touchstart",this._startUp,{passive:false})}},{key:"startUp",value:function e(t){if(t.type==="touchstart")t.preventDefault();if(this._isRightClick(t))return;if(this._isScrollbarClick(t,this.area))return;this.onDragStartBegin(t);if(this._breaked)return false;this.mouseInteraction=true;this.selector.style.display="block";if(this._isMultiSelectKeyPressed(t))this._prevSelected=this._selected.slice();else this._prevSelected=[];this._getStartingPositions(t);this.checkIfInsideSelection(true);this.selector.style.display="none";this.moveStartCallback(t);if(this._breaked)return false;this.area.removeEventListener("mousedown",this._startUp);this.area.removeEventListener("touchstart",this._startUp,{passive:false});this.area.addEventListener("mousemove",this._handleMove);this.area.addEventListener("touchmove",this._handleMove,{passive:false});document.addEventListener("mouseup",this._end);document.addEventListener("touchend",this._end)}},{key:"_isMultiSelectKeyPressed",value:function e(t){this._multiSelectKeyPressed=false;if(this.multiSelectMode)this._multiSelectKeyPressed=true;else for(var n=0;n<this.multiSelectKeys.length;n++){var i=this.multiSelectKeys[n];if(t[i])this._multiSelectKeyPressed=true}return this._multiSelectKeyPressed}},{key:"_getStartingPositions",value:function e(t){this._initialCursorPos=this._newCursorPos=this._getCursorPos(this.area,t);this._initialScroll=this._getScroll(this.area);var n={};n.x=this._initialCursorPos.x+this._initialScroll.x;n.y=this._initialCursorPos.y+this._initialScroll.y;n.w=0;n.h=0;this._updatePos(this.selector,n)}},{key:"handleMove",value:function e(t){var n=this._getPosition(t);this.moveCallback(t);if(this._breaked)return false;this.selector.style.display="block";this._updatePos(this.selector,n);this.checkIfInsideSelection(null);this._setScrollState(t)}},{key:"_getPosition",value:function e(t){var n=this._getCursorPos(this.area,t);var i=this._getScroll(this.area);this._newCursorPos=n;var r={x:i.x-this._initialScroll.x,y:i.y-this._initialScroll.y};var o={};if(n.x>this._initialCursorPos.x-r.x){o.x=this._initialCursorPos.x+this._initialScroll.x;o.w=n.x-this._initialCursorPos.x+r.x}else{o.x=n.x+i.x;o.w=this._initialCursorPos.x-n.x-r.x}if(n.y>this._initialCursorPos.y-r.y){o.y=this._initialCursorPos.y+this._initialScroll.y;o.h=n.y-this._initialCursorPos.y+r.y}else{o.y=n.y+i.y;o.h=this._initialCursorPos.y-n.y-r.y}return o}},{key:"checkIfInsideSelection",value:function e(t){var n=false;for(var i=0,r=this.selectables.length;i<r;i++){var o=this.selectables[i];var a=this._getScroll(this.area);var s={y:this.selector.getBoundingClientRect().top/this.zoom+a.y,x:this.selector.getBoundingClientRect().left/this.zoom+a.x,h:this.selector.offsetHeight,w:this.selector.offsetWidth};if(this._isElementTouching(o,s,a)){this._handleSelection(o,t);n=true}else this._handleUnselection(o,t)}return n}},{key:"_handleSelection",value:function e(t,n){if(t.classList.contains(this.hoverClass)&&!n)return false;var i=this._selected.indexOf(t);if(i<0)this.select(t);else if(i>-1&&this._multiSelectKeyPressed)this.unselect(t);t.classList.add(this.hoverClass)}},{key:"_handleUnselection",value:function e(t,n){if(!t.classList.contains(this.hoverClass)&&!n)return false;var i=this._selected.indexOf(t);var r=this._prevSelected.indexOf(t);if(i>-1&&r<0)this.unselect(t);else if(i<0&&r>-1)this.select(t);t.classList.remove(this.hoverClass)}},{key:"select",value:function e(t){if(this._selected.indexOf(t)>-1)return false;this._selected.push(t);t.classList.add(this.selectedClass);this.selectCallback(t);if(this._breaked)return false;return t}},{key:"unselect",value:function e(t){if(this._selected.indexOf(t)<0)return false;this._selected.splice(this._selected.indexOf(t),1);t.classList.remove(this.selectedClass);this.unselectCallback(t);if(this._breaked)return false;return t}},{key:"toggle",value:function e(t){if(this._selected.indexOf(t)>-1)this.unselect(t);else this.select(t);return t}},{key:"_isElementTouching",value:function e(t,n,i){var r=t.getBoundingClientRect();var o={y:r.top/this.zoom+i.y,x:r.left/this.zoom+i.x,h:r.height/this.zoom,w:r.width/this.zoom};if(n.x<o.x+o.w&&n.x+n.w>o.x&&n.y<o.y+o.h&&n.h+n.y>o.y)return true;else return false}},{key:"_setScrollState",value:function e(t){var n=this;var i=this.isCursorNearEdge(this.area,t);if(i){if(this._autoScrollInterval)window.clearInterval(this._autoScrollInterval);this._autoScrollInterval=window.setInterval(function(){n._updatePos(n.selector,n._getPosition(t));n.checkIfInsideSelection(null);n._autoScroll(i)})}else if(!i&&this._autoScrollInterval){window.clearInterval(this._autoScrollInterval);this._autoScrollInterval=null}}},{key:"_autoScroll",value:function e(t){var n=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement;var i=this.area===document?n||document.body:this.area;if(t==="top"&&i.scrollTop>0)i.scrollTop-=1*this.autoScrollSpeed;else if(t==="bottom")i.scrollTop+=1*this.autoScrollSpeed;else if(t==="left"&&i.scrollLeft>0)i.scrollLeft-=1*this.autoScrollSpeed;else if(t==="right")i.scrollLeft+=1*this.autoScrollSpeed}},{key:"isCursorNearEdge",value:function e(t,n){if(l(t)==="object"&&this._isElement(n)){console.warn("[DragSelect] DEPRECATION warning: this method signature is changing. From isCursorNearEdge(event, area) to isCursorNearEdge(area, event). Please use area as first argument and event as second. It will still work for now but functionality be removed soon");var i=n;var r=t;t=i;n=r}var o=this._getCursorPos(t,n);var a=this._getAreaRect(t);var s={x:Math.max(a.width/10,30),y:Math.max(a.height/10,30)};if(o.y<s.y)return"top";else if(a.height-o.y<s.y)return"bottom";else if(a.width-o.x<s.x)return"right";else if(o.x<s.x)return"left";return false}},{key:"reset",value:function e(t,n){var i=this;this._previousCursorPos=this._getCursorPos(this.area,t);document.removeEventListener("mouseup",this._end);document.removeEventListener("touchend",this._end);this.area.removeEventListener("mousemove",this._handleMove);this.area.removeEventListener("touchmove",this._handleMove,{passive:false});this.area.addEventListener("mousedown",this._startUp);this.area.addEventListener("touchstart",this._startUp,{passive:false});if(n)this.callback(this.getSelection(),t);if(this._breaked)return false;this.selector.style.width="0";this.selector.style.height="0";this.selector.style.display="none";if(this._autoScrollInterval){window.clearInterval(this._autoScrollInterval);this._autoScrollInterval=null}setTimeout(function(){return i.mouseInteraction=false},100)}},{key:"break",value:function e(){var t=this;this._breaked=true;setTimeout(function(){return t._breaked=false},100)}},{key:"stop",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2?arguments[2]:undefined;this.reset(false,i);this.area.removeEventListener("mousedown",this._startUp);this.area.removeEventListener("touchstart",this._startUp,{passive:false});document.removeEventListener("mouseup",this._end);document.removeEventListener("touchend",this._end);this._handleSelectables(r(this.selectables),t,n)}},{key:"getSelection",value:function e(){return r(this._selected)}},{key:"getCursorPos",value:function e(t,n,i){if(!t)return{x:0,y:0};var r=n||n!==false&&this.area;var o=this._getCursorPos(r,t);var a=i?{x:0,y:0}:this._getScroll(r);return{x:o.x+a.x,y:o.y+a.y}}},{key:"addSelection",value:function e(t,n,i){var r=this._toArray(t);for(var o=0,a=r.length;o<a;o++){var s=r[o];this.select(s)}if(!i)this.addSelectables(r);if(n)this.callback(this._selected);return this._selected}},{key:"removeSelection",value:function e(t,n,i){var r=this._toArray(t);for(var o=0,a=r.length;o<a;o++){var s=r[o];this.unselect(s)}if(i)this.removeSelectables(r);if(n)this.callback(this._selected);return this._selected}},{key:"toggleSelection",value:function e(t,n,i){var r=this._toArray(t);for(var o=0,a=r.length;o<a;o++){var s=r[o];if(this._selected.indexOf(s)<0)this.addSelection(s,n,i);else this.removeSelection(s,n,i)}return this._selected}},{key:"setSelection",value:function e(t,n,i){this.clearSelection();this.addSelection(t,n,i);return this._selected}},{key:"clearSelection",value:function e(t){var n=this._selected.slice();for(var i=0,r=n.length;i<r;i++){var o=n[i];this.unselect(o)}if(t)this.callback(this._selected);return this._selected}},{key:"addSelectables",value:function e(t,n){var i=this._toArray(t);this._handleSelectables(i,false,n);return t}},{key:"getSelectables",value:function e(){return this.selectables}},{key:"setSelectables",value:function e(t,n,i){this.removeSelectables(this.getSelectables(),n);return this.addSelectables(t,i)}},{key:"removeSelectables",value:function e(t,n){var i=this._toArray(t);this._handleSelectables(i,true,n);return t}},{key:"_isRightClick",value:function e(t){var n=false;if("which"in t)n=t.which===3;else if("button"in t)n=t.button===2;return n}},{key:"_isScrollbarClick",value:function e(t,n){var i=this._getCursorPos(n,t);var r=this._getAreaRect(n);var o=n.computedBorder||0;if(r.width+o<=i.x)return true;if(r.height+o<=i.y)return true;return false}},{key:"_toArray",value:function e(t){if(!t)return[];if(!t.length&&this._isElement(t))return[t];var n=[];for(var i=t.length-1;i>=0;i--)n[i]=t[i];return n}},{key:"_isElement",value:function e(t){try{return t instanceof HTMLElement||t instanceof SVGElement}catch(e){return l(t)==="object"&&t.nodeType===1&&l(t.style)==="object"&&l(t.ownerDocument)==="object"}}},{key:"_getCursorPos",value:function e(t,n){if(!n)return{x:0,y:0};if("touches"in n&&n.type!=="touchend")this._lastTouch=n;n="touches"in n?this._lastTouch.touches[0]:n;var i={x:n.pageX||n.clientX,y:n.pageY||n.clientY};var r=this._getAreaRect(t||document);var o=this._getScroll();return{x:(i.x-r.left-o.x)/this.zoom,y:(i.y-r.top-o.y)/this.zoom}}},{key:"getInitialCursorPosition",value:function e(){return this._initialCursorPos}},{key:"getCurrentCursorPosition",value:function e(){return this._newCursorPos}},{key:"getPreviousCursorPosition",value:function e(){return this._previousCursorPos}},{key:"getCursorPositionDifference",value:function e(t){var n=this.getCurrentCursorPosition();var i=t?this.getPreviousCursorPosition():this.getInitialCursorPosition();return{x:n.x-i.x,y:n.y-i.y}}},{key:"getScroll",value:function e(t){console.warn("[DragSelect]: .getScroll is being deprecated soon. Please do not use it any longer. If you have a real use-case for this, please let us know at https://github.com/ThibaultJanBeyer/DragSelect");return this._getScroll(t)}},{key:"_getScroll",value:function e(t){var n={top:document.body.scrollTop>0?document.body.scrollTop:document.documentElement.scrollTop,left:document.body.scrollLeft>0?document.body.scrollLeft:document.documentElement.scrollLeft};var i={y:t&&t.scrollTop>=0?t.scrollTop:n.top,x:t&&t.scrollLeft>=0?t.scrollLeft:n.left};return i}},{key:"getAreaRect",value:function e(t){console.warn("[DragSelect]: .getAreaRect is being deprecated soon. Please do not use it any longer. If you have a real use-case for this, please let us know at https://github.com/ThibaultJanBeyer/DragSelect");return this._getAreaRect(t)}},{key:"_getAreaRect",value:function e(t){if(t===document){var n={y:t.documentElement.clientHeight>0?t.documentElement.clientHeight:window.innerHeight,x:t.documentElement.clientWidth>0?t.documentElement.clientWidth:window.innerWidth};return{top:0,left:0,bottom:0,right:0,width:n.x,height:n.y}}var i=t.getBoundingClientRect();return{top:i.top,left:i.left,bottom:i.bottom,right:i.right,width:t.clientWidth||i.width,height:t.clientHeight||i.height}}},{key:"_updatePos",value:function e(t,n){t.style.left=n.x+"px";t.style.top=n.y+"px";t.style.width=n.w+"px";t.style.height=n.h+"px";return t}}]);return N}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCounter=void 0;var i=n(171),r=n(75);function o(e){this.elements=e,this.listenEventIncreaseCounter(),this.listenEventRefreshCounter()}o.prototype.listenEventIncreaseCounter=function(){var n=this;r.SignatureEventManager.addEventListener("signature:element_counter:increase_by",function(e){var t=e.detail.elementType,e=e.detail.increaseBy;n.updateCount(t,e)})},o.prototype.listenEventRefreshCounter=function(){var t=this;r.SignatureEventManager.addEventListener("signature:element_counter:recompute",function(e){t.refreshCounters(e.detail.elementType)})},o.prototype.refreshCounters=function(t){if(t){var n=0;this.elements.activeElements.forEach(function(e){e.type==t&&n++}),this.setCount(t,n)}else{var e,i={};for(e in this.elements.activeElements.forEach(function(e){e=e.type;i.hasOwnProperty(e)?i[e]++:i[e]=1}),i)this.setCount(e,i[e])}},o.prototype.createCountElement=function(e,t){var n,i,r=this;void 0===t&&(t=1),e&&((n=document.createElement("div")).className="sign__draggable__count",(i=document.createElement("span")).innerHTML=t.toString(),n.appendChild(i),n.addEventListener("click",function(e){r.goNext(e.target)}),e.appendChild(n))},o.prototype.removeCountElement=function(e){null!=(e=this.getDraggableCounterEl(e))&&e.remove()},o.prototype.updateCount=function(e,t){void 0===t&&(t=1);var n,e=this.getDraggableActionsEl(e),i=this.getDraggableCounterEl(e);i?(i=i.querySelector("span"),n=parseInt(i.innerHTML),t<0&&Math.abs(t)>=n?this.removeCountElement(e):i.innerHTML=(n+t).toString()):this.createCountElement(e,t)},o.prototype.setCount=function(e,t){void 0===t&&(t=1);var e=this.getDraggableActionsEl(e),n=this.getDraggableCounterEl(e);t<=0?this.removeCountElement(e):n?n.querySelector("span").innerHTML=t.toString():this.createCountElement(e,t)},o.prototype.clearAllCounters=function(){document.querySelectorAll(".sign__draggable__content .sign__draggable__actions .sign__draggable__count").forEach(function(e){e.remove()})},o.prototype.goNext=function(e){var e=e.closest(".sign__draggable__content").dataset.type,t=this.draggableTypeToType(e),n=[],e=(this.elements.all().forEach(function(e){e.type==t&&1!=e.removed&&n.push(e.id)}),n.indexOf(this.nextElement)+1);this.nextElement=n[e=e==n.length?0:e];e="#"+document.querySelector('[data-id="'+this.nextElement+'"]').getAttribute("id");i.ScrollHelper.scrollToElement(e)},o.prototype.getDraggableActionsEl=function(e){e=this.typeToDraggableType(e);return document.querySelector('.sign__draggable__content[data-type="'+e+'"] .sign__draggable__actions')},o.prototype.getDraggableCounterEl=function(e){return null==e?void 0:e.querySelector(".sign__draggable__count")},o.prototype.typeToDraggableType=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},o.prototype.draggableTypeToType=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.ElementCounter=o},function(e,r,o){"use strict";!function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.CloneGroupModal=void 0;var n=o(75),i=o(173);function t(e,t){this.cloneMode="clone",this.cloneOption="current",this.elementsStack=e,this.files=t,this.initActions()}t.prototype.initActions=function(){this.initConfirmButton(),this.initCancelButton(),this.initModeRadioButton(),this.initAddRangeButton(),this.hideAllHelpText(),this.listenEventEditClone()},t.prototype.initModeRadioButton=function(){var t=this;this.allCloneModeInputList.forEach(function(e){e.addEventListener("change",function(e){t.cloneOption=t.checkedCloneModeInput.value,t.toggleCustomCloneOption("custom"==t.cloneOption),t.hideAllHelpText(),t.getHelpTextHtml(t.cloneOption).style.display="block"})})},t.prototype.initAddRangeButton=function(){var e=this;this.addRangeButton.addEventListener("click",function(){e.addRange(1,1)})},t.prototype.initConfirmButton=function(){var e=this;this.confirmCloneButton.addEventListener("click",function(){e.computeFilePages(),e.hideModal(),e.sendEventEditCloneGroupChanged()})},t.prototype.initCancelButton=function(){var e=this;this.cancelCloneButton.addEventListener("click",function(){e.hideModal()})},t.prototype.listenEventEditClone=function(){var t=this;n.SignatureEventManager.addEventListener("signature:elements_selector:edit_clone_group",function(e){t.currentFile=t.files.getFile(e.detail.fileId),t.cloneMode=i.EditorPage.allPagesSameSize(e.detail.fileId)?"clone":"copy",t.cloneOption=null,t.elements=e.detail.elementIds.map(function(e){return t.elementsStack.get(e)}),t.currentPage=e.detail.currentPage,t.containsOneLinkedElement=e.detail.containsOneLinkedElement,t.prepareModal(),t.showModal()})},t.prototype.hideAllHelpText=function(){this.helpTextHtmlList.forEach(function(e){e.style.display="none"})},t.prototype.toggleCustomCloneOption=function(e){this.customRangeOptionsHtml.style.display=e?"block":"none"},t.prototype.sendEventEditCloneGroupChanged=function(){n.SignatureEventManager.dispatchEvent("signature:elements_selector:edit_clone_group_confirm",{elementIds:this.elements.map(function(e){return e.id}),fileId:this.currentFile.id,currentPage:this.currentPage,cloneMode:this.cloneMode,cloneOption:this.cloneOption,pagesToClone:this.filesPages.sort(function(e,t){return e-t})})},t.prototype.computeFilePages=function(){this.filesPages=[];var e=parseInt(this.currentFile.pages);switch(this.cloneOption){case"all":this.filesPages=this.getArrayFromRange(1,e);break;case"allButLast":this.filesPages=this.getArrayFromRange(1,e-1);break;case"current":this.filesPages=[this.currentPage];break;case"custom":this.filesPages=Array.from(this.getCustomRangePages());break;case"last":this.filesPages=[e]}},t.prototype.getCustomRangePages=function(){var n=this,i=new Set;return this.customRangeItems.forEach(function(e){var t=e.querySelector(".rangefrom"),e=e.querySelector(".rangeto"),t=parseInt(t.value),e=parseInt(e.value);isNaN(t)&&(t=1),isNaN(e)&&(e=t),n.getArrayFromRange(t,e).forEach(function(e){i.add(e)})}),i},t.prototype.prepareModal=function(){var t=this,e="current",n=parseInt(this.currentFile.pages);["current","all","allButLast","last","custom"].forEach(function(e){t.cloneModeInputAvailable(e,!0),t.getCloneModeInput(e).checked=!1}),n==this.currentPage&&this.cloneModeInputAvailable("last",!1),(2==n&&1==this.currentPage||this.currentPage==n)&&this.cloneModeInputAvailable("allButLast",!1),this.containsOneLinkedElement||(this.cloneModeInputAvailable("current",!1),e="all"),this.getCloneModeInput(e).click(),this.cleanRanges(),this.addRange(1,1),this.copyInfoElementToggle("copy"==this.cloneMode),this.currentDocumentNameHtml.innerHTML=this.currentFile.name},t.prototype.cloneModeInputAvailable=function(e,t){this.getCloneModeInput(e).disabled=!t},t.prototype.cleanRanges=function(){this.rangeItemContainerHtml.innerHTML=""},t.prototype.copyInfoElementToggle=function(e){this.copyInfoHtml.style.display=e?"block":"none"},t.prototype.addRange=function(e,t){var n=this.rangeItemContainerHtml,i=parseInt(this.currentFile.pages),r=this.templateRangeHtml.content.firstElementChild.cloneNode(!0),o=r.querySelector(".range__remove"),a=r.querySelector(".rangefrom"),s=r.querySelector(".rangeto");o.addEventListener("click",this.rangeRemoveEvent.bind(this)),a.addEventListener("input",this.changeRangeFromEvent.bind(this)),a.addEventListener("focusout",function(e){isNaN(parseInt(a.value))&&(a.value="1")}),a.value=(i<e?i:e).toString(),s.addEventListener("input",this.changeRangeToEvent.bind(this)),s.addEventListener("focusout",function(e){isNaN(parseInt(s.value))&&(s.value=a.value)}),s.value=(i<t?i:e<t?e:t).toString(),n.appendChild(r)},t.prototype.rangeRemoveEvent=function(e){1!==document.querySelectorAll(".sign__clone__ranges__item").length&&e.currentTarget.closest(".sign__clone__ranges__item").remove()},t.prototype.changeRangeFromEvent=function(e){var t=parseInt(this.currentFile.pages),e=e.currentTarget,n=e.closest(".sign__clone__ranges__item").querySelector(".rangeto"),i=parseInt(e.value);i<1?e.value=1..toString():t<i&&(e.value=t.toString()),parseInt(e.value)>parseInt(n.value)&&(n.value=e.value)},t.prototype.changeRangeToEvent=function(e){var t=parseInt(this.currentFile.pages),e=e.currentTarget,n=e.closest(".sign__clone__ranges__item").querySelector(".rangefrom"),i=parseInt(e.value);i<1?e.value=1..toString():t<i&&(e.value=t.toString()),parseInt(e.value)<parseInt(n.value)&&(n.value=e.value)},t.prototype.showModal=function(){e("#cloneGroupModal").modal("show"),e(".dialog__body").scrollTop(0)},t.prototype.hideModal=function(){e("#cloneGroupModal").modal("hide")},t.prototype.getHelpTextHtml=function(e){return this.root.querySelector("#"+e+"Help")},t.prototype.getCloneModeInput=function(t){return Array.from(this.allCloneModeInputList).find(function(e){return e.value==t})},t.prototype.getArrayFromRange=function(e,t){var n=[];if(t<e)return[e];for(var i=e;i<=t;i++)n.push(i);return n},t.prototype.getRangeFromCustomOption=function(){return[]},Object.defineProperty(t.prototype,"root",{get:function(){return document.getElementById("cloneGroupModal")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmCloneButton",{get:function(){return document.getElementById("confirmCloneBlocks")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelCloneButton",{get:function(){return document.getElementById("cancelCloneBlocks")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"helpTextHtmlList",{get:function(){return this.root.querySelectorAll(".helpText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allCloneModeInputList",{get:function(){return this.root.querySelectorAll('[name="cloneBlock"]')},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkedCloneModeInput",{get:function(){return this.root.querySelector('[name="cloneBlock"]:checked')},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customRangeOptionsHtml",{get:function(){return this.root.querySelector(".sign__clone__custom")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRangeButton",{get:function(){return this.root.querySelector("#addRange")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateRangeHtml",{get:function(){return this.root.querySelector("#cloneGroupModalRangeTemplate")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rangeItemContainerHtml",{get:function(){return this.root.querySelector(".sign__clone__ranges")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customRangeItems",{get:function(){return this.root.querySelectorAll(".sign__clone__ranges__item")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentDocumentNameHtml",{get:function(){return this.root.querySelector("#cloneGroupModalCurrentDocument")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyInfoHtml",{get:function(){return this.root.querySelector(".info")},enumerable:!1,configurable:!0}),r.CloneGroupModal=t}.call(this,o(1))},function(e,t,n){"use strict";!function(r){function e(){this.signers=[],this.init()}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSigner=void 0,e.prototype.init=function(){this.listenEventReceiversChanged()},e.prototype.setSignersFromReceivers=function(e){this.signers=[];var n=this;e.forEach(function(e,t){"signer"==e.type&&n.signers.push(e)})},e.prototype.selectSigners=function(n){void 0===n&&(n=null);var i=this;return new Promise(function(e,t){1==i.signers.length?e(i.signers[0]):(i.initSigners(n),i.showModal(),document.getElementById("confirmSelectSigner").addEventListener("click",function(){i.hideModal(),i.save(),e(i.signer)}),document.getElementById("cancelSelectSigner").addEventListener("click",function(){i.hideModal(),t("cancelled")}))})},e.prototype.initSigners=function(i){void 0===i&&(i=null),r("#selectSignerModal .sign__signer__list").html(""),this.signers.forEach(function(e,t){var n;"signer"==e.type&&(n=null!=i&&i.id==e.id?"checked":"",n='<li class="sign__signer__item">\n                        <div class="radio">\n                            <input type="radio" name="signer" id="signer-'+e.id+'"\n                                   value="'+e.id+'"\n                                   class="radio" '+n+'>\n                            <label for="signer-'+e.id+'">\n                                <div class="sign__signer__bullet '+e.colorClass+'">\n                                </div>\n                                <div class="sign__signer__name">\n                                    '+e.name.trunc(25)+"\n                                </div>\n                            </label>\n                        </div>\n                    </li>",r("#selectSignerModal .sign__signer__list").append(n))}),null==i&&r('[name="signer"]').first().attr("checked","checked")},e.prototype.save=function(){var n=this,i=r('input[name="signer"]:checked').val();this.signers.forEach(function(e,t){e.id==i&&(n.signer=e)})},e.prototype.showModal=function(){r("#selectSignerModal").modal("show"),r(".dialog__body").scrollTop(0)},e.prototype.hideModal=function(){r("#selectSignerModal").modal("hide")},e.prototype.listenEventReceiversChanged=function(){var t=this;window.addEventListener("receiversChanged",function(e){t.setSignersFromReceivers(e.detail.receivers)})},t.SelectSigner=e}.call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionInsert=void 0;var o=n(173);function i(){}i.adjustBlockPosition=function(e,t,n){var i=o.EditorPage.getPageInfo(e.file,e.page).rect,r={x:0,y:0};return i.width<e.x+t&&(r.x=Math.floor(i.width-(e.x+t))),i.height<e.y+n&&(r.y=Math.floor(i.height-(e.y+n))),e.y<0&&(r.y=Math.abs(e.y)),e.x<0&&(r.x=Math.abs(e.x)),r},t.PositionInsert=i},function(e,t,n){"use strict";!function(i){function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.UnlinkManager=void 0,r.showModal=function(){i("#confirmUnlinkModal").modal("show")},r.hideModal=function(){i("#confirmUnlinkModal").modal("hide"),i("#confirmUnlinkBtn").off("click"),i("#cancelUnlinkBtn").off("click")},r.confirm=function(){var n=this;return new Promise(function(e,t){i("#confirmUnlinkBtn").on("click",function(){n.hideModal(),e()}),i("#cancelUnlinkBtn").on("click",function(){n.hideModal(),t()}),r.showModal()})},t.UnlinkManager=r}.call(this,n(1))},function(e,t,n){"use strict";!function(r){function e(){this.init()}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectElements=void 0,e.prototype.init=function(){this.sortableElement="sortableElementSelectList",this.elements=["signature","initials","name","date","text","input"]},e.prototype.selectElements=function(){var i=this;return this.enableSortable(),new Promise(function(e,t){i.showModal(),r("#confirmSelectElements").on("click",function(){var n=[];r.each(r('input[name="elementSelect"]:checked'),function(e,t){n.push(r(t).val())}),i.hideModal(),0==n.length?t():e(n)}),r("#cancelSelectElements").on("click",function(){i.hideModal(),t("cancelled")})})},e.prototype.showModal=function(){r("#selectElementsModal").modal("show"),r(".dialog__body").scrollTop(0)},e.prototype.hideModal=function(){r("#selectElementsModal").modal("hide"),r("#confirmSelectElements").off("click"),r("#cancelSelectElements").off("click")},e.prototype.enableSortable=function(){var e;null==this.sortableList&&(e=document.getElementById(this.sortableElement),this.sortableList=new window.Sortable(e,{draggable:".sign__signer__item",animation:200}))},t.SelectElements=e}.call(this,n(1))},function(e,a,s){"use strict";!function(e){var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(a,"__esModule",{value:!0}),a.InputEditModal=void 0,s(81)),i=s(75),r=t(s(192));function o(){this.MAX_LABEL_CHARACTERS=40,this.MAX_DESCRIPTION_CHARACTERS=175,this.initLabelInput(),this.initDescriptionInput(),this.initConfirmButton(),this.initCancelButton()}o.prototype.initConfirmButton=function(){var t=this;this.confirmBtn.addEventListener("click",function(e){e.preventDefault(),t.validate()&&(t.label=n.TextHelper.stripTags(t.labelInputHtml.value),t.description=t.descriptionInputHtml.value,t.sendEventConfirm(),t.hideModal())})},o.prototype.initCancelButton=function(){var t=this;this.cancelBtn.addEventListener("click",function(e){e.preventDefault(),t.sendEventCancel(),t.hideModal()})},o.prototype.initLabelInput=function(){var t=this;this.labelInputHtml.addEventListener("blur",function(){t.sanitizeLabel()}),this.labelInputHtml.addEventListener("focusout",function(){t.sanitizeLabel()}),this.labelInputHtml.addEventListener("input",function(e){r.default.restrictInputToByteSize(t.labelInputHtml,t.MAX_LABEL_CHARACTERS,t.labelInputCounterHtml)})},o.prototype.initDescriptionInput=function(){var t=this;this.descriptionInputHtml.addEventListener("input",function(e){r.default.restrictInputToByteSize(t.descriptionInputHtml,t.MAX_DESCRIPTION_CHARACTERS,t.descriptionInputCounterHtml)})},o.prototype.sanitizeLabel=function(){this.labelInputHtml.value=n.TextHelper.stripTags(this.labelInputHtml.value).trim()},o.prototype.showModalForElementInputs=function(e){this.cleanErrors(),this.setLabel(),this.setDescription(),this.inputElements=e,this.editOnlyMode=!1,this.modalObject.modal("show"),this.labelInputHtml.focus()},o.prototype.showModal=function(e){this.cleanErrors(),this.setLabel(e.label),this.setDescription(e.description),this.inputElements=[e],this.editOnlyMode=!0,this.modalObject.modal("show"),this.labelInputHtml.focus()},o.prototype.setLabel=function(e){this.label=e,this.labelInputHtml.value=null!=e?e:"",this.sanitizeLabel(),r.default.restrictInputToByteSize(this.labelInputHtml,this.MAX_LABEL_CHARACTERS,this.labelInputCounterHtml)},o.prototype.setDescription=function(e){this.description=e,this.descriptionInputHtml.value=null!=e?e:"",r.default.restrictInputToByteSize(this.descriptionInputHtml,this.MAX_DESCRIPTION_CHARACTERS,this.descriptionInputCounterHtml)},o.prototype.hideModal=function(){this.modalObject.modal("hide")},o.prototype.sendEventConfirm=function(){i.SignatureEventManager.dispatchEvent("signature:input_edit_modal:confirm",{label:this.label,description:this.description,inputElements:this.inputElements,editOnlyMode:this.editOnlyMode})},o.prototype.sendEventCancel=function(){i.SignatureEventManager.dispatchEvent("signature:input_edit_modal:cancel",{label:this.label,description:this.description,inputElements:this.inputElements,editOnlyMode:this.editOnlyMode})},o.prototype.validate=function(){return this.sanitizeLabel(),""!=this.labelInputHtml.value||(this.setErrorLabel(),!1)},o.prototype.setErrorLabel=function(){var e=this.labelInputHtml;e.classList.add("error"),e.classList.add("shake")},o.prototype.cleanErrors=function(){[this.labelInputHtml,this.descriptionInputHtml].forEach(function(e){e.classList.remove("error"),e.classList.remove("shake")})},Object.defineProperty(o.prototype,"modalObject",{get:function(){return e("#inputLabelModal")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"labelInputHtml",{get:function(){return document.getElementById("inputLabelValue")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"descriptionInputHtml",{get:function(){return document.getElementById("inputLabelIndications")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"labelInputCounterHtml",{get:function(){return document.getElementById("editInputElementLabelCounter")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"descriptionInputCounterHtml",{get:function(){return document.getElementById("editInputElementIndicationsCounter")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"confirmBtn",{get:function(){return document.getElementById("confirmInputLabelBtn")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cancelBtn",{get:function(){return document.getElementById("cancelInputLabelBtn")},enumerable:!1,configurable:!0}),a.InputEditModal=o}.call(this,s(1))},function(e,r,o){"use strict";!function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.SelectDateFormatModal=void 0;var n=o(75),t="dateFormatModal";function i(){this.init()}i.prototype.init=function(){this.listenEventConfirmBtn(),this.listenEventCancelBtn(),this.listenEventAskModalOpen()},i.prototype.initElement=function(t){this.allDateFormatInputs.forEach(function(e){e.checked=e.value===t})},i.prototype.showModal=function(){e("#"+t).modal("show"),this.modalBody.scrollTo({top:0,left:0,behavior:"smooth"})},i.prototype.hideModal=function(){e("#"+t).modal("hide")},i.prototype.sendEventDateFormatChanged=function(e){n.SignatureEventManager.dispatchEvent("signature:select_date_format_modal:confirm",{format:e,elementId:this.elementId})},i.prototype.listenEventCancelBtn=function(){var e=this;this.cancelBtn.addEventListener("click",function(){e.hideModal()})},i.prototype.listenEventConfirmBtn=function(){var t=this;this.confirmBtn.addEventListener("click",function(){var e=t.selectedFormatInput.value.toString();window.ilovepdfConfig.dateFormat=e,t.hideModal(),t.sendEventDateFormatChanged(e)})},i.prototype.listenEventAskModalOpen=function(){var t=this;n.SignatureEventManager.addEventListener("signature:select_date_format_modal:open_modal",function(e){t.elementId=e.detail.elementId,t.initElement(e.detail.format),t.showModal()},!0)},Object.defineProperty(i.prototype,"allDateFormatInputs",{get:function(){return Array.from(this.rootElement.querySelectorAll("input[name='dateFormat']"))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectedFormatInput",{get:function(){return this.rootElement.querySelector("input[name='dateFormat']:checked")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"confirmBtn",{get:function(){return this.rootElement.querySelector("#confirmDateFormat")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelBtn",{get:function(){return this.rootElement.querySelector("#cancelDateFormat")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootElement",{get:function(){return document.getElementById(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalBody",{get:function(){return this.rootElement.querySelector(".dialog__body")},enumerable:!1,configurable:!0}),r.SelectDateFormatModal=i}.call(this,o(1))},function(e,a,s){"use strict";!function(r){var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(a,"__esModule",{value:!0}),s(15)),n=s(196),t=e(s(345));function i(){var t=this;this.numSignaturesNeeded=1,this.signatureMultiplier=1,this.uploadedFilesCount=1,this.DEFAULT_REQUEST_TYPE="digital",this.updateSubscSignatures_volumePackages=window.ilovepdfConfig.updateSubscSignatures_volumePackages,this.canApplySelectDefaultRequestType=!1,this.alreadySetupScreen=!1,this.deferDefaultRequestTypeSelection=!1,this.enableDigitalMode=function(){r("#certifiedCheckbox").prop("checked",!0),t.enableCustomSignatures()},this.disableDigitalMode=function(){r("#certifiedCheckbox").prop("checked",!1),t.disableCustomSignatures()},this._onElectronicActionBtnClick=function(e){t.sendEventSignatureRequestTypeChanged(),t.disableDigitalMode()},this._onDigitalActionBtnClick=function(e){0==o.UserModel.isUser()?(t.electronicActionBtn.trigger("click"),t.canApplySelectDefaultRequestType=!1,n.SignatureDialogs.becomePremium().show().addEventListener("closed",function(e){t.canApplySelectDefaultRequestType=!0,o.UserModel.isLoggedIn()&&(t.updateUserDataUI(),t.digitalActionBtn.trigger("click"))})):t.doesUserHaveEnoughSignatures()?(t.sendEventSignatureRequestTypeChanged(),t.enableDigitalMode()):(t.electronicActionBtn.trigger("click"),t.showSuitableDialogToObtainSignatures().addEventListener("closed",function(e){t.updateUserDataUI(),t.doesUserHaveEnoughSignatures()&&t.digitalActionBtn.trigger("click")}))}}i.prototype.init=function(){if(!this.updateSubscSignatures_volumePackages)throw"Missing property 'updateSubscSignatures_volumePackages' in window object";this.updateUserDataUI(),0==o.UserModel.isUser()&&this.listenEventUserAuth(),r(".cert__payment__option").hide(),r(".getMore").css("display","flex"),r(".cert__payment__list").css("display","flex"),r(".cert__payment__done").hide(),this.digitalActionBtn.on("click",this._onDigitalActionBtnClick),this.electronicActionBtn.on("click",this._onElectronicActionBtnClick),this.setCurrentSignatures(),r(".cert__payment__item.getMore").css("display","flex"),this.listenEventReceiversChanged(),this.listenEventSetSilentCertsForSigners(),this.listenEventModeChanged(),this.listenEventReceiversConfirmed(),this.selectDefaultRequestType()},i.prototype.selectDefaultRequestType=function(){this.alreadySetupScreen?this.canApplySelectDefaultRequestType&&(o.UserModel.isLoggedIn()&&0<this.info.ownedSignatures?"digital"===this.DEFAULT_REQUEST_TYPE?this.digitalActionBtn.trigger("click"):"electronic"===this.DEFAULT_REQUEST_TYPE&&this.electronicActionBtn.trigger("click"):this.electronicActionBtn.trigger("click")):this.deferDefaultRequestTypeSelection=!0},i.prototype.buySignaturesIfNeeded=function(){var e,t=this;return 0==o.UserModel.isUser()?((e=n.SignatureDialogs.becomePremium()).show().addEventListener("closed",function(e){o.UserModel.isLoggedIn()&&t.updateUserDataUI()}),e):this.doesUserHaveEnoughSignatures()?null:((e=this.showSuitableDialogToObtainSignatures()).addEventListener("closed",function(e){t.updateUserDataUI()}),e)},i.prototype.updateUserDataUI=function(){if(o.UserModel.isLoggedIn()){var e=o.UserModel.get(),n=document.querySelector(".icon--premium");if(!n)throw"Icon Premium element not found";var t=this.ownedSignatures,i=function(){var e,t=["certs"];n.classList.forEach(function(e){0===e.indexOf("certs--")&&t.push(e)}),(e=n.classList).remove.apply(e,t)};0<t?(i(),n.classList.add("certs"),n.classList.add("certs--"+t),n.innerHTML=t.toString()):(i(),e.signConfig&&(e.signConfig.certifiedCheckbox=0,r("#certifiedCheckbox").removeAttr("checked")))}},i.prototype.showSuitableDialogToObtainSignatures=function(){var e=Math.max.apply(Math,this.updateSubscSignatures_volumePackages);return n.SignatureDialogs.getSuitableDialogToObtainSignatures(this.numSignaturesNeeded,e)},Object.defineProperty(i.prototype,"numSignaturesNeededToPurchase",{get:function(){return Math.max(0,this.numSignaturesNeeded-this.ownedSignatures)},enumerable:!1,configurable:!0}),i.prototype.doesUserHaveEnoughSignatures=function(){return this.ownedSignatures>=this.numSignaturesNeeded},i.prototype.setUploadedFilesCount=function(e){this.uploadedFilesCount=e,this.updateNeededSignatures()},i.prototype.setSignatureMultiplier=function(e){this.signatureMultiplier=e,this.updateNeededSignatures()},i.prototype.updateNeededSignatures=function(){this.numSignaturesNeeded=this.uploadedFilesCount*this.signatureMultiplier,this.updateUserDataUI(),!this.doesUserHaveEnoughSignatures()&&this.requestIsDigital&&this.digitalActionBtn.trigger("click")},i.prototype.listenEventModeChanged=function(){var t=this;window.addEventListener("modeChanged",function(e){"single"==e.detail.mode&&t._onInitialSetupScreenFinished()})},i.prototype.listenEventReceiversConfirmed=function(){var t=this;window.addEventListener("receiversConfirmed",function(e){t._onInitialSetupScreenFinished()})},i.prototype._onInitialSetupScreenFinished=function(){this.alreadySetupScreen=!0,this.deferDefaultRequestTypeSelection&&(this.selectDefaultRequestType(),this.updateUserDataUI())},i.prototype.listenEventTriggerEnableCerts=function(){window.addEventListener("triggerEnableCerts",function(e){})},i.prototype.listenEventSetSilentCertsForSigners=function(){var t=this;window.addEventListener("setSilentCertsForSigners",function(e){t.setSignatureMultiplier(e.detail.signers)})},i.prototype.listenEventReceiversChanged=function(){var t=this;window.addEventListener("receiversChanged",function(e){1==e.detail.batchMode?t.setSignatureMultiplier(e.detail.batchCount):t.setSignatureMultiplier(1)})},i.prototype.listenEventUserAuth=function(){var t=this;window.addEventListener("userAuth",function(e){t.selectDefaultRequestType(),t.updateUserDataUI()})},i.prototype.setCurrentSignatures=function(){var e;0!=this.ownedSignatures&&(r(".certs--quant").html(this.ownedSignatures.toString()),r(".certs--have").show(),r(".certs--empty").hide(),(e=this.digitalActionBtn.find(".icon--premium")).html(this.ownedSignatures.toString()),e.removeAttr("class"),e.addClass("icon--premium").addClass("certs").addClass("certs--"+this.ownedSignatures.toString()),this.enableCustomSignatures())},i.prototype.enableCustomSignatures=function(){r("#certificateSelectCheckbox").removeAttr("disabled"),r("#certificateSelectOption").parent().find(".receiver__setting__content").removeClass("disabled")},i.prototype.disableCustomSignatures=function(){r("#certificateSelectCheckbox").attr("disabled","disabled"),r("#certificateSelectOption").parent().find(".receiver__setting__content").addClass("disabled")},i.prototype.sendEventSignatureRequestTypeChanged=function(){var e=new CustomEvent("signatureRequestTypeChanged",{detail:{signatureRequestType:this.requestType}});window.dispatchEvent(e)},Object.defineProperty(i.prototype,"digitalActionBtn",{get:function(){return r('[data-action="certified"]')},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"electronicActionBtn",{get:function(){return r('[data-action="digital"]')},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestType",{get:function(){return r('[data-action="certified"]').hasClass("option--active")?"digital":"electronic"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestIsDigital",{get:function(){return"digital"===this.requestType},enumerable:!1,configurable:!0}),i.prototype.doesUserCanDoDigitalRequests=function(){return this.doesUserHaveEnoughSignatures()},i.prototype.doesUserCanDoElectronicRequests=function(){return o.UserModel.isLoggedIn()&&o.UserModel.isPremium()||t.default.allowed()},Object.defineProperty(i.prototype,"ownedSignatures",{get:function(){var e=o.UserModel.get();return e&&e.signatures_left||0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"info",{get:function(){return{ownedSignatures:this.ownedSignatures,numSignaturesNeeded:this.numSignaturesNeeded,numSignaturesToPurchase:this.numSignaturesNeededToPurchase,uploadedFilesCount:this.uploadedFilesCount,signatureMultiplier:this.signatureMultiplier,freeElectronicRequestsLeft:t.default.remainingUses(),can:{doElectronicRequests:this.doesUserCanDoElectronicRequests(),doDigitalRequests:this.doesUserCanDoDigitalRequests()}}},enumerable:!1,configurable:!0}),a.default=i}.call(this,s(1))},function(e,a,s){"use strict";!function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.TemplateModal=void 0;var t=s(237),n=s(15),i=s(196),r=s(75);function o(){this.init()}o.prototype.init=function(){this.initClickSaveTemplateBtn(),this.initConfirmTemplateBtn(),this.initCancelTemplateBtn(),this.initTemplateNameValidations(),this.setNewTemplate()},o.prototype.initTemplateNameValidations=function(){var t=this;["change","keydown"].forEach(function(e){t.templateNameInput.addEventListener(e,function(){t.validateName()})})},o.prototype.initConfirmTemplateBtn=function(){var e=this;this.confirmTemplateBtn.addEventListener("click",function(){0!=e.validateName()&&(e.hideModal(),e.saveTemplateBtn.setAttribute("disabled","true"),e.save())})},o.prototype.initCancelTemplateBtn=function(){var t=this;this.cancelTemplateBtn.addEventListener("click",function(e){e.preventDefault(),t.hideModal()})},o.prototype.initClickSaveTemplateBtn=function(){var e=this;this.saveTemplateBtn.addEventListener("click",function(){e.saveTemplateBtn.classList.contains("disabled")?i.SignatureDialogs.templateCannotSave().show():n.UserModel.isLoggedIn()?e.showModal():t.DialogCollection.auth("signature").show().addEventListener("closed",function(){n.UserModel.isLoggedIn()&&e.showModal()})})},o.prototype.validateName=function(){return 3<this.templateNameInput.value.toString().length?(this.confirmTemplateBtn.removeAttribute("disabled"),!0):(this.confirmTemplateBtn.setAttribute("disabled","true"),!1)},o.prototype.sendEventSaveTemplate=function(e){r.SignatureEventManager.dispatchEvent("signature:templates:save",{templateName:e})},o.prototype.save=function(){this.sendEventSaveTemplate(this.templateNameInput.value)},o.prototype.setNewTemplate=function(){this.newTemplateBlocks.forEach(function(e){e.style.display="block"}),this.updateTemplateBlocks.forEach(function(e){e.style.display="none"})},o.prototype.setCurrentTemplate=function(e){this.newTemplateBlocks.forEach(function(e){e.style.display="none"}),this.updateTemplateBlocks.forEach(function(e){e.style.display="block"}),this.templateNameInput.value=e,this.templateNameText.innerHTML=e,this.confirmTemplateBtn.removeAttribute("disabled")},o.prototype.setNameFromFile=function(e){e=e.substring(0,10)+"_template";this.templateNameInput.value=e,this.templateNameText.innerHTML=e,this.confirmTemplateBtn.removeAttribute("disabled")},o.prototype.showModal=function(){e("#templateModal").modal("show")},o.prototype.hideModal=function(){e("#templateModal").modal("hide")},Object.defineProperty(o.prototype,"templateModal",{get:function(){return document.getElementById("templateModal")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"newTemplateBlocks",{get:function(){return this.templateModal.querySelectorAll(".newTemplate")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"updateTemplateBlocks",{get:function(){return this.templateModal.querySelectorAll(".currentTemplate")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"templateNameText",{get:function(){return document.getElementById("templateNameText")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"templateNameInput",{get:function(){return document.getElementById("templateName")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"saveTemplateBtn",{get:function(){return document.getElementById("saveTemplates")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"confirmTemplateBtn",{get:function(){return document.getElementById("confirmTemplate")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cancelTemplateBtn",{get:function(){return document.getElementById("cancelTemplate")},enumerable:!1,configurable:!0}),a.TemplateModal=o}.call(this,s(1))},function(e,t,n){"use strict";!function(i){function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmFileRemove=void 0,r.showModal=function(){i("#confirmRemoveFileModal").modal("show")},r.hideModal=function(){i("#confirmRemoveFileModal").modal("hide"),i("#confirmRemoveFileBtn").off("click"),i("#cancelRemoveFileBtn").off("click")},r.confirm=function(e,n){return new Promise(function(e,t){i("#confirmRemoveFileName").html(n),r.showModal(),i("#confirmRemoveFileBtn").on("click",function(){r.hideModal(),e()}),i("#cancelRemoveFileBtn").on("click",function(){r.hideModal(),t()})})},t.ConfirmFileRemove=r}.call(this,n(1))},function(e,o,a){"use strict";!function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.TemplateManager=void 0;var n=a(37),e=a(8),i=a(15);function r(){this.init()}r.prototype.init=function(){1==i.UserModel.isUser()?t("#saveTemplates").show():(t("#saveTemplates").hide(),this.listenEventUserAuth())},r.prototype.enableTemplates=function(){n.Tooltip.setContent(t("#saveTemplates"),e.Lang.t("saveAsTemplate")),this.saveTemplatesBtn.classList.contains("disabled")&&this.saveTemplatesBtn.classList.remove("disabled")},r.prototype.disableTemplates=function(e){n.Tooltip.setContent(t("#saveTemplates"),e),this.saveTemplatesBtn.classList.contains("disabled")||this.saveTemplatesBtn.classList.add("disabled")},Object.defineProperty(r.prototype,"saveTemplatesBtn",{get:function(){return document.getElementById("saveTemplates")},enumerable:!1,configurable:!0}),r.prototype.listenEventUserAuth=function(){var e=this;window.addEventListener("userAuth",function(){document.body.classList.contains("mode-multiple")&&t("#saveTemplates").show(),e.enableTemplates()})},o.TemplateManager=r}.call(this,a(1))},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailConfirmContext=void 0,n(46)),s=n(521),n=(r=a.ContextBase,o(l,r),l.prototype.getInitialState=function(){return new s.EmailConfirmIsNeededState},l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.contentName="EmailConfirmContext",e.confirmed=!1,e}t.EmailConfirmContext=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailConfirmIsNeededState=void 0,n(17)),s=n(522),n=(r=a.StateBase,o(l,r),l.prototype.init=function(){var e=this.actionResendBtn;e&&e.addEventListener("click",this._resendEmail)},Object.defineProperty(l.prototype,"actionResendBtn",{get:function(){return this.domStateRoot.querySelector("[action-resend-email]")},enumerable:!1,configurable:!0}),l.prototype._goNextState=function(){var e=new s.EmailConfirmedState;this.ctx.changeState(e),e.render(this.domRoot)},l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="EmailConfirmIsNeededState",t.LAYOUT_TEMPLATE_NAME="email-confirm",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.addEventListener("end",function(e){window.clearInterval(t.checkInterval)}),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen(),t._checkUserIsActive(),t.init()},t._checkUserIsActive=function(){t.checkInterval=window.setInterval(function(){fetch("/auth/is-confirmed").then(function(e){e.json().then(function(e){1==parseInt(e.confirmed)&&(window.clearInterval(t.checkInterval),t._goNextState())})})},2e3)},t._showEmailSent=function(){t.actionResendBtn.classList.add("hidden"),t.domRoot.querySelector("[element-email-sent]").classList.remove("hidden")},t._resendEmail=function(e){e.preventDefault(),t.actionResendBtn.disabled=!0,fetch("/auth/resend-confirm").then(function(e){t._showEmailSent()}).catch(function(){t.actionResendBtn.disabled=!1})},t}t.EmailConfirmIsNeededState=n},function(e,t,n){"use strict";var i,r,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.EmailConfirmedState=void 0,n(17)),s=n(7),n=(r=a.StateBase,o(l,r),l.prototype.init=function(){var e=this.actionEmailConfirmedBtn;e&&e.addEventListener("click",this._confirmedEmail)},Object.defineProperty(l.prototype,"actionEmailConfirmedBtn",{get:function(){return this.domStateRoot.querySelector("[action-confirmed-email]")},enumerable:!1,configurable:!0}),l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="EmailConfirmedState",e.LAYOUT_TEMPLATE_NAME="email-confirm",e.INITIAL_SCREEN="default",e.onDomReady=function(){e.changeScreen(e.INITIAL_SCREEN),e.clearLoadingScreen(),e.init()},e._confirmedEmail=function(){e.ctx.confirmed=!0,e.dispatchEvent(new s.IloveEvent("end"))},e}t.EmailConfirmedState=n},function(e,a,s){"use strict";!function(e){var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(a,"__esModule",{value:!0}),t(s(524))),o=t(s(525)),n=s(299),t=(i.prototype.init=function(){var t=this;this.trustBulletElement.style.display="none",this.trustElements={email:document.getElementById("emailTrustOption"),pdfa:document.getElementById("pdfaTrustOption"),audit:document.getElementById("auditTrustOption"),pwd:document.getElementById("pwdTrustOption"),sms:document.getElementById("smsTrustOption"),cert:document.getElementById("certTrustOption"),uuid:document.getElementById("uuidTrustOption"),id:document.getElementById("idTrustOption"),svc:document.getElementById("svcTrustOption"),draw:document.getElementById("drawTrustOption")},this.trustValues={email:10,pdfa:10,audit:10,pwd:10,sms:10,cert:10,uuid:10,svc:10,draw:10},this.availableElements=["email","pdfa","audit","pwd","sms","cert","uuid","svc"],this.currentElements=["email","pdfa","audit","pwd","sms","cert","uuid","svc"],document.getElementById("trustLevel").addEventListener("click",function(){t.openModal()}),document.getElementById("cancelTrust").addEventListener("click",function(e){e.preventDefault(),t.closeModal()}),document.getElementById("confirmTrust").addEventListener("click",function(){t.apply(),t.closeModal()}),this.listenEventModeChanged(),this.listenEventSignatureRequestTypeChanged(),this.listenEventReceiversChanged(),this.listenEventReceiversTrustChanged(),this.initElementsActions(),this.phonesCloseElement.style.display="none",this.phonesEditElement.style.display="block",this.passwordsCloseElement.style.display="none",this.passwordsEditElement.style.display="block"},i.prototype.trustChanged=function(){this.setElements(),this.setPercent(this.trustLevel)},i.prototype.setElements=function(){var t=this;this.availableElements.forEach(function(e){t.currentElements.includes(e)?(t.setElement(e),t.trustElements[e].style.display="block"):t.trustElements[e].style.display="none"})},i.prototype.setElement=function(e){try{0<this[e]?this.trustElements[e].classList.add("active"):this.trustElements[e].classList.remove("active")}catch(e){}},i.prototype.setPercent=function(e,t){var n=this,i=(void 0===t&&(t=null),document.querySelectorAll(".trust__indicator")),r=(i.forEach(function(e){e.classList.remove("pulse-in","pulse-out")}),document.querySelectorAll(".circle")),t=t||parseInt(r[0].getAttribute("stroke-dasharray").split(", ")[0]),o=e-t,a=0<o?1:-1,s=t+Math.floor(.2*o)+a;0<o&&e<s&&(s=e),o<0&&s<e&&(s=e),r.forEach(function(e){e.setAttribute("stroke-dasharray",s+", 100")}),document.querySelectorAll(".trust__percentage").forEach(function(e){e.innerHTML=s+"%"}),s!=e?window.setTimeout(function(){n.setPercent(e,s)},30):i.forEach(function(e){e.classList.add("pulse-in")})},Object.defineProperty(i.prototype,"trustBulletElement",{get:function(){return document.querySelector(".trust")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trustLevel",{get:function(){return Math.floor(100*this.currentTrustLevel/this.maxTrust)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentTrustLevel",{get:function(){var t=this,n=0;return this.currentElements.forEach(function(e){n+=t[e]||0}),n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxTrust",{get:function(){var t=this,n=0;return this.currentElements.forEach(function(e){n+=t.trustValues[e]||0}),n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"email",{get:function(){return this.trustValues.email},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pdfa",{get:function(){return this.trustValues.pdfa},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audit",{get:function(){return!0!==this.modalOpen||this.trustElements.audit&&this.trustElements.audit.classList.contains("active")?this.trustValues.audit:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pwd",{get:function(){var e=this.receiversManager.receivers.length,t=e;return this.receiverPwd&&0<this.receiverPwd.length?this.receiverPwd.forEach(function(e){e.getValue()&&""!=e.getValue()||t--}):this.receiversManager.receivers.forEach(function(e){e.password&&""!=e.password||t--}),document.getElementById("pwdTrust").innerHTML=" ("+t+"/"+e+")",this.trustValues.pwd*t/e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sms",{get:function(){var e=this.receiversManager.receivers.length,t=e;return this.receiverSms&&0<this.receiverSms.length?this.receiverSms.forEach(function(e){e.getValue()&&""!=e.getValue()||t--}):this.receiversManager.receivers.forEach(function(e){e.phone&&""!=e.phone||t--}),document.getElementById("smsTrust").innerHTML=" ("+t+"/"+e+")",this.trustValues.pwd*t/e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cert",{get:function(){return!0===this.modalOpen?this.trustElements.cert&&this.trustElements.cert.classList.contains("active")?this.trustValues.cert:0:"digital"==this.signatureRequestType?this.trustValues.cert:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uuid",{get:function(){return!0===this.modalOpen?this.trustElements.uuid&&this.trustElements.uuid.classList.contains("active")?this.trustValues.uuid:0:document.getElementById("uuidCheckbox").checked?this.trustValues.uuid:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"svc",{get:function(){return!0===this.modalOpen?this.trustElements.svc&&this.trustElements.svc.classList.contains("active")?this.trustValues.svc:0:document.getElementById("svcCheckbox").checked?this.trustValues.svc:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"draw",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.listenEventModeChanged=function(){var t=this;window.addEventListener("modeChanged",function(e){t.mode=e.detail.mode,t.currentElements.splice(t.currentElements.indexOf("sms"),1),t.currentElements.splice(t.currentElements.indexOf("pwd"),1),t.currentElements.splice(t.currentElements.indexOf("svc"),1),"single"!=t.mode&&(t.currentElements.push("sms"),t.currentElements.push("pwd"),t.currentElements.push("svc")),t.trustChanged()})},i.prototype.listenEventSignatureRequestTypeChanged=function(){var t=this;window.addEventListener("signatureRequestTypeChanged",function(e){t.signatureRequestType=e.detail.signatureRequestType,"single"!==t.mode&&(t.trustBulletElement.style.display="block",t.trustChanged())})},i.prototype.listenEventReceiversChanged=function(){var t=this;window.addEventListener("receiversChanged",function(e){t.trustChanged()})},i.prototype.listenEventReceiversTrustChanged=function(){var t=this;window.addEventListener("receiversTrustChanged",function(e){t.trustChanged()})},Object.defineProperty(i.prototype,"passwordsElement",{get:function(){return document.getElementById("trustContainerPasswords")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"passwordsEditElement",{get:function(){return this.passwordsElement.parentNode.querySelector(".edit")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"passwordsCloseElement",{get:function(){return this.passwordsElement.parentNode.querySelector(".close")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"phonesElement",{get:function(){return document.getElementById("trustContainerSms")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"phonesEditElement",{get:function(){return this.phonesElement.parentNode.querySelector(".edit")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"phonesCloseElement",{get:function(){return this.phonesElement.parentNode.querySelector(".close")},enumerable:!1,configurable:!0}),i.prototype.hideSignersPasswords=function(){this.passwordsElement.style.display="none"},i.prototype.hideSignersPhone=function(){this.phonesElement.style.display="none"},i.prototype.toggleSignersPasswords=function(){var t=this,n=this.passwordsElement,e=this.passwordsCloseElement,i=this.passwordsEditElement;"block"==n.style.display?(n.style.display="none",e.style.display="none",i.style.display="block"):(n.style.display="block",e.style.display="block",i.style.display="none",0<n.childNodes.length||(this.receiverPwd=[],this.receiversManager.receivers.forEach(function(e){e=new o.default(e),t.receiverPwd.push(e),e=e.getView();n.append(e)})))},i.prototype.toggleSignersPhones=function(){var t=this,n=this.phonesElement,e=this.phonesCloseElement,i=this.phonesEditElement;"block"==n.style.display?(n.style.display="none",e.style.display="none",i.style.display="block"):(n.style.display="block",e.style.display="block",i.style.display="none",0<n.childNodes.length||(this.receiverSms=[],this.receiversManager.receivers.forEach(function(e){e=new r.default(e),t.receiverSms.push(e),e=e.getView();n.append(e)})))},i.prototype.initElementsActions=function(){var t=this;this.currentElements.forEach(function(e){t.initSettingAction(e)})},i.prototype.initSettingAction=function(e){var t=this,n=document.getElementById(e+"TrustOption");n&&(n=n.querySelector(".trust__setting__action"))&&n.addEventListener("click",function(){t.settingAction(e)})},i.prototype.settingAction=function(e){e="setting"+e.ucFirst()+"Action";e in this&&this[e](),this.trustChanged()},i.prototype.settingCertAction=function(){var e,t=this;this.trustElements.cert.classList.contains("active")?this.trustElements.cert.classList.remove("active"):this.signaturesManager.doesUserHaveEnoughSignatures()?this.trustElements.cert.classList.add("active"):(e=this.signaturesManager.buySignaturesIfNeeded())&&e.addEventListener("closed",function(e){t.signaturesManager.doesUserHaveEnoughSignatures()&&t.trustElements.cert.classList.add("active")})},i.prototype.settingSmsAction=function(){this.toggleSignersPhones()},i.prototype.settingPwdAction=function(){this.toggleSignersPasswords()},i.prototype.settingUuidAction=function(){this.trustElements.uuid.classList.contains("active")?this.trustElements.uuid.classList.remove("active"):this.trustElements.uuid.classList.add("active")},i.prototype.settingSvcAction=function(){this.trustElements.svc.classList.contains("active")?this.trustElements.svc.classList.remove("active"):this.trustElements.svc.classList.add("active")},i.prototype.openModal=function(){e("#trustLevelModal").modal("show"),this.modalOpen=!0,this.resetElements()},i.prototype.apply=function(){this.receiverPwd&&this.receiverPwd.forEach(function(e){e.apply()}),this.receiverSms&&this.receiverSms.forEach(function(e){e.apply()}),(this.trustElements.cert.classList.contains("active")?document.querySelector('[data-action="certified"]'):document.querySelector('[data-action="digital"]')).click(),(this.trustElements.uuid.classList.contains("active")?document.querySelector('[data-action="certified"]'):document.querySelector('[data-action="digital"]')).click(),n.SmsPurchaseManager.setReceivers(this.receiversManager.receivers),document.getElementById("svcCheckbox").checked=this.trustElements.svc.classList.contains("active"),document.getElementById("uuidCheckbox").checked=this.trustElements.uuid.classList.contains("active"),this.uuidManager.setFromCheckbox(),this.trustChanged()},i.prototype.closeModal=function(){e("#trustLevelModal").modal("hide"),this.modalOpen=!1,this.resetElements(),this.trustChanged()},i.prototype.resetElements=function(){this.setElements(),this.phonesElement.style.display="none",this.phonesElement.innerHTML="",this.phonesEditElement.style.display="block",this.phonesCloseElement.style.display="none",this.passwordsElement.style.display="none",this.passwordsElement.innerHTML="",this.passwordsEditElement.style.display="block",this.passwordsCloseElement.style.display="none",this.receiverSms=[],this.receiverPwd=[],this.trustChanged()},i);function i(e){Object.assign(this,e),this.init(),this.trustChanged()}a.default=t}.call(this,s(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(81),r=n(228);function o(e){this.receiver=e,this.makeElement(),this.initElement()}o.prototype.makeElement=function(){var e=document.getElementById("receiverSmsTemplate").content,e=document.importNode(e,!0).children[0],t=(e.classList.remove("template"),document.createElement("div")),n=(t.classList.add("receiver__edit"),document.createElement("div")),i=(n.classList.add("receiver__count",this.receiver.colorClass),document.createElement("div"));i.classList.add("receiver__name"),i.innerHTML=this.receiver.name,t.appendChild(n),t.appendChild(i),t.appendChild(e),this.telContainer=t,this.telInput=e.querySelector(".receiver__element__sms input"),this.telClean=e.querySelector(".receiver__element__sms .receiver__element__delete")},o.prototype.getView=function(){return this.telContainer},o.prototype.initElement=function(){var t=this;this.mobilePhoneInput=new r.MobilePhoneInput(this.telInput),this.mobilePhoneInput.onChange(function(e){t.setPhone(),t.sendEventReceiversTrustChanged()}),this.telClean.addEventListener("click",function(){t.mobilePhoneInput.setNumber(""),t.setPhone(),t.sendEventReceiversTrustChanged()}),""!=this.receiver.phone&&null!=this.receiver.phone&&this.mobilePhoneInput.setNumber("+"+this.receiver.phone)},o.prototype.setPhone=function(){this.phone=i.TextHelper.stripTags(this.mobilePhoneInput.mobileValue)},o.prototype.getValue=function(){return this.phone},o.prototype.sendEventReceiversTrustChanged=function(){var e=new CustomEvent("receiversTrustChanged");window.dispatchEvent(e)},o.prototype.apply=function(){this.setPhone(),this.receiver.phone=this.phone||""},t.default=o},function(e,t,n){"use strict";function i(e){this.receiver=e,this.makeElement(),this.initElement()}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.makeElement=function(){var e=document.getElementById("receiverPasswordTemplate").content,e=document.importNode(e,!0).children[0],t=(e.classList.remove("template"),document.createElement("div")),n=(t.classList.add("receiver__edit"),document.createElement("div")),i=(n.classList.add("receiver__count",this.receiver.colorClass),document.createElement("div"));i.classList.add("receiver__name"),i.innerHTML=this.receiver.name,t.appendChild(n),t.appendChild(i),t.appendChild(e),this.pwdContainer=t,this.pwdInput=e.querySelector("input"),this.pwdClean=e.querySelector(".receiver__element__delete")},i.prototype.initElement=function(){var e=this;this.pwdInput.addEventListener("keyup",function(){e.pwd=e.pwdInput.value,e.sendEventReceiversTrustChanged()}),this.pwdInput.addEventListener("change",function(){e.pwd=e.pwdInput.value,e.sendEventReceiversTrustChanged()}),this.pwdClean.addEventListener("click",function(){e.pwdInput.value="",e.pwd=e.pwdInput.value,e.sendEventReceiversTrustChanged()}),this.pwdContainer.querySelector(".showPassword").addEventListener("click",function(){"password"===e.pwdInput.getAttribute("type")?e.pwdInput.setAttribute("type","text"):e.pwdInput.setAttribute("type","password")}),this.pwdInput.value=this.receiver.password},i.prototype.getView=function(){return this.pwdContainer},i.prototype.getPwd=function(){this.pwd=this.pwdInput.value},i.prototype.getValue=function(){return this.pwd},i.prototype.sendEventReceiversTrustChanged=function(){var e=new CustomEvent("receiversTrustChanged");window.dispatchEvent(e)},i.prototype.apply=function(){this.getPwd(),this.receiver.password=this.pwd||""},t.default=i},function(e,t,n){"use strict";var i,a,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.SignProcess=void 0,n(118)),d=n(58),p=n(178),h=n(125),f=l(n(16)),m=n(13),g=c(n(345)),v=n(15),y=n(196),_=n(299),l=(a=u.Process,r(b,a),b.prototype.initApi=function(){this.api=new p.SignApi({tool:this.tool,taskId:this.taskId,workerServer:this.workerServer,downloadUrl:this.downloadUrl,token:this.token,userToken:function(){return v.UserModel.serviceToken()},encrypted:this.encrypted,encryptKey:this.encryptKey})},b.prototype.changeProcessToSelfsignedNologin=function(){this.processStandardTask=!0,this.api.process=this.originalProcess},b.prototype.changeProcessToOriginal=function(){this.processStandardTask=!1,this.api.process=this.api.signature},b.prototype.goDownload=function(t){var n,i,e,r,o=this;this.processStandardTask?a.prototype.goDownload.call(this,t):"single"==(n=this).options.mode?(i=t.signers[0],e=this.signer.getData(),Object.assign(i,e),i.status="signed",i.files=i.files.map(function(i,e){var r=o.options.signers[0].files[e];return i.elements.forEach(function(e,t){var n=r.elements[t];i.elements[t].width_height_factor=n.width_height_factor,i.elements[t].font_size=n.font_size,i.elements[t].font_size_width_factor=n.font_size_width_factor}),i}),1==this.enableSentryInfo&&(f.configureScope(function(e){e.setExtra("response",t),e.setExtra("signer",i),e.setExtra("params",n.options)}),f.captureMessage("Signature after POST, before PUT",m.Severity.Info)),r=d.FormDataHelper.jsonToFormData(i),this.waitForAllSignatureUploadsEnds().then(function(){o.executeSignature(i,r)},function(){o.fatalError("UnknownError"),f.configureScope(function(e){e.setExtra("signer",i),e.setExtra("params",n.options)}),f.captureMessage("Signature cannot get the server_images repsonse",m.Severity.Info)})):(1==this.enableSentryInfo&&(f.configureScope(function(e){e.setExtra("response",t),e.setExtra("params",n.options)}),f.captureMessage("Signature after POST, request",m.Severity.Info)),0==v.UserModel.isPremium()&&g.default.set(),1==Array.isArray(t)?(window.ib&&window.ib.set("u","sr"),t[0].token_requester?this.goSignDownload(t[0].token_requester):this.goAdmin()):t.token_requester?this.goSignDownload(t.token_requester):this.goAdmin())},b.prototype.executeSignature=function(n,i){var r=this,o=this;h.Network.waitForConnection(12e4).then(function(){o.api.sign(n.token_signer,i).then(function(e){v.UserModel.isUser()&&"single"!=r.options.mode?o.goSignDownload(e.token_signer):o.goSignDownload(r.taskId)},function(t){var e;if(0==t.status)o.retryProcess(n,i);else if(-1==t.status)o.retryProcess(n,i);else{if(400==t.status){if([p.DOCUMENT_COMPLETED,p.DOCUMENT_SIGNED,p.DOCUMENT_VALIDATED,p.DOCUMENT_VOIDED,p.DOCUMENT_EXPIRED,p.DOCUMENT_DECLINED,p.DOCUMENT_DELETED].includes(null==(e=null==(e=null==(e=t.error)?void 0:e.param)?void 0:e.signature)?void 0:e[0]))return void o.goSignDownload(r.taskId);if((null==(e=null==(e=null==(e=t.error)?void 0:e.param)?void 0:e.signature)?void 0:e[0])==p.INSUFICIENT_SIGNATURES)return void o.goProblem("InsuficientSignatures")}f.configureScope(function(e){e.setExtra("signer",n),e.setExtra("error",t)}),null!=(e=null==t?void 0:t.error)&&e.param&&f.configureScope(function(e){e.setExtra("error",t.error.param)}),f.captureMessage("Signature selfsigned error",m.Severity.Error),o.goProblem(t)}})},function(){o.goProblem("connection")})},b.prototype.actionProcessError=function(e,t){var n,i=this,r=(void 0===t&&(t=null),v.UserModel.isPremium());v.UserModel.get();(null==(n=null==(n=null==(n=null==e?void 0:e.error)?void 0:n.param)?void 0:n.signature)?void 0:n[0])==p.INSUFICIENT_SIGNATURES?(v.UserModel.refresh("sign"),n=("batch"==this.options.mode?this.files.files.length*this.options.signers.length:this.files.files.length)-v.UserModel.get().signatures_left,r&&v.UserModel.isTeamManaged()?y.SignatureDialogs.teamMemberManaged("signature").show():y.SignatureDialogs.buySignaturesPackages(n,!1).show().addEventListener("closed",function(){i.process()})):null!=(n=null==(n=null==e?void 0:e.error)?void 0:n.param)&&n.sms?(v.UserModel.refresh("sign"),r&&1==v.UserModel.isTeamManaged()?y.SignatureDialogs.teamMemberManaged("sms").show():y.SignatureDialogs.buySmsPackage(_.SmsPurchaseManager.info.needed,!1).show().addEventListener("closed",function(){i.process()})):a.prototype.actionProcessError.call(this,e,t)},b.prototype.goProblem=function(t){var e=this;f.configureScope(function(e){e.setExtra("error",t)}),f.captureMessage("Signature selfsigned  create error",m.Severity.Error),window.setTimeout(function(){a.prototype.goProblem.call(e,t)},1e3)},b.prototype.retryProcess=function(e,t){var n=this;window.setTimeout(function(){n.executeSignature(e,t)},1e3)},b.prototype.goSignDownload=function(e){var t;!0!==this.stopGoDownload&&(t="",t="single"==this.options.mode?"en-US"==window.lang?"/signature-pdf/"+e+"/download":"/"+window.lang+"/signature-pdf/"+e+"/download":"en-US"==window.lang?"/signature-pdf/"+e+"/requested":"/"+window.lang+"/signature-pdf/"+e+"/requested",window.location.href=t+"?s="+this.getWorkerNumber())},b.prototype.goAdmin=function(){var e;!0!==this.stopGoDownload&&(e="",e="en-US"==window.lang?"/user/signatures/requests":"/"+window.lang+"/user/signatures/requests",window.location.href=e)},b.prototype.validateSelfsigner=function(e){},b.prototype.execute=function(){var t=this,n=v.UserModel.get();return 1==this.enableSentryInfo&&(f.configureScope(function(e){e.setExtra("optionParams",t.options),e.setExtra("user",n)}),f.addBreadcrumb({category:"signature",level:m.Severity.Info,message:"Signature screeen size: "+window.screen.width+"x"+window.screen.height}),f.addBreadcrumb({category:"signature",level:m.Severity.Info,message:"Signature window size: "+document.body.offsetWidth+"x"+document.body.offsetHeight}),f.captureMessage("Signature before execute",m.Severity.Info)),a.prototype.execute.call(this)},b.prototype.checkTaskProcess=function(){var t=this;this.processCheckCount--;var e,n=null,i=v.UserModel.get();i&&(e=i.id,n=i.loginkey),this.api.getSignature(this.taskId,e,n).then(function(e){t.actionProcess(e)},function(e){e.error&&e.error.code&&"400"==e.error.code?t.process():t.processCheckCount<0?t.actionProcessError(e,{info:"in check task error",params:t.options}):(window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3))})},b.prototype.waitForAllSignatureUploadsEnds=function(){var i=this,r=0;return new Promise(function(e,t){var n=window.setInterval(function(){1==i.signer.validateData()&&(window.clearInterval(n),e()),2e4<(r+=500)&&t()},500)})},b);function b(e){e=a.call(this,e)||this;return e.originalProcess=e.api.process.bind(e.api),e.changeProcessToOriginal(),e.stopGoDownload=!1,e.stopGoProblem=!1,e.enableSentryInfo=!1,e}t.SignProcess=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(1),a=n.n(i);const r="transitionend";function o(e){let t=!1;return a()(this).one(s.TRANSITION_END,()=>{t=!0}),setTimeout(()=>{t||s.triggerTransitionEnd(this)},e),this}const s={TRANSITION_END:"bsTransitionEnd",getUID(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement(e){let t=e.getAttribute("data-target");return t&&"#"!==t||(e=e.getAttribute("href"),t=e&&"#"!==e?e.trim():""),t&&document.querySelector(t)?t:null},getTransitionDurationFromElement(e){if(!e)return 0;let t=a()(e).css("transition-duration"),n=a()(e).css("transition-delay");var e=parseFloat(t),i=parseFloat(n);return e||i?(t=t.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(t)+parseFloat(n))):0},reflow(e){return e.offsetHeight},triggerTransitionEnd(e){a()(e).trigger(r)},supportsTransitionEnd(){return Boolean(r)},isElement(e){return(e[0]||e).nodeType},typeCheckConfig(e,t,n){for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=n[o],r=t[o],r=r&&s.isElement(r)?"element":{}.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(r))throw new Error(e.toUpperCase()+": "+`Option "${o}" provided type "${r}" `+`but expected type "${i}".`)}},findShadowRoot(e){var t;return document.documentElement.attachShadow?"function"==typeof e.getRootNode?(t=e.getRootNode())instanceof ShadowRoot?t:null:e instanceof ShadowRoot?e:e.parentNode?s.findShadowRoot(e.parentNode):null:null}};a.a.fn.emulateTransitionEnd=o,a.a.event.special[s.TRANSITION_END]={bindType:r,delegateType:r,handle(e){if(a()(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}};var l=s;const c="bs.tab";n=".bs.tab";const u=a.a.fn.tab,d={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK_DATA_API:`click${n}.data-api`},p={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},h={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"};class f{constructor(e){this._element=e}static get VERSION(){return"4.2.1"}show(){if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&a()(this._element).hasClass(p.ACTIVE)||a()(this._element).hasClass(p.DISABLED))){let e,n;var t=a()(this._element).closest(h.NAV_LIST_GROUP)[0],i=l.getSelectorFromElement(this._element),r=(t&&(r="UL"===t.nodeName||"OL"===t.nodeName?h.ACTIVE_UL:h.ACTIVE,n=(n=a.a.makeArray(a()(t).find(r)))[n.length-1]),a.a.Event(d.HIDE,{relatedTarget:this._element})),o=a.a.Event(d.SHOW,{relatedTarget:n});n&&a()(n).trigger(r),a()(this._element).trigger(o),o.isDefaultPrevented()||r.isDefaultPrevented()||(i&&(e=document.querySelector(i)),this._activate(this._element,t),o=()=>{var e=a.a.Event(d.HIDDEN,{relatedTarget:this._element}),t=a.a.Event(d.SHOWN,{relatedTarget:n});a()(n).trigger(e),a()(this._element).trigger(t)},e?this._activate(e,e.parentNode,o):o())}}dispose(){a.a.removeData(this._element,c),this._element=null}_activate(e,t,n){const i=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?a()(t).children(h.ACTIVE):a()(t).find(h.ACTIVE_UL))[0];var t=n&&i&&a()(i).hasClass(p.FADE),r=()=>this._transitionComplete(e,i,n);i&&t?(t=l.getTransitionDurationFromElement(i),a()(i).removeClass(p.SHOW).one(l.TRANSITION_END,r).emulateTransitionEnd(t)):r()}_transitionComplete(e,t,n){var i;t&&(a()(t).removeClass(p.ACTIVE),(i=a()(t.parentNode).find(h.DROPDOWN_ACTIVE_CHILD)[0])&&a()(i).removeClass(p.ACTIVE),"tab"===t.getAttribute("role"))&&t.setAttribute("aria-selected",!1),a()(e).addClass(p.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),l.reflow(e),a()(e).addClass(p.SHOW),e.parentNode&&a()(e.parentNode).hasClass(p.DROPDOWN_MENU)&&((i=a()(e).closest(h.DROPDOWN)[0])&&(t=[].slice.call(i.querySelectorAll(h.DROPDOWN_TOGGLE)),a()(t).addClass(p.ACTIVE)),e.setAttribute("aria-expanded",!0)),n&&n()}static _jQueryInterface(n){return this.each(function(){var e=a()(this);let t=e.data(c);if(t||(t=new f(this),e.data(c,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError(`No method named "${n}"`);t[n]()}})}}a()(document).on(d.CLICK_DATA_API,h.DATA_TOGGLE,function(e){e.preventDefault(),f._jQueryInterface.call(a()(this),"show")}),a.a.fn.tab=f._jQueryInterface,a.a.fn.tab.Constructor=f,a.a.fn.tab.noConflict=()=>(a.a.fn.tab=u,f._jQueryInterface);f}]);